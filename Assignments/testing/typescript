Script started on 2022-05-16 21:17:04+10:00
s4698512@moss:~/CSSE2310/Assignments/a3$ ./hq[K^C
s4698512@moss:~/CSSE2310/Assignments/a3$ zzz[K[K[Kps -ef | grep s4698512
root     1862164    1084  0 21:09 ?        00:00:00 sshd: s4698512 [priv]
s4698512 1862176       1  0 21:09 ?        00:00:00 /usr/lib/systemd/systemd --user
s4698512 1862177 1862176  0 21:09 ?        00:00:00 (sd-pam)
s4698512 1862182 1862164  0 21:09 ?        00:00:00 sshd: s4698512@pts/300
s4698512 1862183 1862182  0 21:09 pts/300  00:00:00 -bash
s4698512 1864435 1862183  0 21:16 pts/300  00:00:00 script
s4698512 1864437 1864435  0 21:16 pts/301  00:00:00 bash -i
s4698512 1864461 1864437  0 21:17 pts/301  00:00:00 script
s4698512 1864463 1864461  0 21:17 pts/344  00:00:00 bash -i
s4698512 1864490 1864463  0 21:17 pts/344  00:00:00 ps -ef
s4698512 1864491 1864463  0 21:17 pts/344  00:00:00 grep s4698512
s4698512@moss:~/CSSE2310/Assignments/a3$ script test1
Script started, file is test1
s4698512@moss:~/CSSE2310/Assignments/a3$ ls
'\'	       13.1.stderr   3.2.stdout   6.5.stderr   8.2.stdout   hq	    lol2       test	   typescript
 10.3.stderr   13.1.stdout   5.1.stderr   6.5.stdout   9.2.stderr   hq2.c   lol3       test1
 10.3.stdout   14.1.stderr   5.1.stdout   7.2.stderr   9.2.stdout   hq3.c   lol4       test2
 12.2.stderr   14.1.stdout   5.5.stderr   7.2.stdout   9.3.stderr   hq.c    ls	       test4
 12.2.stdout   3.1.stderr    5.5.stdout   7.3.stderr   9.3.stdout   job     makefile   test5
 1.2.stderr    3.1.stdout    6.2.stderr   7.3.stdout   9.4.stderr   job.c   sigcat     testfiles
 1.2.stdout    3.2.stderr    6.2.stdout   8.2.stderr   9.4.stdout   lol     sigcat.c   text.txt
s4698512@moss:~/CSSE2310/Assignments/a3$ v[Kcat test1
s4698512@moss:~/CSSE2310/Assignments/a3$ ^C
s4698512@moss:~/CSSE2310/Assignments/a3$ cat test1ls[Kcat test1
s4698512@moss:~/CSSE2310/Assignments/a3$ ./hw[Kq
> spawn script test123
New Job ID [0] created
> report
[Job] cmd:status
[0] script:running
> s s4698512@moss:~/CSSE2310/Assignments/a3$ ./hq
> spawn cat
New Job ID [0] created
> report
[Job] cmd:status
[0] cat:running
> spawn ls
New Job ID [1] created
> spawn ls
s ^Cree port
[Job] cmd:status
[0] cat:signalled(2)
[1] ls:exited(0)
> spawn ls
New Job ID [2] created
> report
[Job] cmd:status
[0] cat:signalled(2)
[1] ls:exited(0)
[2] ls:exited(0)
> spawn ls
New Job ID [3] created
> s4698512@moss:~/CSSE2310/Assignments/a3$ ./hq[Kvim hq.c
[?1000h[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;59r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[59;1H"hq.c" 433L, 10698C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[33m147 [m[79C[100m [m
[33m148 [m[8C[33mif[m (pipe(jobs[jobid].down) < [38;5;130m0[m) {[38C[100m [m
[33m149 [m[12Cperror([38;5;130m"Creating down pipe"[m);[38C[100m [m
[33m150 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m151 [m[8C}[70C[100m [m
[33m152 [m[79C[100m [m
[33m153 [m[8C[33mif[m (pipe(jobs[jobid].up) < [38;5;130m0[m) {[40C[100m [m
[33m154 [m[12Cperror([38;5;130m"Creating up pipe"[m);[40C[100m [m
[33m155 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m156 [m[8C}[70C[100m [m
[33m157 [m[79C[100m [m
[33m158 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, jobid);[28C[100m [m
[33m159 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m160 [m[79C[100m [m
[33m161 [m[8Cjobs[jobid].pid = fork();[46C[100m [m
[33m162 [m[8C[33mif[m (!jobs[jobid].pid) {[48C[100m [m
[33m163 [m[12C[36m// child[m[59C[100m [m
[33m164 [m[79C[100m [m
[33m165 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m166 [m[12Cclose(jobs[jobid].down[WRITE]);[36C[100m [m
[33m167 [m[12Cclose(jobs[jobid].up[READ]);[39C[100m [m
[33m168 [m[79C[100m [m
[33m169 [m[12Cdup2(jobs[jobid].down[READ], STDIN_FILENO);[24C[100m [m
[33m170 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m
[33m171 [m[12Cdup2(jobs[jobid].up[WRITE], STDOUT_FILENO);[24C[100m [m
[33m172 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m
[33m173 [m[79C[100m [m
[33m174 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[93m175 [m[4m            fflush([m[4m[38;5;130mstderr[m[4m);                                                    [m[4m[100m [m[4m                                [m[30;1H[33m176 [m[79C[100m [m
[33m177 [m[12C[32mint[m status;[56C[100m [m
[33m178 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m
[33m179 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m
[33m180 [m[16Cexit([38;5;130m99[m);[54C[100m [m
[33m181 [m[12C}[66C[100m [m
[33m182 [m[8C} [33melse[m {[63C[100m [m
[33m183 [m[12C[36m// parent[m[58C[100m [m
[33m184 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m
[33m185 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m
[33m186 [m[79C[100m [m
[33m187 [m[12Cjobid++;[59C[100m [m
[33m188 [m[8C}[70C[100m [m
[33m189 [m    }[74C[100m [m
[33m190 [m}[78C[100m [m
[33m191 [m[79C[100m [m
[33m192 [m[36m/* report()[m[68C[100m [m
[33m193 [m[36m * --------[m[68C[100m [m
[33m194 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m
[33m195 [m[36m *[m[77C[100m [m
[33m196 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m197 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m198 [m[36m */[m[76C[100m [m
[33m199 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[43C[100m [m
[33m200 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m201 [m[79C[100m [m
[33m202 [m    [36m// Header row[m[62C[100m [m
[33m203 [m    printf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[46C[100m [m
[33m204 [m[79C[100m [m[59;99H175,13[8C38%[29;17H[?25h[?12$p[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m144 [m[8Cjobs = rea[38;5;248m[104mlloc[m(jobs, (jobid + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));[16C[100m [m
[33m145 [m[79C[100m [m
[33m146 [m[8Cstrcpy(jobs[jobid].name, args[[38;5;130m0[m]);[37C[100m [m[59;1H[K[59;99H175,13[8C38%[32;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m141 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m142 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m143 [m    } [33melse[m {[67C[100m [m[59;99H[K[59;99H175,13[8C37%[35;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m138 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m139 [m[36m */[m[76C[100m [m
[33m140 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs) {[44C[100m [m[59;99H[K[59;99H175,13[8C36%[38;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m135 [m[36m * of the child process is unchanged[m[43C[100m [m
[33m136 [m[36m *[m[77C[100m [m
[33m137 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[59;99H[K[59;99H175,13[8C35%[41;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m132 [m[36m * -------[m[69C[100m [m
[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m
[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m[59;99H[K[59;99H175,13[8C34%[44;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m129 [m}[78C[100m [m
[33m130 [m[79C[100m [m
[33m131 [m[36m/* spawn()[m[69C[100m [m[59;99H[K[59;99H175,13[8C34%[47;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m126 [m[79C[100m [m
[33m127 [m    free(jobs);[64C[100m [m
[33m128 [m    [33mreturn[m [38;5;130m0[m;[66C[100m [m[59;99H[K[59;99H175,13[8C33%[50;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m123 [m[8Cfree(input);[59C[100m [m
[33m124 [m[8Cfree(tokens);[58C[100m [m
[33m125 [m    }[74C[100m [m[59;99H[K[59;99H175,13[8C32%[53;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m120 [m[8Cprintf([38;5;130m"> "[m);[58C[100m [m
[33m121 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m122 [m[79C[100m [m[59;99H[K[59;99H175,13[8C31%[56;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m117 [m[12Cprintf([38;5;130m"Error: Invalid command[m[35m\n[m[38;5;130m"[m);[32C[100m [m
[33m118 [m[8C}[70C[100m [m
[33m119 [m[79C[100m [m[58;1H[93m174 [m[4m            fflush([m[4m[38;5;130mstdout[m[4m);                                                    [m[4m[100m [m[4m                                [m[59;99H[K[59;99H174,13[8C30%[58;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m175 [m[12Cfflush([38;5;130mstderr[m);[52C[100m [m
[33m176 [m[79C[100m [m
[33m177 [m[12C[32mint[m status;[56C[100m [m[59;99H[K[59;99H174,13[8C31%[55;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m178 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m
[33m179 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m
[33m180 [m[16Cexit([38;5;130m99[m);[54C[100m [m[59;99H[K[59;99H174,13[8C32%[52;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m181 [m[12C}[66C[100m [m
[33m182 [m[8C} [33melse[m {[63C[100m [m
[33m183 [m[12C[36m// parent[m[58C[100m [m[59;99H[K[59;99H174,13[8C33%[49;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m123 [m[8Cfree(input);[59C[100m [m
[33m124 [m[8Cfree(tokens);[58C[100m [m
[33m125 [m    }[74C[100m [m[59;99H[K[59;99H174,13[8C32%[52;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m120 [m[8Cprintf([38;5;130m"> "[m);[58C[100m [m
[33m121 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m122 [m[79C[100m [m[59;99H[K[59;99H174,13[8C31%[55;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m117 [m[12Cprintf([38;5;130m"Error: Invalid command[m[35m\n[m[38;5;130m"[m);[32C[100m [m
[33m118 [m[8C}[70C[100m [m
[33m119 [m[79C[100m [m[59;99H[K[59;99H174,13[8C30%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m114 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"cleanup"[m)) {[28C[100m [m
[33m115 [m[12Ccleanup();[57C[100m [m
[33m116 [m[8C} [33melse[m {[63C[100m [m[58;1H[93m171 [m[4m            dup2(jobs[jobid].up[WRITE], STDOUT_FILENO);                        [m[4m[100m [m[4m                                [m[59;99H[K[59;99H171,13[8C30%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m111 [m[12Crcv(args, spcs);[51C[100m [m
[33m112 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"eof"[m)) {[32C[100m [m
[33m113 [m[12Ceof(args, spcs);[51C[100m [m[58;1H[93m168 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H168,12[8C29%[58;16H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m108 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"send"[m)) {[31C[100m [m
[33m109 [m[12Csend(args, spcs);[50C[100m [m
[33m110 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"rcv"[m)) {[32C[100m [m[58;1H[93m165 [m[4m            fflush([m[4m[38;5;130mstdout[m[4m);                                                    [m[4m[100m [m[4m                                [m[59;99H[K[59;99H165,13[8C28%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m105 [m[12Ccall_signal(args, spcs);[43C[100m [m
[33m106 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"sleep"[m)) {[30C[100m [m
[33m107 [m[12Chq_wait(args, spcs);[47C[100m [m[58;1H[93m162 [m[4m        [m[4m[33mif[m[4m (!jobs[jobid].pid) {                                                [m[4m[100m [m[4m                                [m[59;99H[K[59;99H162,13[8C27%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m102 [m[12C[36m// Report[m[58C[100m [m
[33m103 [m[12Creport(args, spcs);[48C[100m [m
[33m104 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"signal"[m)) {[29C[100m [m[58;1H[93m159 [m[4m        fflush([m[4m[38;5;130mstdout[m[4m);                                                        [m[4m[100m [m[4m                                [m[59;99H[K[59;99H159,13[8C26%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 99 [m[12C[36m// spawn[m[59C[100m [m
[33m100 [m[12Cspawn(args, spcs);[49C[100m [m
[33m101 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"report"[m)) {[29C[100m [m[55;43H[46m{[m


[93m156 [m[4m        [m[4m[46m}[m[4m                                                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H156,9[9C26%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 96 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m 97 [m[79C[100m [m
[33m 98 [m[8C[33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"spawn"[m)) {[37C[100m [m[58;1H[93m153 [m[4m        [m[4m[33mif[m[4m (pipe(jobs[jobid].up) < [m[4m[38;5;130m0[m[4m) {                                        [m[4m[100m [m[4m                                [m[59;99H[K[59;99H153,13[8C25%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 93 [m[12Cargs[i - [38;5;130m1[m] = tokens[i];[43C[100m [m
[33m 94 [m[8C}[70C[100m [m
[33m 95 [m[8Cargs[spcs - [38;5;130m1[m] = [38;5;130m0[m;[52C[100m [m[58;1H[93m150 [m[4m            exit([m[4m[38;5;130m1[m[4m);                                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H150,13[8C24%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 90 [m[79C[100m [m
[33m 91 [m[8C[32mchar[m* args[spcs];[54C[100m [m
[33m 92 [m[8C[33mfor[m ([32mint[m i = [38;5;130m1[m; i < spcs; i++) {[39C[100m [m[58;1H[93m147 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H147,8[9C23%[58;12H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 87 [m[12C[33mcontinue[m;[58C[100m [m
[33m 88 [m[8C}[70C[100m [m
[33m 89 [m[8Ctokens = split_space_not_quote(input, &spcs);[26C[100m [m[58;1H[93m144 [m[4m        jobs = rea[m[4m[38;5;248m[104mlloc[m[4m(jobs, (jobid + [m[4m[38;5;130m1[m[4m) * [m[4m[33msizeof[m[4m([m[4m[32mstruct[m[4m Job));                [m[4m[100m [m[4m                                [m[59;99H[K[59;99H144,13[8C22%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 84 [m[8C[33mif[m (!strcmp(input, [38;5;130m""[m)) {[46C[100m [m
[33m 85 [m[12Cprintf([38;5;130m"> "[m);[54C[100m [m
[33m 86 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m[58;1H[93m141 [m[4m    [m[4m[33mif[m[4m (spcs < [m[4m[38;5;130m2[m[4m) {                                                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H141,13[8C22%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 81 [m    [33mwhile[m ((input = read_line([38;5;130mstdin[m)) != [38;5;130mNULL[m) {[31C[100m [m
[33m 82 [m[8C[32mint[m spcs = [38;5;130m0[m;[58C[100m [m
[33m 83 [m[79C[100m [m[58;1H[93m138 [m[4m[36m * spcs: number of original tokens[m[4m                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H138,13[8C21%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 78 [m    printf([38;5;130m"> "[m);[62C[100m [m
[33m 79 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m 80 [m    [36m// prompt loop[m[61C[100m [m[58;1H[93m135 [m[4m[36m * of the child process is unchanged[m[4m                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H135,13[8C20%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 75 [m[79C[100m [m
[33m 76 [m    signal([38;5;130mSIGINT[m, handle_signal);[45C[100m [m
[33m 77 [m    signal([38;5;130mSIGCHLD[m, handle_signal);[44C[100m [m[58;1H[93m132 [m[4m[36m * -------[m[4m                                                                     [m[4m[100m [m[4m                                [m[59;99H[K[59;99H132,10[8C19%[58;14H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 72 [m    [32mchar[m** tokens;[61C[100m [m
[33m 73 [m[79C[100m [m
[33m 74 [m    jobs = ma[38;5;248m[104mlloc[m([38;5;130m0[m * [33msizeof[m([32mstruct[m Job));[37C[100m [m[58;1H[93m129 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H129,1[9C18%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 69 [m[79C[100m [m
[33m 70 [m[32mint[m main([32mint[m argc, [32mchar[m* argv[]) {[45C[100m [m
[33m 71 [m    [32mchar[m* input;[63C[100m [m[58;1H[93m126 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H126,4[9C18%[58;8H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 66 [m[79C[100m [m
[33m 67 [m[79C[100m [m
[33m 68 [m[36m// Program[m[69C[100m [m[58;1H[93m123 [m[4m        free[m[4m[46m([m[4minput[m[4m[46m)[m[4m;                                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H123,13[8C17%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 63 [m[79C[100m [m
[33m 64 [m[32mint[m jobid = [38;5;130m0[m;[65C[100m [m
[33m 65 [m[32mstruct[m Job* jobs;[62C[100m [m[58;1H[93m120 [m[4m        printf([m[4m[38;5;130m"> "[m[4m);                                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H120,13[8C16%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 60 [m};[77C[100m [m
[33m 61 [m[79C[100m [m
[33m 62 [m[36m// Globals[m[69C[100m [m[58;1H[93m117 [m[4m            printf([m[4m[38;5;130m"Error: Invalid command[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                [m[4m[100m [m[4m                                [m[59;99H[K[59;99H117,13[8C15%[58;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m118 [m[8C}[70C[100m [m
[33m119 [m[79C[100m [m
[33m120 [m[8Cprintf([38;5;130m"> "[m);[58C[100m [m[59;99H[K[59;99H117,13[8C16%[55;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m121 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m122 [m[79C[100m [m
[33m123 [m[8Cfree(input);[59C[100m [m[59;99H[K[59;99H117,13[8C17%[52;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m124 [m[8Cfree(tokens);[58C[100m [m
[33m125 [m    }[74C[100m [m
[33m126 [m[79C[100m [m[59;99H[K[59;99H117,13[8C18%[49;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m127 [m    free(jobs);[64C[100m [m
[33m128 [m    [33mreturn[m [38;5;130m0[m;[66C[100m [m
[33m129 [m}[78C[100m [m[59;99H[K[59;99H117,13[8C18%[46;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m130 [m[79C[100m [m
[33m131 [m[36m/* spawn()[m[69C[100m [m
[33m132 [m[36m * -------[m[69C[100m [m[59;99H[K[59;99H117,13[8C19%[43;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m
[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m
[33m135 [m[36m * of the child process is unchanged[m[43C[100m [m[59;99H[K[59;99H117,13[8C20%[40;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m136 [m[36m *[m[77C[100m [m
[33m137 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m138 [m[36m * spcs: number of original tokens[m[45C[100m [m[59;99H[K[59;99H117,13[8C21%[37;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m139 [m[36m */[m[76C[100m [m
[33m140 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs) {[44C[100m [m
[33m141 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m[59;99H[K[59;99H117,13[8C22%[34;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m142 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m143 [m    } [33melse[m {[67C[100m [m
[33m144 [m[8Cjobs = rea[38;5;248m[104mlloc[m(jobs, (jobid + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));[16C[100m [m[59;99H[K[59;99H117,13[8C22%[31;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m145 [m[79C[100m [m
[33m146 [m[8Cstrcpy(jobs[jobid].name, args[[38;5;130m0[m]);[37C[100m [m
[33m147 [m[79C[100m [m[59;99H[K[59;99H117,13[8C23%[28;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m148 [m[8C[33mif[m (pipe(jobs[jobid].down) < [38;5;130m0[m) {[38C[100m [m
[33m149 [m[12Cperror([38;5;130m"Creating down pipe"[m);[38C[100m [m
[33m150 [m[12Cexit([38;5;130m1[m);[59C[100m [m[59;99H[K[59;99H117,13[8C24%[25;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m151 [m[8C}[70C[100m [m
[33m152 [m[79C[100m [m
[33m153 [m[8C[33mif[m (pipe(jobs[jobid].up) < [38;5;130m0[m) {[40C[100m [m[59;99H[K[59;99H117,13[8C25%[22;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m154 [m[12Cperror([38;5;130m"Creating up pipe"[m);[40C[100m [m
[33m155 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m156 [m[8C}[70C[100m [m[59;99H[K[59;99H117,13[8C26%[19;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m157 [m[79C[100m [m
[33m158 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, jobid);[28C[100m [m
[33m159 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m[59;99H[K[59;99H117,13[8C26%[16;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m160 [m[79C[100m [m
[33m161 [m[8Cjobs[jobid].pid = fork();[46C[100m [m
[33m162 [m[8C[33mif[m (!jobs[jobid].pid) {[48C[100m [m[59;99H[K[59;99H117,13[8C27%[13;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m163 [m[12C[36m// child[m[59C[100m [m
[33m164 [m[79C[100m [m
[33m165 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m[59;99H[K[59;99H117,13[8C28%[10;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m166 [m[12Cclose(jobs[jobid].down[WRITE]);[36C[100m [m
[33m167 [m[12Cclose(jobs[jobid].up[READ]);[39C[100m [m
[33m168 [m[79C[100m [m[59;99H[K[59;99H117,13[8C29%[7;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m169 [m[12Cdup2(jobs[jobid].down[READ], STDIN_FILENO);[24C[100m [m
[33m170 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m
[33m171 [m[12Cdup2(jobs[jobid].up[WRITE], STDOUT_FILENO);[24C[100m [m[59;99H[K[59;99H117,13[8C30%[4;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m172 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m
[33m173 [m[79C[100m [m
[33m174 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m[59;99H[K[59;99H117,13[8C30%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m120 [m[4m        printf([m[4m[38;5;130m"> "[m[4m);                                                          [m[4m[100m [m[4m                                [m[56;1H[33m175 [m[12Cfflush([38;5;130mstderr[m);[52C[100m [m
[33m176 [m[79C[100m [m
[33m177 [m[12C[32mint[m status;[56C[100m [m[59;99H[K[59;99H120,13[8C31%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m123 [m[4m        free[m[4m[46m([m[4minput[m[4m[46m)[m[4m;                                                           [m[4m[100m [m[4m                                [m[56;1H[33m178 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m
[33m179 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m
[33m180 [m[16Cexit([38;5;130m99[m);[54C[100m [m[59;99H[K[59;99H123,13[8C32%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m126 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m181 [m[12C}[66C[100m [m
[33m182 [m[8C} [33melse[m {[63C[100m [m
[33m183 [m[12C[36m// parent[m[58C[100m [m[59;99H[K[59;99H126,4[9C33%[1;8H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m129 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[56;1H[33m184 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m
[33m185 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m
[33m186 [m[79C[100m [m[59;99H[K[59;99H129,1[9C34%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m132 [m[4m[36m * -------[m[4m                                                                     [m[4m[100m [m[4m                                [m[56;1H[33m187 [m[12Cjobid++;[59C[100m [m
[33m188 [m[8C}[70C[100m [m
[33m189 [m    }[74C[100m [m[59;99H[K[59;99H132,10[8C34%[1;14H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m135 [m[4m[36m * of the child process is unchanged[m[4m                                           [m[4m[100m [m[4m                                [m[56;1H[33m190 [m}[78C[100m [m
[33m191 [m[79C[100m [m
[33m192 [m[36m/* report()[m[68C[100m [m[59;99H[K[59;99H135,13[8C35%[1;17H[?25h[?25l[33m135 [m[36m * of the child process is unchanged[m                                           [100m [m[1;85H[K[27;1H[93m161 [m[4m        jobs[jobid].pid = fork();                                              [m[4m[100m [m[4m                                [m[59;100H61,25[27;29H[?25h[?25l[33m161 [m        jobs[jobid].pid [7m[48;5;242m= fork(); [m                                             [100m [m[27;85H[K[28;1H[93m162 [m[7m[48;5;242m        [m[7m[33m[48;5;242mif[m[7m[48;5;242m (!jobs[jobid].pi[m[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H162,28[8C35%[28;32H[?25h[?25l[27;29H= fork(); 
[33m162 [m        [33mif[m (!jobs[jobid].pi


[93m165 [m[4m            fflush([m[4m[38;5;130mstdout[m[4m);                                                    [m[4m[100m [m[4m                                [m[59;1H[K[59;99H165,20[8C35%[31;24H[?25h[?25l[33m165 [m            fflush([7m[38;5;130m[48;5;242mstdout[m[7m[48;5;242m); [m                                                   [100m [m[31;85H[K[32;5H[7m[48;5;242m            close(jobs[jobid].down[WRITE]); [33;5H            close(jobs[jobid].up[READ]); [34;5H             [35;5H            dup2(jobs[jobid].down[READ], STDIN_FILENO); [36;5H            close(jobs[jobid].down[READ]); [37;5H            dup2(jobs[jobid].up[WRITE], STDOUT_FILENO); [m
[93m172 [m[7m[48;5;242m            close(jobs[j[m[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H172,25[8C35%[38;29H[?25h[?25l[31;24H[38;5;130mstdout[m); [32;5H            close(jobs[jobid].down[WRITE]); [33;5H            close(jobs[jobid].up[READ]); [34;5H             [35;5H            dup2(jobs[jobid].down[READ], STDIN_FILENO); [36;5H            close(jobs[jobid].down[READ]); [37;5H            dup2(jobs[jobid].up[WRITE], STDOUT_FILENO); 
[33m172 [m            close(jobs[j
[93m173 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;1H[K[59;99H173,12[8C35%[39;16H[?25h[?25l[33m173 [m                                                                               [100m [m[39;85H[K[44;1H[93m178 [m[4m            status = execvp(args[[m[4m[38;5;130m0[m[4m], args);                                    [m[4m[100m [m[4m                                [m[59;101H8,23[44;27H[?25h[?25l[33m178 [m            status = execvp(args[[38;5;130m0[m], args);                                    [100m [m[44;85H[K[50;1H[93m184 [m[4m            close[m[4m[46m([m[4mjobs[jobid].down[READ][m[4m[46m)[m[4m;                                     [m[4m[100m [m[4m                                [m[59;100H84,18[50;22H[?25h[?25l[33m184 [m            close[7m[48;5;242m(jobs[jobid].down[READ]); [m                                    [100m [m[50;85H[K[51;5H[7m[48;5;242m            close(jobs[jobid].up[WRITE]); [52;5H [m
[93m187 [m[7m[48;5;242m            jobid+[m[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H187,19[8C35%[53;23H[?25h[?25l[50;22H(jobs[jobid].down[READ]); [51;5H            close(jobs[jobid].up[WRITE]); [52;5H [53;5H[4m            jobid++;                                                           [m[4m[100m [m[4m                                [m[59;1H[K[59;99H187,19[8C35%[53;23H[?25h[?25l[35;1H[93m169 [m[4m            dup2(jobs[jobid].down[READ], STDIN_FILENO);                        [m[4m[100m [m[4m                                [m[53;1H[33m187 [m            jobid++;                                                           [100m [m[53;85H[K[59;100H69,18[35;22H[?25h[?25l[35;5H            dup2([7m[48;5;242mjobs[jobid].do[mwn[READ], STDIN_FILENO);                        [100m [m[35;85H[K[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H169,32[8C35%[35;36H[?25h[?25l[33m169 [m[17Cjobs[jobid].do
[93m170 [m[4m            close(jobs[jobid].down[READ]);                                     [m[4m[100m [m[4m                                [m[59;1H[K[59;99H170,17[8C35%[36;21H[?25h[?25l[36;5H            clos[7m[48;5;242me(jobs[jobid].down[m[46m[[mREAD[46m][m);                                     [100m [m[36;85H[K[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H170,35[8C35%[36;39H[?25h[?25l[35;1H[93m169 [m[4m            dup2(jobs[jobid].down[READ], STDIN_FILENO);                        [m[4m[100m [m[4m                                [m[36;1H[33m170 [m[16Ce(jobs[jobid].down[READ][59;1H[K[59;99H169,44[8C35%[35;48H[?25h[?25l[33m169 [m            dup2(jobs[jobid].down[READ], ST[7m[48;5;242mDIN_FILENO); [m                       [100m [m[35;85H[K[36;1H[93m170 [m[7m[48;5;242m            close(jobs[jobid].down[READ]);[m[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H170,43[8C35%[36;47H[?25h[?25l[35;1H[93m169 [m[4m            dup2(jobs[jobid].down[READ], STDIN_FILENO);                        [m[4m[100m [m[4m                                [m[36;1H[33m170 [m            close(jobs[jobid].down[READ]);[59;1H[K[59;99H169,52[8C35%[35;56H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m132 [m[36m * -------[m[69C[100m [m
[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m
[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m[59;99H[K[59;99H169,52[8C34%[38;56H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m129 [m}[78C[100m [m
[33m130 [m[79C[100m [m
[33m131 [m[36m/* spawn()[m[69C[100m [m[59;99H[K[59;99H169,52[8C34%[41;56H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m126 [m[79C[100m [m
[33m127 [m    free(jobs);[64C[100m [m
[33m128 [m    [33mreturn[m [38;5;130m0[m;[66C[100m [m[59;99H[K[59;99H169,52[8C33%[44;56H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m123 [m[8Cfree(input);[59C[100m [m
[33m124 [m[8Cfree(tokens);[58C[100m [m
[33m125 [m    }[74C[100m [m[59;99H[K[59;99H169,52[8C32%[47;56H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m120 [m[8Cprintf([38;5;130m"> "[m);[58C[100m [m
[33m121 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m122 [m[79C[100m [m[59;99H[K[59;99H169,52[8C31%[50;56H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m117 [m[12Cprintf([38;5;130m"Error: Invalid command[m[35m\n[m[38;5;130m"[m);[32C[100m [m
[33m118 [m[8C}[70C[100m [m
[33m119 [m[79C[100m [m[59;99H[K[59;99H169,52[8C30%[53;56H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m114 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"cleanup"[m)) {[28C[100m [m
[33m115 [m[12Ccleanup();[57C[100m [m
[33m116 [m[8C} [33melse[m {[63C[100m [m[59;99H[K[59;99H169,52[8C30%[56;56H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m111 [m[12Crcv(args, spcs);[51C[100m [m
[33m112 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"eof"[m)) {[32C[100m [m
[33m113 [m[12Ceof(args, spcs);[51C[100m [m[58;1H[93m168 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H168,12[8C29%[58;16H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m108 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"send"[m)) {[31C[100m [m
[33m109 [m[12Csend(args, spcs);[50C[100m [m
[33m110 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"rcv"[m)) {[32C[100m [m[58;1H[93m165 [m[4m            fflush([m[4m[38;5;130mstdout[m[4m);                                                    [m[4m[100m [m[4m                                [m[59;99H[K[59;99H165,27[8C28%[58;31H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m105 [m[12Ccall_signal(args, spcs);[43C[100m [m
[33m106 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"sleep"[m)) {[30C[100m [m
[33m107 [m[12Chq_wait(args, spcs);[47C[100m [m[58;1H[93m162 [m[4m        [m[4m[33mif[m[4m (!jobs[jobid].pid) {                                                [m[4m[100m [m[4m                                [m[59;99H[K[59;99H162,31[8C27%[58;35H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m102 [m[12C[36m// Report[m[58C[100m [m
[33m103 [m[12Creport(args, spcs);[48C[100m [m
[33m104 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"signal"[m)) {[29C[100m [m[58;1H[93m159 [m[4m        fflush([m[4m[38;5;130mstdout[m[4m);                                                        [m[4m[100m [m[4m                                [m[59;99H[K[59;99H159,23[8C26%[58;27H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 99 [m[12C[36m// spawn[m[59C[100m [m
[33m100 [m[12Cspawn(args, spcs);[49C[100m [m
[33m101 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"report"[m)) {[29C[100m [m[55;43H[46m{[m


[93m156 [m[4m        [m[4m[46m}[m[4m                                                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H156,9[9C26%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 96 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m 97 [m[79C[100m [m
[33m 98 [m[8C[33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"spawn"[m)) {[37C[100m [m[58;1H[93m153 [m[4m        [m[4m[33mif[m[4m (pipe(jobs[jobid].up) < [m[4m[38;5;130m0[m[4m) {                                        [m[4m[100m [m[4m                                [m[59;99H[K[59;99H153,39[8C25%[58;43H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 93 [m[12Cargs[i - [38;5;130m1[m] = tokens[i];[43C[100m [m
[33m 94 [m[8C}[70C[100m [m
[33m 95 [m[8Cargs[spcs - [38;5;130m1[m] = [38;5;130m0[m;[52C[100m [m[58;1H[93m150 [m[4m            exit([m[4m[38;5;130m1[m[4m);                                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H150,20[8C24%[58;24H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 90 [m[79C[100m [m
[33m 91 [m[8C[32mchar[m* args[spcs];[54C[100m [m
[33m 92 [m[8C[33mfor[m ([32mint[m i = [38;5;130m1[m; i < spcs; i++) {[39C[100m [m[58;1H[93m147 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H147,8[9C23%[58;12H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 87 [m[12C[33mcontinue[m;[58C[100m [m
[33m 88 [m[8C}[70C[100m [m
[33m 89 [m[8Ctokens = split_space_not_quote(input, &spcs);[26C[100m [m[58;1H[93m144 [m[4m        jobs = rea[m[4m[38;5;248m[104mlloc[m[4m(jobs, (jobid + [m[4m[38;5;130m1[m[4m) * [m[4m[33msizeof[m[4m([m[4m[32mstruct[m[4m Job));                [m[4m[100m [m[4m                                [m[59;99H[K[59;99H144,52[8C22%[58;56H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 84 [m[8C[33mif[m (!strcmp(input, [38;5;130m""[m)) {[46C[100m [m
[33m 85 [m[12Cprintf([38;5;130m"> "[m);[54C[100m [m
[33m 86 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m[58;1H[93m141 [m[4m    [m[4m[33mif[m[4m (spcs < [m[4m[38;5;130m2[m[4m) {                                                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H141,19[8C22%[58;23H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 81 [m    [33mwhile[m ((input = read_line([38;5;130mstdin[m)) != [38;5;130mNULL[m) {[31C[100m [m
[33m 82 [m[8C[32mint[m spcs = [38;5;130m0[m;[58C[100m [m
[33m 83 [m[79C[100m [m[58;1H[93m138 [m[4m[36m * spcs: number of original tokens[m[4m                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H138,34[8C21%[58;38H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 78 [m    printf([38;5;130m"> "[m);[62C[100m [m
[33m 79 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m 80 [m    [36m// prompt loop[m[61C[100m [m[58;1H[93m135 [m[4m[36m * of the child process is unchanged[m[4m                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H135,36[8C20%[58;40H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 75 [m[79C[100m [m
[33m 76 [m    signal([38;5;130mSIGINT[m, handle_signal);[45C[100m [m
[33m 77 [m    signal([38;5;130mSIGCHLD[m, handle_signal);[44C[100m [m[58;1H[93m132 [m[4m[36m * -------[m[4m                                                                     [m[4m[100m [m[4m                                [m[59;99H[K[59;99H132,10[8C19%[58;14H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 72 [m    [32mchar[m** tokens;[61C[100m [m
[33m 73 [m[79C[100m [m
[33m 74 [m    jobs = ma[38;5;248m[104mlloc[m([38;5;130m0[m * [33msizeof[m([32mstruct[m Job));[37C[100m [m[58;1H[93m129 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H129,1[9C18%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 69 [m[79C[100m [m
[33m 70 [m[32mint[m main([32mint[m argc, [32mchar[m* argv[]) {[45C[100m [m
[33m 71 [m    [32mchar[m* input;[63C[100m [m[58;1H[93m126 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H126,4[9C18%[58;8H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m127 [m    free(jobs);[64C[100m [m
[33m128 [m    [33mreturn[m [38;5;130m0[m;[66C[100m [m
[33m129 [m}[78C[100m [m[59;99H[K[59;99H126,4[9C18%[55;8H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m130 [m[79C[100m [m
[33m131 [m[36m/* spawn()[m[69C[100m [m
[33m132 [m[36m * -------[m[69C[100m [m[59;99H[K[59;99H126,4[9C19%[52;8H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m
[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m
[33m135 [m[36m * of the child process is unchanged[m[43C[100m [m[59;99H[K[59;99H126,4[9C20%[49;8H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m136 [m[36m *[m[77C[100m [m
[33m137 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m138 [m[36m * spcs: number of original tokens[m[45C[100m [m[59;99H[K[59;99H126,4[9C21%[46;8H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m139 [m[36m */[m[76C[100m [m
[33m140 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs) {[44C[100m [m
[33m141 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m[59;99H[K[59;99H126,4[9C22%[43;8H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m142 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m143 [m    } [33melse[m {[67C[100m [m
[33m144 [m[8Cjobs = rea[38;5;248m[104mlloc[m(jobs, (jobid + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));[16C[100m [m[59;99H[K[59;99H126,4[9C22%[40;8H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m145 [m[79C[100m [m
[33m146 [m[8Cstrcpy(jobs[jobid].name, args[[38;5;130m0[m]);[37C[100m [m
[33m147 [m[79C[100m [m[59;99H[K[59;99H126,4[9C23%[37;8H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m148 [m[8C[33mif[m (pipe(jobs[jobid].down) < [38;5;130m0[m) {[38C[100m [m
[33m149 [m[12Cperror([38;5;130m"Creating down pipe"[m);[38C[100m [m
[33m150 [m[12Cexit([38;5;130m1[m);[59C[100m [m[59;99H[K[59;99H126,4[9C24%[34;8H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m151 [m[8C}[70C[100m [m
[33m152 [m[79C[100m [m
[33m153 [m[8C[33mif[m (pipe(jobs[jobid].up) < [38;5;130m0[m) {[40C[100m [m[59;99H[K[59;99H126,4[9C25%[31;8H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m154 [m[12Cperror([38;5;130m"Creating up pipe"[m);[40C[100m [m
[33m155 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m156 [m[8C}[70C[100m [m[59;99H[K[59;99H126,4[9C26%[28;8H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m157 [m[79C[100m [m
[33m158 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, jobid);[28C[100m [m
[33m159 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m[59;99H[K[59;99H126,4[9C26%[25;8H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m160 [m[79C[100m [m
[33m161 [m[8Cjobs[jobid].pid = fork();[46C[100m [m
[33m162 [m[8C[33mif[m (!jobs[jobid].pid) {[48C[100m [m[59;99H[K[59;99H126,4[9C27%[22;8H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m163 [m[12C[36m// child[m[59C[100m [m
[33m164 [m[79C[100m [m
[33m165 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m[59;99H[K[59;99H126,4[9C28%[19;8H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m166 [m[12Cclose(jobs[jobid].down[WRITE]);[36C[100m [m
[33m167 [m[12Cclose(jobs[jobid].up[READ]);[39C[100m [m
[33m168 [m[79C[100m [m[59;99H[K[59;99H126,4[9C29%[16;8H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m169 [m[12Cdup2(jobs[jobid].down[READ], STDIN_FILENO);[24C[100m [m
[33m170 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m
[33m171 [m[12Cdup2(jobs[jobid].up[WRITE], STDOUT_FILENO);[24C[100m [m[59;99H[K[59;99H126,4[9C30%[13;8H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m172 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m
[33m173 [m[79C[100m [m
[33m174 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m[59;99H[K[59;99H126,4[9C30%[10;8H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m175 [m[12Cfflush([38;5;130mstderr[m);[52C[100m [m
[33m176 [m[79C[100m [m
[33m177 [m[12C[32mint[m status;[56C[100m [m[59;99H[K[59;99H126,4[9C31%[7;8H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m178 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m
[33m179 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m
[33m180 [m[16Cexit([38;5;130m99[m);[54C[100m [m[59;99H[K[59;99H126,4[9C32%[4;8H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m181 [m[12C}[66C[100m [m
[33m182 [m[8C} [33melse[m {[63C[100m [m
[33m183 [m[12C[36m// parent[m[58C[100m [m[59;99H[K[59;99H126,4[9C33%[1;8H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m129 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[56;1H[33m184 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m
[33m185 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m
[33m186 [m[79C[100m [m[59;99H[K[59;99H129,1[9C34%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m132 [m[4m[36m * -------[m[4m                                                                     [m[4m[100m [m[4m                                [m[56;1H[33m187 [m[12Cjobid++;[59C[100m [m
[33m188 [m[8C}[70C[100m [m
[33m189 [m    }[74C[100m [m[59;99H[K[59;99H132,10[8C34%[1;14H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m135 [m[4m[36m * of the child process is unchanged[m[4m                                           [m[4m[100m [m[4m                                [m[56;1H[33m190 [m}[78C[100m [m
[33m191 [m[79C[100m [m
[33m192 [m[36m/* report()[m[68C[100m [m[59;99H[K[59;99H135,36[8C35%[1;40H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m138 [m[4m[36m * spcs: number of original tokens[m[4m                                             [m[4m[100m [m[4m                                [m[56;1H[33m193 [m[36m * --------[m[68C[100m [m
[33m194 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m
[33m195 [m[36m *[m[77C[100m [m[59;99H[K[59;99H138,34[8C36%[1;38H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m141 [m[4m    [m[4m[33mif[m[4m (spcs < [m[4m[38;5;130m2[m[4m) [m[4m[46m{[m[4m                                                            [m[4m[100m [m[4m                                [m[3;9H[46m}[m[56;1H[33m196 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m197 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m198 [m[36m */[m[76C[100m [m[59;99H[K[59;99H141,19[8C37%[1;23H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m144 [m[4m        jobs = rea[m[4m[38;5;248m[104mlloc[m[4m(jobs, (jobid + [m[4m[38;5;130m1[m[4m) * [m[4m[33msizeof[m[4m([m[4m[32mstruct[m[4m Job));                [m[4m[100m [m[4m                                [m[56;1H[33m199 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[43C[100m [m
[33m200 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m201 [m[79C[100m [m[59;99H[K[59;99H144,52[8C38%[1;56H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m147 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m202 [m    [36m// Header row[m[62C[100m [m
[33m203 [m    printf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[46C[100m [m
[33m204 [m[79C[100m [m[59;99H[K[59;99H147,8[9C38%[1;12H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m150 [m[4m            exit([m[4m[38;5;130m1[m[4m);                                                           [m[4m[100m [m[4m                                [m[56;1H[33m205 [m    [36m// Job status output dependent on arg present status[m[23C[100m [m
[33m206 [m[79C[100m [m
[33m207 [m    [36m// check args[m[62C[100m [m[59;99H[K[59;99H150,20[8C39%[1;24H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m153 [m[4m        [m[4m[33mif[m[4m (pipe(jobs[jobid].up) < [m[4m[38;5;130m0[m[4m) [m[4m[46m{[m[4m                                        [m[4m[100m [m[4m                                [m[4;13H[46m}[m[56;1H[33m208 [m    [33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[37C[100m [m
[33m209 [m[8C[33mfor[m ([32mint[m i = [38;5;130m0[m; i < jobid; i++) {[38C[100m [m
[33m210 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[31C[100m [m[59;99H[K[59;99H153,39[8C40%[1;43H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m156 [m[4m        }                                                                      [m[4m[100m [m[4m                                [m[56;1H[33m211 [m[12C[33mif[m (!jobs[i].finished) {[43C[100m [m
[33m212 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m213 [m[12C} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[28C[100m [m[59;99H[K[59;99H156,9[9C41%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m159 [m[4m        fflush([m[4m[38;5;130mstdout[m[4m);                                                        [m[4m[100m [m[4m                                [m[56;1H[33m214 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[12C[100m [m
[33m215 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {[26C[100m [m
[33m216 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[11C[100m [m[59;99H[K[59;99H159,23[8C42%[1;27H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m162 [m[4m        [m[4m[33mif[m[4m (!jobs[jobid].pid) [m[4m[46m{[m[4m                                                [m[4m[100m [m[4m                                [m[21;13H[46m}[m[56;1H[33m217 [m[12C} [33melse[m {[59C[100m [m
[33m218 [m[16Cprintf([38;5;130m"Error[m[35m\n[m[38;5;130m"[m);[45C[100m [m
[33m219 [m[12C}[66C[100m [m[59;99H[K[59;99H162,31[8C42%[1;35H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m165 [m[4m            fflush([m[4m[38;5;130mstdout[m[4m);                                                    [m[4m[100m [m[4m                                [m[18;13H}[56;1H[33m220 [m[8C}[70C[100m [m
[33m221 [m[79C[100m [m
[33m222 [m    } [33melse[m [33mif[m (spcs > [38;5;130m1[m) {      [36m// report on specific job[m[22C[100m [m[59;99H[K[59;99H165,27[8C43%[1;31H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m168 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m223 [m[8C[36m// check for job tokens[1][m[45C[100m [m
[33m224 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m225 [m[12C[32mint[m jobq = atoi(args[[38;5;130m0[m]);[42C[100m [m[59;99H[K[59;99H168,12[8C44%[1;16H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m171 [m[4m            dup2(jobs[jobid].up[WRITE], STDOUT_FILENO);                        [m[4m[100m [m[4m                                [m[56;1H[33m226 [m[79C[100m [m
[33m227 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, jobq, jobs[jobq].name);[25C[100m [m
[33m228 [m[79C[100m [m[59;99H[K[59;99H171,52[8C45%[1;56H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m174 [m[4m            fflush([m[4m[38;5;130mstdout[m[4m);                                                    [m[4m[100m [m[4m                                [m[56;1H[33m229 [m[12C[33mif[m (WIFEXITED(jobs[jobq].status)) {[32C[100m [m
[33m230 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WEXITSTATUS(jobs[jobq].status));[8C[100m [m
[33m231 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[jobq].status)) {[23C[100m [m[59;99H[K[59;99H174,27[8C46%[1;31H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m177 [m[4m            [m[4m[32mint[m[4m status;                                                        [m[4m[100m [m[4m                                [m[56;1H[33m232 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[jobq].status));[8C[100m [m
[33m233 [m[12C} [33melse[m {[59C[100m [m
[33m234 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m[59;99H[K[59;99H177,23[8C46%[1;27H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m180 [m[4m                exit([m[4m[38;5;130m99[m[4m);                                                      [m[4m[100m [m[4m                                [m[56;1H[33m235 [m[12C}[66C[100m [m
[33m236 [m[8C} [33melse[m {[63C[100m [m
[33m237 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m[59;99H[K[59;99H180,25[8C47%[1;29H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m183 [m[4m            [m[4m[36m// parent[m[4m                                                          [m[4m[100m [m[4m                                [m[56;1H[33m238 [m[8C}[70C[100m [m
[33m239 [m    }[74C[100m [m
[33m240 [m}[78C[100m [m[59;99H[K[59;99H183,21[8C48%[1;25H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m186 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m241 [m[79C[100m [m
[33m242 [m[36m/* call_signal()[m[63C[100m [m
[33m243 [m[36m * -------------[m[63C[100m [m[59;99H[K[59;99H186,0-1[7C49%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m189 [m[4m    }                                                                          [m[4m[100m [m[4m                                [m[56;1H[33m244 [m[36m * Sends signal to child process specified[m[37C[100m [m
[33m245 [m[36m *[m[77C[100m [m
[33m246 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[59;99H[K[59;99H189,5[9C50%[1;9H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m186 [m[79C[100m [m
[33m187 [m[12Cjobid++;[59C[100m [m
[33m188 [m[8C}[70C[100m [m[59;99H[K[59;99H189,5[9C49%[4;9H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m183 [m[12C[36m// parent[m[58C[100m [m
[33m184 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m
[33m185 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m[59;99H[K[59;99H189,5[9C48%[7;9H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m180 [m[16Cexit([38;5;130m99[m);[54C[100m [m
[33m181 [m[12C}[66C[100m [m
[33m182 [m[8C} [33melse[m {[63C[100m [m[59;99H[K[59;99H189,5[9C47%[10;9H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m177 [m[12C[32mint[m status;[56C[100m [m
[33m178 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m
[33m179 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m[59;99H[K[59;99H189,5[9C46%[13;9H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m174 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m175 [m[12Cfflush([38;5;130mstderr[m);[52C[100m [m
[33m176 [m[79C[100m [m[59;99H[K[59;99H189,5[9C46%[16;9H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m171 [m[12Cdup2(jobs[jobid].up[WRITE], STDOUT_FILENO);[24C[100m [m
[33m172 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m
[33m173 [m[79C[100m [m[59;99H[K[59;99H189,5[9C45%[19;9H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m168 [m[79C[100m [m
[33m169 [m[12Cdup2(jobs[jobid].down[READ], STDIN_FILENO);[24C[100m [m
[33m170 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m[59;99H[K[59;99H189,5[9C44%[22;9H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m165 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m166 [m[12Cclose(jobs[jobid].down[WRITE]);[36C[100m [m
[33m167 [m[12Cclose(jobs[jobid].up[READ]);[39C[100m [m[59;99H[K[59;99H189,5[9C43%[25;9H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m162 [m[8C[33mif[m (!jobs[jobid].pid) {[48C[100m [m
[33m163 [m[12C[36m// child[m[59C[100m [m
[33m164 [m[79C[100m [m[59;99H[K[59;99H189,5[9C42%[28;9H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m159 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m160 [m[79C[100m [m
[33m161 [m[8Cjobs[jobid].pid = fork();[46C[100m [m[59;99H[K[59;99H189,5[9C42%[31;9H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m156 [m[8C}[70C[100m [m
[33m157 [m[79C[100m [m
[33m158 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, jobid);[28C[100m [m[59;99H[K[59;99H189,5[9C41%[34;9H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m153 [m[8C[33mif[m (pipe(jobs[jobid].up) < [38;5;130m0[m) {[40C[100m [m
[33m154 [m[12Cperror([38;5;130m"Creating up pipe"[m);[40C[100m [m
[33m155 [m[12Cexit([38;5;130m1[m);[59C[100m [m[59;99H[K[59;99H189,5[9C40%[37;9H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m150 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m151 [m[8C}[70C[100m [m
[33m152 [m[79C[100m [m[59;99H[K[59;99H189,5[9C39%[40;9H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m147 [m[79C[100m [m
[33m148 [m[8C[33mif[m (pipe(jobs[jobid].down) < [38;5;130m0[m) {[38C[100m [m
[33m149 [m[12Cperror([38;5;130m"Creating down pipe"[m);[38C[100m [m[59;99H[K[59;99H189,5[9C38%[43;9H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m144 [m[8Cjobs = rea[38;5;248m[104mlloc[m(jobs, (jobid + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));[16C[100m [m
[33m145 [m[79C[100m [m
[33m146 [m[8Cstrcpy(jobs[jobid].name, args[[38;5;130m0[m]);[37C[100m [m[59;99H[K[59;99H189,5[9C38%[46;9H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m141 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m142 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m143 [m    } [33melse[m {[67C[100m [m[59;99H[K[59;99H189,5[9C37%[49;9H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m138 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m139 [m[36m */[m[76C[100m [m
[33m140 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs) {[44C[100m [m[59;99H[K[59;99H189,5[9C36%[52;9H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m196 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m197 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m198 [m[36m */[m[76C[100m [m[59;99H[K[59;99H189,5[9C37%[49;9H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m199 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[43C[100m [m
[33m200 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m201 [m[79C[100m [m[59;99H[K[59;99H189,5[9C38%[46;9H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m202 [m    [36m// Header row[m[62C[100m [m
[33m203 [m    printf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[46C[100m [m
[33m204 [m[79C[100m [m[59;99H[K[59;99H189,5[9C38%[43;9H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m205 [m    [36m// Job status output dependent on arg present status[m[23C[100m [m
[33m206 [m[79C[100m [m
[33m207 [m    [36m// check args[m[62C[100m [m[59;99H[K[59;99H189,5[9C39%[40;9H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m208 [m    [33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[37C[100m [m
[33m209 [m[8C[33mfor[m ([32mint[m i = [38;5;130m0[m; i < jobid; i++) {[38C[100m [m
[33m210 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[31C[100m [m[59;99H[K[59;99H189,5[9C40%[37;9H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m211 [m[12C[33mif[m (!jobs[i].finished) {[43C[100m [m
[33m212 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m213 [m[12C} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[28C[100m [m[59;99H[K[59;99H189,5[9C41%[34;9H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m214 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[12C[100m [m
[33m215 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {[26C[100m [m
[33m216 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[11C[100m [m[59;99H[K[59;99H189,5[9C42%[31;9H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m217 [m[12C} [33melse[m {[59C[100m [m
[33m218 [m[16Cprintf([38;5;130m"Error[m[35m\n[m[38;5;130m"[m);[45C[100m [m
[33m219 [m[12C}[66C[100m [m[59;99H[K[59;99H189,5[9C42%[28;9H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m220 [m[8C}[70C[100m [m
[33m221 [m[79C[100m [m
[33m222 [m    } [33melse[m [33mif[m (spcs > [38;5;130m1[m) {      [36m// report on specific job[m[22C[100m [m[59;99H[K[59;99H189,5[9C43%[25;9H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m223 [m[8C[36m// check for job tokens[1][m[45C[100m [m
[33m224 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m225 [m[12C[32mint[m jobq = atoi(args[[38;5;130m0[m]);[42C[100m [m[59;99H[K[59;99H189,5[9C44%[22;9H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m226 [m[79C[100m [m
[33m227 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, jobq, jobs[jobq].name);[25C[100m [m
[33m228 [m[79C[100m [m[59;99H[K[59;99H189,5[9C45%[19;9H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m229 [m[12C[33mif[m (WIFEXITED(jobs[jobq].status)) {[32C[100m [m
[33m230 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WEXITSTATUS(jobs[jobq].status));[8C[100m [m
[33m231 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[jobq].status)) {[23C[100m [m[59;99H[K[59;99H189,5[9C46%[16;9H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m232 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[jobq].status));[8C[100m [m
[33m233 [m[12C} [33melse[m {[59C[100m [m
[33m234 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m[59;99H[K[59;99H189,5[9C46%[13;9H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m235 [m[12C}[66C[100m [m
[33m236 [m[8C} [33melse[m {[63C[100m [m
[33m237 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m[59;99H[K[59;99H189,5[9C47%[10;9H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m238 [m[8C}[70C[100m [m
[33m239 [m    }[74C[100m [m
[33m240 [m}[78C[100m [m[59;99H[K[59;99H189,5[9C48%[7;9H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m241 [m[79C[100m [m
[33m242 [m[36m/* call_signal()[m[63C[100m [m
[33m243 [m[36m * -------------[m[63C[100m [m[59;99H[K[59;99H189,5[9C49%[4;9H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m244 [m[36m * Sends signal to child process specified[m[37C[100m [m
[33m245 [m[36m *[m[77C[100m [m
[33m246 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[59;99H[K[59;99H189,5[9C50%[1;9H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m192 [m[4m[36m/* report()[m[4m                                                                    [m[4m[100m [m[4m                                [m[56;1H[33m247 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m248 [m[36m */[m[76C[100m [m
[33m249 [m[32mvoid[m call_signal([32mchar[m** args, [32mint[m spcs) {[38C[100m [m[59;99H[K[59;99H192,11[8C50%[1;15H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m195 [m[4m[36m *[m[4m                                                                             [m[4m[100m [m[4m                                [m[56;1H[33m250 [m    [33mif[m (spcs < [38;5;130m3[m) {[60C[100m [m
[33m251 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m252 [m    } [33melse[m {[67C[100m [m[59;99H[K[59;99H195,2[9C51%[1;6H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m198 [m[4m[36m */[m[4m                                                                            [m[4m[100m [m[4m                                [m[56;1H[33m253 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m254 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m
[33m255 [m[12C[33mif[m (is_number(args[[38;5;130m1[m])){[43C[100m [m[59;99H[K[59;99H198,3[9C52%[1;7H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m201 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m256 [m[16C[32mint[m sgnl = atoi(args[[38;5;130m1[m]);[38C[100m [m
[33m257 [m[16C[33mif[m (sgnl >= [38;5;130m1[m && sgnl <= [38;5;130m31[m) {[33C[100m [m
[33m258 [m[20C[32mint[m pid = jobs[job].pid;[35C[100m [m[59;99H[K[59;99H201,0-1[7C53%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m204 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m259 [m[20Ckill(pid, sgnl);[43C[100m [m
[33m260 [m[16C} [33melse[m {[55C[100m [m
[33m261 [m[20Cprintf([38;5;130m"Error: Invalid signal[m[35m\n[m[38;5;130m"[m);[25C[100m [m[59;99H[K[59;99H204,0-1[7C54%[1;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m201 [m[79C[100m [m
[33m202 [m    [36m// Header row[m[62C[100m [m
[33m203 [m    printf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[46C[100m [m[59;99H[K[59;99H204,0-1[7C53%[4;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m198 [m[36m */[m[76C[100m [m
[33m199 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[43C[100m [m
[33m200 [m    fflush([38;5;130mstdout[m);[60C[100m [m[59;99H[K[59;99H204,0-1[7C52%[7;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m195 [m[36m *[m[77C[100m [m
[33m196 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m197 [m[36m * spcs: number of original tokens[m[45C[100m [m[59;99H[K[59;99H204,0-1[7C51%[10;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m253 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m254 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m
[33m255 [m[12C[33mif[m (is_number(args[[38;5;130m1[m])){[43C[100m [m[59;99H[K[59;99H204,0-1[7C52%[7;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m256 [m[16C[32mint[m sgnl = atoi(args[[38;5;130m1[m]);[38C[100m [m
[33m257 [m[16C[33mif[m (sgnl >= [38;5;130m1[m && sgnl <= [38;5;130m31[m) {[33C[100m [m
[33m258 [m[20C[32mint[m pid = jobs[job].pid;[35C[100m [m[59;99H[K[59;99H204,0-1[7C53%[4;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m259 [m[20Ckill(pid, sgnl);[43C[100m [m
[33m260 [m[16C} [33melse[m {[55C[100m [m
[33m261 [m[20Cprintf([38;5;130m"Error: Invalid signal[m[35m\n[m[38;5;130m"[m);[25C[100m [m[59;99H[K[59;99H204,0-1[7C54%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m207 [m[4m    [m[4m[36m// check args[m[4m                                                              [m[4m[100m [m[4m                                [m[56;1H[33m262 [m[16C}[62C[100m [m
[33m263 [m[12C} [33melse[m {[59C[100m [m
[33m264 [m[16Cprintf([38;5;130m"Error: Invalid signal[m[35m\n[m[38;5;130m"[m);[29C[100m [m[59;99H[K[59;99H207,17[8C54%[1;21H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m210 [m[4m            printf([m[4m[38;5;130m"[[m[4m[35m%d[m[4m[38;5;130m] [m[4m[35m%s[m[4m[38;5;130m:"[m[4m, i, jobs[i].name);                               [m[4m[100m [m[4m                                [m[56;1H[33m265 [m[12C}[66C[100m [m
[33m266 [m[8C} [33melse[m {[63C[100m [m
[33m267 [m[12Cprintf([38;5;130m"Error: invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m[59;99H[K[59;99H210,48[8C55%[1;52H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m213 [m[4m            } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (WIFEXITED(jobs[i].status)) [m[4m[46m{[m[4m                            [m[4m[100m [m[4m                                [m[3;17H[46m}[m[56;1H[33m268 [m[8C}[70C[100m [m
[33m269 [m    }[74C[100m [m
[33m270 [m}[78C[100m [m[59;99H[K[59;99H213,51[8C56%[1;55H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m216 [m[4m                printf([m[4m[38;5;130m"signalled([m[4m[35m%d[m[4m[38;5;130m)[m[4m[35m\n[m[4m[38;5;130m"[m[4m, WTERMSIG(jobs[i].status));           [m[4m[100m [m[4m                                [m[56;1H[33m271 [m[79C[100m [m
[33m272 [m[36m/* hq_wait()[m[67C[100m [m
[33m273 [m[36m * ---------[m[67C[100m [m[59;99H[K[59;99H216,52[8C57%[1;56H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m219 [m[4m            }                                                                  [m[4m[100m [m[4m                                [m[56;1H[33m274 [m[36m * Causes hq to wait for specified seconds[m[37C[100m [m
[33m275 [m[36m *[m[77C[100m [m
[33m276 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[59;99H[K[59;99H219,13[8C58%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m222 [m[4m    } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (spcs > [m[4m[38;5;130m1[m[4m) {      [m[4m[36m// report on specific job[m[4m                      [m[4m[100m [m[4m                                [m[56;1H[33m277 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m278 [m[36m */[m[76C[100m [m
[33m279 [m[32mvoid[m hq_wait([32mchar[m** args, [32mint[m spcs) {[42C[100m [m[59;99H[K[59;99H222,52[8C58%[1;56H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m225 [m[4m            [m[4m[32mint[m[4m jobq = atoi(args[[m[4m[38;5;130m0[m[4m]);                                          [m[4m[100m [m[4m                                [m[56;1H[33m280 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m281 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m282 [m    } [33melse[m {[67C[100m [m[59;99H[K[59;99H225,37[8C59%[1;41H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m228 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m283 [m[8C[33mif[m (strcmp(args[[38;5;130m0[m], [38;5;130m""[m) && is_number(args[[38;5;130m0[m])) {[23C[100m [m
[33m284 [m[12Csleep(atoi(args[[38;5;130m0[m]) * [38;5;130m1000000[m);[36C[100m [m
[33m285 [m[8C} [33melse[m {[63C[100m [m[59;99H[K[59;99H228,0-1[7C60%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m231 [m[4m            } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (WIFSIGNALED(jobs[jobq].status)) {                       [m[4m[100m [m[4m                                [m[56;1H[33m286 [m[12Cprintf([38;5;130m"Error: Invalid sleep time[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m287 [m[8C}[70C[100m [m
[33m288 [m    }[74C[100m [m[59;99H[K[59;99H231,52[8C61%[1;56H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m234 [m[4m                printf([m[4m[38;5;130m"running[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                           [m[4m[100m [m[4m                                [m[56;1H[33m289 [m}[78C[100m [m
[33m290 [m[79C[100m [m
[33m291 [m[36m/* send()[m[70C[100m [m[59;99H[K[59;99H234,36[8C62%[1;40H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m237 [m[4m            printf([m[4m[38;5;130m"Error: Invalid job[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                    [m[4m[100m [m[4m                                [m[56;1H[33m292 [m[36m * ------[m[70C[100m [m
[33m293 [m[36m * Sends text down the pipe to specified job[m[35C[100m [m
[33m294 [m[36m *[m[77C[100m [m[59;99H[K[59;99H237,43[8C62%[1;47H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m240 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[56;1H[33m295 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m296 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m297 [m[36m */[m[76C[100m [m[59;99H[K[59;99H240,1[9C63%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m243 [m[4m[36m * -------------[m[4m                                                               [m[4m[100m [m[4m                                [m[56;1H[33m298 [m[32mvoid[m send([32mchar[m** args, [32mint[m spcs) {[45C[100m [m
[33m299 [m    [33mif[m (spcs < [38;5;130m3[m) {[60C[100m [m
[33m300 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m[59;99H[K[59;99H243,16[8C64%[1;20H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m246 [m[4m[36m * args: arguments provided in command line without first command[m[4m              [m[4m[100m [m[4m                                [m[56;1H[33m301 [m    } [33melse[m {[67C[100m [m
[33m302 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m303 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m[59;99H[K[59;99H246,52[8C65%[1;56H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m249 [m[4m[32mvoid[m[4m call_signal([m[4m[32mchar[m[4m** args, [m[4m[32mint[m[4m spcs) [m[4m[46m{[m[4m                                      [m[4m[100m [m[4m                                [m[22;5H[46m}[m[56;1H[33m304 [m[12C[32mFILE[m* writef = fdopen(jobs[job].down[WRITE], [38;5;130m"w"[m);[17C[100m [m
[33m305 [m[12Cfprintf(writef, [38;5;130m"[m[35m%s\n[m[38;5;130m"[m, args[[38;5;130m1[m]);[34C[100m [m
[33m306 [m[8C} [33melse[m {[63C[100m [m[59;99H[K[59;99H249,41[8C66%[1;45H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m252 [m[4m    } [m[4m[33melse[m[4m [m[4m[46m{[m[4m                                                                   [m[4m[100m [m[4m                                [m[18;9H[46m}[m[19;5H}[56;1H[33m307 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m308 [m[8C}[70C[100m [m
[33m309 [m    }[74C[100m [m[59;99H[K[59;99H252,12[8C66%[1;16H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m255 [m[4m            [m[4m[33mif[m[4m (is_number(args[[m[4m[38;5;130m1[m[4m]))[m[4m[46m{[m[4m                                           [m[4m[100m [m[4m                                [m[9;17H[46m}[m[15;9H}[56;1H[33m310 [m}[78C[100m [m
[33m311 [m[79C[100m [m
[33m312 [m[36m/* rcv()[m[71C[100m [m[59;99H[K[59;99H255,36[8C67%[1;40H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m258 [m[4m                    [m[4m[32mint[m[4m pid = jobs[job].pid;                                   [m[4m[100m [m[4m                                [m[6;17H}[56;1H[33m313 [m[36m * -----[m[71C[100m [m
[33m314 [m[36m * Receives data through the pipe from the specified child process.[m[12C[100m [m
[33m315 [m[36m * Prints this to stdout in the parent, hq.[m[36C[100m [m[59;99H[K[59;99H258,44[8C68%[1;48H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m261 [m[4m                    printf([m[4m[38;5;130m"Error: Invalid signal[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                         [m[4m[100m [m[4m                                [m[56;1H[33m316 [m[36m *[m[77C[100m [m
[33m317 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m318 [m[36m * spcs: number of original tokens[m[45C[100m [m[59;99H[K[59;99H261,52[8C69%[1;56H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m264 [m[4m                printf([m[4m[38;5;130m"Error: Invalid signal[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                             [m[4m[100m [m[4m                                [m[56;1H[33m319 [m[36m */[m[76C[100m [m
[33m320 [m[32mvoid[m rcv([32mchar[m** args, [32mint[m spcs) {[46C[100m [m
[33m321 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m[59;99H[K[59;99H264,50[8C70%[1;54H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m267 [m[4m            printf([m[4m[38;5;130m"Error: invalid job[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                    [m[4m[100m [m[4m                                [m[56;1H[33m322 [m[8Cprintf([38;5;130m"Error: Insufficient arguments.[m[35m\n[m[38;5;130m"[m);[28C[100m [m
[33m323 [m    } [33melse[m {[67C[100m [m
[33m324 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m[59;99H[K[59;99H267,43[8C70%[1;47H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m270 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[56;1H[33m325 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m
[33m326 [m[12C[32mint[m ready = is_ready(jobs[job].up[READ]);[26C[100m [m
[33m327 [m[12C[32mFILE[m* readf = fdopen(jobs[job].up[READ], [38;5;130m"r"[m);[21C[100m [m[59;99H[K[59;99H270,1[9C71%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m273 [m[4m[36m * ---------[m[4m                                                                   [m[4m[100m [m[4m                                [m[56;1H[33m328 [m[12C[33mif[m (ready) {[55C[100m [m
[33m329 [m[16C[32mchar[m* buffer = read_line(readf);[31C[100m [m
[33m330 [m[16C[33mif[m (buffer == [38;5;130m0[m) {[45C[100m [m[59;99H[K[59;99H273,12[8C72%[1;16H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m276 [m[4m[36m * args: arguments provided in command line without first command[m[4m              [m[4m[100m [m[4m                                [m[56;1H[33m331 [m[20Cprintf([38;5;130m"<no input>[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m332 [m[16C} [33melse[m [33mif[m (buffer == [38;5;130mNULL[m) {[35C[100m [m
[33m333 [m[20Cprintf([38;5;130m"<EOF>[m[35m\n[m[38;5;130m"[m);[41C[100m [m[59;99H[K[59;99H276,52[8C73%[1;56H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m279 [m[4m[32mvoid[m[4m hq_wait([m[4m[32mchar[m[4m** args, [m[4m[32mint[m[4m spcs) [m[4m[46m{[m[4m                                          [m[4m[100m [m[4m                                [m[11;5H[46m}[m[56;1H[33m334 [m[16C} [33melse[m {[55C[100m [m
[33m335 [m[20Cprintf([38;5;130m"[m[35m%s\n[m[38;5;130m"[m, buffer);[36C[100m [m
[33m336 [m[16C}[62C[100m [m[59;99H[K[59;99H279,37[8C74%[1;41H[?25h[?25l[33m279 [m[32mvoid[m hq_wait([32mchar[m** args, [32mint[m spcs) {                                          [100m [m[1;85H[K[11;5H}[22;1H[93m300 [m[4m        printf([m[4m[38;5;130m"Error: Insufficient arguments[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                             [m[4m[100m [m[4m                                [m[59;99H300,9 [22;13H[?25h[?25l[33m300 [m        [7m[48;5;242mprintf([m[7m[38;5;130m[48;5;242m"Error: Insufficient arguments[m[7m[35m[48;5;242m\n[m[7m[38;5;130m[48;5;242m"[m[7m[48;5;242m); [m                            [100m [m[22;85H[K[23;5H[7m[48;5;242m    } [m[7m[33m[48;5;242melse[m[7m[48;5;242m { [24;5H        [m[7m[33m[48;5;242mif[m[7m[48;5;242m (is_job(args[[m[7m[38;5;130m[48;5;242m0[m[7m[48;5;242m])) { [25;5H            [m[7m[32m[48;5;242mint[m[7m[48;5;242m job = atoi(args[[m[7m[38;5;130m[48;5;242m0[m[7m[48;5;242m]); [m
[93m304 [m[7m[48;5;242m            [m[7m[32m[48;5;242mFILE[m[7m[48;5;242m* writef[m[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H304,25[8C74%[26;29H[?25h[?25l[22;13Hprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m); [23;5H    } [33melse[m { [24;5H        [33mif[m (is_job(args[[38;5;130m0[m])) { [25;5H            [32mint[m job = atoi(args[[38;5;130m0[m]); 
[33m304 [m            [32mFILE[m* writef


[93m307 [m[4m            printf([m[4m[38;5;130m"Error: Invalid job[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                    [m[4m[100m [m[4m                                [m[59;1H[K[59;99H307,24[8C74%[29;28H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m337 [m[12C}[66C[100m [m
[33m338 [m[8C} [33melse[m {[63C[100m [m
[33m339 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m[59;99H[K[59;99H307,24[8C74%[26;28H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m340 [m[8C}[70C[100m [m
[33m341 [m[79C[100m [m
[33m342 [m[79C[100m [m[59;99H[K[59;99H307,24[8C75%[23;28H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m343 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m344 [m    }[74C[100m [m
[33m345 [m}[78C[100m [m[59;99H[K[59;99H307,24[8C76%[20;28H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m346 [m[79C[100m [m
[33m347 [m[36m/* eof()[m[71C[100m [m
[33m348 [m[36m * -----[m[71C[100m [m[59;99H[K[59;99H307,24[8C77%[17;28H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m349 [m[36m * Closes the stdin side of the pipe so the child process can no longer read [m  [100m [m
[33m350 [m[36m * as the pipe will be EOF.[m[52C[100m [m
[33m351 [m[36m *[m[77C[100m [m[59;99H[K[59;99H307,24[8C78%[14;28H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m352 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m353 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m354 [m[36m */[m[76C[100m [m[59;99H[K[59;99H307,24[8C78%[11;28H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m355 [m[32mvoid[m eof([32mchar[m** args, [32mint[m spcs) {[46C[100m [m
[33m356 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m357 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m[59;99H[K[59;99H307,24[8C79%[8;28H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m358 [m    } [33melse[m {[67C[100m [m
[33m359 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m360 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m[59;99H[K[59;99H307,24[8C80%[5;28H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m361 [m[12Cclose(jobs[job].down[WRITE]);[38C[100m [m
[33m362 [m[8C} [33melse[m {[63C[100m [m
[33m363 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m[59;99H[K[59;99H307,24[8C81%[2;28H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m309 [m[4m    }                                                                          [m[4m[100m [m[4m                                [m[56;1H[33m364 [m[8C}[70C[100m [m
[33m365 [m    }[74C[100m [m
[33m366 [m}[78C[100m [m[59;99H[K[59;99H309,5[9C82%[1;9H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m312 [m[4m[36m/* rcv()[m[4m                                                                       [m[4m[100m [m[4m                                [m[56;1H[33m367 [m[79C[100m [m
[33m368 [m[36m/* cleanup()[m[67C[100m [m
[33m369 [m[36m * ---------[m[67C[100m [m[59;99H[K[59;99H312,8[9C82%[1;12H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m315 [m[4m[36m * Prints this to stdout in the parent, hq.[m[4m                                    [m[4m[100m [m[4m                                [m[56;1H[33m370 [m[36m * Terminates all child processes spawned by hq. It does this by sending [m      [100m [m
[33m371 [m[36m * signal 9 (SIGKILL). Reaps all processes.[m[36C[100m [m
[33m372 [m[36m *[m[77C[100m [m[59;99H[K[59;99H315,24[8C83%[1;28H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m318 [m[4m[36m * spcs: number of original tokens[m[4m                                             [m[4m[100m [m[4m                                [m[56;1H[33m373 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m374 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m375 [m[36m */[m[76C[100m [m[59;99H[K[59;99H318,24[8C84%[1;28H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m321 [m[4m    [m[4m[33mif[m[4m (spcs < [m[4m[38;5;130m2[m[4m) [m[4m[46m{[m[4m                                                            [m[4m[100m [m[4m                                [m[3;9H[46m}[m[56;1H[33m376 [m[32mvoid[m cleanup([32mvoid[m) {[59C[100m [m
[33m377 [m    [33mfor[m ([32mint[m job = [38;5;130m0[m; job < jobid; job++) {[36C[100m [m
[33m378 [m[8Ckill(jobs[job].pid, [38;5;130mSIGKILL[m);[42C[100m [m[59;99H[K[59;99H321,19[8C85%[1;23H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m324 [m[4m        [m[4m[33mif[m[4m (is_job(args[m[4m[46m[[m[4m[38;5;130m0[m[4m[46m][m[4m)) {                                                 [m[4m[100m [m[4m                                [m[56;1H[33m379 [m    }[74C[100m [m
[33m380 [m[79C[100m [m
[33m381 [m}[78C[100m [m[59;99H[K[59;99H324,24[8C86%[1;28H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m327 [m[4m            [m[4m[32mFILE[m[4m* readf = fdopen(jobs[job].up[READ], [m[4m[38;5;130m"r"[m[4m);                     [m[4m[100m [m[4m                                [m[56;1H[33m382 [m[79C[100m [m
[33m383 [m[36m/* handle_signal()[m[61C[100m [m
[33m384 [m[36m * ---------------[m[61C[100m [m[59;99H[K[59;99H327,24[8C86%[1;28H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m330 [m[4m                [m[4m[33mif[m[4m (buffer == [m[4m[38;5;130m0[m[4m) {                                             [m[4m[100m [m[4m                                [m[56;1H[33m385 [m[36m * Signal handler[m[62C[100m [m
[33m386 [m[36m *[m[77C[100m [m
[33m387 [m[36m * s: signal number[m[60C[100m [m[59;99H[K[59;99H330,24[8C87%[1;28H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m333 [m[4m                    printf([m[4m[38;5;130m"<EOF>[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                         [m[4m[100m [m[4m                                [m[56;1H[33m388 [m[36m */[m[76C[100m [m
[33m389 [m[32mvoid[m handle_signal([32mint[m s) {[52C[100m [m
[33m390 [m    [33mfor[m ([32mint[m i = [38;5;130m0[m; i < jobid; i++) {[42C[100m [m[59;99H[K[59;99H333,24[8C88%[1;28H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m336 [m[4m                }                                                              [m[4m[100m [m[4m                                [m[56;1H[33m391 [m[8Cjobs[i].finished = [38;5;130m1[m;[50C[100m [m
[33m392 [m[8Cwaitpid(jobs[i].pid, &jobs[i].status, [38;5;130m0[m);[30C[100m [m
[33m393 [m    }[74C[100m [m[59;99H[K[59;99H336,17[8C89%[1;21H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m339 [m[4m            printf([m[4m[38;5;130m"Error: Invalid job[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                    [m[4m[100m [m[4m                                [m[56;1H[33m394 [m[79C[100m [m
[33m395 [m    signal(s, handle_signal);[50C[100m [m
[33m396 [m    fflush([38;5;130mstdout[m);[60C[100m [m[59;99H[K[59;99H339,24[8C90%[1;28H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m342 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m397 [m}[78C[100m [m
[33m398 [m[79C[100m [m
[33m399 [m[36m/* is_number()[m[65C[100m [m[59;99H[K[59;99H342,0-1[7C90%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m345 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[56;1H[33m400 [m[36m * -----------[m[65C[100m [m
[33m401 [m[36m * Determines if inputer number[] is a number or not[m[27C[100m [m
[33m402 [m[36m *[m[77C[100m [m[59;99H[K[59;99H345,1[9C91%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m348 [m[4m[36m * -----[m[4m                                                                       [m[4m[100m [m[4m                                [m[56;1H[33m403 [m[36m * number[]: array of characters to be checked[m[33C[100m [m
[33m404 [m[36m * Returns: true if number, false if not[m[39C[100m [m
[33m405 [m[36m */[m[76C[100m [m[59;99H[K[59;99H348,8[9C92%[1;12H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m351 [m[4m[36m *[m[4m                                                                             [m[4m[100m [m[4m                                [m[56;1H[33m406 [m[32mbool[m is_number([32mchar[m number[]) {[48C[100m [m
[33m407 [m    [33mfor[m([32mint[m i = [38;5;130m0[m; number[i] != [38;5;130m0[m; i++) {[38C[100m [m
[33m408 [m[8C[33mif[m (!isdigit(number[i])) {[45C[100m [m[59;99H[K[59;99H351,2[9C93%[1;6H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m354 [m[4m[36m */[m[4m                                                                            [m[4m[100m [m[4m                                [m[56;1H[33m409 [m[12C[33mreturn[m [38;5;130mfalse[m;[54C[100m [m
[33m410 [m[8C}[70C[100m [m
[33m411 [m    }[74C[100m [m[59;99H[K[59;99H354,3[9C94%[1;7H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m357 [m[4m        printf([m[4m[38;5;130m"Error: Insufficient arguments[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                             [m[4m[100m [m[4m                                [m[56;1H[33m412 [m    [33mreturn[m [38;5;130mtrue[m;[63C[100m [m
[33m413 [m}[78C[100m [m
[33m414 [m[79C[100m [m[59;99H[K[59;99H357,24[8C94%[1;28H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m360 [m[4m            [m[4m[32mint[m[4m job = atoi(args[[m[4m[38;5;130m0[m[4m]);                                           [m[4m[100m [m[4m                                [m[56;1H[33m415 [m[36m/* is_job()[m[68C[100m [m
[33m416 [m[36m * --------[m[68C[100m [m
[33m417 [m[36m * Checks if job[] is a valid job number.[m[38C[100m [m[59;99H[K[59;99H360,24[8C95%[1;28H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m363 [m[4m            printf([m[4m[38;5;130m"Error: Invalid job[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                    [m[4m[100m [m[4m                                [m[56;1H[33m418 [m[36m *[m[77C[100m [m
[33m419 [m[36m * job[]: array of characters of job number[m[36C[100m [m
[33m420 [m[36m * Returns: true if valid job, false if not[m[36C[100m [m[59;99H[K[59;99H363,24[8C96%[1;28H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m366 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[56;1H[33m421 [m[36m */[m[76C[100m [m
[33m422 [m[32mbool[m is_job([32mchar[m job[]) {[54C[100m [m
[33m423 [m    [33mif[m (strcmp(job, [38;5;130m""[m) && is_number(job)) {[35C[100m [m[59;99H[K[59;99H366,1[9C97%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m369 [m[4m[36m * ---------[m[4m                                                                   [m[4m[100m [m[4m                                [m[56;1H[33m424 [m[8C[32mint[m jobNum = atoi(job);[48C[100m [m
[33m425 [m[8C[33mif[m (jobNum <= jobid && jobid != [38;5;130m0[m) {[35C[100m [m
[33m426 [m[12C[33mreturn[m [38;5;130mtrue[m;[55C[100m [m[59;99H[K[59;99H369,12[8C98%[1;16H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m372 [m[4m[36m *[m[4m                                                                             [m[4m[100m [m[4m                                [m[56;1H[33m427 [m[8C} [33melse[m {[63C[100m [m
[33m428 [m[12C[33mreturn[m [38;5;130mfalse[m;[54C[100m [m
[33m429 [m[8C}[70C[100m [m[59;99H[K[59;99H372,2[9C98%[1;6H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m375 [m[4m[36m */[m[4m                                                                            [m[4m[100m [m[4m                                [m[56;1H[33m430 [m    } [33melse[m {[67C[100m [m
[33m431 [m[8C[33mreturn[m [38;5;130mfalse[m;[58C[100m [m
[33m432 [m    }[74C[100m [m[59;99H[K[59;99H375,3[9C99%[1;7H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m378 [m[4m        kill(jobs[job].pid, [m[4m[38;5;130mSIGKILL[m[4m);                                          [m[4m[100m [m[4m                                [m[56;1H[33m433 [m}[78C[100m [m
[1m[34m~                                                                                                                   [58;1H~                                                                                                                   [m[59;99H[K[59;99H378,24[8CBot[1;28H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m381 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[56;1H[1m[34m~                                                                                                                   [57;1H~                                                                                                                   [58;1H~                                                                                                                   [m[59;99H[K[59;99H381,1[9CBot[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m384 [m[4m[36m * ---------------[m[4m                                                             [m[4m[100m [m[4m                                [m[56;1H[1m[34m~                                                                                                                   [57;1H~                                                                                                                   [58;1H~                                                                                                                   [m[59;99H[K[59;99H384,18[8CBot[1;22H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m381 [m}[78C[100m [m
[33m382 [m[79C[100m [m
[33m383 [m[36m/* handle_signal()[m[61C[100m [m[59;99H[K[59;99H384,18[8CBot[4;22H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m378 [m[8Ckill(jobs[job].pid, [38;5;130mSIGKILL[m);[42C[100m [m
[33m379 [m    }[74C[100m [m
[33m380 [m[79C[100m [m[59;99H[K[59;99H384,18[8CBot[7;22H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m375 [m[36m */[m[76C[100m [m
[33m376 [m[32mvoid[m cleanup([32mvoid[m) {[59C[100m [m
[33m377 [m    [33mfor[m ([32mint[m job = [38;5;130m0[m; job < jobid; job++) {[36C[100m [m[59;99H[K[59;99H384,18[8C99%[10;22H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m372 [m[36m *[m[77C[100m [m
[33m373 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m374 [m[36m * spcs: number of original tokens[m[45C[100m [m[59;99H[K[59;99H384,18[8C98%[13;22H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m369 [m[36m * ---------[m[67C[100m [m
[33m370 [m[36m * Terminates all child processes spawned by hq. It does this by sending [m      [100m [m
[33m371 [m[36m * signal 9 (SIGKILL). Reaps all processes.[m[36C[100m [m[59;99H[K[59;99H384,18[8C98%[16;22H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m366 [m}[78C[100m [m
[33m367 [m[79C[100m [m
[33m368 [m[36m/* cleanup()[m[67C[100m [m[59;99H[K[59;99H384,18[8C97%[19;22H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m363 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m364 [m[8C}[70C[100m [m
[33m365 [m    }[74C[100m [m[59;99H[K[59;99H384,18[8C96%[22;22H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m360 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m
[33m361 [m[12Cclose(jobs[job].down[WRITE]);[38C[100m [m
[33m362 [m[8C} [33melse[m {[63C[100m [m[59;99H[K[59;99H384,18[8C95%[25;22H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m357 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m358 [m    } [33melse[m {[67C[100m [m
[33m359 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m[59;99H[K[59;99H384,18[8C94%[28;22H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m354 [m[36m */[m[76C[100m [m
[33m355 [m[32mvoid[m eof([32mchar[m** args, [32mint[m spcs) {[46C[100m [m
[33m356 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m[59;99H[K[59;99H384,18[8C94%[31;22H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m351 [m[36m *[m[77C[100m [m
[33m352 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m353 [m[36m * spcs: number of original tokens[m[45C[100m [m[59;99H[K[59;99H384,18[8C93%[34;22H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m348 [m[36m * -----[m[71C[100m [m
[33m349 [m[36m * Closes the stdin side of the pipe so the child process can no longer read [m  [100m [m
[33m350 [m[36m * as the pipe will be EOF.[m[52C[100m [m[59;99H[K[59;99H384,18[8C92%[37;22H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m345 [m}[78C[100m [m
[33m346 [m[79C[100m [m
[33m347 [m[36m/* eof()[m[71C[100m [m[59;99H[K[59;99H384,18[8C91%[40;22H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m342 [m[79C[100m [m
[33m343 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m344 [m    }[74C[100m [m[59;99H[K[59;99H384,18[8C90%[43;22H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m339 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m340 [m[8C}[70C[100m [m
[33m341 [m[79C[100m [m[59;99H[K[59;99H384,18[8C90%[46;22H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m336 [m[16C}[62C[100m [m
[33m337 [m[12C}[66C[100m [m
[33m338 [m[8C} [33melse[m {[63C[100m [m[59;99H[K[59;99H384,18[8C89%[49;22H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m333 [m[20Cprintf([38;5;130m"<EOF>[m[35m\n[m[38;5;130m"[m);[41C[100m [m
[33m334 [m[16C} [33melse[m {[55C[100m [m
[33m335 [m[20Cprintf([38;5;130m"[m[35m%s\n[m[38;5;130m"[m, buffer);[36C[100m [m[59;99H[K[59;99H384,18[8C88%[52;22H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m330 [m[16C[33mif[m (buffer == [38;5;130m0[m) {[45C[100m [m
[33m331 [m[20Cprintf([38;5;130m"<no input>[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m332 [m[16C} [33melse[m [33mif[m (buffer == [38;5;130mNULL[m) {[35C[100m [m[59;99H[K[59;99H384,18[8C87%[55;22H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m327 [m[12C[32mFILE[m* readf = fdopen(jobs[job].up[READ], [38;5;130m"r"[m);[21C[100m [m
[33m328 [m[12C[33mif[m (ready) {[55C[100m [m
[33m329 [m[16C[32mchar[m* buffer = read_line(readf);[31C[100m [m[59;99H[K[59;99H384,18[8C86%[58;22H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m324 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m325 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m
[33m326 [m[12C[32mint[m ready = is_ready(jobs[job].up[READ]);[26C[100m [m[53;24H[46m{[m[58;1H[93m381 [m[4m[46m}[m[4m                                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H381,1[9C86%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m321 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m322 [m[8Cprintf([38;5;130m"Error: Insufficient arguments.[m[35m\n[m[38;5;130m"[m);[28C[100m [m
[33m323 [m    } [33melse[m {[67C[100m [m[56;24H{

[93m378 [m[4m        kill(jobs[job].pid, [m[4m[38;5;130mSIGKILL[m[4m);                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H378,24[8C85%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m318 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m319 [m[36m */[m[76C[100m [m
[33m320 [m[32mvoid[m rcv([32mchar[m** args, [32mint[m spcs) {[46C[100m [m[58;1H[93m375 [m[4m[36m */[m[4m                                                                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H375,3[9C84%[58;7H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m315 [m[36m * Prints this to stdout in the parent, hq.[m[36C[100m [m
[33m316 [m[36m *[m[77C[100m [m
[33m317 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[58;1H[93m372 [m[4m[36m *[m[4m                                                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H372,2[9C83%[58;6H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m312 [m[36m/* rcv()[m[71C[100m [m
[33m313 [m[36m * -----[m[71C[100m [m
[33m314 [m[36m * Receives data through the pipe from the specified child process.[m[12C[100m [m[58;1H[93m369 [m[4m[36m * ---------[m[4m                                                                   [m[4m[100m [m[4m                                [m[59;99H[K[59;99H369,12[8C82%[58;16H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m309 [m    }[74C[100m [m
[33m310 [m}[78C[100m [m
[33m311 [m[79C[100m [m[47;37H[46m{[m[58;1H[93m366 [m[4m[46m}[m[4m                                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H366,1[9C82%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m306 [m[8C} [33melse[m {[63C[100m [m
[33m307 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m308 [m[8C}[70C[100m [m[50;37H{[58;1H[93m363 [m[4m            printf([m[4m[38;5;130m"Error: Invalid job[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                    [m[4m[100m [m[4m                                [m[59;99H[K[59;99H363,24[8C81%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m303 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m
[33m304 [m[12C[32mFILE[m* writef = fdopen(jobs[job].down[WRITE], [38;5;130m"w"[m);[17C[100m [m
[33m305 [m[12Cfprintf(writef, [38;5;130m"[m[35m%s\n[m[38;5;130m"[m, args[[38;5;130m1[m]);[34C[100m [m[58;1H[93m360 [m[4m            [m[4m[32mint[m[4m job = atoi(args[[m[4m[38;5;130m0[m[4m]);                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H360,24[8C80%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m300 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m301 [m    } [33melse[m {[67C[100m [m
[33m302 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m[58;1H[93m357 [m[4m        printf([m[4m[38;5;130m"Error: Insufficient arguments[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H357,24[8C79%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m297 [m[36m */[m[76C[100m [m
[33m298 [m[32mvoid[m send([32mchar[m** args, [32mint[m spcs) {[45C[100m [m
[33m299 [m    [33mif[m (spcs < [38;5;130m3[m) {[60C[100m [m[58;1H[93m354 [m[4m[36m */[m[4m                                                                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H354,3[9C78%[58;7H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m294 [m[36m *[m[77C[100m [m
[33m295 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m296 [m[36m * spcs: number of original tokens[m[45C[100m [m[58;1H[93m351 [m[4m[36m *[m[4m                                                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H351,2[9C78%[58;6H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m291 [m[36m/* send()[m[70C[100m [m
[33m292 [m[36m * ------[m[70C[100m [m
[33m293 [m[36m * Sends text down the pipe to specified job[m[35C[100m [m[58;1H[93m348 [m[4m[36m * -----[m[4m                                                                       [m[4m[100m [m[4m                                [m[59;99H[K[59;99H348,8[9C77%[58;12H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m288 [m    }[74C[100m [m
[33m289 [m}[78C[100m [m
[33m290 [m[79C[100m [m[33;37H[46m{[m[58;1H[93m345 [m[4m[46m}[m[4m                                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H345,1[9C76%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m285 [m[8C} [33melse[m {[63C[100m [m
[33m286 [m[12Cprintf([38;5;130m"Error: Invalid sleep time[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m287 [m[8C}[70C[100m [m[36;37H{[58;1H[93m342 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H342,0-1[7C75%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m282 [m    } [33melse[m {[67C[100m [m
[33m283 [m[8C[33mif[m (strcmp(args[[38;5;130m0[m], [38;5;130m""[m) && is_number(args[[38;5;130m0[m])) {[23C[100m [m
[33m284 [m[12Csleep(atoi(args[[38;5;130m0[m]) * [38;5;130m1000000[m);[36C[100m [m[58;1H[93m339 [m[4m            printf([m[4m[38;5;130m"Error: Invalid job[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                    [m[4m[100m [m[4m                                [m[59;99H[K[59;99H339,24[8C74%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m279 [m[32mvoid[m hq_wait([32mchar[m** args, [32mint[m spcs) {[42C[100m [m
[33m280 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m281 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m[56;28H[46m{[m

[93m336 [m[4m                [m[4m[46m}[m[4m                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H336,17[8C74%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m276 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m277 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m278 [m[36m */[m[76C[100m [m[58;1H[93m333 [m[4m                    printf([m[4m[38;5;130m"<EOF>[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                         [m[4m[100m [m[4m                                [m[59;99H[K[59;99H333,24[8C73%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m273 [m[36m * ---------[m[67C[100m [m
[33m274 [m[36m * Causes hq to wait for specified seconds[m[37C[100m [m
[33m275 [m[36m *[m[77C[100m [m[58;1H[93m330 [m[4m                [m[4m[33mif[m[4m (buffer == [m[4m[38;5;130m0[m[4m) {                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H330,24[8C72%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m270 [m}[78C[100m [m
[33m271 [m[79C[100m [m
[33m272 [m[36m/* hq_wait()[m[67C[100m [m[58;1H[93m327 [m[4m            [m[4m[32mFILE[m[4m* readf = fdopen(jobs[job].up[READ], [m[4m[38;5;130m"r"[m[4m);                     [m[4m[100m [m[4m                                [m[59;99H[K[59;99H327,24[8C71%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m267 [m[12Cprintf([38;5;130m"Error: invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m268 [m[8C}[70C[100m [m
[33m269 [m    }[74C[100m [m[58;1H[93m324 [m[4m        [m[4m[33mif[m[4m (is_job(args[m[4m[46m[[m[4m[38;5;130m0[m[4m[46m][m[4m)) {                                                 [m[4m[100m [m[4m                                [m[59;99H[K[59;99H324,24[8C70%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m264 [m[16Cprintf([38;5;130m"Error: Invalid signal[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m265 [m[12C}[66C[100m [m
[33m266 [m[8C} [33melse[m {[63C[100m [m[58;1H[93m321 [m[4m    [m[4m[33mif[m[4m (spcs < [m[4m[38;5;130m2[m[4m) {                                                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H321,19[8C70%[58;23H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m261 [m[20Cprintf([38;5;130m"Error: Invalid signal[m[35m\n[m[38;5;130m"[m);[25C[100m [m
[33m262 [m[16C}[62C[100m [m
[33m263 [m[12C} [33melse[m {[59C[100m [m[58;1H[93m318 [m[4m[36m * spcs: number of original tokens[m[4m                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H318,24[8C69%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m258 [m[20C[32mint[m pid = jobs[job].pid;[35C[100m [m
[33m259 [m[20Ckill(pid, sgnl);[43C[100m [m
[33m260 [m[16C} [33melse[m {[55C[100m [m[58;1H[93m315 [m[4m[36m * Prints this to stdout in the parent, hq.[m[4m                                    [m[4m[100m [m[4m                                [m[59;99H[K[59;99H315,24[8C68%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m255 [m[12C[33mif[m (is_number(args[[38;5;130m1[m])){[43C[100m [m
[33m256 [m[16C[32mint[m sgnl = atoi(args[[38;5;130m1[m]);[38C[100m [m
[33m257 [m[16C[33mif[m (sgnl >= [38;5;130m1[m && sgnl <= [38;5;130m31[m) {[33C[100m [m[58;1H[93m312 [m[4m[36m/* rcv()[m[4m                                                                       [m[4m[100m [m[4m                                [m[59;99H[K[59;99H312,8[9C67%[58;12H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m252 [m    } [33melse[m {[67C[100m [m
[33m253 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m254 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m[50;16H[46m{[m[58;1H[93m309 [m[4m    [m[4m[46m}[m[4m                                                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H309,5[9C66%[58;9H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m249 [m[32mvoid[m call_signal([32mchar[m** args, [32mint[m spcs) {[38C[100m [m
[33m250 [m    [33mif[m (spcs < [38;5;130m3[m) {[60C[100m [m
[33m251 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m[53;16H{[58;1H[93m306 [m[4m        } [m[4m[33melse[m[4m {                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H306,16[8C66%[58;20H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m246 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m247 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m248 [m[36m */[m[76C[100m [m[58;1H[93m303 [m[4m            [m[4m[32mint[m[4m job = atoi(args[[m[4m[38;5;130m0[m[4m]);                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H303,24[8C65%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m243 [m[36m * -------------[m[63C[100m [m
[33m244 [m[36m * Sends signal to child process specified[m[37C[100m [m
[33m245 [m[36m *[m[77C[100m [m[58;1H[93m300 [m[4m        printf([m[4m[38;5;130m"Error: Insufficient arguments[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H300,24[8C64%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m240 [m}[78C[100m [m
[33m241 [m[79C[100m [m
[33m242 [m[36m/* call_signal()[m[63C[100m [m[58;1H[93m297 [m[4m[36m */[m[4m                                                                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H297,3[9C63%[58;7H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m237 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m238 [m[8C}[70C[100m [m
[33m239 [m    }[74C[100m [m[58;1H[93m294 [m[4m[36m *[m[4m                                                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H294,2[9C62%[58;6H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m234 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m235 [m[12C}[66C[100m [m
[33m236 [m[8C} [33melse[m {[63C[100m [m[58;1H[93m291 [m[4m[36m/* send()[m[4m                                                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H291,9[9C62%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m231 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[jobq].status)) {[23C[100m [m
[33m232 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[jobq].status));[8C[100m [m
[33m233 [m[12C} [33melse[m {[59C[100m [m[52;16H[46m{[m[58;1H[93m288 [m[4m    [m[4m[46m}[m[4m                                                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H288,5[9C61%[58;9H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m228 [m[79C[100m [m
[33m229 [m[12C[33mif[m (WIFEXITED(jobs[jobq].status)) {[32C[100m [m
[33m230 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WEXITSTATUS(jobs[jobq].status));[8C[100m [m[55;16H{


[93m285 [m[4m        } [m[4m[33melse[m[4m {                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H285,16[8C60%[58;20H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m225 [m[12C[32mint[m jobq = atoi(args[[38;5;130m0[m]);[42C[100m [m
[33m226 [m[79C[100m [m
[33m227 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, jobq, jobs[jobq].name);[25C[100m [m[58;1H[93m282 [m[4m    } [m[4m[33melse[m[4m {                                                                   [m[4m[100m [m[4m                                [m[59;99H[K[59;99H282,12[8C59%[58;16H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m222 [m    } [33melse[m [33mif[m (spcs > [38;5;130m1[m) {      [36m// report on specific job[m[22C[100m [m
[33m223 [m[8C[36m// check for job tokens[1][m[45C[100m [m
[33m224 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m[58;1H[93m279 [m[4m[32mvoid[m[4m hq_wait([m[4m[32mchar[m[4m** args, [m[4m[32mint[m[4m spcs) {                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H279,24[8C58%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m219 [m[12C}[66C[100m [m
[33m220 [m[8C}[70C[100m [m
[33m221 [m[79C[100m [m[58;1H[93m276 [m[4m[36m * args: arguments provided in command line without first command[m[4m              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H276,24[8C58%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m216 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[11C[100m [m
[33m217 [m[12C} [33melse[m {[59C[100m [m
[33m218 [m[16Cprintf([38;5;130m"Error[m[35m\n[m[38;5;130m"[m);[45C[100m [m[58;1H[93m273 [m[4m[36m * ---------[m[4m                                                                   [m[4m[100m [m[4m                                [m[59;99H[K[59;99H273,12[8C57%[58;16H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m213 [m[12C} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[28C[100m [m
[33m214 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[12C[100m [m
[33m215 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {[26C[100m [m[37;45H[46m{[m[58;1H[93m270 [m[4m[46m}[m[4m                                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H270,1[9C56%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m210 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[31C[100m [m
[33m211 [m[12C[33mif[m (!jobs[i].finished) {[43C[100m [m
[33m212 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m[40;45H{[58;1H[93m267 [m[4m            printf([m[4m[38;5;130m"Error: invalid job[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                    [m[4m[100m [m[4m                                [m[59;99H[K[59;99H267,24[8C55%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m207 [m    [36m// check args[m[62C[100m [m
[33m208 [m    [33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[37C[100m [m
[33m209 [m[8C[33mfor[m ([32mint[m i = [38;5;130m0[m; i < jobid; i++) {[38C[100m [m[58;1H[93m264 [m[4m                printf([m[4m[38;5;130m"Error: Invalid signal[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H264,24[8C54%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m204 [m[79C[100m [m
[33m205 [m    [36m// Job status output dependent on arg present status[m[23C[100m [m
[33m206 [m[79C[100m [m[58;1H[93m261 [m[4m                    printf([m[4m[38;5;130m"Error: Invalid signal[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                         [m[4m[100m [m[4m                                [m[59;99H[K[59;99H261,24[8C54%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m201 [m[79C[100m [m
[33m202 [m    [36m// Header row[m[62C[100m [m
[33m203 [m    printf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[46C[100m [m[58;1H[93m258 [m[4m                    [m[4m[32mint[m[4m pid = jobs[job].pid;                                   [m[4m[100m [m[4m                                [m[59;99H[K[59;99H258,24[8C53%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m198 [m[36m */[m[76C[100m [m
[33m199 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[43C[100m [m
[33m200 [m    fflush([38;5;130mstdout[m);[60C[100m [m[58;1H[93m255 [m[4m            [m[4m[33mif[m[4m (is_number(args[[m[4m[38;5;130m1[m[4m])){                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H255,24[8C52%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m195 [m[36m *[m[77C[100m [m
[33m196 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m197 [m[36m * spcs: number of original tokens[m[45C[100m [m[58;1H[93m252 [m[4m    } [m[4m[33melse[m[4m {                                                                   [m[4m[100m [m[4m                                [m[59;99H[K[59;99H252,12[8C51%[58;16H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m192 [m[36m/* report()[m[68C[100m [m
[33m193 [m[36m * --------[m[68C[100m [m
[33m194 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m[58;1H[93m249 [m[4m[32mvoid[m[4m call_signal([m[4m[32mchar[m[4m** args, [m[4m[32mint[m[4m spcs) {                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H249,24[8C50%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m189 [m    }[74C[100m [m
[33m190 [m}[78C[100m [m
[33m191 [m[79C[100m [m[58;1H[93m246 [m[4m[36m * args: arguments provided in command line without first command[m[4m              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H246,24[8C50%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m186 [m[79C[100m [m
[33m187 [m[12Cjobid++;[59C[100m [m
[33m188 [m[8C}[70C[100m [m[58;1H[93m243 [m[4m[36m * -------------[m[4m                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H243,16[8C49%[58;20H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m183 [m[12C[36m// parent[m[58C[100m [m
[33m184 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m
[33m185 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m[17;40H[46m{[m[58;1H[93m240 [m[4m[46m}[m[4m                                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H240,1[9C48%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m180 [m[16Cexit([38;5;130m99[m);[54C[100m [m
[33m181 [m[12C}[66C[100m [m
[33m182 [m[8C} [33melse[m {[63C[100m [m[20;40H{[58;1H[93m237 [m[4m            printf([m[4m[38;5;130m"Error: Invalid job[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                    [m[4m[100m [m[4m                                [m[59;99H[K[59;99H237,24[8C47%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m177 [m[12C[32mint[m status;[56C[100m [m
[33m178 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m
[33m179 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m[58;1H[93m234 [m[4m                printf([m[4m[38;5;130m"running[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H234,24[8C46%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m174 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m175 [m[12Cfflush([38;5;130mstderr[m);[52C[100m [m
[33m176 [m[79C[100m [m[58;1H[93m231 [m[4m            } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (WIFSIGNALED(jobs[jobq].status)) {                       [m[4m[100m [m[4m                                [m[59;99H[K[59;99H231,24[8C46%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m171 [m[12Cdup2(jobs[jobid].up[WRITE], STDOUT_FILENO);[24C[100m [m
[33m172 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m
[33m173 [m[79C[100m [m[58;1H[93m228 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H228,0-1[7C45%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m168 [m[79C[100m [m
[33m169 [m[12Cdup2(jobs[jobid].down[READ], STDIN_FILENO);[24C[100m [m
[33m170 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m[58;1H[93m225 [m[4m            [m[4m[32mint[m[4m jobq = atoi(args[[m[4m[38;5;130m0[m[4m]);                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H225,24[8C44%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m165 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m166 [m[12Cclose(jobs[jobid].down[WRITE]);[36C[100m [m
[33m167 [m[12Cclose(jobs[jobid].up[READ]);[39C[100m [m[58;1H[93m222 [m[4m    } [m[4m[33melse[m[4m [m[4m[33mif[m[4m [m[4m[46m([m[4mspcs > [m[4m[38;5;130m1[m[4m[46m)[m[4m {      [m[4m[36m// report on specific job[m[4m                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H222,24[8C43%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m162 [m[8C[33mif[m (!jobs[jobid].pid) {[48C[100m [m
[33m163 [m[12C[36m// child[m[59C[100m [m
[33m164 [m[79C[100m [m[56;24H[46m{[m

[93m219 [m[4m            [m[4m[46m}[m[4m                                                                  [m[4m[100m [m[4m                                [m[59;99H[K[59;99H219,13[8C42%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m159 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m160 [m[79C[100m [m
[33m161 [m[8Cjobs[jobid].pid = fork();[46C[100m [m[58;1H[93m216 [m[4m                printf([m[4m[38;5;130m"signalled([m[4m[35m%d[m[4m[38;5;130m)[m[4m[35m\n[m[4m[38;5;130m"[m[4m, WTERMSIG(jobs[i].status));           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H216,24[8C42%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m156 [m[8C}[70C[100m [m
[33m157 [m[79C[100m [m
[33m158 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, jobid);[28C[100m [m[58;1H[93m213 [m[4m            } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (WIFEXITED(jobs[i].status)) {                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H213,24[8C41%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m153 [m[8C[33mif[m (pipe(jobs[jobid].up) < [38;5;130m0[m) {[40C[100m [m
[33m154 [m[12Cperror([38;5;130m"Creating up pipe"[m);[40C[100m [m
[33m155 [m[12Cexit([38;5;130m1[m);[59C[100m [m[58;1H[93m210 [m[4m            printf([m[4m[38;5;130m"[[m[4m[35m%d[m[4m[38;5;130m] [m[4m[35m%s[m[4m[38;5;130m:"[m[4m, i, jobs[i].name);                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H210,24[8C40%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m150 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m151 [m[8C}[70C[100m [m
[33m152 [m[79C[100m [m[58;1H[93m207 [m[4m    [m[4m[36m// check args[m[4m                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H207,17[8C39%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m147 [m[79C[100m [m
[33m148 [m[8C[33mif[m (pipe(jobs[jobid].down) < [38;5;130m0[m) {[38C[100m [m
[33m149 [m[12Cperror([38;5;130m"Creating down pipe"[m);[38C[100m [m[58;1H[93m204 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H204,0-1[7C38%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m144 [m[8Cjobs = rea[38;5;248m[104mlloc[m(jobs, (jobid + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));[16C[100m [m
[33m145 [m[79C[100m [m
[33m146 [m[8Cstrcpy(jobs[jobid].name, args[[38;5;130m0[m]);[37C[100m [m[58;1H[93m201 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H201,0-1[7C38%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m141 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m142 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m143 [m    } [33melse[m {[67C[100m [m[58;1H[93m198 [m[4m[36m */[m[4m                                                                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H198,3[9C37%[58;7H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m138 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m139 [m[36m */[m[76C[100m [m
[33m140 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs) {[44C[100m [m[58;1H[93m195 [m[4m[36m *[m[4m                                                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H195,2[9C36%[58;6H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m135 [m[36m * of the child process is unchanged[m[43C[100m [m
[33m136 [m[36m *[m[77C[100m [m
[33m137 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[58;1H[93m192 [m[4m[36m/* report()[m[4m                                                                    [m[4m[100m [m[4m                                [m[59;99H[K[59;99H192,11[8C35%[58;15H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m132 [m[36m * -------[m[69C[100m [m
[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m
[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m[12;16H[46m{[m[58;1H[93m189 [m[4m    [m[4m[46m}[m[4m                                                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H189,5[9C34%[58;9H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m129 [m}[78C[100m [m
[33m130 [m[79C[100m [m
[33m131 [m[36m/* spawn()[m[69C[100m [m[15;16H{[58;1H[93m186 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H186,0-1[7C34%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m126 [m[79C[100m [m
[33m127 [m    free(jobs);[64C[100m [m
[33m128 [m    [33mreturn[m [38;5;130m0[m;[66C[100m [m[58;1H[93m183 [m[4m            [m[4m[36m// parent[m[4m                                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H183,21[8C33%[58;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m123 [m[8Cfree(input);[59C[100m [m
[33m124 [m[8Cfree(tokens);[58C[100m [m
[33m125 [m    }[74C[100m [m[58;1H[93m180 [m[4m                exit[m[4m[46m([m[4m[38;5;130m99[m[4m[46m)[m[4m;                                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H180,24[8C32%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m120 [m[8Cprintf([38;5;130m"> "[m);[58C[100m [m
[33m121 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m122 [m[79C[100m [m[58;1H[93m177 [m[4m            [m[4m[32mint[m[4m status;                                                        [m[4m[100m [m[4m                                [m[59;99H[K[59;99H177,23[8C31%[58;27H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m117 [m[12Cprintf([38;5;130m"Error: Invalid command[m[35m\n[m[38;5;130m"[m);[32C[100m [m
[33m118 [m[8C}[70C[100m [m
[33m119 [m[79C[100m [m[58;1H[93m174 [m[4m            fflush([m[4m[38;5;130mstdout[m[4m);                                                    [m[4m[100m [m[4m                                [m[59;99H[K[59;99H174,24[8C30%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m114 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"cleanup"[m)) {[28C[100m [m
[33m115 [m[12Ccleanup();[57C[100m [m
[33m116 [m[8C} [33melse[m {[63C[100m [m[58;1H[93m171 [m[4m            dup2(jobs[jobid].up[WRITE], STDOUT_FILENO);                        [m[4m[100m [m[4m                                [m[59;99H[K[59;99H171,24[8C30%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m111 [m[12Crcv(args, spcs);[51C[100m [m
[33m112 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"eof"[m)) {[32C[100m [m
[33m113 [m[12Ceof(args, spcs);[51C[100m [m[58;1H[93m168 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H168,12[8C29%[58;16H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m108 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"send"[m)) {[31C[100m [m
[33m109 [m[12Csend(args, spcs);[50C[100m [m
[33m110 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"rcv"[m)) {[32C[100m [m[58;1H[93m165 [m[4m            fflush([m[4m[38;5;130mstdout[m[4m);                                                    [m[4m[100m [m[4m                                [m[59;99H[K[59;99H165,24[8C28%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m105 [m[12Ccall_signal(args, spcs);[43C[100m [m
[33m106 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"sleep"[m)) {[30C[100m [m
[33m107 [m[12Chq_wait(args, spcs);[47C[100m [m[58;1H[93m162 [m[4m        [m[4m[33mif[m[4m (!jobs[m[4m[46m[[m[4mjobid[m[4m[46m][m[4m.pid) {                                                [m[4m[100m [m[4m                                [m[59;99H[K[59;99H162,24[8C27%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m102 [m[12C[36m// Report[m[58C[100m [m
[33m103 [m[12Creport(args, spcs);[48C[100m [m
[33m104 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"signal"[m)) {[29C[100m [m[58;1H[93m159 [m[4m        fflush([m[4m[38;5;130mstdout[m[4m);                                                        [m[4m[100m [m[4m                                [m[59;99H[K[59;99H159,23[8C26%[58;27H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 99 [m[12C[36m// spawn[m[59C[100m [m
[33m100 [m[12Cspawn(args, spcs);[49C[100m [m
[33m101 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"report"[m)) {[29C[100m [m[55;43H[46m{[m


[93m156 [m[4m        [m[4m[46m}[m[4m                                                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H156,9[9C26%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 96 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m 97 [m[79C[100m [m
[33m 98 [m[8C[33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"spawn"[m)) {[37C[100m [m[58;1H[93m153 [m[4m        [m[4m[33mif[m[4m (pipe(jobs[jobid].up) < [m[4m[38;5;130m0[m[4m) {                                        [m[4m[100m [m[4m                                [m[59;99H[K[59;99H153,24[8C25%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 93 [m[12Cargs[i - [38;5;130m1[m] = tokens[i];[43C[100m [m
[33m 94 [m[8C}[70C[100m [m
[33m 95 [m[8Cargs[spcs - [38;5;130m1[m] = [38;5;130m0[m;[52C[100m [m[58;1H[93m150 [m[4m            exit([m[4m[38;5;130m1[m[4m);                                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H150,20[8C24%[58;24H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 90 [m[79C[100m [m
[33m 91 [m[8C[32mchar[m* args[spcs];[54C[100m [m
[33m 92 [m[8C[33mfor[m ([32mint[m i = [38;5;130m1[m; i < spcs; i++) {[39C[100m [m[58;1H[93m147 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H147,8[9C23%[58;12H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 87 [m[12C[33mcontinue[m;[58C[100m [m
[33m 88 [m[8C}[70C[100m [m
[33m 89 [m[8Ctokens = split_space_not_quote(input, &spcs);[26C[100m [m[58;1H[93m144 [m[4m        jobs = rea[m[4m[38;5;248m[104mlloc[m[4m(jobs, (jobid + [m[4m[38;5;130m1[m[4m) * [m[4m[33msizeof[m[4m([m[4m[32mstruct[m[4m Job));                [m[4m[100m [m[4m                                [m[59;99H[K[59;99H144,24[8C22%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 84 [m[8C[33mif[m (!strcmp(input, [38;5;130m""[m)) {[46C[100m [m
[33m 85 [m[12Cprintf([38;5;130m"> "[m);[54C[100m [m
[33m 86 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m[58;1H[93m141 [m[4m    [m[4m[33mif[m[4m (spcs < [m[4m[38;5;130m2[m[4m) {                                                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H141,19[8C22%[58;23H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 81 [m    [33mwhile[m ((input = read_line([38;5;130mstdin[m)) != [38;5;130mNULL[m) {[31C[100m [m
[33m 82 [m[8C[32mint[m spcs = [38;5;130m0[m;[58C[100m [m
[33m 83 [m[79C[100m [m[58;1H[93m138 [m[4m[36m * spcs: number of original tokens[m[4m                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H138,24[8C21%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 78 [m    printf([38;5;130m"> "[m);[62C[100m [m
[33m 79 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m 80 [m    [36m// prompt loop[m[61C[100m [m[58;1H[93m135 [m[4m[36m * of the child process is unchanged[m[4m                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H135,24[8C20%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 75 [m[79C[100m [m
[33m 76 [m    signal([38;5;130mSIGINT[m, handle_signal);[45C[100m [m
[33m 77 [m    signal([38;5;130mSIGCHLD[m, handle_signal);[44C[100m [m[58;1H[93m132 [m[4m[36m * -------[m[4m                                                                     [m[4m[100m [m[4m                                [m[59;99H[K[59;99H132,10[8C19%[58;14H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 72 [m    [32mchar[m** tokens;[61C[100m [m
[33m 73 [m[79C[100m [m
[33m 74 [m    jobs = ma[38;5;248m[104mlloc[m([38;5;130m0[m * [33msizeof[m([32mstruct[m Job));[37C[100m [m[58;1H[93m129 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H129,1[9C18%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 69 [m[79C[100m [m
[33m 70 [m[32mint[m main([32mint[m argc, [32mchar[m* argv[]) {[45C[100m [m
[33m 71 [m    [32mchar[m* input;[63C[100m [m[58;1H[93m126 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H126,4[9C18%[58;8H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 66 [m[79C[100m [m
[33m 67 [m[79C[100m [m
[33m 68 [m[36m// Program[m[69C[100m [m[58;1H[93m123 [m[4m        free(input);                                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H123,20[8C17%[58;24H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 63 [m[79C[100m [m
[33m 64 [m[32mint[m jobid = [38;5;130m0[m;[65C[100m [m
[33m 65 [m[32mstruct[m Job* jobs;[62C[100m [m[58;1H[93m120 [m[4m        printf([m[4m[38;5;130m"> "[m[4m);                                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H120,21[8C16%[58;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 60 [m};[77C[100m [m
[33m 61 [m[79C[100m [m
[33m 62 [m[36m// Globals[m[69C[100m [m[58;1H[93m117 [m[4m            printf([m[4m[38;5;130m"Error: Invalid command[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                [m[4m[100m [m[4m                                [m[59;99H[K[59;99H117,24[8C15%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 57 [m    [32mint[m up[[38;5;130m2[m];[65C[100m [m
[33m 58 [m    [32mint[m status;[64C[100m [m
[33m 59 [m    [32mint[m finished;[62C[100m [m[58;1H[93m114 [m[4m        } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (!strcmp(tokens[[m[4m[38;5;130m0[m[4m], [m[4m[38;5;130m"cleanup"[m[4m)) {                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H114,24[8C14%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 54 [m    [32mint[m pid;[67C[100m [m
[33m 55 [m    [32mchar[m name[MAX_BUFFER_SIZE];[48C[100m [m
[33m 56 [m    [32mint[m down[[38;5;130m2[m];[63C[100m [m[58;1H[93m111 [m[4m            rcv(args, spcs);                                                   [m[4m[100m [m[4m                                [m[59;99H[K[59;99H111,24[8C14%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 51 [m[36m// Structs[m[69C[100m [m
[33m 52 [m[79C[100m [m
[33m 53 [m[32mstruct[m Job {[67C[100m [m[58;1H[93m108 [m[4m        } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (!strcmp(tokens[[m[4m[38;5;130m0[m[4m], [m[4m[38;5;130m"send"[m[4m)) {                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H108,24[8C13%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 48 [m[79C[100m [m
[33m 49 [m[32mbool[m is_job([32mchar[m job[]);[55C[100m [m
[33m 50 [m[79C[100m [m[58;1H[93m105 [m[4m            call_signal[m[4m[46m([m[4margs, spcs[m[4m[46m)[m[4m;                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H105,24[8C12%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 45 [m[32mvoid[m handle_signal([32mint[m s);[53C[100m [m
[33m 46 [m[79C[100m [m
[33m 47 [m[32mbool[m is_number([32mchar[m number[]);[49C[100m [m[58;1H[93m102 [m[4m            [m[4m[36m// Report[m[4m                                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H102,21[8C11%[58;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 42 [m[79C[100m [m
[33m 43 [m[32mvoid[m cleanup([32mvoid[m);[60C[100m [m
[33m 44 [m[79C[100m [m[58;1H[93m 99 [m[4m            [m[4m[36m// spawn[m[4m                                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H99,20[9C10%[58;24H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 39 [m[32mvoid[m rcv([32mchar[m** args, [32mint[m spcs);[47C[100m [m
[33m 40 [m[79C[100m [m
[33m 41 [m[32mvoid[m eof([32mchar[m** args, [32mint[m spcs);[47C[100m [m[58;1H[93m 96 [m[4m        fflush([m[4m[38;5;130mstdout[m[4m);                                                        [m[4m[100m [m[4m                                [m[59;99H[K[59;99H96,23[9C10%[58;27H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 36 [m[79C[100m [m
[33m 37 [m[32mvoid[m send([32mchar[m** args, [32mint[m spcs);[46C[100m [m
[33m 38 [m[79C[100m [m[58;1H[93m 93 [m[4m            args[i - [m[4m[38;5;130m1[m[4m] = tokens[i];                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H93,24[10C9%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 33 [m[32mvoid[m call_signal([32mchar[m** args, [32mint[m spcs);[39C[100m [m
[33m 34 [m[79C[100m [m
[33m 35 [m[32mvoid[m hq_wait([32mchar[m** args, [32mint[m spcs);[43C[100m [m[58;1H[93m 90 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H90,0-1[9C8%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 30 [m[79C[100m [m
[33m 31 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs);[44C[100m [m
[33m 32 [m[79C[100m [m[58;1H[93m 87 [m[4m            [m[4m[33mcontinue[m[4m;                                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H87,21[10C7%[58;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 27 [m[36m// Function declarations[m[55C[100m [m
[33m 28 [m[79C[100m [m
[33m 29 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs);[45C[100m [m[58;1H[93m 84 [m[4m        [m[4m[33mif[m[4m (!strcmp(input, [m[4m[38;5;130m""[m[4m)) {                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H84,24[10C6%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 24 [m[79C[100m [m
[33m 25 [m[35m#endif[m      [36m// hq_h[m[60C[100m [m
[33m 26 [m[79C[100m [m[58;1H[93m 81 [m[4m    [m[4m[33mwhile[m[4m ((input = read_line([m[4m[38;5;130mstdin[m[4m)) != [m[4m[38;5;130mNULL[m[4m) {                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H81,24[10C6%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 21 [m[35m#define MAX_BUFFER_SIZE [m[38;5;130m52[m[53C[100m [m
[33m 22 [m[35m#define READ [m[38;5;130m0[m[65C[100m [m
[33m 23 [m[35m#define WRITE [m[38;5;130m1[m[64C[100m [m[58;1H[93m 78 [m[4m    printf([m[4m[38;5;130m"> "[m[4m);                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H78,17[10C5%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 18 [m[79C[100m [m
[33m 19 [m[36m// Defintions[m[66C[100m [m
[33m 20 [m[79C[100m [m[58;1H[93m 75 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H75,4[11C4%[58;8H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 15 [m[35m#include [m[38;5;130m<signal.h>[m[60C[100m [m
[33m 16 [m[35m#include [m[38;5;130m<ctype.h>[m[61C[100m [m
[33m 17 [m[35m#include [m[38;5;130m<stdbool.h>[m[59C[100m [m[58;1H[93m 72 [m[4m    [m[4m[32mchar[m[4m** tokens;                                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H72,18[10C3%[58;22H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 12 [m[35m#include [m[38;5;130m<fcntl.h>[m[61C[100m [m
[33m 13 [m[35m#include [m[38;5;130m<unistd.h>[m[60C[100m [m
[33m 14 [m[35m#include [m[38;5;130m<sys/wait.h>[m[58C[100m [m[58;1H[93m 69 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H69,0-1[9C2%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m  9 [m[35m#include [m[38;5;130m<stdio.h>[m[61C[100m [m
[33m 10 [m[35m#include [m[38;5;130m<string.h>[m[60C[100m [m
[33m 11 [m[35m#include [m[38;5;130m<csse2310a3.h>[m     [36m// given library[m[35C[100m [m[58;1H[93m 66 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H66,0-1[9C2%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m  6 [m[79C[100m [m
[33m  7 [m[35m#ifndef hq_h[m[67C[100m [m
[33m  8 [m[35m#include [m[38;5;130m<stdlib.h>[m[60C[100m [m[58;1H[93m 63 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H63,0-1[9C1%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m  3 [m[36m// Start Date: 4pm Friday 15th April, 2022[m[37C[100m [m
[33m  4 [m[36m// Due Date: 4pm Friday 13th May, 2022[m[41C[100m [m
[33m  5 [m[36m// Student Number: s4698512 (46985123)[m[41C[100m [m[58;1H[93m 60 [m[4m};                                                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H60,2[11C0%[58;6H[?25h[?25l[1;58r[1;1H[2L[1;59r[1;1H[33m  1 [m[36m// CSSE2310 Assignment 3 a3[m[52C[100m [m
[33m  2 [m[36m// By Hugo Burton[m[62C[100m [m[58;1H[93m 58 [m[4m    [m[4m[32mint[m[4m status;                                                                [m[4m[100m [m[4m                                [m[59;99H[K[59;99H58,15[9CTop[58;19H[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 59 [m    [32mint[m finished;[62C[100m [m
[33m 60 [m};[77C[100m [m
[33m 61 [m[79C[100m [m[59;99H[K[59;99H58,15[10C0%[55;19H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 62 [m[36m// Globals[m[69C[100m [m
[33m 63 [m[79C[100m [m
[33m 64 [m[32mint[m jobid = [38;5;130m0[m;[65C[100m [m[59;99H[K[59;99H58,15[10C1%[52;19H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 65 [m[32mstruct[m Job* jobs;[62C[100m [m
[33m 66 [m[79C[100m [m
[33m 67 [m[79C[100m [m[59;99H[K[59;99H58,15[10C2%[49;19H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 68 [m[36m// Program[m[69C[100m [m
[33m 69 [m[79C[100m [m
[33m 70 [m[32mint[m main([32mint[m argc, [32mchar[m* argv[]) {[45C[100m [m[59;99H[K[59;99H58,15[10C3%[46;19H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 71 [m    [32mchar[m* input;[63C[100m [m
[33m 72 [m    [32mchar[m** tokens;[61C[100m [m
[33m 73 [m[79C[100m [m[59;99H[K[59;99H58,15[10C4%[43;19H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 74 [m    jobs = ma[38;5;248m[104mlloc[m([38;5;130m0[m * [33msizeof[m([32mstruct[m Job));[37C[100m [m
[33m 75 [m[79C[100m [m
[33m 76 [m    signal([38;5;130mSIGINT[m, handle_signal);[45C[100m [m[59;99H[K[59;99H58,15[10C4%[40;19H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 77 [m    signal([38;5;130mSIGCHLD[m, handle_signal);[44C[100m [m
[33m 78 [m    printf([38;5;130m"> "[m);[62C[100m [m
[33m 79 [m    fflush([38;5;130mstdout[m);[60C[100m [m[59;99H[K[59;99H58,15[10C5%[37;19H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 80 [m    [36m// prompt loop[m[61C[100m [m
[33m 81 [m    [33mwhile[m ((input = read_line([38;5;130mstdin[m)) != [38;5;130mNULL[m) {[31C[100m [m
[33m 82 [m[8C[32mint[m spcs = [38;5;130m0[m;[58C[100m [m[59;99H[K[59;99H58,15[10C6%[34;19H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 83 [m[79C[100m [m
[33m 84 [m[8C[33mif[m (!strcmp(input, [38;5;130m""[m)) {[46C[100m [m
[33m 85 [m[12Cprintf([38;5;130m"> "[m);[54C[100m [m[59;99H[K[59;99H58,15[10C7%[31;19H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 86 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m 87 [m[12C[33mcontinue[m;[58C[100m [m
[33m 88 [m[8C}[70C[100m [m[59;99H[K[59;99H58,15[10C8%[28;19H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 89 [m[8Ctokens = split_space_not_quote(input, &spcs);[26C[100m [m
[33m 90 [m[79C[100m [m
[33m 91 [m[8C[32mchar[m* args[spcs];[54C[100m [m[59;99H[K[59;99H58,15[10C8%[25;19H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 92 [m[8C[33mfor[m ([32mint[m i = [38;5;130m1[m; i < spcs; i++) {[39C[100m [m
[33m 93 [m[12Cargs[i - [38;5;130m1[m] = tokens[i];[43C[100m [m
[33m 94 [m[8C}[70C[100m [m[59;99H[K[59;99H58,15[10C9%[22;19H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 95 [m[8Cargs[spcs - [38;5;130m1[m] = [38;5;130m0[m;[52C[100m [m
[33m 96 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m 97 [m[79C[100m [m[59;99H[K[59;99H58,15[9C10%[19;19H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 98 [m[8C[33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"spawn"[m)) {[37C[100m [m
[33m 99 [m[12C[36m// spawn[m[59C[100m [m
[33m100 [m[12Cspawn(args, spcs);[49C[100m [m[59;99H[K[59;99H58,15[9C11%[16;19H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m101 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"report"[m)) {[29C[100m [m
[33m102 [m[12C[36m// Report[m[58C[100m [m
[33m103 [m[12Creport(args, spcs);[48C[100m [m[59;99H[K[59;99H58,15[9C12%[13;19H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m104 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"signal"[m)) {[29C[100m [m
[33m105 [m[12Ccall_signal(args, spcs);[43C[100m [m
[33m106 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"sleep"[m)) {[30C[100m [m[59;99H[K[59;99H58,15[9C12%[10;19H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m107 [m[12Chq_wait(args, spcs);[47C[100m [m
[33m108 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"send"[m)) {[31C[100m [m
[33m109 [m[12Csend(args, spcs);[50C[100m [m[59;99H[K[59;99H58,15[9C13%[7;19H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m110 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"rcv"[m)) {[32C[100m [m
[33m111 [m[12Crcv(args, spcs);[51C[100m [m
[33m112 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"eof"[m)) {[32C[100m [m[59;99H[K[59;99H58,15[9C14%[4;19H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m113 [m[12Ceof(args, spcs);[51C[100m [m
[33m114 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"cleanup"[m)) {[28C[100m [m
[33m115 [m[12Ccleanup();[57C[100m [m[59;99H[K[59;99H58,15[9C15%[1;19H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 61 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m116 [m[8C} [33melse[m {[63C[100m [m
[33m117 [m[12Cprintf([38;5;130m"Error: Invalid command[m[35m\n[m[38;5;130m"[m);[32C[100m [m
[33m118 [m[8C}[70C[100m [m[59;99H[K[59;99H61,0-1[8C16%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 64 [m[4m[32mint[m[4m jobid = [m[4m[38;5;130m0[m[4m;                                                                 [m[4m[100m [m[4m                                [m[56;1H[33m119 [m[79C[100m [m
[33m120 [m[8Cprintf([38;5;130m"> "[m);[58C[100m [m
[33m121 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m[59;99H[K[59;99H64,14[9C16%[1;18H[?25h[?25l[33m 64 [m[32mint[m jobid = [38;5;130m0[m;                                                                 [100m [m[1;85H[K[18;1H[93m 81 [m[4m    [m[4m[33mwhile[m[4m ((input = read_line([m[4m[38;5;130mstdin[m[4m)) != [m[4m[38;5;130mNULL[m[4m) {                               [m[4m[100m [m[4m                                [m[59;99H81,23[18;27H[?25h[?25l[33m 81 [m    [33mwhile[m ((input = re[7m[48;5;242mad_line([m[7m[38;5;130m[48;5;242mstdin[m[7m[48;5;242m)) != [m[7m[38;5;130m[48;5;242mNULL[m[7m[48;5;242m) { [m                              [100m [m[18;85H[K[19;5H[7m[48;5;242m        [m[7m[32m[48;5;242mint[m[7m[48;5;242m spcs = [m[7m[38;5;130m[48;5;242m0[m[7m[48;5;242m; [20;5H [21;5H        [m[7m[33m[48;5;242mif[m[7m[48;5;242m (!strcmp(input, [m[7m[38;5;130m[48;5;242m""[m[7m[48;5;242m)) { [22;5H            printf([m[7m[38;5;130m[48;5;242m"> "[m[7m[48;5;242m); [23;5H            fflush([m[7m[38;5;130m[48;5;242mstdout[m[7m[48;5;242m); [m
[93m 87 [m[7m[48;5;242m            [m[7m[33m[48;5;242mcontinue[m[7m[48;5;242m;[m[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H87,22[9C16%[24;26H[?25h[?25l[18;27Had_line([38;5;130mstdin[m)) != [38;5;130mNULL[m) { [19;5H        [32mint[m spcs = [38;5;130m0[m; [20;5H [21;5H        [33mif[m (!strcmp(input, [38;5;130m""[m)) { [22;5H            printf([38;5;130m"> "[m); [23;5H            fflush([38;5;130mstdout[m); [24;5H[4m            [m[4m[33mcontinue[m[4m;                                                          [m[4m[100m [m[4m                                [m[59;1H[K[59;99H87,21[9C16%[24;25H[?25h[?25l[23;1H[93m 86 [m[4m            fflush([m[4m[38;5;130mstdout[m[4m);                                                    [m[4m[100m [m[4m                                [m[24;1H[33m 87 [m            [33mcontinue[m;                                                          [100m [m[24;85H[K[59;100H6,27[23;31H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m122 [m[79C[100m [m
[33m123 [m[8Cfree(input);[59C[100m [m
[33m124 [m[8Cfree(tokens);[58C[100m [m[59;99H[K[59;99H86,27[9C17%[20;31H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m125 [m    }[74C[100m [m
[33m126 [m[79C[100m [m
[33m127 [m    free(jobs);[64C[100m [m[59;99H[K[59;99H86,27[9C18%[17;31H[?25h[?25l[33m 86 [m            fflush([38;5;130mstdout[m);                                                    [100m [m[17;85H[K[50;1H[93m119 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H119,0-1[50;5H[?25h[?25l[29;1H[93m 98 [m[4m        [m[4m[33mif[m[4m (!strcmp(tokens[[m[4m[38;5;130m0[m[4m], [m[4m[38;5;130m"spawn"[m[4m)) {                                     [m[4m[100m [m[4m                                [m[50;1H[33m119 [m                                                                               [100m [m[50;85H[K[59;99H98,21  [29;25H[?25h[?25l[33m 98 [m        [33mif[m (!strcmp([7m[48;5;242mtokens[[m[7m[38;5;130m[48;5;242m0[m[7m[48;5;242m], [m[7m[38;5;130m[48;5;242m"spawn"[m[7m[48;5;242m)) { [m                                    [100m [m[29;85H[K[30;5H[7m[48;5;242m            [m[7m[36m[48;5;242m// spawn[m[7m[48;5;242m [31;5H            spawn(args, spcs); [m
[93m101 [m[7m[48;5;242m        } [m[7m[33m[48;5;242melse[m[7m[48;5;242m [m[7m[33m[48;5;242mif[m[7m[48;5;242m (!st[m[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H101,23[8C18%[32;27H[?25h[?25l[29;25Htokens[[38;5;130m0[m], [38;5;130m"spawn"[m)) { [30;5H            [36m// spawn[m 
[93m100 [m[4m            spawn(args, spcs);                                                 [m[4m[100m [m[4m                                [m[32;1H[33m101 [m        } [33melse[m [33mif[m (!st[59;1H[K[59;99H100,22[8C18%[31;26H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m128 [m    [33mreturn[m [38;5;130m0[m;[66C[100m [m
[33m129 [m}[78C[100m [m
[33m130 [m[79C[100m [m[59;99H[K[59;99H100,22[8C19%[28;26H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m131 [m[36m/* spawn()[m[69C[100m [m
[33m132 [m[36m * -------[m[69C[100m [m
[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m[59;99H[K[59;99H100,22[8C20%[25;26H[?25h[?25l[33m100 [m            spawn(args, spcs);                                                 [100m [m[25;85H[K[48;1H[93m123 [m[4m        free(input);                                                           [m[4m[100m [m[4m                                [m[59;100H23,9 [48;13H[?25h[?25l[59;1H[38;5;130m-- INSERT --[m[59;99H[K[59;99H123,9[9C20%[48;13H[?25h[?25l[4m/free(input);[m[59;103H10[48;14H[?25h[?25l[4m[36m//free(input);[m[59;104H1[48;15H[?25h[?25l[33m123 [m        [36m//free(input);[m                                                         [100m [m[48;85H[K[49;1H[93m124 [m[4m        free(tokens);                                                          [m[4m[100m [m[4m                                [m[59;101H4[49;15H[?25h[?25l[59;104H0[49;14H[?25h[?25l[59;103H9 [49;13H[?25h[?25l[4m/free(tokens);[m[59;103H10[49;14H[?25h[?25l[4m[36m//free(tokens);[m[59;104H1[49;15H[?25h[?25l[48;1H[93m123 [m[4m        [m[4m[36m//free(input);[m[4m                                                         [m[4m[100m [m[4m                                [m[49;1H[33m124 [m        [36m//free(tokens);[m                                                        [100m [m[49;85H[K[59;101H3[48;15H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m
[33m135 [m[36m * of the child process is unchanged[m[43C[100m [m
[33m136 [m[36m *[m[77C[100m [m[59;99H[K[59;99H123,11[8C20%[45;15H[1;58r[1;1H[3M[1;59r[56;1H[33m137 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m138 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m139 [m[36m */[m[76C[100m [m[59;99H[K[59;99H123,11[8C21%[42;15H[1;58r[1;1H[3M[1;59r[56;1H[33m140 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs) {[44C[100m [m
[33m141 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m142 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m[59;99H[K[59;99H123,11[8C22%[39;15H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m143 [m    } [33melse[m {[67C[100m [m
[33m144 [m[8Cjobs = rea[38;5;248m[104mlloc[m(jobs, (jobid + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));[16C[100m [m
[33m145 [m[79C[100m [m[59;99H[K[59;99H123,11[8C23%[36;15H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m146 [m[8Cstrcpy(jobs[jobid].name, args[[38;5;130m0[m]);[37C[100m [m
[33m147 [m[79C[100m [m
[33m148 [m[8C[33mif[m (pipe(jobs[jobid].down) < [38;5;130m0[m) {[38C[100m [m[59;99H[K[59;99H123,11[8C24%[33;15H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m149 [m[12Cperror([38;5;130m"Creating down pipe"[m);[38C[100m [m
[33m150 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m151 [m[8C}[70C[100m [m[59;99H[K[59;99H123,11[8C24%[30;15H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m152 [m[79C[100m [m
[33m153 [m[8C[33mif[m (pipe(jobs[jobid].up) < [38;5;130m0[m) {[40C[100m [m
[33m154 [m[12Cperror([38;5;130m"Creating up pipe"[m);[40C[100m [m[59;99H[K[59;99H123,11[8C25%[27;15H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m155 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m156 [m[8C}[70C[100m [m
[33m157 [m[79C[100m [m[59;99H[K[59;99H123,11[8C26%[24;15H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m158 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, jobid);[28C[100m [m
[33m159 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m160 [m[79C[100m [m[59;99H[K[59;99H123,11[8C27%[21;15H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m161 [m[8Cjobs[jobid].pid = fork();[46C[100m [m
[33m162 [m[8C[33mif[m (!jobs[jobid].pid) {[48C[100m [m
[33m163 [m[12C[36m// child[m[59C[100m [m[59;99H[K[59;99H123,11[8C28%[18;15H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m164 [m[79C[100m [m
[33m165 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m166 [m[12Cclose(jobs[jobid].down[WRITE]);[36C[100m [m[59;99H[K[59;99H123,11[8C28%[15;15H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m167 [m[12Cclose(jobs[jobid].up[READ]);[39C[100m [m
[33m168 [m[79C[100m [m
[33m169 [m[12Cdup2(jobs[jobid].down[READ], STDIN_FILENO);[24C[100m [m[59;99H[K[59;99H123,11[8C29%[12;15H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m170 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m
[33m171 [m[12Cdup2(jobs[jobid].up[WRITE], STDOUT_FILENO);[24C[100m [m
[33m172 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m[59;99H[K[59;99H123,11[8C30%[9;15H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m173 [m[79C[100m [m
[33m174 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m175 [m[12Cfflush([38;5;130mstderr[m);[52C[100m [m[59;99H[K[59;99H123,11[8C31%[6;15H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m176 [m[79C[100m [m
[33m177 [m[12C[32mint[m status;[56C[100m [m
[33m178 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m[59;99H[K[59;99H123,11[8C32%[3;15H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m124 [m[4m        [m[4m[36m//free(tokens);[m[4m                                                        [m[4m[100m [m[4m                                [m[56;1H[33m179 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m
[33m180 [m[16Cexit([38;5;130m99[m);[54C[100m [m
[33m181 [m[12C}[66C[100m [m[59;99H[K[59;99H124,11[8C32%[1;15H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m127 [m[4m    free(jobs);                                                                [m[4m[100m [m[4m                                [m[56;1H[33m182 [m[8C} [33melse[m {[63C[100m [m
[33m183 [m[12C[36m// parent[m[58C[100m [m
[33m184 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m[59;99H[K[59;99H127,11[8C33%[1;15H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m130 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m185 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m
[33m186 [m[79C[100m [m
[33m187 [m[12Cjobid++;[59C[100m [m[59;99H[K[59;99H130,1[9C34%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m133 [m[4m[36m * Runs specified program in a new process with optional arguments provided.[m[4m   [m[4m[100m [m[4m                                [m[56;1H[33m188 [m[8C}[70C[100m [m
[33m189 [m    }[74C[100m [m
[33m190 [m}[78C[100m [m[59;99H[K[59;99H133,11[8C35%[1;15H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m136 [m[4m[36m *[m[4m                                                                             [m[4m[100m [m[4m                                [m[56;1H[33m191 [m[79C[100m [m
[33m192 [m[36m/* report()[m[68C[100m [m
[33m193 [m[36m * --------[m[68C[100m [m[59;99H[K[59;99H136,3[9C36%[1;7H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m139 [m[4m[36m */[m[4m                                                                            [m[4m[100m [m[4m                                [m[56;1H[33m194 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m
[33m195 [m[36m *[m[77C[100m [m
[33m196 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[59;99H[K[59;99H139,4[9C36%[1;8H[?25h[?25l[33m139 [m[36m */[m                                                                            [100m [m[1;85H[K[40;1H[93m178 [m[4m            status = execvp(args[[m[4m[38;5;130m0[m[4m], args);                                    [m[4m[100m [m[4m                                [m[59;100H78,30[40;34H[?25h[?25l[59;4H[38;5;130m(insert) VISUAL --[m[59;99H[K[59;99H178,39[8C36%[40;5H            status = execvp(a[7m[48;5;242mrgs[[m[7m[38;5;130m[48;5;242m0[m[7m[48;5;242m], a[mrgs);                                    [100m [m[40;85H[K[40;43H[?25h[?25l[59;4H[38;5;130mINSERT --[m[59;13H[K[59;99H178,39[8C36%[40;5H[4m            status = execvp(args[[m[4m[38;5;130m0[m[4m], args);                                    [m[4m[100m [m[4m                                [40;43H[?25h[?25l[1;58r[m[1;1H[3L[1;59r[1;1H[33m136 [m[36m *[m[77C[100m [m
[33m137 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m138 [m[36m * spcs: number of original tokens[m[45C[100m [m[59;99H[K[59;99H178,39[8C36%[43;43H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m
[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m
[33m135 [m[36m * of the child process is unchanged[m[43C[100m [m[59;99H[K[59;99H178,39[8C35%[46;43H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m130 [m[79C[100m [m
[33m131 [m[36m/* spawn()[m[69C[100m [m
[33m132 [m[36m * -------[m[69C[100m [m[59;99H[K[59;99H178,39[8C34%[49;43H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m127 [m    free(jobs);[64C[100m [m
[33m128 [m    [33mreturn[m [38;5;130m0[m;[66C[100m [m
[33m129 [m}[78C[100m [m[59;99H[K[59;99H178,39[8C33%[52;43H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m124 [m[8C[36m//free(tokens);[m[56C[100m [m
[33m125 [m    }[74C[100m [m
[33m126 [m[79C[100m [m[59;99H[K[59;99H178,39[8C32%[55;43H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m121 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m122 [m[79C[100m [m
[33m123 [m[8C[36m//free(input);[m[57C[100m [m[59;99H[K[59;99H178,39[8C32%[58;43H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m118 [m[8C}[70C[100m [m
[33m119 [m[79C[100m [m
[33m120 [m[8Cprintf([38;5;130m"> "[m);[58C[100m [m[58;1H[93m175 [m[4m            fflush([m[4m[38;5;130mstderr[m[4m);                                                    [m[4m[100m [m[4m                                [m[59;99H[K[59;99H175,28[8C31%[58;32H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m115 [m[12Ccleanup();[57C[100m [m
[33m116 [m[8C} [33melse[m {[63C[100m [m
[33m117 [m[12Cprintf([38;5;130m"Error: Invalid command[m[35m\n[m[38;5;130m"[m);[32C[100m [m[58;1H[93m172 [m[4m            close(jobs[jobid].up[WRITE]);                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H172,39[8C30%[58;37H[4m[46m[[5C][?25h[?25l[1;58r[m[1;1H[3L[1;59r[1;1H[33m112 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"eof"[m)) {[32C[100m [m
[33m113 [m[12Ceof(args, spcs);[51C[100m [m
[33m114 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"cleanup"[m)) {[28C[100m [m[58;1H[93m169 [m[4m            dup2(jobs[jobid].down[READ], STDIN_FILENO);                        [m[4m[100m [m[4m                                [m[59;99H[K[59;99H169,39[8C29%[58;38H[4m[46m[[4C][?25h[?25l[1;58r[m[1;1H[3L[1;59r[1;1H[33m109 [m[12Csend(args, spcs);[50C[100m [m
[33m110 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"rcv"[m)) {[32C[100m [m
[33m111 [m[12Crcv(args, spcs);[51C[100m [m[58;1H[93m166 [m[4m            close(jobs[jobid].down[WRITE]);                                    [m[4m[100m [m[4m                                [m[59;99H[K[59;99H166,39[8C28%[58;43H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m106 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"sleep"[m)) {[30C[100m [m
[33m107 [m[12Chq_wait(args, spcs);[47C[100m [m
[33m108 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"send"[m)) {[31C[100m [m[58;1H[93m163 [m[4m            [m[4m[36m// child[m[4m                                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H163,21[8C28%[58;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m103 [m[12Creport(args, spcs);[48C[100m [m
[33m104 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"signal"[m)) {[29C[100m [m
[33m105 [m[12Ccall_signal(args, spcs);[43C[100m [m[58;1H[93m160 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H160,1[9C27%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m100 [m[12Cspawn(args, spcs);[49C[100m [m
[33m101 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"report"[m)) {[29C[100m [m
[33m102 [m[12C[36m// Report[m[58C[100m [m[58;1H[93m157 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H157,1[9C26%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 97 [m[79C[100m [m
[33m 98 [m[8C[33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"spawn"[m)) {[37C[100m [m
[33m 99 [m[12C[36m// spawn[m[59C[100m [m[58;1H[93m154 [m[4m            perror([m[4m[38;5;130m"Creating up pipe"[m[4m);                                        [m[4m[100m [m[4m                                [m[59;99H[K[59;99H154,39[8C25%[58;23H[4m[46m([18C)[?25h[?25l[1;58r[m[1;1H[3L[1;59r[1;1H[33m 94 [m[8C}[70C[100m [m
[33m 95 [m[8Cargs[spcs - [38;5;130m1[m] = [38;5;130m0[m;[52C[100m [m
[33m 96 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m[58;1H[93m151 [m[4m        }                                                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H151,10[8C24%[55;45H[46m{[m[58;13H[4m[46m}[?25h[?25l[1;58r[m[1;1H[3L[1;59r[1;1H[33m 91 [m[8C[32mchar[m* args[spcs];[54C[100m [m
[33m 92 [m[8C[33mfor[m ([32mint[m i = [38;5;130m1[m; i < spcs; i++) {[39C[100m [m
[33m 93 [m[12Cargs[i - [38;5;130m1[m] = tokens[i];[43C[100m [m[58;1H[93m148 [m[4m        [m[4m[33mif[m[4m (pipe(jobs[jobid].down) < [m[4m[38;5;130m0[m[4m) [m[4m[46m{[m[4m                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H148,39[8C24%[58;16H[4m[46m([26C)[m[1C[4m{[?25h[m[59;1H[K[58;42H[?25l[58;16H[4m([26C)[m[59;99H148,38[8C24%[58;42H[?25h[?25l[30;1H[93m120 [m[4m        printf([m[4m[38;5;130m"> "[m[4m);                                                          [m[4m[100m [m[4m                                [m[58;1H[33m148 [m        [33mif[m (pipe(jobs[jobid].down) < [38;5;130m0[m) {                                      [100m [m[58;85H[K[59;100H20,9 [30;13H[?25h[?25l[33m120 [m        [7m[48;5;242mprintf([m[7m[38;5;130m[48;5;242m"> "[m[7m[48;5;242m); [m                                                         [100m [m[30;85H[K[31;1H[93m121 [m[7m[48;5;242m        fflush([m[7m[38;5;130m[48;5;242ms[m[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H121,17[8C24%[31;21H[?25h[?25l[30;13Hprintf([38;5;130m"> "[m); [31;5H[4m        fflush([m[4m[38;5;130mstdout[m[4m);                                                        [m[4m[100m [m[4m                                [m[59;1H[K[59;99H121,20[8C24%[31;24H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 88 [m[8C}[70C[100m [m
[33m 89 [m[8Ctokens = split_space_not_quote(input, &spcs);[26C[100m [m
[33m 90 [m[79C[100m [m[59;99H[K[59;99H121,20[8C23%[34;24H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 85 [m[12Cprintf([38;5;130m"> "[m);[54C[100m [m
[33m 86 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m 87 [m[12C[33mcontinue[m;[58C[100m [m[59;99H[K[59;99H121,20[8C22%[37;24H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 82 [m[8C[32mint[m spcs = [38;5;130m0[m;[58C[100m [m
[33m 83 [m[79C[100m [m
[33m 84 [m[8C[33mif[m (!strcmp(input, [38;5;130m""[m)) {[46C[100m [m[59;99H[K[59;99H121,20[8C21%[40;24H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 79 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m 80 [m    [36m// prompt loop[m[61C[100m [m
[33m 81 [m    [33mwhile[m ((input = read_line([38;5;130mstdin[m)) != [38;5;130mNULL[m) {[31C[100m [m[59;99H[K[59;99H121,20[8C20%[43;24H[?25h[?25l[42;1H[93m120 [m[4m        printf[m[4m[46m([m[4m[38;5;130m"> "[m[4m[46m)[m[4m;                                                          [m[4m[100m [m[4m                                [m[43;1H[33m121 [m        fflush([38;5;130mstdout[m);                                                        [100m [m[43;85H[K[59;101H0,15[42;19H[?25h[?25l[42;5H        printf[7m[48;5;242m([m[7m[38;5;130m[48;5;242m"> [m[38;5;130m"[m);                                                          [100m [m[42;85H[K[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H120,19[8C20%[42;23H[?25h[?25l[33m120 [m[14C([38;5;130m"> [m
[93m121 [m[4m        fflush([m[4m[38;5;130mstdout[m[4m);                                                        [m[4m[100m [m[4m                                [m[59;1H[K[59;99H121,20[8C20%[43;24H[?25h[?25l[59;99H[K[59;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?1000l[?2004l"hq.c" 433L, 10702C written
[?2004l[?1l>[?25h[?1049l[23;0;0ts4698512@moss:~/CSSE2310/Assignments/a3$ make
gcc -g -Wall -pedantic -std=gnu99 -o hq hq.c -I/local/courses/csse2310/include -L/local/courses/csse2310/lib -lcsse2310a3
s4698512@moss:~/CSSE2310/Assignments/a3$ ./hq
> spawn scr   cat
New Job ID [0] created
> spawn ls
New Job ID [1] created
> spawn ls
^Cs4698512@moss:~/CSSE2310/Assignments/a3$ ./hqmakevim hq.c
[?1000h[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;59r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[59;1H"hq.c" 433L, 10702C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[33m 93 [m[12Cargs[i - [38;5;130m1[m] = tokens[i];[43C[100m [m
[33m 94 [m[8C}[70C[100m [m
[33m 95 [m[8Cargs[spcs - [38;5;130m1[m] = [38;5;130m0[m;[52C[100m [m
[33m 96 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m 97 [m[79C[100m [m
[33m 98 [m[8C[33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"spawn"[m)) {[37C[100m [m
[33m 99 [m[12C[36m// spawn[m[59C[100m [m
[33m100 [m[12Cspawn(args, spcs);[49C[100m [m
[33m101 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"report"[m)) {[29C[100m [m
[33m102 [m[12C[36m// Report[m[58C[100m [m
[33m103 [m[12Creport(args, spcs);[48C[100m [m
[33m104 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"signal"[m)) {[29C[100m [m
[33m105 [m[12Ccall_signal(args, spcs);[43C[100m [m
[33m106 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"sleep"[m)) {[30C[100m [m
[33m107 [m[12Chq_wait(args, spcs);[47C[100m [m
[33m108 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"send"[m)) {[31C[100m [m
[33m109 [m[12Csend(args, spcs);[50C[100m [m
[33m110 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"rcv"[m)) {[32C[100m [m
[33m111 [m[12Crcv(args, spcs);[51C[100m [m
[33m112 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"eof"[m)) {[32C[100m [m
[33m113 [m[12Ceof(args, spcs);[51C[100m [m
[33m114 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"cleanup"[m)) {[28C[100m [m
[33m115 [m[12Ccleanup();[57C[100m [m
[33m116 [m[8C} [33melse[m {[63C[100m [m
[33m117 [m[12Cprintf([38;5;130m"Error: Invalid command[m[35m\n[m[38;5;130m"[m);[32C[100m [m
[33m118 [m[8C}[70C[100m [m
[33m119 [m[79C[100m [m
[33m120 [m[8Cprintf([38;5;130m"> "[m);[58C[100m [m
[93m121 [m[4m        fflush([m[4m[38;5;130mstdout[m[4m);                                                        [m[4m[100m [m[4m                                [m[30;1H[33m122 [m[79C[100m [m
[33m123 [m[8C[36m//free(input);[m[57C[100m [m
[33m124 [m[8C[36m//free(tokens);[m[56C[100m [m
[33m125 [m    }[74C[100m [m
[33m126 [m[79C[100m [m
[33m127 [m    free(jobs);[64C[100m [m
[33m128 [m    [33mreturn[m [38;5;130m0[m;[66C[100m [m
[33m129 [m}[78C[100m [m
[33m130 [m[79C[100m [m
[33m131 [m[36m/* spawn()[m[69C[100m [m
[33m132 [m[36m * -------[m[69C[100m [m
[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m
[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m
[33m135 [m[36m * of the child process is unchanged[m[43C[100m [m
[33m136 [m[36m *[m[77C[100m [m
[33m137 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m138 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m139 [m[36m */[m[76C[100m [m
[33m140 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs) {[44C[100m [m
[33m141 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m142 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m143 [m    } [33melse[m {[67C[100m [m
[33m144 [m[8Cjobs = rea[38;5;248m[104mlloc[m(jobs, (jobid + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));[16C[100m [m
[33m145 [m[79C[100m [m
[33m146 [m[8Cstrcpy(jobs[jobid].name, args[[38;5;130m0[m]);[37C[100m [m
[33m147 [m[79C[100m [m
[33m148 [m[8C[33mif[m (pipe(jobs[jobid].down) < [38;5;130m0[m) {[38C[100m [m
[33m149 [m[12Cperror([38;5;130m"Creating down pipe"[m);[38C[100m [m
[33m150 [m[12Cexit([38;5;130m1[m);[59C[100m [m[59;99H121,9[9C24%[29;13H[?25h[?12$p[?25l[33m121 [m        fflush([38;5;130mstdout[m);                                                        [100m [m[29;85H[K[31;1H[93m123 [m[4m        [m[4m[36m//free(input);[m[4m                                                         [m[4m[100m [m[4m                                [m[59;101H3,11[31;15H[?25h[?25l[59;1H[38;5;130m-- INSERT --[m[59;14H[K[59;99H123,11[8C24%[31;15H[?25h[?25l[4m/free(input); [m[59;104H0[31;14H[?25h[?25l[4mfree(input); [m[59;103H9 [31;13H[?25h[?25l[33m123 [m        free(input);                                                           [100m [m[31;85H[K[32;1H[93m124 [m[4m        [m[4m[36m//free(tokens);[m[4m                                                        [m[4m[100m [m[4m                                [m[59;101H4[32;13H[?25h[?25l[59;103H10[32;14H[?25h[?25l[59;104H1[32;15H[?25h[?25l[59;104H2[32;16H[?25h[?25l[59;104H1[32;15H[?25h[?25l[4m/free(tokens); [m[59;104H0[32;14H[?25h[?25l[4mfree(tokens); [m[59;103H9 [32;13H[?25h[59;1H[K[32;12H[?25l[59;99H124,8[9C24%[32;12H[?25h[?25l[59;99H[K[59;1H:[?2004h[?25hw[?25l[?25h[?25l"hq.c" 433L, 10698C written[71C124,8[9C24%[59;99H[K[59;99H124,8[9C24%[32;12H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 90 [m[79C[100m [m
[33m 91 [m[8C[32mchar[m* args[spcs];[54C[100m [m
[33m 92 [m[8C[33mfor[m ([32mint[m i = [38;5;130m1[m; i < spcs; i++) {[39C[100m [m[59;1H[K[59;99H124,8[9C23%[35;12H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 87 [m[12C[33mcontinue[m;[58C[100m [m
[33m 88 [m[8C}[70C[100m [m
[33m 89 [m[8Ctokens = split_space_not_quote(input, &spcs);[26C[100m [m[59;99H[K[59;99H124,8[9C22%[38;12H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 84 [m[8C[33mif[m (!strcmp(input, [38;5;130m""[m)) {[46C[100m [m
[33m 85 [m[12Cprintf([38;5;130m"> "[m);[54C[100m [m
[33m 86 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m[59;99H[K[59;99H124,8[9C22%[41;12H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 81 [m    [33mwhile[m ((input = read_line([38;5;130mstdin[m)) != [38;5;130mNULL[m) {[31C[100m [m
[33m 82 [m[8C[32mint[m spcs = [38;5;130m0[m;[58C[100m [m
[33m 83 [m[79C[100m [m[59;99H[K[59;99H124,8[9C21%[44;12H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 78 [m    printf([38;5;130m"> "[m);[62C[100m [m
[33m 79 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m 80 [m    [36m// prompt loop[m[61C[100m [m[59;99H[K[59;99H124,8[9C20%[47;12H[?25h[?25l[59;99H[K[59;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?1000l[?2004l"hq.c" 433L, 10698C written
[?2004l[?1l>[?25h[?1049l[23;0;0ts4698512@moss:~/CSSE2310/Assignments/a3$ gdb ./hq
GNU gdb (GDB) Red Hat Enterprise Linux 8.2-16.el8
Copyright (C) 2018 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.
Type "show copying" and "show warranty" for details.
This GDB was configured as "x86_64-redhat-linux-gnu".
Type "show configuration" for configuration details.
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/>.
Find the GDB manual and other documentation resources online at:
    <http://www.gnu.org/software/gdb/documentation/>.

For help, type "help".
Type "apropos word" to search for commands related to "word"...
Reading symbols from ./hq...done.
(gdb) break main
Breakpoint 1 at 0x400e4e: file hq.c, line 74.
(gdb) run
Starting program: /home/students/s4698512/CSSE2310/Assignments/a3/hq 
Missing separate debuginfos, use: yum debuginfo-install glibc-2.28-164.el8.x86_64

Breakpoint 1, main (argc=1, argv=0x7fffffffd568) at hq.c:74
warning: Source file is more recent than executable.
74	    jobs = malloc(0 * sizeof(struct Job));
(gdb) c
Continuing.
> spawn l cat
New Job ID [0] created
[Detaching after fork from child process 1866249]
> spawn ls
New Job ID [1] created
[Detaching after fork from child process 1866250]
> spawn ls
^C
Program received signal SIGINT, Interrupt.
0x00007ffff78d0aab in waitpid () from /lib64/libc.so.6
(gdb) list
69	
70	int main(int argc, char* argv[]) {
71	    char* input;
72	    char** tokens;
73	    
74	    jobs = malloc(0 * sizeof(struct Job));
75	    
76	    signal(SIGINT, handle_signal);
77	    signal(SIGCHLD, handle_signal);
78	    printf("> ");
(gdb) quit
A debugging session is active.

	Inferior 1 [process 1866243] will be killed.

Quit anyway? (y or n) y
s4698512@moss:~/CSSE2310/Assignments/a3$ gdb ./hqvim hq.c
[?1000h[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;59r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[59;1H"hq.c" 433L, 10698C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[33m 96 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m 97 [m[79C[100m [m
[33m 98 [m[8C[33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"spawn"[m)) {[37C[100m [m
[33m 99 [m[12C[36m// spawn[m[59C[100m [m
[33m100 [m[12Cspawn(args, spcs);[49C[100m [m
[33m101 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"report"[m)) {[29C[100m [m
[33m102 [m[12C[36m// Report[m[58C[100m [m
[33m103 [m[12Creport(args, spcs);[48C[100m [m
[33m104 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"signal"[m)) {[29C[100m [m
[33m105 [m[12Ccall_signal(args, spcs);[43C[100m [m
[33m106 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"sleep"[m)) {[30C[100m [m
[33m107 [m[12Chq_wait(args, spcs);[47C[100m [m
[33m108 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"send"[m)) {[31C[100m [m
[33m109 [m[12Csend(args, spcs);[50C[100m [m
[33m110 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"rcv"[m)) {[32C[100m [m
[33m111 [m[12Crcv(args, spcs);[51C[100m [m
[33m112 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"eof"[m)) {[32C[100m [m
[33m113 [m[12Ceof(args, spcs);[51C[100m [m
[33m114 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"cleanup"[m)) {[28C[100m [m
[33m115 [m[12Ccleanup();[57C[100m [m
[33m116 [m[8C} [33melse[m {[63C[100m [m
[33m117 [m[12Cprintf([38;5;130m"Error: Invalid command[m[35m\n[m[38;5;130m"[m);[32C[100m [m
[33m118 [m[8C}[70C[100m [m
[33m119 [m[79C[100m [m
[33m120 [m[8Cprintf([38;5;130m"> "[m);[58C[100m [m
[33m121 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m122 [m[79C[100m [m
[33m123 [m[8Cfree(input);[59C[100m [m
[93m124 [m[4m        free(tokens);                                                          [m[4m[100m [m[4m                                [m[30;1H[33m125 [m    }[74C[100m [m
[33m126 [m[79C[100m [m
[33m127 [m    free(jobs);[64C[100m [m
[33m128 [m    [33mreturn[m [38;5;130m0[m;[66C[100m [m
[33m129 [m}[78C[100m [m
[33m130 [m[79C[100m [m
[33m131 [m[36m/* spawn()[m[69C[100m [m
[33m132 [m[36m * -------[m[69C[100m [m
[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m
[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m
[33m135 [m[36m * of the child process is unchanged[m[43C[100m [m
[33m136 [m[36m *[m[77C[100m [m
[33m137 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m138 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m139 [m[36m */[m[76C[100m [m
[33m140 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs) {[44C[100m [m
[33m141 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m142 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m143 [m    } [33melse[m {[67C[100m [m
[33m144 [m[8Cjobs = rea[38;5;248m[104mlloc[m(jobs, (jobid + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));[16C[100m [m
[33m145 [m[79C[100m [m
[33m146 [m[8Cstrcpy(jobs[jobid].name, args[[38;5;130m0[m]);[37C[100m [m
[33m147 [m[79C[100m [m
[33m148 [m[8C[33mif[m (pipe(jobs[jobid].down) < [38;5;130m0[m) {[38C[100m [m
[33m149 [m[12Cperror([38;5;130m"Creating down pipe"[m);[38C[100m [m
[33m150 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m151 [m[8C}[70C[100m [m
[33m152 [m[79C[100m [m
[33m153 [m[8C[33mif[m (pipe(jobs[jobid].up) < [38;5;130m0[m) {[40C[100m [m[59;99H124,9[9C25%[29;13H[?25h[?12$p[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m154 [m[12Cperror([38;5;130m"Creating up pipe"[m);[40C[100m [m
[33m155 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m156 [m[8C}[70C[100m [m[59;1H[K[59;99H124,9[9C26%[26;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m157 [m[79C[100m [m
[33m158 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, jobid);[28C[100m [m
[33m159 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m[59;99H[K[59;99H124,9[9C26%[23;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m160 [m[79C[100m [m
[33m161 [m[8Cjobs[jobid].pid = fork();[46C[100m [m
[33m162 [m[8C[33mif[m (!jobs[jobid].pid) {[48C[100m [m[59;99H[K[59;99H124,9[9C27%[20;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m163 [m[12C[36m// child[m[59C[100m [m
[33m164 [m[79C[100m [m
[33m165 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m[59;99H[K[59;99H124,9[9C28%[17;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m166 [m[12Cclose(jobs[jobid].down[WRITE]);[36C[100m [m
[33m167 [m[12Cclose(jobs[jobid].up[READ]);[39C[100m [m
[33m168 [m[79C[100m [m[59;99H[K[59;99H124,9[9C29%[14;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m169 [m[12Cdup2(jobs[jobid].down[READ], STDIN_FILENO);[24C[100m [m
[33m170 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m
[33m171 [m[12Cdup2(jobs[jobid].up[WRITE], STDOUT_FILENO);[24C[100m [m[59;99H[K[59;99H124,9[9C30%[11;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m172 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m
[33m173 [m[79C[100m [m
[33m174 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m[59;99H[K[59;99H124,9[9C30%[8;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m175 [m[12Cfflush([38;5;130mstderr[m);[52C[100m [m
[33m176 [m[79C[100m [m
[33m177 [m[12C[32mint[m status;[56C[100m [m[59;99H[K[59;99H124,9[9C31%[5;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m178 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m
[33m179 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m
[33m180 [m[16Cexit([38;5;130m99[m);[54C[100m [m[59;99H[K[59;99H124,9[9C32%[2;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m126 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m181 [m[12C}[66C[100m [m
[33m182 [m[8C} [33melse[m {[63C[100m [m
[33m183 [m[12C[36m// parent[m[58C[100m [m[59;99H[K[59;99H126,4[9C33%[1;8H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m129 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[56;1H[33m184 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m
[33m185 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m
[33m186 [m[79C[100m [m[59;99H[K[59;99H129,1[9C34%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m132 [m[4m[36m * -------[m[4m                                                                     [m[4m[100m [m[4m                                [m[56;1H[33m187 [m[12Cjobid++;[59C[100m [m
[33m188 [m[8C}[70C[100m [m
[33m189 [m    }[74C[100m [m[59;99H[K[59;99H132,9[9C34%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m135 [m[4m[36m * of the child process is unchanged[m[4m                                           [m[4m[100m [m[4m                                [m[56;1H[33m190 [m}[78C[100m [m
[33m191 [m[79C[100m [m
[33m192 [m[36m/* report()[m[68C[100m [m[59;99H[K[59;99H135,9[9C35%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m138 [m[4m[36m * spcs: number of original tokens[m[4m                                             [m[4m[100m [m[4m                                [m[56;1H[33m193 [m[36m * --------[m[68C[100m [m
[33m194 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m
[33m195 [m[36m *[m[77C[100m [m[59;99H[K[59;99H138,9[9C36%[1;13H[?25h[?25l[33m138 [m[36m * spcs: number of original tokens[m                                             [100m [m[1;85H[K[49;1H[93m186 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;100H86,0-1[49;5H[?25h[?25l[59;1H[38;5;130m-- INSERT --[m[59;99H[K[59;99H186,1[9C36%[49;5H[?25h[?25l[59;103H5[49;9H[?25h[?25l[59;103H9[49;13H[?25h[?25l[59;103H13[49;17H[?25h[?25l[4mp[m[59;104H4[49;18H[?25h[?25l[4mr[m[59;104H5[49;19H[?25h[?25l[4mi[m[59;104H6[49;20H[?25h[?25l[4mn[m[59;104H7[49;21H[?25h[?25l[4mt[m[59;104H8[49;22H[?25h[?25l[4mf[m[59;104H9[49;23H[?25h[?25l[4m([m[59;103H20[49;24H[?25h[?25l[4m[38;5;130m"[m[50;5H[38;5;130m            jobid++;[51;5H        }[52;5H    }[53;5H}[55;5H/* report()[56;5H * --------[57;5H * Produces an outline to stdout of current child processes and their statuses[58;5H *[m[59;104H1[49;25H[?25h[?25l[4m[38;5;130mh[m[59;104H2[49;26H[?25h[?25l[4m[38;5;130me[m[59;104H3[49;27H[?25h[?25l[4m[38;5;130mr[m[59;104H4[49;28H[?25h[?25l[4m[38;5;130me[m[59;104H5[49;29H[?25h[?25l[4m[38;5;130m"[m[50;5H            jobid++;[51;5H        }[52;5H    }[53;5H}[55;5H[36m/* report()[56;5H * --------[57;5H * Produces an outline to stdout of current child processes and their statuses[58;5H *[m[59;104H6[49;30H[?25h[?25l[4m)[m[59;103H19[49;23H[?25h[?25l[8C[4m;[m[59;103H28[49;32H[?25h[59;1H[K[49;31H[?25l[59;99H186,27[8C36%[49;31H[?25h[?25l[33m186 [m            printf([38;5;130m"here"[m);                                                    [100m [m[49;85H[K[50;1H[93m187 [m[4m            jobid++;                                                           [m[4m[100m [m[4m                                [m[59;101H7,19[50;23H[?25h[?25l[24;1H[93m161 [m[4m        jobs[jobid].pid = fork();                                              [m[4m[100m [m[4m                                [m[50;1H[33m187 [m            jobid++;                                                           [100m [m[50;85H[K[59;100H61,15[24;19H[?25h[?25l[33m161 [m        jobs[j[7m[48;5;242mobid].pid = fork(); [m                                             [100m [m[24;85H[K[25;1H[93m162 [m[7m[48;5;242m        [m[7m[33m[48;5;242mif[m[7m[48;5;242m (!jobs[jo[m[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H162,21[8C36%[25;25H[?25h[?25l[24;19Hobid].pid = fork(); [25;5H[4m        [m[4m[33mif[m[4m (!jobs[jobid].pid) {                                                [m[4m[100m [m[4m                                [m[59;1H[K[59;99H162,21[8C36%[25;25H[?25h[?25l[33m162 [m        [33mif[m (!jobs[jobid].pid) {                                                [100m [m[25;85H[K[29;1H[93m166 [m[4m            close(jobs[jobid].down[WRITE]);                                    [m[4m[100m [m[4m                                [m[59;101H6,24[29;28H[?25h[?25l[29;5H            close(jobs[46m[[m[7m[48;5;242mjobid[m[46m][m.down[WRITE]);                                    [100m [m[29;85H[K[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H166,29[8C36%[29;33H[?25h[?25l[33m166 [m[22C[jobid]
[93m167 [m[4m            close(jobs[m[4m[46m[[m[4mjobid[m[4m[46m][m[4m.up[READ]);                                       [m[4m[100m [m[4m                                [m[59;1H[K[59;99H167,29[8C36%[30;33H[?25h[?25l[33m167 [m            close(jobs[jobid].up[READ]);                                       [100m [m[30;85H[K[50;1H[93m187 [m[4m            jobid++;                                                           [m[4m[100m [m[4m                                [m[59;100H87,13[50;17H[?25h[?25l[59;99H[K[59;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?1000l[?2004l"hq.c" 433L, 10725C written
[?2004l[?1l>[?25h[?1049l[23;0;0ts4698512@moss:~/CSSE2310/Assignments/a3$ make
gcc -g -Wall -pedantic -std=gnu99 -o hq hq.c -I/local/courses/csse2310/include -L/local/courses/csse2310/lib -lcsse2310a3
s4698512@moss:~/CSSE2310/Assignments/a3$ ./hq
> spawn c s cat  
New Job ID [0] created
here> c spawn ls
New Job ID [1] created
here> spawn ls
^Cspawn ls
New Job ID [2] created
here> s4698512@moss:~/CSSE2310/Assignments/a3$ ./hqmakevim hq.c
[?1000h[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;59r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[59;1H"hq.c" 433L, 10725C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[33m159 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m160 [m[79C[100m [m
[33m161 [m[8Cjobs[jobid].pid = fork();[46C[100m [m
[33m162 [m[8C[33mif[m (!jobs[jobid].pid) {[48C[100m [m
[33m163 [m[12C[36m// child[m[59C[100m [m
[33m164 [m[79C[100m [m
[33m165 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m166 [m[12Cclose(jobs[jobid].down[WRITE]);[36C[100m [m
[33m167 [m[12Cclose(jobs[jobid].up[READ]);[39C[100m [m
[33m168 [m[79C[100m [m
[33m169 [m[12Cdup2(jobs[jobid].down[READ], STDIN_FILENO);[24C[100m [m
[33m170 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m
[33m171 [m[12Cdup2(jobs[jobid].up[WRITE], STDOUT_FILENO);[24C[100m [m
[33m172 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m
[33m173 [m[79C[100m [m
[33m174 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m175 [m[12Cfflush([38;5;130mstderr[m);[52C[100m [m
[33m176 [m[79C[100m [m
[33m177 [m[12C[32mint[m status;[56C[100m [m
[33m178 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m
[33m179 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m
[33m180 [m[16Cexit([38;5;130m99[m);[54C[100m [m
[33m181 [m[12C}[66C[100m [m
[33m182 [m[8C} [33melse[m {[63C[100m [m
[33m183 [m[12C[36m// parent[m[58C[100m [m
[33m184 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m
[33m185 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m
[33m186 [m[12Cprintf([38;5;130m"here"[m);[52C[100m [m
[93m187 [m[4m            jobid++;                                                           [m[4m[100m [m[4m                                [m[30;1H[33m188 [m[8C}[70C[100m [m
[33m189 [m    }[74C[100m [m
[33m190 [m}[78C[100m [m
[33m191 [m[79C[100m [m
[33m192 [m[36m/* report()[m[68C[100m [m
[33m193 [m[36m * --------[m[68C[100m [m
[33m194 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m
[33m195 [m[36m *[m[77C[100m [m
[33m196 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m197 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m198 [m[36m */[m[76C[100m [m
[33m199 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[43C[100m [m
[33m200 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m201 [m[79C[100m [m
[33m202 [m    [36m// Header row[m[62C[100m [m
[33m203 [m    printf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[46C[100m [m
[33m204 [m[79C[100m [m
[33m205 [m    [36m// Job status output dependent on arg present status[m[23C[100m [m
[33m206 [m[79C[100m [m
[33m207 [m    [36m// check args[m[62C[100m [m
[33m208 [m    [33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[37C[100m [m
[33m209 [m[8C[33mfor[m ([32mint[m i = [38;5;130m0[m; i < jobid; i++) {[38C[100m [m
[33m210 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[31C[100m [m
[33m211 [m[12C[33mif[m (!jobs[i].finished) {[43C[100m [m
[33m212 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m213 [m[12C} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[28C[100m [m
[33m214 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[12C[100m [m
[33m215 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {[26C[100m [m
[33m216 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[11C[100m [m[59;99H187,13[8C42%[29;17H[?25h[?12$p[?25l[28;1H[93m186 [m[4m            printf([m[4m[38;5;130m"here"[m[4m);                                                    [m[4m[100m [m[4m                                [m[29;1H[33m187 [m            jobid++;                                                           [100m [m[29;85H[K[59;101H6[28;17H[?25h[?25l[59;1H[38;5;130m-- INSERT --[m[59;14H[K[59;99H186,13[8C42%[28;17H[4m               [28;17H[?25h[?25l[m[33m186 [m                                                                               [100m [m[28;85H[K[29;1H[93m187 [m[4m            jobid++;                                                           [m[4m[100m [m[4m                                [m[59;101H7,12[29;16H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m156 [m[8C}[70C[100m [m
[33m157 [m[79C[100m [m
[33m158 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, jobid);[28C[100m [m[59;99H[K[59;99H187,12[8C41%[32;16H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m153 [m[8C[33mif[m (pipe(jobs[jobid].up) < [38;5;130m0[m) {[40C[100m [m
[33m154 [m[12Cperror([38;5;130m"Creating up pipe"[m);[40C[100m [m
[33m155 [m[12Cexit([38;5;130m1[m);[59C[100m [m[59;99H[K[59;99H187,12[8C40%[35;16H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m150 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m151 [m[8C}[70C[100m [m
[33m152 [m[79C[100m [m[59;99H[K[59;99H187,12[8C39%[38;16H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m147 [m[79C[100m [m
[33m148 [m[8C[33mif[m (pipe(jobs[jobid].down) < [38;5;130m0[m) {[38C[100m [m
[33m149 [m[12Cperror([38;5;130m"Creating down pipe"[m);[38C[100m [m[59;99H[K[59;99H187,12[8C38%[41;16H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m144 [m[8Cjobs = rea[38;5;248m[104mlloc[m(jobs, (jobid + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));[16C[100m [m
[33m145 [m[79C[100m [m
[33m146 [m[8Cstrcpy(jobs[jobid].name, args[[38;5;130m0[m]);[37C[100m [m[59;99H[K[59;99H187,12[8C38%[44;16H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m141 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m142 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m143 [m    } [33melse[m {[67C[100m [m[59;99H[K[59;99H187,12[8C37%[47;16H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m138 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m139 [m[36m */[m[76C[100m [m
[33m140 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs) {[44C[100m [m[59;99H[K[59;99H187,12[8C36%[50;16H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m135 [m[36m * of the child process is unchanged[m[43C[100m [m
[33m136 [m[36m *[m[77C[100m [m
[33m137 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[59;99H[K[59;99H187,12[8C35%[53;16H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m132 [m[36m * -------[m[69C[100m [m
[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m
[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m[59;99H[K[59;99H187,12[8C34%[56;16H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m129 [m}[78C[100m [m
[33m130 [m[79C[100m [m
[33m131 [m[36m/* spawn()[m[69C[100m [m[58;1H[93m186 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H186,1[9C34%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m126 [m[79C[100m [m
[33m127 [m    free(jobs);[64C[100m [m
[33m128 [m    [33mreturn[m [38;5;130m0[m;[66C[100m [m[58;1H[93m183 [m[4m            [m[4m[36m// parent[m[4m                                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H183,12[8C33%[58;16H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m184 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m
[33m185 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m
[33m186 [m[79C[100m [m[59;99H[K[59;99H183,12[8C34%[55;16H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m187 [m[12Cjobid++;[59C[100m [m
[33m188 [m[8C}[70C[100m [m
[33m189 [m    }[74C[100m [m[59;99H[K[59;99H183,12[8C34%[52;16H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m190 [m}[78C[100m [m
[33m191 [m[79C[100m [m
[33m192 [m[36m/* report()[m[68C[100m [m[59;99H[K[59;99H183,12[8C35%[49;16H[?25h[?25l[33m183 [m            [36m// parent[m                                                          [100m [m[49;85H[K[53;1H[93m187 [m[4m            jobid++;                                                           [m[4m[100m [m[4m                                [m[59;101H7,21[53;25H[?25h[?25l[4mi[m[59;104H2[53;26H[?25h[?25l[4m [m[59;104H1[53;25H[?25h[?25l[4m [m[59;104H0[53;24H[?25h[?25l[4m [m[59;103H19[53;23H[?25h[?25l[4m [m[59;104H8[53;22H[?25h[?25l[4m [m[59;104H7[53;21H[?25h[?25l[4m [m[59;104H6[53;20H[?25h[?25l[4m [m[59;104H5[53;19H[?25h[?25l[4m [m[59;104H4[53;18H[?25h[?25l[4m [m[59;104H3[53;17H[?25h[?25l[59;103H9 [53;13H[?25h[?25l[59;103H5[53;9H[?25h[?25l[59;103H1[53;5H[?25h[?25l[52;1H[93m186 [m[4m                                                                               [m[4m[100m [m[4m                                [m[53;1H[33m187 [m        }                                                                      [100m [m[53;85H[K[54;9H}    [55;5H}    [56;5H [57;5H[36m/* report()[58;5H * --------[m[59;101H6[52;5H[?25h[?25l[51;1H[93m185 [m[4m            close(jobs[jobid].up[WRITE]);                                      [m[4m[100m [m[4m                                [m[52;1H[33m186 [m        }                                                                      [100m [m[52;85H[K[53;9H}    [54;5H}    [55;5H [56;5H[36m/* report()[57;5H * --------[58;8HProduces an outline to stdout of current child processes and their statuses[m[59;101H5,42[51;46H[?25h[?25l[50;1H[93m184 [m[4m            close(jobs[jobid].down[READ]);                                     [m[4m[100m [m[4m                                [m[51;1H[33m185 [m            close(jobs[jobid].up[WRITE]);                                      [100m [m[51;85H[K[50;27H[4m[46m[[5C][m[59;101H4,29[50;33H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m132 [m[36m * -------[m[69C[100m [m
[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m
[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m[59;99H[K[59;99H184,29[8C35%[53;33H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m129 [m}[78C[100m [m
[33m130 [m[79C[100m [m
[33m131 [m[36m/* spawn()[m[69C[100m [m[59;99H[K[59;99H184,29[8C34%[56;33H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m126 [m[79C[100m [m
[33m127 [m    free(jobs);[64C[100m [m
[33m128 [m    [33mreturn[m [38;5;130m0[m;[66C[100m [m[58;1H[93m183 [m[4m            [m[4m[36m// parent[m[4m                                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H183,22[8C33%[58;26H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m123 [m[8Cfree(input);[59C[100m [m
[33m124 [m[8Cfree(tokens);[58C[100m [m
[33m125 [m    }[74C[100m [m[58;1H[93m180 [m[4m                exit([m[4m[38;5;130m99[m[4m);                                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H180,26[8C32%[58;30H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m120 [m[8Cprintf([38;5;130m"> "[m);[58C[100m [m
[33m121 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m122 [m[79C[100m [m[58;1H[93m177 [m[4m            [m[4m[32mint[m[4m status;                                                        [m[4m[100m [m[4m                                [m[59;99H[K[59;99H177,24[8C31%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m117 [m[12Cprintf([38;5;130m"Error: Invalid command[m[35m\n[m[38;5;130m"[m);[32C[100m [m
[33m118 [m[8C}[70C[100m [m
[33m119 [m[79C[100m [m[58;1H[93m174 [m[4m            fflush([m[4m[38;5;130mstdout[m[4m);                                                    [m[4m[100m [m[4m                                [m[59;99H[K[59;99H174,28[8C31%[58;32H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m114 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"cleanup"[m)) {[28C[100m [m
[33m115 [m[12Ccleanup();[57C[100m [m
[33m116 [m[8C} [33melse[m {[63C[100m [m[58;1H[93m171 [m[4m            dup2(jobs[jobid].up[WRITE], STDOUT_FILENO);                        [m[4m[100m [m[4m                                [m[59;99H[K[59;99H171,29[8C30%[58;26H[4m[46m[[5C][?25h[?25l[1;58r[m[1;1H[3L[1;59r[1;1H[33m111 [m[12Crcv(args, spcs);[51C[100m [m
[33m112 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"eof"[m)) {[32C[100m [m
[33m113 [m[12Ceof(args, spcs);[51C[100m [m[58;1H[93m168 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H168,13[8C29%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m108 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"send"[m)) {[31C[100m [m
[33m109 [m[12Csend(args, spcs);[50C[100m [m
[33m110 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"rcv"[m)) {[32C[100m [m[58;1H[93m165 [m[4m            fflush([m[4m[38;5;130mstdout[m[4m);                                                    [m[4m[100m [m[4m                                [m[59;99H[K[59;99H165,28[8C28%[58;32H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m105 [m[12Ccall_signal(args, spcs);[43C[100m [m
[33m106 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"sleep"[m)) {[30C[100m [m
[33m107 [m[12Chq_wait(args, spcs);[47C[100m [m[58;1H[93m162 [m[4m        [m[4m[33mif[m[4m (!jobs[jobid].pid) {                                                [m[4m[100m [m[4m                                [m[59;99H[K[59;99H162,29[8C27%[58;16H[4m[46m([16C)[?25h[?25l[1;58r[m[1;1H[3L[1;59r[1;1H[33m102 [m[12C[36m// Report[m[58C[100m [m
[33m103 [m[12Creport(args, spcs);[48C[100m [m
[33m104 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"signal"[m)) {[29C[100m [m[58;1H[93m159 [m[4m        fflush([m[4m[38;5;130mstdout[m[4m);                                                        [m[4m[100m [m[4m                                [m[59;99H[K[59;99H159,24[8C27%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 99 [m[12C[36m// spawn[m[59C[100m [m
[33m100 [m[12Cspawn(args, spcs);[49C[100m [m
[33m101 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"report"[m)) {[29C[100m [m[58;1H[93m156 [m[4m        }                                                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H156,10[8C26%[55;43H[46m{[m[58;13H[4m[46m}[?25h[?25l[1;58r[m[1;1H[3L[1;59r[1;1H[33m 96 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m 97 [m[79C[100m [m
[33m 98 [m[8C[33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"spawn"[m)) {[37C[100m [m[58;1H[93m153 [m[4m        [m[4m[33mif[m[4m (pipe(jobs[jobid].up) < [m[4m[38;5;130m0[m[4m) [m[4m[46m{[m[4m                                        [m[4m[100m [m[4m                                [m[59;99H[K[59;99H153,29[8C25%[58;26H[4m[46m[[5C][m[10C[4m{[58;33H[?25h[?25l[m[24;1H[93m119 [m[4m                                                                               [m[4m[100m [m[4m                                [m[58;1H[33m153 [m        [33mif[m (pipe(jobs[46m[[mjobid[46m][m.up) < [38;5;130m0[m) {                                        [100m [m[58;85H[K[58;26H[jobid][59;100H19,1 [24;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 93 [m[12Cargs[i - [38;5;130m1[m] = tokens[i];[43C[100m [m
[33m 94 [m[8C}[70C[100m [m
[33m 95 [m[8Cargs[spcs - [38;5;130m1[m] = [38;5;130m0[m;[52C[100m [m[59;99H[K[59;99H119,1[9C24%[27;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 90 [m[79C[100m [m
[33m 91 [m[8C[32mchar[m* args[spcs];[54C[100m [m
[33m 92 [m[8C[33mfor[m ([32mint[m i = [38;5;130m1[m; i < spcs; i++) {[39C[100m [m[59;99H[K[59;99H119,1[9C23%[30;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 87 [m[12C[33mcontinue[m;[58C[100m [m
[33m 88 [m[8C}[70C[100m [m
[33m 89 [m[8Ctokens = split_space_not_quote(input, &spcs);[26C[100m [m[59;99H[K[59;99H119,1[9C23%[33;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 84 [m[8C[33mif[m (!strcmp(input, [38;5;130m""[m)) {[46C[100m [m
[33m 85 [m[12Cprintf([38;5;130m"> "[m);[54C[100m [m
[33m 86 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m[59;99H[K[59;99H119,1[9C22%[36;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 81 [m    [33mwhile[m ((input = read_line([38;5;130mstdin[m)) != [38;5;130mNULL[m) {[31C[100m [m
[33m 82 [m[8C[32mint[m spcs = [38;5;130m0[m;[58C[100m [m
[33m 83 [m[79C[100m [m[59;99H[K[59;99H119,1[9C21%[39;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 78 [m    printf([38;5;130m"> "[m);[62C[100m [m
[33m 79 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m 80 [m    [36m// prompt loop[m[61C[100m [m[59;99H[K[59;99H119,1[9C20%[42;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 75 [m[79C[100m [m
[33m 76 [m    signal([38;5;130mSIGINT[m, handle_signal);[45C[100m [m
[33m 77 [m    signal([38;5;130mSIGCHLD[m, handle_signal);[44C[100m [m[59;99H[K[59;99H119,1[9C19%[45;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m
[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m
[33m135 [m[36m * of the child process is unchanged[m[43C[100m [m[59;99H[K[59;99H119,1[9C20%[42;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m136 [m[36m *[m[77C[100m [m
[33m137 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m138 [m[36m * spcs: number of original tokens[m[45C[100m [m[59;99H[K[59;99H119,1[9C21%[39;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m139 [m[36m */[m[76C[100m [m
[33m140 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs) {[44C[100m [m
[33m141 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m[59;99H[K[59;99H119,1[9C22%[36;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m142 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m143 [m    } [33melse[m {[67C[100m [m
[33m144 [m[8Cjobs = rea[38;5;248m[104mlloc[m(jobs, (jobid + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));[16C[100m [m[59;99H[K[59;99H119,1[9C23%[33;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m145 [m[79C[100m [m
[33m146 [m[8Cstrcpy(jobs[jobid].name, args[[38;5;130m0[m]);[37C[100m [m
[33m147 [m[79C[100m [m[59;99H[K[59;99H119,1[9C23%[30;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m148 [m[8C[33mif[m (pipe(jobs[jobid].down) < [38;5;130m0[m) {[38C[100m [m
[33m149 [m[12Cperror([38;5;130m"Creating down pipe"[m);[38C[100m [m
[33m150 [m[12Cexit([38;5;130m1[m);[59C[100m [m[59;99H[K[59;99H119,1[9C24%[27;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m151 [m[8C}[70C[100m [m
[33m152 [m[79C[100m [m
[33m153 [m[8C[33mif[m (pipe(jobs[jobid].up) < [38;5;130m0[m) {[40C[100m [m[59;99H[K[59;99H119,1[9C25%[24;5H[1;58r[1;1H[3M[1;59r[56;1H[33m154 [m[12Cperror([38;5;130m"Creating up pipe"[m);[40C[100m [m
[33m155 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m156 [m[8C}[70C[100m [m[59;99H[K[59;99H119,1[9C26%[21;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m157 [m[79C[100m [m
[33m158 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, jobid);[28C[100m [m
[33m159 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m[59;99H[K[59;99H119,1[9C27%[18;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m160 [m[79C[100m [m
[33m161 [m[8Cjobs[jobid].pid = fork();[46C[100m [m
[33m162 [m[8C[33mif[m (!jobs[jobid].pid) {[48C[100m [m[59;99H[K[59;99H119,1[9C27%[15;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m163 [m[12C[36m// child[m[59C[100m [m
[33m164 [m[79C[100m [m
[33m165 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m[59;99H[K[59;99H119,1[9C28%[12;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m166 [m[12Cclose(jobs[jobid].down[WRITE]);[36C[100m [m
[33m167 [m[12Cclose(jobs[jobid].up[READ]);[39C[100m [m
[33m168 [m[79C[100m [m[59;99H[K[59;99H119,1[9C29%[9;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m169 [m[12Cdup2(jobs[jobid].down[READ], STDIN_FILENO);[24C[100m [m
[33m170 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m
[33m171 [m[12Cdup2(jobs[jobid].up[WRITE], STDOUT_FILENO);[24C[100m [m[59;99H[K[59;99H119,1[9C30%[6;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m172 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m
[33m173 [m[79C[100m [m
[33m174 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m[59;99H[K[59;99H119,1[9C31%[3;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m120 [m[4m        printf([m[4m[38;5;130m"> "[m[4m);                                                          [m[4m[100m [m[4m                                [m[56;1H[33m175 [m[12Cfflush([38;5;130mstderr[m);[52C[100m [m
[33m176 [m[79C[100m [m
[33m177 [m[12C[32mint[m status;[56C[100m [m[59;99H[K[59;99H120,21[8C31%[1;19H[4m[46m([4C)[?25h[?25l[1;58r[m[1;1H[3M[1;59r[1;1H[93m123 [m[4m        free(input);                                                           [m[4m[100m [m[4m                                [m[56;1H[33m178 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m
[33m179 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m
[33m180 [m[16Cexit([38;5;130m99[m);[54C[100m [m[59;99H[K[59;99H123,21[8C32%[1;25H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m126 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m181 [m[12C}[66C[100m [m
[33m182 [m[8C} [33melse[m {[63C[100m [m
[33m183 [m[12C[36m// parent[m[58C[100m [m[59;99H[K[59;99H126,5[9C33%[1;9H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m129 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[56;1H[33m184 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m
[33m185 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m
[33m186 [m[8C}[70C[100m [m[59;99H[K[59;99H129,2[9C34%[1;6H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m132 [m[4m[36m * -------[m[4m                                                                     [m[4m[100m [m[4m                                [m[56;1H[33m187 [m    }[74C[100m [m
[33m188 [m}[78C[100m [m
[33m189 [m[79C[100m [m[59;99H[K[59;99H132,11[8C35%[1;15H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m135 [m[4m[36m * of the child process is unchanged[m[4m                                           [m[4m[100m [m[4m                                [m[56;1H[33m190 [m[36m/* report()[m[68C[100m [m
[33m191 [m[36m * --------[m[68C[100m [m
[33m192 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m[59;99H[K[59;99H135,21[8C35%[1;25H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m138 [m[4m[36m * spcs: number of original tokens[m[4m                                             [m[4m[100m [m[4m                                [m[56;1H[33m193 [m[36m *[m[77C[100m [m
[33m194 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m195 [m[36m * spcs: number of original tokens[m[45C[100m [m[59;99H[K[59;99H138,21[8C36%[1;25H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m141 [m[4m    [m[4m[33mif[m[4m (spcs < [m[4m[38;5;130m2[m[4m) {                                                            [m[4m[100m [m[4m                                [m[56;1H[33m196 [m[36m */[m[76C[100m [m
[33m197 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[43C[100m [m
[33m198 [m    fflush([38;5;130mstdout[m);[60C[100m [m[59;99H[K[59;99H141,20[8C37%[1;23H[4m[46m{[m[3;9H[46m}[1;24H[?25h[?25l[1;58r[m[1;1H[3M[1;59r[1;1H[93m144 [m[4m        jobs = rea[m[4m[38;5;248m[104mlloc[m[4m(jobs, (jobid + [m[4m[38;5;130m1[m[4m) * [m[4m[33msizeof[m[4m([m[4m[32mstruct[m[4m Job));                [m[4m[100m [m[4m                                [m[56;1H[33m199 [m[79C[100m [m
[33m200 [m    [36m// Header row[m[62C[100m [m
[33m201 [m    printf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[46C[100m [m[59;99H[K[59;99H144,21[8C38%[1;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m141 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m142 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m143 [m    } [33melse[m {[67C[100m [m[59;99H[K[59;99H144,21[8C37%[4;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m138 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m139 [m[36m */[m[76C[100m [m
[33m140 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs) {[44C[100m [m[59;99H[K[59;99H144,21[8C36%[7;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m135 [m[36m * of the child process is unchanged[m[43C[100m [m
[33m136 [m[36m *[m[77C[100m [m
[33m137 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[59;99H[K[59;99H144,21[8C35%[10;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m132 [m[36m * -------[m[69C[100m [m
[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m
[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m[59;99H[K[59;99H144,21[8C35%[13;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m129 [m}[78C[100m [mawn([32mchar[m** args, [32mint[m spcs) {[44C[100m [m[59;99H[K[59;99H144,21[8C36%[7;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m135 [m[36m * of the child process is unchanged[m[43C[100m [m
[33m136 [m[36m *[m[77C[100m [m
[33m137 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[59;99H[K[59;99H144,21[8C35%[10;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m132 [m[36m * -------[m[69C[100m [m
[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m
[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m[59;99H[K[59;99H144,21[8C35%[13;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m129 [m}[78C[100m [m
[33m130 [m[79C[100m [m
[33m131 [m[36m/* spawn()[m[69C[100m [m[59;99H[K[59;99H144,21[8C34%[16;25H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m187 [m    }[74C[100m [m
[33m188 [m}[78C[100m [m
[33m189 [m[79C[100m [m[59;99H[K[59;99H144,21[8C35%[13;25H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m190 [m[36m/* report()[m[68C[100m [m
[33m191 [m[36m * --------[m[68C[100m [m
[33m192 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m[59;99H[K[59;99H144,21[8C35%[10;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m132 [m[36m * -------[m[69C[100m [m
[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m
[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m[59;99H[K[59;99H144,21[8C35%[13;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m129 [m}[78C[100m [m
[33m130 [m[79C[100m [m
[33m131 [m[36m/* spawn()[m[69C[100m [m[59;99H[K[59;99H144,21[8C34%[16;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m126 [m[79C[100m [m
[33m127 [m    free(jobs);[64C[100m [m
[33m128 [m    [33mreturn[m [38;5;130m0[m;[66C[100m [m[59;99H[K[59;99H144,21[8C33%[19;25H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m184 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m
[33m185 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m
[33m186 [m[8C}[70C[100m [m[59;99H[K[59;99H144,21[8C34%[16;25H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m187 [m    }[74C[100m [m
[33m188 [m}[78C[100m [m
[33m189 [m[79C[100m [m[59;99H[K[59;99H144,21[8C35%[13;25H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m190 [m[36m/* report()[m[68C[100m [m
[33m191 [m[36m * --------[m[68C[100m [m
[33m192 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m[59;99H[K[59;99H144,21[8C35%[10;25H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m193 [m[36m *[m[77C[100m [m
[33m194 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m195 [m[36m * spcs: number of original tokens[m[45C[100m [m[59;99H[K[59;99H144,21[8C36%[7;25H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m196 [m[36m */[m[76C[100m [m
[33m197 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[43C[100m [m
[33m198 [m    fflush([38;5;130mstdout[m);[60C[100m [m[59;99H[K[59;99H144,21[8C37%[4;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m138 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m139 [m[36m */[m[76C[100m [m
[33m140 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs) {[44C[100m [m[59;99H[K[59;99H144,21[8C36%[7;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m135 [m[36m * of the child process is unchanged[m[43C[100m [m
[33m136 [m[36m *[m[77C[100m [m
[33m137 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[59;99H[K[59;99H144,21[8C35%[10;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m132 [m[36m * -------[m[69C[100m [m
[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m
[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m[59;99H[K[59;99H144,21[8C35%[13;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m129 [m}[78C[100m [m
[33m130 [m[79C[100m [m
[33m131 [m[36m/* spawn()[m[69C[100m [m[59;99H[K[59;99H144,21[8C34%[16;25H[?25h[?25l[15;1H[93m143 [m[4m    } [m[4m[33melse[m[4m {                                                                   [m[4m[100m [m[4m                                [m[16;1H[33m144 [m        jobs = rea[38;5;248m[104mlloc[m(jobs, (jobid + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));                [100m [m[16;85H[K[59;101H3,13[15;17H[?25h[?25l[33m143 [m    } [33melse[m {                                                                   [100m [m[15;85H[K[16;1H[93m144 [m[4m        jobs = rea[m[4m[38;5;248m[104mlloc[m[4m(jobs, (jobid + [m[4m[38;5;130m1[m[4m) * [m[4m[33msizeof[m[4m([m[4m[32mstruct[m[4m Job));                [m[4m[100m [m[4m                                [m[59;101H4,25[16;29H[?25h[?25l[33m144 [m        jobs = rea[38;5;248m[104mlloc[m(jobs, (jobid + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));                [100m [m[16;85H[K[17;1H[93m145 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;101H5,1 [17;5H[?25h[?25l[59;103H5[17;9H[?25h[?25l[59;103H9[17;13H[?25h[?25l[33m145 [m                                                                               [100m [m[17;85H[K[18;1H[93m146 [m[4m                                                                               [m[4m[100m [m[4m                                [m[19;13Hstrcpy(jobs[jobid].name, args[[38;5;130m0[m]);[20;13H                                 [21;13H[33mif[m (pipe(jobs[jobid].down) < [38;5;130m0[m) {[22;17Hperror([38;5;130m"Creating down pipe"[m);[23;13H    exit([38;5;130m1[m);[24;13H}[25;13H                               [26;13H[33mif[m (pipe(jobs[jobid].up) < [38;5;130m0[m) {[27;17Hperror([38;5;130m"Creating up pipe"[m);[28;13H    exit([38;5;130m1[m);[29;13H}[30;13H                                           [31;13Hprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, jobid);[32;13Hfflush([38;5;130mstdout[m);[33;13H                         [34;13Hjobs[jobid].pid = fork();[35;13H[33mif[m (!jobs[jobid].pid) {[36;17H[36m// child[m[37;17H               [38;17Hfflush([38;5;130mstdout[m);                [39;35Hdown[WRITE]);[40;17Hclose(jobs[jobid].up[READ]);[41;17H                                           [42;17Hdup2(jobs[jobid].down[READ], STDIN_FILENO);[43;17Hclose(jobs[jobid].down[READ]);             [44;17Hdup2(jobs[jobid].up[WRITE], STDOUT_FILENO);[45;17Hclose(jobs[jobid].up[WRITE]);[46;17H               [47;27H[38;5;130mout[m[48;17Hfflush([38;5;130mstderr[m);[49;17H           [50;17H[32mint[m status;                    [51;17Hstatus = execvp(args[[38;5;130m0[m], args);[52;17H[33mif[m (status == -[38;5;130m1[m) {[53;17H    exit([38;5;130m99[m);[54;13H    }   [55;13H} [33melse[m {     [56;17H[36m// parent[m                     [57;35Hdown[READ]);[58;13H    close(jobs[jobid].up[WRITE]);[59;101H6[18;13H[?25h[?25l[33m146 [m                                                                               [100m [m[18;85H[K[19;1H[93m147 [m[4m                                                                               [m[4m[100m [m[4m                                [m[20;13Hstrcpy(jobs[jobid].name, args[[38;5;130m0[m]);[21;13H                                 [22;13H[33mif[m (pipe(jobs[jobid].down) < [38;5;130m0[m) {[23;17Hperror([38;5;130m"Creating down pipe"[m);[24;13H    exit([38;5;130m1[m);[25;13H}[26;13H                               [27;13H[33mif[(jobs[jobid].up[WRITE]);[47;17H               [48;27H[38;5;130mout[m[49;17Hfflush([38;5;130mstderr[m);[50;17H           [51;17H[32mint[m status;                    [52;17Hstatus = execvp(args[[38;5;130m0[m], args);[53;17H[33mif[m (status == -[38;5;130m1[m) {[54;17H    exit([38;5;130m99[m);[55;13H    }   [56;13H} [33melse[m {     [57;17H[36m// parent[m                     [58;35Hdown[READ]);[59;101H7[19;13H[?25h[?25l[18;1H[93m146 [m[4m                                                                               [m[4m[100m [m[4m                                [m[19;1H[33m147 [m                                                                               [100m [m[19;85H[K[59;101H6,1[18;5H[?25h[?25l[59;103H5[18;9H[?25h[?25l[59;103H9[18;13H[?25h[?25l[4mi[m[59;103H10[18;14H[?25h[?25l[4m[33mif[m[59;104H1[18;15H[?25h[?25l[59;104H2[18;16H[?25h[?25l[4m([m[22;45H[1m[37m[41m{[25;13H}[27;43H{[30;13H}[36;35H{[53;35H{[55;17H}[m[59;104H3[18;17H[?25h[?25l[4mj[m[59;104H4[18;18H[?25h[?25l[4mo[m[59;104H5[18;19H[?25h[?25l[4mb[m[59;104H6[18;20H[?25h[?25l[4mi[m[59;104H7[18;21H[?25h[?25l[4md[m[59;104H8[18;22H[?25h[?25l[59;104H9[18;23H[?25h[?25l[4m=[m[59;103H20[18;24H[?25h[?25l[4m=[m[59;104H1[18;25H[?25h[?25l[59;104H2[18;26H[?25h[?25l[4m[38;5;130m0[m[59;104H3[18;27H[?25h[?25l[4m)[m[22;45H{ [25;13H} [27;43H{ [30;13H} [36;35H{ [53;35H{ [55;17H} [59;103H12[18;16H[?25h[?25l[59;103H25[18;29H[?25h[?25l[4m{[m[59;104H6[18;30H[?25h[?25l[4m [m[59;104H5[18;29H[?25h[?25l[18;16H[4m[46m([10C)[m[59;104H4[18;28H[?25h[?25l[4m[46m [m[22;45H[1m[37m[41m{[25;13H}[27;43H{[30;13H}[36;35H{[53;35H{[55;17H}[m[18;16H[4m([10C [m[59;104H3[18;27H[?25h[?25l[4m [m[59;104H2[18;26H[?25h[?25l[59;104H1[18;25H[?25h[?25l[4m [m[59;104H0[18;24H[?25h[?25l[4m [m[59;103H19[18;23H[?25h[?25l[59;104H8[18;22H[?25h[?25l[4m [m[59;104H7[18;21H[?25h[?25l[4m [m[59;104H6[18;20H[?25h[?25l[4m [m[59;104H5[18;19H[?25h[?25l[4m [m[59;104H4[18;18H[?25h[?25l[4m [m[59;104H3[18;17H[?25h[?25l[4m [m[22;45H{ [25;13H} [27;43H{ [30;13H} [36;35H{ [53;35H{ [55;17H} [59;104H2[18;16H[?25h[?25l[59;104H1[18;15H[?25h[?25l[4mi [m[59;104H0[18;14H[?25h[?25l[4m [m[59;103H9 [18;13H[?25h[?25l[4mk[m[59;103H10[18;14H[?25h[?25l[4m [m[59;103H9 [18;13H[?25h[?25l[4mj[m[59;103H10[18;14H[?25h[?25l[4mo[m[59;104H1[18;15H[?25h[?25l[4mb[m[59;104H2[18;16H[?25h[?25l[4m=[m[59;104H3[18;17H[?25h[?25l[4m [m[59;104H2[18;16H[?25h[?25l[4mi[m[59;104H3[18;17H[?25h[?25l[4md[m[59;104H4[18;18H[?25h[?25l[4m+[m[59;104H5[18;19H[?25h[?25l[4m+[m[59;104H6[18;20H[?25h[?25l[4m;[m[59;104H7[18;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m126 [m[79C[100m [m
[33m127 [m    free(jobs);[64C[100m [m
[33m128 [m    [33mreturn[m [38;5;130m0[m;[66C[100m [m[59;99H[K[59;99H146,17[8C33%[21;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m123 [m[8Cfree(input);[59C[100m [m
[33m124 [m[8Cfree(tokens);[58C[100m [m
[33m125 [m    }[74C[100m [m[59;99H[K[59;99H146,17[8C32%[24;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m120 [m[8Cprintf([38;5;130m"> "[m);[58C[100m [m
[33m121 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m122 [m[79C[100m [m[59;99H[K[59;99H146,17[8C31%[27;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m117 [m[12Cprintf([38;5;130m"Error: Invalid command[m[35m\n[m[38;5;130m"[m);[32C[100m [m
[33m118 [m[8C}[70C[100m [m
[33m119 [m[79C[100m [m[59;99H[K[59;99H146,17[8C30%[30;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m114 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"cleanup"[m)) {[28C[100m [m
[33m115 [m[12Ccleanup();[57C[100m [m
[33m116 [m[8C} [33melse[m {[63C[100m [m[59;99H[K[59;99H146,17[8C30%[33;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m111 [m[12Crcv(args, spcs);[51C[100m [m
[33m112 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"eof"[m)) {[32C[100m [m
[33m113 [m[12Ceof(args, spcs);[51C[100m [m[59;99H[K[59;99H146,17[8C29%[36;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m108 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"send"[m)) {[31C[100m [m
[33m109 [m[12Csend(args, spcs);[50C[100m [m
[33m110 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"rcv"[m)) {[32C[100m [m[59;99H[K[59;99H146,17[8C28%[39;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m105 [m[12Ccall_signal(args, spcs);[43C[100m [m
[33m106 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"sleep"[m)) {[30C[100m [m
[33m107 [m[12Chq_wait(args, spcs);[47C[100m [m[59;99H[K[59;99H146,17[8C27%[42;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m102 [m[12C[36m// Report[m[58C[100m [m
[33m103 [m[12Creport(args, spcs);[48C[100m [m
[33m104 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"signal"[m)) {[29C[100m [m[59;99H[K[59;99H146,17[8C26%[45;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 99 [m[12C[36m// spawn[m[59C[100m [m
[33m100 [m[12Cspawn(args, spcs);[49C[100m [m
[33m101 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"report"[m)) {[29C[100m [m[59;99H[K[59;99H146,17[8C26%[48;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 96 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m 97 [m[79C[100m [m
[33m 98 [m[8C[33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"spawn"[m)) {[37C[100m [m[59;99H[K[59;99H146,17[8C25%[51;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 93 [m[12Cargs[i - [38;5;130m1[m] = tokens[i];[43C[100m [m
[33m 94 [m[8C}[70C[100m [m
[33m 95 [m[8Cargs[spcs - [38;5;130m1[m] = [38;5;130m0[m;[52C[100m [m[59;99H[K[59;99H146,17[8C24%[54;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 90 [m[79C[100m [m
[33m 91 [m[8C[32mchar[m* args[spcs];[54C[100m [m
[33m 92 [m[8C[33mfor[m ([32mint[m i = [38;5;130m1[m; i < spcs; i++) {[39C[100m [m[59;99H[K[59;99H146,17[8C23%[57;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 87 [m[12C[33mcontinue[m;[58C[100m [m
[33m 88 [m[8C}[70C[100m [m
[33m 89 [m[8Ctokens = split_space_not_quote(input, &spcs);[26C[100m [m[58;1H[93m144 [m[4m        jobs = rea[m[4m[38;5;248m[104mlloc[m[4m(jobs, (jobid + [m[4m[38;5;130m1[m[4m) * [m[4m[33msizeof[m[4m([m[4m[32mstruct[m[4m Job));                [m[4m[100m [m[4m                                [m[59;99H[K[59;99H144,17[8C22%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 84 [m[8C[33mif[m (!strcmp(input, [38;5;130m""[m)) {[46C[100m [m
[33m 85 [m[12Cprintf([38;5;130m"> "[m);[54C[100m [m
[33m 86 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m[58;1H[93m141 [m[4m    [m[4m[33mif[m[4m (spcs < [m[4m[38;5;130m2[m[4m) {                                                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H141,17[8C22%[58;12H[4m[46m([8C)[?25h[?25l[1;58r[m[1;1H[3L[1;59r[1;1H[33m 81 [m    [33mwhile[m ((input = read_line([38;5;130mstdin[m)) != [38;5;130mNULL[m) {[31C[100m [m
[33m 82 [m[8C[32mint[m spcs = [38;5;130m0[m;[58C[100m [m
[33m 83 [m[79C[100m [m[58;1H[93m138 [m[4m[36m * spcs: number of original tokens[m[4m                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H138,17[8C21%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 78 [m    printf([38;5;130m"> "[m);[62C[100m [m
[33m 79 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m 80 [m    [36m// prompt loop[m[61C[100m [m[58;1H[93m135 [m[4m[36m * of the child process is unchanged[m[4m                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H135,17[8C20%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 75 [m[79C[100m [m
[33m 76 [m    signal([38;5;130mSIGINT[m, handle_signal);[45C[100m [m
[33m 77 [m    signal([38;5;130mSIGCHLD[m, handle_signal);[44C[100m [m[58;1H[93m132 [m[4m[36m * -------[m[4m                                                                     [m[4m[100m [m[4m                                [m[59;99H[K[59;99H132,11[8C19%[58;15H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 72 [m    [32mchar[m** tokens;[61C[100m [m
[33m 73 [m[79C[100m [m
[33m 74 [m    jobs = ma[38;5;248m[104mlloc[m([38;5;130m0[m * [33msizeof[m([32mstruct[m Job));[37C[100m [m[58;1H[93m129 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H129,2[9C18%[58;6H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 69 [m[79C[100m [m
[33m 70 [m[32mint[m main([32mint[m argc, [32mchar[m* argv[]) {[45C[100m [m
[33m 71 [m    [32mchar[m* input;[63C[100m [m[58;1H[93m126 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H126,5[9C18%[58;9H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 66 [m[79C[100m [m
[33m 67 [m[79C[100m [m
[33m 68 [m[36m// Program[m[69C[100m [m[58;1H[93m123 [m[4m        free(input);                                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H123,17[8C17%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 63 [m[79C[100m [m
[33m 64 [m[32mint[m jobid = [38;5;130m0[m;[65C[100m [m
[33m 65 [m[32mstruct[m Job* jobs;[62C[100m [m[58;1H[93m120 [m[4m        printf([m[4m[38;5;130m"> "[m[4m);                                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H120,17[8C16%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 60 [m};[77C[100m [m
[33m 61 [m[79C[100m [m
[33m 62 [m[36m// Globals[m[69C[100m [m[58;1H[93m117 [m[4m            printf([m[4m[38;5;130m"Error: Invalid command[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                [m[4m[100m [m[4m                                [m[59;99H[K[59;99H117,17[8C15%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 57 [m    [32mint[m up[[38;5;130m2[m];[65C[100m [m
[33m 58 [m    [32mint[m status;[64C[100m [m
[33m 59 [m    [32mint[m finished;[62C[100m [m[58;1H[93m114 [m[4m        } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (!strcmp(tokens[[m[4m[38;5;130m0[m[4m], [m[4m[38;5;130m"cleanup"[m[4m)) {                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H114,17[8C14%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 54 [m    [32mint[m pid;[67C[100m [m
[33m 55 [m    [32mchar[m name[MAX_BUFFER_SIZE];[48C[100m [m
[33m 56 [m    [32mint[m down[[38;5;130m2[m];[63C[100m [m[58;1H[93m111 [m[4m            rcv(args, spcs);                                                   [m[4m[100m [m[4m                                [m[59;99H[K[59;99H111,17[8C14%[58;20H[4m[46m([10C)[58;21H[?25h[?25l[1;58r[m[1;1H[3L[1;59r[1;1H[33m 51 [m[36m// Structs[m[69C[100m [m
[33m 52 [m[79C[100m [m
[33m 53 [m[32mstruct[m Job {[67C[100m [m[58;1H[93m108 [m[4m        } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (!strcmp(tokens[[m[4m[38;5;130m0[m[4m], [m[4m[38;5;130m"send"[m[4m)) {                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H108,17[8C13%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 48 [m[79C[100m [m
[33m 49 [m[32mbool[m is_job([32mchar[m job[]);[55C[100m [m
[33m 50 [m[79C[100m [m[58;1H[93m105 [m[4m            call_signal(args, spcs);                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H105,17[8C12%[58;21H[1;58r[1;1H[3L[1;59r[1;1H[33m 45 [m[32mvoid[m handle_signal([32mint[m s);[53C[100m [m
[33m 46 [m[79C[100m [m
[33m 47 [m[32mbool[m is_number([32mchar[m number[]);[49C[100m [m[58;1H[93m102 [m[4m            [m[4m[36m// Report[m[4m                                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H102,17[8C11%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 42 [m[79C[100m [m
[33m 43 [m[32mvoid[m cleanup([32mvoid[m);[60C[100m [m
[33m 44 [m[79C[100m [m[58;1H[93m 99 [m[4m            [m[4m[36m// spawn[m[4m                                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H99,17[9C10%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 39 [m[32mvoid[m rcv([32mchar[m** args, [32mint[m spcs);[47C[100m [m
[33m 40 [m[79C[100m [m
[33m 41 [m[32mvoid[m eof([32mchar[m** args, [32mint[m spcs);[47C[100m [m[58;1H[93m 96 [m[4m        fflush([m[4m[38;5;130mstdout[m[4m);                                                        [m[4m[100m [m[4m                                [m[59;99H[K[59;99H96,17[9C10%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 36 [m[79C[100m [m
[33m 37 [m[32mvoid[m send([32mchar[m** args, [32mint[m spcs);[46C[100m [m
[33m 38 [m[79C[100m [m[58;1H[93m 93 [m[4m            args[i - [m[4m[38;5;130m1[m[4m] = tokens[i];                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H93,17[10C9%[58;21H[4m[46m[[5C][58;21H[?25h[?25l[1;58r[m[1;1H[3L[1;59r[1;1H[33m 33 [m[32mvoid[m call_signal([32mchar[m** args, [32mint[m spcs);[39C[100m [m
[33m 34 [m[79C[100m [m
[33m 35 [m[32mvoid[m hq_wait([32mchar[m** args, [32mint[m spcs);[43C[100m [m[58;1H[93m 90 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H90,1[11C8%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 30 [m[79C[100m [m
[33m 31 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs);[44C[100m [m
[33m 32 [m[79C[100m [m[58;1H[93m 87 [m[4m            [m[4m[33mcontinue[m[4m;                                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H87,17[10C7%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 27 [m[36m// Function declarations[m[55C[100m [m
[33m 28 [m[79C[100m [m
[33m 29 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs);[45C[100m [m[58;1H[93m 84 [m[4m        [m[4m[33mif[m[4m (!strcmp(input, [m[4m[38;5;130m""[m[4m)) {                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H84,17[10C6%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 24 [m[79C[100m [m
[33m 25 [m[35m#endif[m      [36m// hq_h[m[60C[100m [m
[33m 26 [m[79C[100m [m[58;1H[93m 81 [m[4m    [m[4m[33mwhile[m[4m ((input = read_line([m[4m[38;5;130mstdin[m[4m)) != [m[4m[38;5;130mNULL[m[4m) {                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H81,17[10C6%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 21 [m[35m#define MAX_BUFFER_SIZE [m[38;5;130m52[m[53C[100m [m
[33m 22 [m[35m#define READ [m[38;5;130m0[m[65C[100m [m
[33m 23 [m[35m#define WRITE [m[38;5;130m1[m[64C[100m [m[58;1H[93m 78 [m[4m    printf([m[4m[38;5;130m"> "[m[4m);                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H78,17[10C5%[58;15H[4m[46m([4C)[?25h[?25l[1;58r[m[1;1H[3L[1;59r[1;1H[33m 18 [m[79C[100m [m
[33m 19 [m[36m// Defintions[m[66C[100m [m
[33m 20 [m[79C[100m [m[58;1H[93m 75 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H75,5[11C4%[58;9H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 15 [m[35m#include [m[38;5;130m<signal.h>[m[60C[100m [m
[33m 16 [m[35m#include [m[38;5;130m<ctype.h>[m[61C[100m [m
[33m 17 [m[35m#include [m[38;5;130m<stdbool.h>[m[59C[100m [m[58;1H[93m 72 [m[4m    [m[4m[32mchar[m[4m** tokens;                                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H72,17[10C3%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 12 [m[35m#include [m[38;5;130m<fcntl.h>[m[61C[100m [m
[33m 13 [m[35m#include [m[38;5;130m<unistd.h>[m[60C[100m [m
[33m 14 [m[35m#include [m[38;5;130m<sys/wait.h>[m[58C[100m [m[58;1H[93m 69 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H69,1[11C2%[58;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 70 [m[32mint[m main([32mint[m argc, [32mchar[m* argv[]) {[45C[100m [m
[33m 71 [m    [32mchar[m* input;[63C[100m [m
[33m 72 [m    [32mchar[m** tokens;[61C[100m [m[59;99H[K[59;99H69,1[11C3%[55;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 73 [m[79C[100m [m
[33m 74 [m    jobs = ma[38;5;248m[104mlloc[m([38;5;130m0[m * [33msizeof[m([32mstruct[m Job));[37C[100m [m
[33m 75 [m[79C[100m [m[59;99H[K[59;99H69,1[11C4%[52;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 76 [m    signal([38;5;130mSIGINT[m, handle_signal);[45C[100m [m
[33m 77 [m    signal([38;5;130mSIGCHLD[m, handle_signal);[44C[100m [m
[33m 78 [m    printf([38;5;130m"> "[m);[62C[100m [m[59;99H[K[59;99H69,1[11C5%[49;5H[?25h[?25l[44;1H[93m 64 [m[4m[32mint[m[4m jobid = [m[4m[38;5;130m0[m[4m;                                                                 [m[4m[100m [m[4m                                [m[49;1H[33m 69 [m                                                                               [100m [m[49;85H[K[59;100H4[44;5H[?25h[?25l[59;103H4[44;18H[?25h[?25l[4m0i;[m[59;103H5[44;19H[?25h[?25l[4m[38;5;130m0[m[4m; [m[59;103H4[44;18H[?25h[?25l[4m; [m[59;103H3[44;17H[?25h[?25l[4m-;[m[59;103H4[44;18H[?25h[?25l[4m[38;5;130m1[m[4m;[m[59;103H5[44;19H[?25h[59;1H[K[44;18H[?25l[59;99H64,14[10C5%[44;18H[?25h[?25l[59;99H[K[59;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?1000l[?2004l"hq.c" 433L, 10703C written
[?2004l[?1l>[?25h[?1049l[23;0;0ts4698512@moss:~/CSSE2310/Assignments/a3$ make
gcc -g -Wall -pedantic -std=gnu99 -o hq hq.c -I/local/courses/csse2310/include -L/local/courses/csse2310/lib -lcsse2310a3
s4698512@moss:~/CSSE2310/Assignments/a3$ ./hq
> spawn ls  ca at
Segmentation fault
s4698512@moss:~/CSSE2310/Assignments/a3$ s[K./hqmake./hqmake./hqmakevim hq.c
[?1000h[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;59r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[59;1H"hq.c" 433L, 10703C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[33m  7 [m[35m#ifndef hq_h[m[67C[100m [m
[33m  8 [m[35m#include [m[38;5;130m<stdlib.h>[m[60C[100m [m
[33m  9 [m[35m#include [m[38;5;130m<stdio.h>[m[61C[100m [m
[33m 10 [m[35m#include [m[38;5;130m<string.h>[m[60C[100m [m
[33m 11 [m[35m#include [m[38;5;130m<csse2310a3.h>[m     [36m// given library[m[35C[100m [m
[33m 12 [m[35m#include [m[38;5;130m<fcntl.h>[m[61C[100m [m
[33m 13 [m[35m#include [m[38;5;130m<unistd.h>[m[60C[100m [m
[33m 14 [m[35m#include [m[38;5;130m<sys/wait.h>[m[58C[100m [m
[33m 15 [m[35m#include [m[38;5;130m<signal.h>[m[60C[100m [m
[33m 16 [m[35m#include [m[38;5;130m<ctype.h>[m[61C[100m [m
[33m 17 [m[35m#include [m[38;5;130m<stdbool.h>[m[59C[100m [m
[33m 18 [m[79C[100m [m
[33m 19 [m[36m// Defintions[m[66C[100m [m
[33m 20 [m[79C[100m [m
[33m 21 [m[35m#define MAX_BUFFER_SIZE [m[38;5;130m52[m[53C[100m [m
[33m 22 [m[35m#define READ [m[38;5;130m0[m[65C[100m [m
[33m 23 [m[35m#define WRITE [m[38;5;130m1[m[64C[100m [m
[33m 24 [m[79C[100m [m
[33m 25 [m[35m#endif[m      [36m// hq_h[m[60C[100m [m
[33m 26 [m[79C[100m [m
[33m 27 [m[36m// Function declarations[m[55C[100m [m
[33m 28 [m[79C[100m [m
[33m 29 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs);[45C[100m [m
[33m 30 [m[79C[100m [m
[33m 31 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs);[44C[100m [m
[33m 32 [m[79C[100m [m
[33m 33 [m[32mvoid[m call_signal([32mchar[m** args, [32mint[m spcs);[39C[100m [m
[33m 34 [m[79C[100m [m
[33m 35 [m[32mvoid[m hq_wait([32mchar[m** args, [32mint[m spcs);[43C[100m [m
[33m 36 [m[79C[100m [m
[33m 37 [m[32mvoid[m send([32mchar[m** args, [32mint[m spcs);[46C[100m [m
[33m 38 [m[79C[100m [m
[33m 39 [m[32mvoid[m rcv([32mchar[m** args, [32mint[m spcs);[47C[100m [m
[33m 40 [m[79C[100m [m
[33m 41 [m[32mvoid[m eof([32mchar[m** args, [32mint[m spcs);[47C[100m [m
[33m 42 [m[79C[100m [m
[33m 43 [m[32mvoid[m cleanup([32mvoid[m);[60C[100m [m
[33m 44 [m[79C[100m [m
[33m 45 [m[32mvoid[m handle_signal([32mint[m s);[53C[100m [m
[33m 46 [m[79C[100m [m
[33m 47 [m[32mbool[m is_number([32mchar[m number[]);[49C[100m [m
[33m 48 [m[79C[100m [m
[33m 49 [m[32mbool[m is_job([32mchar[m job[]);[55C[100m [m
[33m 50 [m[79C[100m [m
[33m 51 [m[36m// Structs[m[69C[100m [m
[33m 52 [m[79C[100m [m
[33m 53 [m[32mstruct[m Job {[67C[100m [m
[33m 54 [m    [32mint[m pid;[67C[100m [m
[33m 55 [m    [32mchar[m name[MAX_BUFFER_SIZE];[48C[100m [m
[33m 56 [m    [32mint[m down[[38;5;130m2[m];[63C[100m [m
[33m 57 [m    [32mint[m up[[38;5;130m2[m];[65C[100m [m
[33m 58 [m    [32mint[m status;[64C[100m [m
[33m 59 [m    [32mint[m finished;[62C[100m [m
[33m 60 [m};[77C[100m [m
[33m 61 [m[79C[100m [m
[33m 62 [m[36m// Globals[m[69C[100m [m
[33m 63 [m[79C[100m [m
[93m 64 [m[4m[32mint[m[4m jobid = -[m[4m[38;5;130m1[m[4m;                                                                [m[4m[100m [m[4m                                [m[59;99H64,1[11C1%[58;5H[?25h[?12$p[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 65 [m[32mstruct[m Job* jobs;[62C[100m [m
[33m 66 [m[79C[100m [m
[33m 67 [m[79C[100m [m[59;1H[K[59;99H64,1[11C2%[55;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 68 [m[36m// Program[m[69C[100m [m
[33m 69 [m[79C[100m [m
[33m 70 [m[32mint[m main([32mint[m argc, [32mchar[m* argv[]) {[45C[100m [m[59;99H[K[59;99H64,1[11C3%[52;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 71 [m    [32mchar[m* input;[63C[100m [m
[33m 72 [m    [32mchar[m** tokens;[61C[100m [m
[33m 73 [m[79C[100m [m[59;99H[K[59;99H64,1[11C4%[49;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 74 [m    jobs = ma[38;5;248m[104mlloc[m([38;5;130m0[m * [33msizeof[m([32mstruct[m Job));[37C[100m [m
[33m 75 [m[79C[100m [m
[33m 76 [m    signal([38;5;130mSIGINT[m, handle_signal);[45C[100m [m[59;99H[K[59;99H64,1[11C4%[46;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 77 [m    signal([38;5;130mSIGCHLD[m, handle_signal);[44C[100m [m
[33m 78 [m    printf([38;5;130m"> "[m);[62C[100m [m
[33m 79 [m    fflush([38;5;130mstdout[m);[60C[100m [m[59;99H[K[59;99H64,1[11C5%[43;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 80 [m    [36m// prompt loop[m[61C[100m [m
[33m 81 [m    [33mwhile[m ((input = read_line([38;5;130mstdin[m)) != [38;5;130mNULL[m) {[31C[100m [m
[33m 82 [m[8C[32mint[m spcs = [38;5;130m0[m;[58C[100m [m[59;99H[K[59;99H64,1[11C6%[40;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 83 [m[79C[100m [m
[33m 84 [m[8C[33mif[m (!strcmp(input, [38;5;130m""[m)) {[46C[100m [m
[33m 85 [m[12Cprintf([38;5;130m"> "[m);[54C[100m [m[59;99H[K[59;99H64,1[11C7%[37;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 86 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m 87 [m[12C[33mcontinue[m;[58C[100m [m
[33m 88 [m[8C}[70C[100m [m[59;99H[K[59;99H64,1[11C8%[34;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 89 [m[8Ctokens = split_space_not_quote(input, &spcs);[26C[100m [m
[33m 90 [m[79C[100m [m
[33m 91 [m[8C[32mchar[m* args[spcs];[54C[100m [m[59;99H[K[59;99H64,1[11C8%[31;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 92 [m[8C[33mfor[m ([32mint[m i = [38;5;130m1[m; i < spcs; i++) {[39C[100m [m
[33m 93 [m[12Cargs[i - [38;5;130m1[m] = tokens[i];[43C[100m [m
[33m 94 [m[8C}[70C[100m [m[59;99H[K[59;99H64,1[11C9%[28;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 95 [m[8Cargs[spcs - [38;5;130m1[m] = [38;5;130m0[m;[52C[100m [m
[33m 96 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m 97 [m[79C[100m [m[59;99H[K[59;99H64,1[10C10%[25;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 98 [m[8C[33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"spawn"[m)) {[37C[100m [m
[33m 99 [m[12C[36m// spawn[m[59C[100m [m
[33m100 [m[12Cspawn(args, spcs);[49C[100m [m[59;99H[K[59;99H64,1[10C11%[22;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m101 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"report"[m)) {[29C[100m [m
[33m102 [m[12C[36m// Report[m[58C[100m [m
[33m103 [m[12Creport(args, spcs);[48C[100m [m[59;99H[K[59;99H64,1[10C12%[19;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m104 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"signal"[m)) {[29C[100m [m
[33m105 [m[12Ccall_signal(args, spcs);[43C[100m [m
[33m106 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"sleep"[m)) {[30C[100m [m[59;99H[K[59;99H64,1[10C12%[16;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m107 [m[12Chq_wait(args, spcs);[47C[100m [m
[33m108 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"send"[m)) {[31C[100m [m
[33m109 [m[12Csend(args, spcs);[50C[100m [m[59;99H[K[59;99H64,1[10C13%[13;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m110 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"rcv"[m)) {[32C[100m [m
[33m111 [m[12Crcv(args, spcs);[51C[100m [m
[33m112 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"eof"[m)) {[32C[100m [m[59;99H[K[59;99H64,1[10C14%[10;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m113 [m[12Ceof(args, spcs);[51C[100m [m
[33m114 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"cleanup"[m)) {[28C[100m [m
[33m115 [m[12Ccleanup();[57C[100m [m[59;99H[K[59;99H64,1[10C15%[7;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m116 [m[8C} [33melse[m {[63C[100m [m
[33m117 [m[12Cprintf([38;5;130m"Error: Invalid command[m[35m\n[m[38;5;130m"[m);[32C[100m [m
[33m118 [m[8C}[70C[100m [m[59;99H[K[59;99H64,1[10C16%[4;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m119 [m[79C[100m [m
[33m120 [m[8Cprintf([38;5;130m"> "[m);[58C[100m [m
[33m121 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m[59;99H[K[59;99H64,1[10C16%[1;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 61 [m[79C[100m [m
[33m 62 [m[36m// Globals[m[69C[100m [m
[33m 63 [m[79C[100m [m[59;99H[K[59;99H64,1[10C16%[4;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 58 [m    [32mint[m status;[64C[100m [m
[33m 59 [m    [32mint[m finished;[62C[100m [m
[33m 60 [m};[77C[100m [m[59;99H[K[59;99H64,1[10C15%[7;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 55 [m    [32mchar[m name[MAX_BUFFER_SIZE];[48C[100m [m
[33m 56 [m    [32mint[m down[[38;5;130m2[m];[63C[100m [m
[33m 57 [m    [32mint[m up[[38;5;130m2[m];[65C[100m [m[59;99H[K[59;99H64,1[10C14%[10;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 52 [m[79C[100m [m
[33m 53 [m[32mstruct[m Job {[67C[100m [m
[33m 54 [m    [32mint[m pid;[67C[100m [m[59;99H[K[59;99H64,1[10C13%[13;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 49 [m[32mbool[m is_job([32mchar[m job[]);[55C[100m [m
[33m 50 [m[79C[100m [m
[33m 51 [m[36m// Structs[m[69C[100m [m[59;99H[K[59;99H64,1[10C12%[16;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 46 [m[79C[100m [m
[33m 47 [m[32mbool[m is_number([32mchar[m number[]);[49C[100m [m
[33m 48 [m[79C[100m [m[59;99H[K[59;99H64,1[10C12%[19;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 43 [m[32mvoid[m cleanup([32mvoid[m);[60C[100m [m
[33m 44 [m[79C[100m [m
[33m 45 [m[32mvoid[m handle_signal([32mint[m s);[53C[100m [m[59;99H[K[59;99H64,1[10C11%[22;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m101 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"report"[m)) {[29C[100m [m
[33m102 [m[12C[36m// Report[m[58C[100m [m
[33m103 [m[12Creport(args, spcs);[48C[100m [m[59;99H[K[59;99H64,1[10C12%[19;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m104 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"signal"[m)) {[29C[100m [m
[33m105 [m[12Ccall_signal(args, spcs);[43C[100m [m
[33m106 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"sleep"[m)) {[30C[100m [m[59;99H[K[59;99H64,1[10C12%[16;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m107 [m[12Chq_wait(args, spcs);[47C[100m [m
[33m108 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"send"[m)) {[31C[100m [m
[33m109 [m[12Csend(args, spcs);[50C[100m [m[59;99H[K[59;99H64,1[10C13%[13;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m110 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"rcv"[m)) {[32C[100m [m
[33m111 [m[12Crcv(args, spcs);[51C[100m [m
[33m112 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"eof"[m)) {[32C[100m [m[59;99H[K[59;99H64,1[10C14%[10;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m113 [m[12Ceof(args, spcs);[51C[100m [m
[33m114 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"cleanup"[m)) {[28C[100m [m
[33m115 [m[12Ccleanup();[57C[100m [m[59;99H[K[59;99H64,1[10C15%[7;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m116 [m[8C} [33melse[m {[63C[100m [m
[33m117 [m[12Cprintf([38;5;130m"Error: Invalid command[m[35m\n[m[38;5;130m"[m);[32C[100m [m
[33m118 [m[8C}[70C[100m [m[59;99H[K[59;99H64,1[10C16%[4;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m119 [m[79C[100m [m
[33m120 [m[8Cprintf([38;5;130m"> "[m);[58C[100m [m
[33m121 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m[59;99H[K[59;99H64,1[10C16%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 67 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m122 [m[79C[100m [m
[33m123 [m[8Cfree(input);[59C[100m [m
[33m124 [m[8Cfree(tokens);[58C[100m [m[59;99H[K[59;99H67,0-1[8C17%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 70 [m[4m[32mint[m[4m main([m[4m[32mint[m[4m argc, [m[4m[32mchar[m[4m* argv[]) {                                             [m[4m[100m [m[4m                                [m[56;1H[33m125 [m    }[74C[100m [m
[33m126 [m[79C[100m [m
[33m127 [m    free(jobs);[64C[100m [m[59;99H[K[59;99H70,1[10C18%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 73 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m128 [m    [33mreturn[m [38;5;130m0[m;[66C[100m [m
[33m129 [m}[78C[100m [m
[33m130 [m[79C[100m [m[59;99H[K[59;99H73,1[10C19%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 76 [m[4m    signal([m[4m[38;5;130mSIGINT[m[4m, handle_signal);                                             [m[4m[100m [m[4m                                [m[56;1H[33m131 [m[36m/* spawn()[m[69C[100m [m
[33m132 [m[36m * -------[m[69C[100m [m
[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m[59;99H[K[59;99H76,1[10C20%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 79 [m[4m    fflush([m[4m[38;5;130mstdout[m[4m);                                                            [m[4m[100m [m[4m                                [m[56;1H[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m
[33m135 [m[36m * of the child process is unchanged[m[43C[100m [m
[33m136 [m[36m *[m[77C[100m [m[59;99H[K[59;99H79,1[10C20%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 82 [m[4m        [m[4m[32mint[m[4m spcs = [m[4m[38;5;130m0[m[4m;                                                          [m[4m[100m [m[4m                                [m[56;1H[33m137 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m138 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m139 [m[36m */[m[76C[100m [m[59;99H[K[59;99H82,1[10C21%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 85 [m[4m            printf([m[4m[38;5;130m"> "[m[4m);                                                      [m[4m[100m [m[4m                                [m[56;1H[33m140 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs) {[44C[100m [m
[33m141 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m142 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m[59;99H[K[59;99H85,1[10C22%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 88 [m[4m        }                                                                      [m[4m[100m [m[4m                                [m[56;1H[33m143 [m    } [33melse[m {[67C[100m [m
[33m144 [m[8Cjobs = rea[38;5;248m[104mlloc[m(jobs, (jobid + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));[16C[100m [m
[33m145 [m[79C[100m [m[59;99H[K[59;99H88,1[10C23%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 91 [m[4m        [m[4m[32mchar[m[4m* args[spcs];                                                      [m[4m[100m [m[4m                                [m[56;1H[33m146 [m[8Cjobid++;[63C[100m [m
[33m147 [m[79C[100m [m
[33m148 [m[8Cstrcpy(jobs[jobid].name, args[[38;5;130m0[m]);[37C[100m [m[59;99H[K[59;99H91,1[10C24%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 94 [m[4m        }                                                                      [m[4m[100m [m[4m                                [m[56;1H[33m149 [m[79C[100m [m
[33m150 [m[8C[33mif[m (pipe(jobs[jobid].down) < [38;5;130m0[m) {[38C[100m [m
[33m151 [m[12Cperror([38;5;130m"Creating down pipe"[m);[38C[100m [m[59;99H[K[59;99H94,1[10C24%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 97 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m152 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m153 [m[8C}[70C[100m [m
[33m154 [m[79C[100m [m[59;99H[K[59;99H97,0-1[8C25%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m100 [m[4m            spawn(args, spcs);                                                 [m[4m[100m [m[4m                                [m[56;1H[33m155 [m[8C[33mif[m (pipe(jobs[jobid].up) < [38;5;130m0[m) {[40C[100m [m
[33m156 [m[12Cperror([38;5;130m"Creating up pipe"[m);[40C[100m [m
[33m157 [m[12Cexit([38;5;130m1[m);[59C[100m [m[59;99H[K[59;99H100,1[9C26%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m103 [m[4m            report(args, spcs);                                                [m[4m[100m [m[4m                                [m[56;1H[33m158 [m[8C}[70C[100m [m
[33m159 [m[79C[100m [m
[33m160 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, jobid);[28C[100m [m[59;99H[K[59;99H103,1[9C27%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m106 [m[4m        } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (!strcmp(tokens[[m[4m[38;5;130m0[m[4m], [m[4m[38;5;130m"sleep"[m[4m)) {                              [m[4m[100m [m[4m                                [m[56;1H[33m161 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m162 [m[79C[100m [m
[33m163 [m[8Cjobs[jobid].pid = fork();[46C[100m [m[59;99H[K[59;99H106,1[9C28%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m109 [m[4m            send(args, spcs);                                                  [m[4m[100m [m[4m                                [m[56;1H[33m164 [m[8C[33mif[m (!jobs[jobid].pid) {[48C[100m [m
[33m165 [m[12C[36m// child[m[59C[100m [m
[33m166 [m[79C[100m [m[59;99H[K[59;99H109,1[9C28%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m112 [m[4m        } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (!strcmp(tokens[[m[4m[38;5;130m0[m[4m], [m[4m[38;5;130m"eof"[m[4m)) {                                [m[4m[100m [m[4m                                [m[56;1H[33m167 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m168 [m[12Cclose(jobs[jobid].down[WRITE]);[36C[100m [m
[33m169 [m[12Cclose(jobs[jobid].up[READ]);[39C[100m [m[59;99H[K[59;99H112,1[9C29%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m115 [m[4m            cleanup();                                                         [m[4m[100m [m[4m                                [m[56;1H[33m170 [m[79C[100m [m
[33m171 [m[12Cdup2(jobs[jobid].down[READ], STDIN_FILENO);[24C[100m [m
[33m172 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m[59;99H[K[59;99H115,1[9C30%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m118 [m[4m        }                                                                      [m[4m[100m [m[4m                                [m[56;1H[33m173 [m[12Cdup2(jobs[jobid].up[WRITE], STDOUT_FILENO);[24C[100m [m
[33m174 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m
[33m175 [m[79C[100m [m[59;99H[K[59;99H118,1[9C31%[1;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m115 [m[12Ccleanup();[57C[100m [m
[33m116 [m[8C} [33melse[m {[63C[100m [m
[33m117 [m[12Cprintf([38;5;130m"Error: Invalid command[m[35m\n[m[38;5;130m"[m);[32C[100m [m[59;99H[K[59;99H118,1[9C30%[4;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m112 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"eof"[m)) {[32C[100m [m
[33m113 [m[12Ceof(args, spcs);[51C[100m [m
[33m114 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"cleanup"[m)) {[28C[100m [m[59;99H[K[59;99H118,1[9C29%[7;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m109 [m[12Csend(args, spcs);[50C[100m [m
[33m110 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"rcv"[m)) {[32C[100m [m
[33m111 [m[12Crcv(args, spcs);[51C[100m [m[59;99H[K[59;99H118,1[9C28%[10;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m106 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"sleep"[m)) {[30C[100m [m
[33m107 [m[12Chq_wait(args, spcs);[47C[100m [m
[33m108 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"send"[m)) {[31C[100m [m[59;99H[K[59;99H118,1[9C28%[13;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m103 [m[12Creport(args, spcs);[48C[100m [m
[33m104 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"signal"[m)) {[29C[100m [m
[33m105 [m[12Ccall_signal(args, spcs);[43C[100m [m[59;99H[K[59;99H118,1[9C27%[16;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m100 [m[12Cspawn(args, spcs);[49C[100m [m
[33m101 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"report"[m)) {[29C[100m [m
[33m102 [m[12C[36m// Report[m[58C[100m [m[59;99H[K[59;99H118,1[9C26%[19;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 97 [m[79C[100m [m
[33m 98 [m[8C[33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"spawn"[m)) {[37C[100m [m
[33m 99 [m[12C[36m// spawn[m[59C[100m [m[59;99H[K[59;99H118,1[9C25%[22;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 94 [m[8C}[70C[100m [m
[33m 95 [m[8Cargs[spcs - [38;5;130m1[m] = [38;5;130m0[m;[52C[100m [m
[33m 96 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m[59;99H[K[59;99H118,1[9C24%[25;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 91 [m[8C[32mchar[m* args[spcs];[54C[100m [m
[33m 92 [m[8C[33mfor[m ([32mint[m i = [38;5;130m1[m; i < spcs; i++) {[39C[100m [m
[33m 93 [m[12Cargs[i - [38;5;130m1[m] = tokens[i];[43C[100m [m[59;99H[K[59;99H118,1[9C24%[28;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 88 [m[8C}[70C[100m [m
[33m 89 [m[8Ctokens = split_space_not_quote(input, &spcs);[26C[100m [m
[33m 90 [m[79C[100m [m[59;99H[K[59;99H118,1[9C23%[31;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 85 [m[12Cprintf([38;5;130m"> "[m);[54C[100m [m
[33m 86 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m 87 [m[12C[33mcontinue[m;[58C[100m [m[59;99H[K[59;99H118,1[9C22%[34;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 82 [m[8C[32mint[m spcs = [38;5;130m0[m;[58C[100m [m
[33m 83 [m[79C[100m [m
[33m 84 [m[8C[33mif[m (!strcmp(input, [38;5;130m""[m)) {[46C[100m [m[59;99H[K[59;99H118,1[9C21%[37;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 79 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m 80 [m    [36m// prompt loop[m[61C[100m [m
[33m 81 [m    [33mwhile[m ((input = read_line([38;5;130mstdin[m)) != [38;5;130mNULL[m) {[31C[100m [m[59;99H[K[59;99H118,1[9C20%[40;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 76 [m    signal([38;5;130mSIGINT[m, handle_signal);[45C[100m [m
[33m 77 [m    signal([38;5;130mSIGCHLD[m, handle_signal);[44C[100m [m
[33m 78 [m    printf([38;5;130m"> "[m);[62C[100m [m[59;99H[K[59;99H118,1[9C20%[43;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 73 [m[79C[100m [m
[33m 74 [m    jobs = ma[38;5;248m[104mlloc[m([38;5;130m0[m * [33msizeof[m([32mstruct[m Job));[37C[100m [m
[33m 75 [m[79C[100m [m[59;99H[K[59;99H118,1[9C19%[46;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 70 [m[32mint[m main([32mint[m argc, [32mchar[m* argv[]) {[45C[100m [m
[33m 71 [m    [32mchar[m* input;[63C[100m [m
[33m 72 [m    [32mchar[m** tokens;[61C[100m [m[59;99H[K[59;99H118,1[9C18%[49;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 67 [m[79C[100m [m
[33m 68 [m[36m// Program[m[69C[100m [m
[33m 69 [m[79C[100m [m[59;99H[K[59;99H118,1[9C17%[52;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 64 [m[32mint[m jobid = -[38;5;130m1[m;[64C[100m [m
[33m 65 [m[32mstruct[m Job* jobs;[62C[100m [m
[33m 66 [m[79C[100m [m[59;99H[K[59;99H118,1[9C16%[55;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 61 [m[79C[100m [m
[33m 62 [m[36m// Globals[m[69C[100m [m
[33m 63 [m[79C[100m [m[59;99H[K[59;99H118,1[9C16%[58;5H[?25h[?25l[59;99H[K[59;1H/[?2004h[?25hj[?25l[?25ho[?25l[?25hb[?25l[?25hi[?25l[?25hd[?25l[?25h[?25l[1;58r[1;1H[26M[1;59r[32;1H[33m118 [m        }                                                                      [100m [m[32;85H[K[33;1H[33m119 [m[79C[100m [m
[33m120 [m[8Cprintf([38;5;130m"> "[m);[58C[100m [m
[33m121 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m122 [m[79C[100m [m
[33m123 [m[8Cfree(input);[59C[100m [m
[33m124 [m[8Cfree(tokens);[58C[100m [m
[33m125 [m    }[74C[100m [m
[33m126 [m[79C[100m [m
[33m127 [m    free(jobs);[64C[100m [m
[33m128 [m    [33mreturn[m [38;5;130m0[m;[66C[100m [m
[33m129 [m}[78C[100m [m
[33m130 [m[79C[100m [m
[33m131 [m[36m/* spawn()[m[69C[100m [m
[33m132 [m[36m * -------[m[69C[100m [m
[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m
[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m
[33m135 [m[36m * of the child process is unchanged[m[43C[100m [m
[33m136 [m[36m *[m[77C[100m [m
[33m137 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m138 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m139 [m[36m */[m[76C[100m [m
[33m140 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs) {[44C[100m [m
[33m141 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m142 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m143 [m    } [33melse[m {[67C[100m [m
[93m144 [m[4m        jobs = realloc(jobs, ([m[4m[38;5;248m[104mjobid[m[4m + [m[4m[38;5;130m1[m[4m) * [m[4m[33msizeof[m[4m([m[4m[32mstruct[m[4m Job));                [m[4m[100m [m[4m                                [m[59;1H[K[59;99H144,31[8C22%[58;35H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 84 [m[8C[33mif[m (!strcmp(input, [38;5;130m""[m)) {[46C[100m [m
[33m 85 [m[12Cprintf([38;5;130m"> "[m);[54C[100m [m
[33m 86 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m[58;1H[93m141 [m[4m    [m[4m[33mif[m[4m (spcs < [m[4m[38;5;130m2[m[4m) {                                                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H141,19[8C22%[58;23H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 81 [m    [33mwhile[m ((input = read_line([38;5;130mstdin[m)) != [38;5;130mNULL[m) {[31C[100m [m
[33m 82 [m[8C[32mint[m spcs = [38;5;130m0[m;[58C[100m [m
[33m 83 [m[79C[100m [m[58;1H[93m138 [m[4m[36m * spcs: number of original tokens[m[4m                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H138,31[8C21%[58;35H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 78 [m    printf([38;5;130m"> "[m);[62C[100m [m
[33m 79 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m 80 [m    [36m// prompt loop[m[61C[100m [m[58;1H[93m135 [m[4m[36m * of the child process is unchanged[m[4m                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H135,31[8C20%[58;35H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 75 [m[79C[100m [m
[33m 76 [m    signal([38;5;130mSIGINT[m, handle_signal);[45C[100m [m
[33m 77 [m    signal([38;5;130mSIGCHLD[m, handle_signal);[44C[100m [m[58;1H[93m132 [m[4m[36m * -------[m[4m                                                                     [m[4m[100m [m[4m                                [m[59;99H[K[59;99H132,10[8C19%[58;14H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 72 [m    [32mchar[m** tokens;[61C[100m [m
[33m 73 [m[79C[100m [m
[33m 74 [m    jobs = malloc([38;5;130m0[m * [33msizeof[m([32mstruct[m Job));[37C[100m [m[58;1H[93m129 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H129,1[9C18%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 69 [m[79C[100m [m
[33m 70 [m[32mint[m main([32mint[m argc, [32mchar[m* argv[]) {[45C[100m [m
[33m 71 [m    [32mchar[m* input;[63C[100m [m[58;1H[93m126 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H126,4[9C18%[58;8H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 66 [m[79C[100m [m
[33m 67 [m[79C[100m [m
[33m 68 [m[36m// Program[m[69C[100m [m[58;1H[93m123 [m[4m        free(input);                                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H123,20[8C17%[58;24H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 63 [m[79C[100m [m
[33m 64 [m[32mint[m [38;5;248m[104mjobid[m = -[38;5;130m1[m;[64C[100m [m
[33m 65 [m[32mstruct[m Job* jobs;[62C[100m [m[58;1H[93m120 [m[4m        printf([m[4m[38;5;130m"> "[m[4m);                                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H120,21[8C16%[58;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 60 [m};[77C[100m [m
[33m 61 [m[79C[100m [m
[33m 62 [m[36m// Globals[m[69C[100m [m[58;1H[93m117 [m[4m            printf([m[4m[38;5;130m"Error: Invalid command[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                [m[4m[100m [m[4m                                [m[59;99H[K[59;99H117,31[8C15%[58;35H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 57 [m    [32mint[m up[[38;5;130m2[m];[65C[100m [m
[33m 58 [m    [32mint[m status;[64C[100m [m
[33m 59 [m    [32mint[m finished;[62C[100m [m[58;1H[93m114 [m[4m        } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (!strcmp(tokens[[m[4m[38;5;130m0[m[4m], [m[4m[38;5;130m"cleanup"[m[4m)) {                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H114,31[8C14%[58;35H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 54 [m    [32mint[m pid;[67C[100m [m
[33m 55 [m    [32mchar[m name[MAX_BUFFER_SIZE];[48C[100m [m
[33m 56 [m    [32mint[m down[[38;5;130m2[m];[63C[100m [m[58;1H[93m111 [m[4m            rcv(args, spcs);                                                   [m[4m[100m [m[4m                                [m[59;99H[K[59;99H111,28[8C14%[58;32H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m112 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"eof"[m)) {[32C[100m [m
[33m113 [m[12Ceof(args, spcs);[51C[100m [m
[33m114 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"cleanup"[m)) {[28C[100m [m[59;99H[K[59;99H111,28[8C14%[55;32H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m115 [m[12Ccleanup();[57C[100m [m
[33m116 [m[8C} [33melse[m {[63C[100m [m
[33m117 [m[12Cprintf([38;5;130m"Error: Invalid command[m[35m\n[m[38;5;130m"[m);[32C[100m [m[59;99H[K[59;99H111,28[8C15%[52;32H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m118 [m[8C}[70C[100m [m
[33m119 [m[79C[100m [m
[33m120 [m[8Cprintf([38;5;130m"> "[m);[58C[100m [m[59;99H[K[59;99H111,28[8C16%[49;32H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m121 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m122 [m[79C[100m [m
[33m123 [m[8Cfree(input);[59C[100m [m[59;99H[K[59;99H111,28[8C17%[46;32H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m124 [m[8Cfree(tokens);[58C[100m [m
[33m125 [m    }[74C[100m [m
[33m126 [m[79C[100m [m[59;99H[K[59;99H111,28[8C18%[43;32H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m127 [m    free(jobs);[64C[100m [m
[33m128 [m    [33mreturn[m [38;5;130m0[m;[66C[100m [m
[33m129 [m}[78C[100m [m[59;99H[K[59;99H111,28[8C18%[40;32H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m130 [m[79C[100m [m
[33m131 [m[36m/* spawn()[m[69C[100m [m
[33m132 [m[36m * -------[m[69C[100m [m[59;99H[K[59;99H111,28[8C19%[37;32H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m
[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m
[33m135 [m[36m * of the child process is unchanged[m[43C[100m [m[59;99H[K[59;99H111,28[8C20%[34;32H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m136 [m[36m *[m[77C[100m [m
[33m137 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m138 [m[36m * spcs: number of original tokens[m[45C[100m [m[59;99H[K[59;99H111,28[8C21%[31;32H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m139 [m[36m */[m[76C[100m [m
[33m140 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs) {[44C[100m [m
[33m141 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m[59;99H[K[59;99H111,28[8C22%[28;32H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m142 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m143 [m    } [33melse[m {[67C[100m [m
[33m144 [m[8Cjobs = realloc(jobs, ([38;5;248m[104mjobid[m + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));[16C[100m [m[59;99H[K[59;99H111,28[8C22%[25;32H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m145 [m[79C[100m [m
[33m146 [m[8C[38;5;248m[104mjobid[m++;[63C[100m [m
[33m147 [m[79C[100m [m[59;99H[K[59;99H111,28[8C23%[22;32H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m148 [m[8Cstrcpy(jobs[[38;5;248m[104mjobid[m].name, args[[38;5;130m0[m]);[37C[100m [m
[33m149 [m[79C[100m [m
[33m150 [m[8C[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].down) < [38;5;130m0[m) {[38C[100m [m[59;99H[K[59;99H111,28[8C24%[19;32H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m151 [m[12Cperror([38;5;130m"Creating down pipe"[m);[38C[100m [m
[33m152 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m153 [m[8C}[70C[100m [m[59;99H[K[59;99H111,28[8C25%[16;32H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m154 [m[79C[100m [m
[33m155 [m[8C[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].up) < [38;5;130m0[m) {[40C[100m [m
[33m156 [m[12Cperror([38;5;130m"Creating up pipe"[m);[40C[100m [m[59;99H[K[59;99H111,28[8C26%[13;32H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m157 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m158 [m[8C}[70C[100m [m
[33m159 [m[79C[100m [m[59;99H[K[59;99H111,28[8C26%[10;32H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m160 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, [38;5;248m[104mjobid[m);[28C[100m [m
[33m161 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m162 [m[79C[100m [m[59;99H[K[59;99H111,28[8C27%[7;32H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m163 [m[8Cjobs[[38;5;248m[104mjobid[m].pid = fork();[46C[100m [m
[33m164 [m[8C[33mif[m (!jobs[[38;5;248m[104mjobid[m].pid) {[48C[100m [m
[33m165 [m[12C[36m// child[m[59C[100m [m[59;99H[K[59;99H111,28[8C28%[4;32H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m166 [m[79C[100m [m
[33m167 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m168 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[WRITE]);[36C[100m [m[59;99H[K[59;99H111,28[8C29%[1;32H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m114 [m[4m        } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (!strcmp(tokens[[m[4m[38;5;130m0[m[4m], [m[4m[38;5;130m"cleanup"[m[4m)) {                            [m[4m[100m [m[4m                                [m[56;1H[33m169 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[READ]);[39C[100m [m
[33m170 [m[79C[100m [m
[33m171 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].down[READ], STDIN_FILENO);[24C[100m [m[59;99H[K[59;99H114,31[8C30%[1;35H[?25h[?25l[33m114 [m        } [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"cleanup"[m)) {                            [100m [m[1;85H[K[31;1H[93m144 [m[4m        jobs = realloc(jobs, ([m[4m[38;5;248m[104mjobid[m[4m + [m[4m[38;5;130m1[m[4m) * [m[4m[33msizeof[m[4m([m[4m[32mstruct[m[4m Job));                [m[4m[100m [m[4m                                [m[59;100H4[31;35H[?25h[?25l[31;5H        jobs = realloc(jobs, ([7m[48;5;242mjobid + [m[38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));                [100m [m[31;85H[K[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H144,39[8C30%[31;43H[?25h[?25l[30;1H[93m143 [m[4m    } [m[4m[33melse[m[4m {                                                                   [m[4m[100m [m[4m                                [m[31;1H[33m144 [m[30C[38;5;248m[104mjobid[m + [59;1H[K[59;99H143,12[8C30%[30;16H[?25h[?25l[59;1H[38;5;130m-- INSERT --[m[59;99H[K[59;99H143,12[8C30%[30;16H[?25h[?25l[59;104H3[30;17H[?25h[?25l[33m143 [m    } [33melse[m {                                                                   [100m [m[30;85H[K[31;1H[93m144 [m[4m                                                                               [m[4m[100m [m[4m                                [m[32;13Hjobs = realloc(jobs, ([38;5;248m[104mjobid[m + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));[33;13H        [34;13H[38;5;248m[104mjobid[m++;[35;13H                                  [36;13Hstrcpy(jobs[[38;5;248m[104mjobid[m].name, args[[38;5;130m0[m]);[37;13H                                 [38;13H[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].down) < [38;5;130m0[m) {[39;17Hperror([38;5;130m"Creating down pipe"[m);[40;13H    exit([38;5;130m1[m);[41;13H}[42;13H                               [43;13H[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].up) < [38;5;130m0[m) {[44;17Hperror([38;5;130m"Creating up pipe"[m);[45;13H    exit([38;5;130m1[m);[46;13H}[47;13H                                           [48;13Hprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, [38;5;248m[104mjobid[m);[49;13Hfflush([38;5;130mstdout[m);[50;13H                         [51;13Hjobs[[38;5;248m[104mjobid[m].pid = fork();[52;13H[33mif[m (!jobs[[38;5;248m[104mjobid[m].pid) {[53;17H[36m// child[m[54;17H               [55;17Hfflush([38;5;130mstdout[m);                [56;35Hdown[WRITE]);[57;17Hclose(jobs[[38;5;248m[104mjobid[m].up[READ]);[58;17H                                           [59;101H4,9 [31;13H[?25h[?25l[33m144 [m                                                                               [100m [m[31;85H[K[32;1H[93m145 [m[4m                                                                               [m[4m[100m [m[4m                                [m[33;13Hjobs = realloc(jobs, ([38;5;248m[104mjobid[m + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));[34;13H        [35;13H[38;5;248m[104mjobid[m++;[36;13H                                  [37;13Hstrcpy(jobs[[38;5;248m[104mjobid[m].name, args[[38;5;130m0[m]);[38;13H                                 [39;13H[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].down) < [38;5;130m0[m) {[40;17Hperror([38;5;130m"Creating down pipe"[m);[41;13H    exit([38;5;130m1[m);[42;13H}[43;13H                               [44;13H[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].up) < [38;5;130m0[m) {[45;17Hperror([38;5;130m"Creating up pipe"[m);[46;13H    exit([38;5;130m1[m);[47;13H}[48;13H                                           [49;13Hprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, [38;5;248m[104mjobid[m);[50;13Hfflush([38;5;130mstdout[m);[51;13H                         [52;13Hjobs[[38;5;248m[104mjobid[m].pid = fork();[53;13H[33mif[m (!jobs[[38;5;248m[104mjobid[m].pid) {[54;17H[36m// child[m[55;17H               [56;17Hfflush([38;5;130mstdout[m);                [57;35Hdown[WRITE]);[58;17Hclose(jobs[[38;5;248m[104mjobid[m].up[READ]);[59;101H5[11C29[32;13H[?25h[?25l[31;1H[93m144 [m[4m                                                                               [m[4m[100m [m[4m                                [m[32;1H[33m145 [m                                                                               [100m [m[32;85H[K[59;101H4,1[31;5H[?25h[?25l[4mj[m[59;103H2[31;6H[?25h[?25l[4m [m[59;103H1[31;5H[?25h[?25l[59;103H5[31;9H[?25h[?25l[59;103H9[31;13H[?25h[?25l[4mj[m[59;103H10[31;14H[?25h[?25l[4mo[m[59;104H1[31;15H[?25h[?25l[4mi[m[59;104H2[31;16H[?25h[?25l[4m [m[59;104H1[31;15H[?25h[?25l[4mb[m[59;104H2[31;16H[?25h[?25l[4mi[m[59;104H3[31;17H[?25h[?25l[4m[38;5;248m[104mjobid[m[59;104H4[31;18H[?25h[?25l[4m+[m[59;104H5[31;19H[?25h[?25l[4m+[m[59;104H6[31;20H[?25h[?25l[4m;[m[59;104H7[31;21H[?25h[?25l[33m144 [m        [38;5;248m[104mjobid[m++;                                                               [100m [m[31;85H[K[32;1H[93m145 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;101H5,1 [32;5H[?25h[?25l[33m145 [m                                                                               [100m [m[32;85H[K[33;1H[93m146 [m[4m        jobs = realloc(jobs, ([m[4m[38;5;248m[104mjobid[m[4m + [m[4m[38;5;130m1[m[4m) * [m[4m[33msizeof[m[4m([m[4m[32mstruct[m[4m Job));                [m[4m[100m [m[4m                                [m[59;101H6,17[33;21H[?25h[?25l[33m146 [m        jobs = realloc(jobs, ([38;5;248m[104mjobid[m + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));                [100m [m[33;85H[K[34;1H[93m147 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;101H7,9 [34;13H[?25h[?25l[33m147 [m                                                                               [100m [m[34;85H[K[35;1H[93m148 [m[4m        [m[4m[38;5;248m[104mjobid[m[4m++;                                                               [m[4m[100m [m[4m                                [m[59;101H8,17[35;21H[?25h[?25l[33m148 [m        [38;5;248m[104mjobid[m++;                                                               [100m [m[35;85H[K[36;1H[93m149 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;101H9,1 [36;5H[?25h[59;1H[K[36;5H[?25l[59;99H149,0-1[7C29%[36;5H[?25h[?25l[33m149 [m                                                                               [100m [m[36;85H[K[37;1H[93m150 [m[4m        strcpy(jobs[[m[4m[38;5;248m[104mjobid[m[4m].name, args[[m[4m[38;5;130m0[m[4m]);                                     [m[4m[100m [m[4m                                [m[59;100H50,1  [37;5H[?25h[?25l[36;1H[93m149 [m[4m                                                                               [m[4m[100m [m[4m                                [m[37;1H[33m150 [m        strcpy(jobs[[38;5;248m[104mjobid[m].name, args[[38;5;130m0[m]);                                     [100m [m[37;85H[K[59;100H49,0-1[36;5H[?25h[?25l[35;1H[93m148 [m[4m        [m[4m[38;5;248m[104mjobid[m[4m++;                                                               [m[4m[100m [m[4m                                [m[36;1H[33m149 [m                                                                               [100m [m[36;85H[K[59;101H8,1  [35;5H[?25h[?25l[8C[4m        [m[36;13Hstrcpy(jobs[[38;5;248m[104mjobid[m].name, args[[38;5;130m0[m]);[37;13H                                  [38;13H[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].down) < [38;5;130m0[m) {[39;13H    perror([38;5;130m"Creating down pipe"[m);[40;17Hexit([38;5;130m1[m);                     [41;13H}           [42;13H [43;13H[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].up) < [38;5;130m0[m) {[44;13H    perror([38;5;130m"Creating up pipe"[m);[45;17Hexit([38;5;130m1[m);                   [46;13H}           [47;13H [48;13Hprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, [38;5;248m[104mjobid[m);[49;13Hfflush([38;5;130mstdout[m);                            [50;13H               [51;13Hjobs[[38;5;248m[104mjobid[m].pid = fork();[52;13H[33mif[m (!jobs[[38;5;248m[104mjobid[m].pid) {  [53;13H    [36m// child[m           [54;17H        [55;17Hfflush([38;5;130mstdout[m);[56;17Hclose(jobs[[38;5;248m[104mjobid[m].down[WRITE]);[57;35Hup[READ]);   [58;17H                            [59;103H0-1[7C30[35;5H[?25h[?25l[8C[4mstrcpy(jobs[[m[4m[38;5;248m[104mjobid[m[4m].name, args[[m[4m[38;5;130m0[m[4m]);[m[36;13H                                  [37;13H[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].down) < [38;5;130m0[m) {[38;13H    perror([38;5;130m"Creating down pipe"[m);[39;17Hexit([38;5;130m1[m);                     [40;13H}           [41;13H [42;13H[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].up) < [38;5;130m0[m) {[43;13H    perror([38;5;130m"Creating up pipe"[m);[44;17Hexit([38;5;130m1[m);                   [45;13H}           [46;13H [47;13Hprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, [38;5;248m[104mjobid[m);[48;13Hfflush([38;5;130mstdout[m);                            [49;13H               [50;13Hjobs[[38;5;248m[104mjobid[m].pid = fork();[51;13H[33mif[m (!jobs[[38;5;248m[104mjobid[m].pid) {  [52;13H    [36m// child[m           [53;17H        [54;17Hfflush([38;5;130mstdout[m);[55;17Hclose(jobs[[38;5;248m[104mjobid[m].down[WRITE]);[56;35Hup[READ]);   [57;17H                            [58;17Hdup2(jobs[[38;5;248m[104mjobid[m].down[READ], STDIN_FILENO);[59;103H9  [35;13H[?25h[?25l[59;99H[K[59;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?1000l[?2004l"hq.c" 433L, 10703C written
[?2004l[?1l>[?25h[?1049l[23;0;0ts4698512@moss:~/CSSE2310/Assignments/a3$ make
gcc -g -Wall -pedantic -std=gnu99 -o hq hq.c -I/local/courses/csse2310/include -L/local/courses/csse2310/lib -lcsse2310a3
s4698512@moss:~/CSSE2310/Assignments/a3$ ./hq
> spawn cat
New Job ID [0] created
> spawn ls
New Job ID [1] created
> spawn ls
^Cs4698512@moss:~/CSSE2310/Assignments/a3$ vim hqc[K.c
[?1000h[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;59r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[59;1H"hq.c" 433L, 10703C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[33m120 [m[8Cprintf([38;5;130m"> "[m);[58C[100m [m
[33m121 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m122 [m[79C[100m [m
[33m123 [m[8Cfree(input);[59C[100m [m
[33m124 [m[8Cfree(tokens);[58C[100m [m
[33m125 [m    }[74C[100m [m
[33m126 [m[79C[100m [m
[33m127 [m    free(jobs);[64C[100m [m
[33m128 [m    [33mreturn[m [38;5;130m0[m;[66C[100m [m
[33m129 [m}[78C[100m [m
[33m130 [m[79C[100m [m
[33m131 [m[36m/* spawn()[m[69C[100m [m
[33m132 [m[36m * -------[m[69C[100m [m
[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m
[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m
[33m135 [m[36m * of the child process is unchanged[m[43C[100m [m
[33m136 [m[36m *[m[77C[100m [m
[33m137 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m138 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m139 [m[36m */[m[76C[100m [m
[33m140 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs) {[44C[100m [m
[33m141 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m142 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m143 [m    } [33melse[m {[67C[100m [m
[33m144 [m[8C[38;5;248m[104mjobid[m++;[63C[100m [m
[33m145 [m[79C[100m [m
[33m146 [m[8Cjobs = realloc(jobs, ([38;5;248m[104mjobid[m + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));[16C[100m [m
[33m147 [m[79C[100m [m
[93m148 [m[4m        strcpy(jobs[[m[4m[38;5;248m[104mjobid[m[4m].name, args[[m[4m[38;5;130m0[m[4m]);                                     [m[4m[100m [m[4m                                [m[30;1H[33m149 [m[79C[100m [m
[33m150 [m[8C[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].down) < [38;5;130m0[m) {[38C[100m [m
[33m151 [m[12Cperror([38;5;130m"Creating down pipe"[m);[38C[100m [m
[33m152 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m153 [m[8C}[70C[100m [m
[33m154 [m[79C[100m [m
[33m155 [m[8C[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].up) < [38;5;130m0[m) {[40C[100m [m
[33m156 [m[12Cperror([38;5;130m"Creating up pipe"[m);[40C[100m [m
[33m157 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m158 [m[8C}[70C[100m [m
[33m159 [m[79C[100m [m
[33m160 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, [38;5;248m[104mjobid[m);[28C[100m [m
[33m161 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m162 [m[79C[100m [m
[33m163 [m[8Cjobs[[38;5;248m[104mjobid[m].pid = fork();[46C[100m [m
[33m164 [m[8C[33mif[m (!jobs[[38;5;248m[104mjobid[m].pid) {[48C[100m [m
[33m165 [m[12C[36m// child[m[59C[100m [m
[33m166 [m[79C[100m [m
[33m167 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m168 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[WRITE]);[36C[100m [m
[33m169 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[READ]);[39C[100m [m
[33m170 [m[79C[100m [m
[33m171 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].down[READ], STDIN_FILENO);[24C[100m [m
[33m172 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m173 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].up[WRITE], STDOUT_FILENO);[24C[100m [m
[33m174 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m
[33m175 [m[79C[100m [m
[33m176 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m177 [m[12Cfflush([38;5;130mstderr[m);[52C[100m [m[59;99H148,9[9C31%[29;13H[?25h[?12$p[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m178 [m[79C[100m [m
[33m179 [m[12C[32mint[m status;[56C[100m [m
[33m180 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m[59;1H[K[59;99H148,9[9C32%[26;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m181 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m
[33m182 [m[16Cexit([38;5;130m99[m);[54C[100m [m
[33m183 [m[12C}[66C[100m [m[59;99H[K[59;99H148,9[9C33%[23;13H[?25h[?25l[33m148 [m        strcpy(jobs[[38;5;248m[104mjobid[m].name, args[[38;5;130m0[m]);                                     [100m [m[23;85H[K[31;1H[93m156 [m[4m            perror([m[4m[38;5;130m"Creating up pipe"[m[4m);                                        [m[4m[100m [m[4m                                [m[59;100H56,17[31;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m123 [m[8Cfree(input);[59C[100m [m
[33m124 [m[8Cfree(tokens);[58C[100m [m
[33m125 [m    }[74C[100m [m[59;99H[K[59;99H156,17[8C32%[34;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m120 [m[8Cprintf([38;5;130m"> "[m);[58C[100m [m
[33m121 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m122 [m[79C[100m [m[59;99H[K[59;99H156,17[8C31%[37;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m117 [m[12Cprintf([38;5;130m"Error: Invalid command[m[35m\n[m[38;5;                              [100m [m[23;85H[K[31;1H[93m156 [m[4m            perror([m[4m[38;5;130m"Creating up pipe"[m[4m);                                        [m[4m[100m [m[4m                                [m[59;100H56,17[31;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m123 [m[8Cfree(input);[59C[100m [m
[33m124 [m[8Cfree(tokens);[58C[100m [m
[33m125 [m    }[74C[100m [m[59;99H[K[59;99H156,17[8C32%[34;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m120 [m[8Cprintf([38;5;130m"> "[m);[58C[100m [m
[33m121 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m122 [m[79C[100m [m[59;99H[K[59;99H156,17[8C31%[37;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m117 [m[12Cprintf([38;5;130m"Error: Invalid command[m[35m\n[m[38;5;130m"[m);[32C[100m [m
[33m118 [m[8C}[70C[100m [m
[33m119 [m[79C[100m [m[59;99H[K[59;99H156,17[8C30%[40;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m114 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"cleanup"[m)) {[28C[100m [m
[33m115 [m[12Ccleanup();[57C[100m [m
[33m116 [m[8C} [33melse[m {[63C[100m [m[59;99H[K[59;99H156,17[8C30%[43;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m111 [m[12Crcv(args, spcs);[51C[100m [m
[33m112 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"eof"[m)) {[32C[100m [m
[33m113 [m[12Ceof(args, spcs);[51C[100m [m[59;99H[K[59;99H156,17[8C29%[46;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m108 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"send"[m)) {[31C[100m [m
[33m109 [m[12Csend(args, spcs);[50C[100m [m
[33m110 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"rcv"[m)) {[32C[100m [m[59;99H[K[59;99H156,17[8C28%[49;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m105 [m[12Ccall_signal(args, spcs);[43C[100m [m
[33m106 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"sleep"[m)) {[30C[100m [m
[33m107 [m[12Chq_wait(args, spcs);[47C[100m [m[59;99H[K[59;99H156,17[8C27%[52;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m102 [m[12C[36m// Report[m[58C[100m [m
[33m103 [m[12Creport(args, spcs);[48C[100m [m
[33m104 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"signal"[m)) {[29C[100m [m[59;99H[K[59;99H156,17[8C26%[55;21H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m160 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, [38;5;248m[104mjobid[m);[28C[100m [m
[33m161 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m162 [m[79C[100m [m[59;99H[K[59;99H156,17[8C27%[52;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m102 [m[12C[36m// Report[m[58C[100m [m
[33m103 [m[12Creport(args, spcs);[48C[100m [m
[33m104 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"signal"[m)) {[29C[100m [m[59;99H[K[59;99H156,17[8C26%[55;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 99 [m[12C[36m// spawn[m[59C[100m [m
[33m100 [m[12Cspawn(args, spcs);[49C[100m [m
[33m101 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"report"[m)) {[29C[100m [m[59;99H[K[59;99H156,17[8C26%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 96 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m 97 [m[79C[100m [m
[33m 98 [m[8C[33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"spawn"[m)) {[37C[100m [m[55;45H[46m{[m


[93m153 [m[4m        [m[4m[46m}[m[4m                                                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H153,9[9C25%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 93 [m[12Cargs[i - [38;5;130m1[m] = tokens[i];[43C[100m [m
[33m 94 [m[8C}[70C[100m [m
[33m 95 [m[8Cargs[spcs - [38;5;130m1[m] = [38;5;130m0[m;[52C[100m [m[58;1H[93m150 [m[4m        [m[4m[33mif[m[4m (pipe[m[4m[46m([m[4mjobs[[m[4m[38;5;248m[104mjobid[m[4m].down[m[4m[46m)[m[4m < [m[4m[38;5;130m0[m[4m) {                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H150,17[8C24%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 90 [m[79C[100m [m
[33m 91 [m[8C[32mchar[m* args[spcs];[54C[100m [m
[33m 92 [m[8C[33mfor[m ([32mint[m i = [38;5;130m1[m; i < spcs; i++) {[39C[100m [m[58;1H[93m147 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H147,8[9C23%[58;12H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 87 [m[12C[33mcontinue[m;[58C[100m [m
[33m 88 [m[8C}[70C[100m [m
[33m 89 [m[8Ctokens = split_space_not_quote(input, &spcs);[26C[100m [m[58;1H[93m144 [m[4m        [m[4m[38;5;248m[104mjobid[m[4m++;                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H144,16[8C22%[58;20H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 84 [m[8C[33mif[m (!strcmp(input, [38;5;130m""[m)) {[46C[100m [m
[33m 85 [m[12Cprintf([38;5;130m"> "[m);[54C[100m [m
[33m 86 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m[58;1H[93m141 [m[4m    [m[4m[33mif[m[4m [m[4m[46m([m[4mspcs < [m[4m[38;5;130m2[m[4m[46m)[m[4m {                                                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H141,17[8C22%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 81 [m    [33mwhile[m ((input = read_line([38;5;130mstdin[m)) != [38;5;130mNULL[m) {[31C[100m [m
[33m 82 [m[8C[32mint[m spcs = [38;5;130m0[m;[58C[100m [m
[33m 83 [m[79C[100m [m[58;1H[93m138 [m[4m[36m * spcs: number of original tokens[m[4m                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H138,17[8C21%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 78 [m    printf([38;5;130m"> "[m);[62C[100m [m
[33m 79 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m 80 [m    [36m// prompt loop[m[61C[100m [m[58;1H[93m135 [m[4m[36m * of the child process is unchanged[m[4m                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H135,17[8C20%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 75 [m[79C[100m [m
[33m 76 [m    signal([38;5;130mSIGINT[m, handle_signal);[45C[100m [m
[33m 77 [m    signal([38;5;130mSIGCHLD[m, handle_signal);[44C[100m [m[58;1H[93m132 [m[4m[36m * -------[m[4m                                                                     [m[4m[100m [m[4m                                [m[59;99H[K[59;99H132,10[8C19%[58;14H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 72 [m    [32mchar[m** tokens;[61C[100m [m
[33m 73 [m[79C[100m [m
[33m 74 [m    jobs = malloc([38;5;130m0[m * [33msizeof[m([32mstruct[m Job));[37C[100m [m[58;1H[93m129 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H129,1[9C18%[58;5H[?25h[?25l[31;1H[93m102 [m[17C[7m[36m[48;5;242mport[m[7m[48;5;242m [32;5H            report(args, spcs); [33;5H        } [m[7m[33m[48;5;242melse[m[7m[48;5;242m [m[7m[33m[48;5;242mif[m[7m[48;5;242m (!strcmp(tokens[[m[7m[38;5;130m[48;5;242m0[m[7m[48;5;242m], [m[7m[38;5;130m[48;5;242m"signal"[m[7m[48;5;242m)) { [34;5H            call_signal(args, spcs); [35;5H        } [m[7m[33m[48;5;242melse[m[7m[48;5;242m [m[7m[33m[48;5;242mif[m[7m[48;5;242m (!strcmp(tokens[[m[7m[38;5;130m[48;5;242m0[m[7m[48;5;242m], [m[7m[38;5;130m[48;5;242m"sleep"[m[7m[48;5;242m)) { [36;5H       eof(args, spcs); [43;5H        } [m[7m[33m[48;5;242melse[m[7m[48;5;242m [m[7m[33m[48;5;242mif[m[7m[48;5;242m (!strcmp(tokens[[m[7m[38;5;130m[48;5;242m0[m[7m[48;5;242m], [m[7m[38;5;130m[48;5;242m"cleanup"[m[7m[48;5;242m)) { [44;5H            cleanup(); [45;5H        } [m[7m[33m[48;5;242melse[m[7m[48;5;242m { [46;5H            printf([m[7m[38;5;130m[48;5;242m"Error: Invalid command[m[7m[35m[48;5;242m\n[m[7m[38;5;130m[48;5;242m"[m[7m[48;5;242m); [47;5H        } [48;5H [49;5H        printf([m[7m[38;5;130m[48;5;242m"> "[m[7m[48;5;242m); [50;5H        fflush([m[7m[38;5;130m[48;5;242mstdout[m[7m[48;5;242m); [51;5H         [52;5H        free(input); [53;5H        free(tokens); [54;5H    } [55;5H     [56;5H    free(jobs); [57;5H    [m[7m[33m[48;5;242mreturn[m[7m[48;5;242m [m[7m[38;5;130m[48;5;242m0[m[7m[48;5;242m; [m
[33m129 [m[7m[48;5;242m}[m                                                                              [100m [m[58;85H[K[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H102,17[8C18%[31;21H[?25h[?25l[?25h[?25l[10;1H[93m 81 [m[4m    [m[4m[33mwhile[m[4m ((input = read_line([m[4m[38;5;130mstdin[m[4m)) != [m[4m[38;5;130mNULL[m[4m) {                               [m[4m[100m [m[4m                                [m[31;1H[33m102 [m[17C[36mport[m [32;5H            report(args, spcs); [33;5H        } [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"signal"[m)) { [34;5H            call_signal(args, spcs); [35;5H        } [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"sleep"[m)) { [36;5H            hq_wait(args, spcs); [37;5H        } [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"send"[m)) { [38;5H            send(args, spcs); [39;5H        } [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"rcv"[m)) { [40;5H            rcv(args, spcs); [41;5H        } [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"eof"[m)) { [42;5H            eof(args, spcs); [43;5H        } [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"cleanup"[m)) { [44;5H            cleanup(); [45;5H        } [33melse[m { [46;5H            printf([38;5;130m"Error: Invalid command[m[35m\n[m[38;5;130m"[m); [47;5H        } [48;5H [49;5H        printf([38;5;130m"> "[m); [50;5H        fflush([38;5;130mstdout[m); [51;5H         [52;5H        free(input); [53;5H        free(tokens); [54;5H    } [55;5H     [56;5H    free(jobs); [57;5H    [33mreturn[m [38;5;130m0[m; [58;5H}[59;1H[K[59;99H81,18[9C18%[10;22H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m130 [m[79C[100m [m
[33m131 [m[36m/* spawn()[m[69C[100m [m
[33m132 [m[36m * -------[m[69C[100m [m[59;99H[K[59;99H81,18[9C19%[7;22H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m
[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m
[33m135 [m[36m * of the child process is unchanged[m[43C[100m [m[59;99H[K[59;99H81,18[9C20%[4;22H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m136 [m[36m *[m[77C[100m [m
[33m137 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m138 [m[36m * spcs: number of original tokens[m[45C[100m [m[59;99H[K[59;99H81,18[9C21%[1;22H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 84 [m[4m        [m[4m[33mif[m[4m (!strcmp(input, [m[4m[38;5;130m""[m[4m)) {                                              [m[4m[100m [m[4m                                [m[56;1H[33m139 [m[36m */[m[76C[100m [m
[33m140 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs) {[44C[100m [m
[33m141 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m[59;99H[K[59;99H84,18[9C22%[1;22H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 87 [m[4m            [m[4m[33mcontinue[m[4m;                                                          [m[4m[100m [m[4m                                [m[56;1H[33m142 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m143 [m    } [33melse[m {[67C[100m [m
[33m144 [m[8C[38;5;248m[104mjobid[m++;[63C[100m [m[59;99H[K[59;99H87,18[9C22%[1;22H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 90 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m145 [m[79C[100m [m
[33m146 [m[8Cjobs = realloc(jobs, ([38;5;248m[104mjobid[m + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));[16C[100m [m
[33m147 [m[79C[100m [m[59;99H[K[59;99H90,0-1[8C23%[1;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 87 [m[12C[33mcontinue[m;[58C[100m [m
[33m 88 [m[8C}[70C[100m [m
[33m 89 [m[8Ctokens = split_space_not_quote(input, &spcs);[26C[100m [m[59;99H[K[59;99H90,0-1[8C22%[4;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 84 [m[8C[33mif[m (!strcmp(input, [38;5;130m""[m)) {[46C[100m [m
[33m 85 [m[12Cprintf([38;5;130m"> "[m);[54C[100m [m
[33m 86 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m[59;99H[K[59;99H90,0-1[8C22%[7;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 81 [m    [33mwhile[m ((input = read_line([38;5;130mstdin[m)) != [38;5;130mNULL[m) {[31C[100m [m
[33m 82 [m[8C[32mint[m spcs = [38;5;130m0[m;[58C[100m [m
[33m 83 [m[79C[100m [m[59;99H[K[59;99H90,0-1[8C21%[10;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m139 [m[36m */[m[76C[100m [m
[33m140 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs) {[44C[100m [m
[33m141 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m[59;99H[K[59;99H90,0-1[8C22%[7;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m142 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m143 [m    } [33melse[m {[67C[100m [m
[33m144 [m[8C[38;5;248m[104mjobid[m++;[63C[100m [m[59;99H[K[59;99H90,0-1[8C22%[4;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 84 [m[8C[33mif[m (!strcmp(input, [38;5;130m""[m)) {[46C[100m [m
[33m 85 [m[12Cprintf([38;5;130m"> "[m);[54C[100m [m
[33m 86 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m[59;99H[K[59;99H90,0-1[8C22%[7;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 81 [m    [33mwhile[m ((input = read_line([38;5;130mstdin[m)) != [38;5;130mNULL[m) {[31C[100m [m
[33m 82 [m[8C[32mint[m spcs = [38;5;130m0[m;[58C[100m [m
[33m 83 [m[79C[100m [m[59;99H[K[59;99H90,0-1[8C21%[10;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 78 [m    printf([38;5;130m"> "[m);[62C[100m [m
[33m 79 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m 80 [m    [36m// prompt loop[m[61C[100m [m[59;99H[K[59;99H90,0-1[8C20%[13;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 75 [m[79C[100m [m
[33m 76 [m    signal([38;5;130mSIGINT[m, handle_signal);[45C[100m [m
[33m 77 [m    signal([38;5;130mSIGCHLD[m, handle_signal);[44C[100m [m[59;99H[K[59;99H90,0-1[8C19%[16;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m
[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m
[33m135 [m[36m * of the child process is unchanged[m[43C[100m [m[59;99H[K[59;99H90,0-1[8C20%[13;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m136 [m[36m *[m[77C[100m [m
[33m137 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m138 [m[36m * spcs: number of original tokens[m[45C[100m [m[59;99H[K[59;99H90,0-1[8C21%[10;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m139 [m[36m */[m[76C[100m [m
[33m140 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs) {[44C[100m [m
[33m141 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m[59;99H[K[59;99H90,0-1[8C22%[7;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m142 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m143 [m    } [33melse[m {[67C[100m [m
[33m144 [m[8C[38;5;248m[104mjobid[m++;[63C[100m [m[59;99H[K[59;99H90,0-1[8C22%[4;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m145 [m[79C[100m [m
[33m146 [m[8Cjobs = realloc(jobs, ([38;5;248m[104mjobid[m + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));[16C[100m [m
[33m147 [m[79C[100m [m[59;99H[K[59;99H90,0-1[8C23%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 93 [m[4m            args[i - [m[4m[38;5;130m1[m[4m] = tokens[i];                                           [m[4m[100m [m[4m                                [m[56;1H[33m148 [m[8Cstrcpy(jobs[[38;5;248m[104mjobid[m].name, args[[38;5;130m0[m]);[37C[100m [m
[33m149 [m[79C[100m [m
[33m150 [m[8C[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].down) < [38;5;130m0[m) {[38C[100m [m[59;99H[K[59;99H93,18[9C24%[1;22H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 96 [m[4m        fflush([m[4m[38;5;130mstdout[m[4m);                                                        [m[4m[100m [m[4m                                [m[56;1H[33m151 [m[12Cperror([38;5;130m"Creating down pipe"[m);[38C[100m [m
[33m152 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m153 [m[8C}[70C[100m [m[59;99H[K[59;99H96,18[9C25%[1;22H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 99 [m[4m            [m[4m[36m// spawn[m[4m                                                           [m[4m[100m [m[4m                                [m[56;1H[33m154 [m[79C[100m [m
[33m155 [m[8C[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].up) < [38;5;130m0[m) {[40C[100m [m
[33m156 [m[12Cperror([38;5;130m"Creating up pipe"[m);[40C[100m [m[59;99H[K[59;99H99,18[9C26%[1;22H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m102 [m[4m            [m[4m[36m// Report[m[4m                                                          [m[4m[100m [m[4m                                [m[56;1H[33m157 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m158 [m[8C}[70C[100m [m
[33m159 [m[79C[100m [m[59;99H[K[59;99H102,18[8C26%[1;22H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m105 [m[4m            call_signal(args, spcs);                                           [m[4m[100m [m[4m                                [m[56;1H[33m160 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, [38;5;248m[104mjobid[m);[28C[100m [m
[33m161 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m162 [m[79C[100m [m[59;99H[K[59;99H105,18[8C27%[1;22H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m108 [m[4m        } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (!strcmp(tokens[[m[4m[38;5;130m0[m[4m], [m[4m[38;5;130m"send"[m[4m)) {                               [m[4m[100m [m[4m                                [m[56;1H[33m163 [m[8Cjobs[[38;5;248m[104mjobid[m].pid = fork();[46C[100m [m
[33m164 [m[8C[33mif[m (!jobs[[38;5;248m[104mjobid[m].pid) {[48C[100m [m
[33m165 [m[12C[36m// child[m[59C[100m [m[59;99H[K[59;99H108,18[8C28%[1;22H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m111 [m[4m            rcv(args, spcs);                                                   [m[4m[100m [m[4m                                [m[56;1H[33m166 [m[79C[100m [m
[33m167 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m168 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[WRITE]);[36C[100m [m[59;99H[K[59;99H111,18[8C29%[1;22H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m114 [m[4m        } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (!strcmp(tokens[[m[4m[38;5;130m0[m[4m], [m[4m[38;5;130m"cleanup"[m[4m)) {                            [m[4m[100m [m[4m                                [m[56;1H[33m169 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[READ]);[39C[100m [m
[33m170 [m[79C[100m [m
[33m171 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].down[READ], STDIN_FILENO);[24C[100m [m[59;99H[K[59;99H114,18[8C30%[1;22H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m117 [m[4m            printf([m[4m[38;5;130m"Error: Invalid command[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                [m[4m[100m [m[4m                                [m[56;1H[33m172 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m173 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].up[WRITE], STDOUT_FILENO);[24C[100m [m
[33m174 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m[59;99H[K[59;99H117,18[8C30%[1;22H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m120 [m[4m        printf([m[4m[38;5;130m"> "[m[4m);                                                          [m[4m[100m [m[4m                                [m[56;1H[33m175 [m[79C[100m [m
[33m176 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m177 [m[12Cfflush([38;5;130mstderr[m);[52C[100m [m[59;99H[K[59;99H120,18[8C31%[1;22H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m123 [m[4m        free(input);                                                           [m[4m[100m [m[4m                                [m[56;1H[33m178 [m[79C[100m [m
[33m179 [m[12C[32mint[m status;[56C[100m [m
[33m180 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m[59;99H[K[59;99H123,18[8C32%[1;22H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m126 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m181 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m
[33m182 [m[16Cexit([38;5;130m99[m);[54C[100m [m
[33m183 [m[12C}[66C[100m [m[59;99H[K[59;99H126,4[9C33%[1;8H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m129 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[56;1H[33m184 [m[8C} [33melse[m {[63C[100m [m
[33m185 [m[12C[36m// parent[m[58C[100m [m
[33m186 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m[59;99H[K[59;99H129,1[9C34%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m132 [m[4m[36m * -------[m[4m                                                                     [m[4m[100m [m[4m                                [m[56;1H[33m187 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m
[33m188 [m[8C}[70C[100m [m
[33m189 [m    }[74C[100m [m[59;99H[K[59;99H132,10[8C34%[1;14H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m135 [m[4m[36m * of the child process is unchanged[m[4m                                           [m[4m[100m [m[4m                                [m[56;1H[33m190 [m}[78C[100m [m
[33m191 [m[79C[100m [m
[33m192 [m[36m/* report()[m[68C[100m [m[59;99H[K[59;99H135,18[8C35%[1;22H[?25h[?25l[33m135 [m[36m * of the child process is unchanged[m                                           [100m [m[1;85H[K[30;1H[93m164 [m[4m        [m[4m[33mif[m[4m (!jobs[[m[4m[38;5;248m[104mjobid[m[4m].pid) {                                                [m[4m[100m [m[4m                                [m[59;100H64,15[30;19H[?25h[?25l[33m164 [m        [33mif[m (!j[7m[48;5;242mobs[jobid].pid) { [m                                               [100m [m[30;85H[K[31;5H[7m[48;5;242m            [m[7m[36m[48;5;242m// child[m[7m[48;5;242m [32;5H [33;5H            fflush([m[7m[38;5;130m[48;5;242mstdout[m[7m[48;5;242m); [34;5H            close(jobs[jobid].down[WRITE]); [35;5H            close(jobs[jobid].up[READ]); [36;5H             [37;5H            dup2(jobs[jobid].down[READ], STDIN_FILENO); [38;5H            close(jobs[jobid].down[READ]); [39;5H            dup2(jobs[jobid].up[WRITE], STDOUT_FILENO); [40;5H            close(jobs[jobid].up[WRITE]); [41;5H             [42;5H            fflush([m[7m[38;5;130m[48;5;242mstdout[m[7m[48;5;242m); [43;5H            fflush([m[7m[38;5;130m[48;5;242mstderr[m[7m[48;5;242m); [44;5H [45;5H            [m[7m[32m[48;5;242mint[m[7m[48;5;242m status; [46;5H            status = execvp(args[[m[7m[38;5;130m[48;5;242m0[m[7m[48;5;242m], args); [47;5H            [m[7m[33m[48;5;242mif[m[7m[48;5;242m (status == -[m[7m[38;5;130m[48;5;242m1[m[7m[48;5;242m) { [m
[93m182 [m[7m[48;5;242m            [m[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H182,13[8C35%[48;17H[?25h[?25l[30;19Hobs[[38;5;248m[104mjobid[m].pid) { [31;5H            [36m// child[m [32;5H [33;5H            fflush([38;5;130mstdout[m); [34;5H            close(jobs[[38;5;248m[104mjobid[m].down[WRITE]); [35;5H            close(jobs[[38;5;248m[104mjobid[m].up[READ]); [36;5H             [37;5H            dup2(jobs[[38;5;248m[104mjobid[m].down[READ], STDIN_FILENO); [38;5H            close(jobs[[38;5;248m[104mjobid[m].down[READ]); [39;5H            dup2(jobs[[38;5;248m[104mjobid[m].up[WRITE], STDOUT_FILENO); [40;5H            close(jobs[[38;5;248m[104mjobid[m].up[WRITE]); [41;5H             [42;5H            fflush([38;5;130mstdout[m); [43;5H            fflush([38;5;130mstderr[m); [44;5H [45;5H            [32mint[m status; [46;5H            status = execvp(args[[38;5;130m0[m], args); [47;5H            [33mif[m (status == -[38;5;130m1[m) { 
[33m182 [m            

[93m184 [m[4m        } [m[4m[33melse[m[4m {                                                               [m[4m[100m [m[4m                                [m[59;1H[K[59;99H184,15[8C35%[50;19H[?25h[?25l[33m184 [m        } [33melse[m {                                                               [100m [m[50;85H[K[52;1H[93m186 [m[4m            close(jobs[[m[4m[38;5;248m[104mjobid[m[4m].down[READ]);                                     [m[4m[100m [m[4m                                [m[59;101H6,16[52;20H[?25h[?25l[33m186 [m            clo[7m[48;5;242mse(jobs[jobid].down[READ]); [m                                    [100m [m[52;85H[K[53;5H[7m[48;5;242m            close(jobs[jobid].up[WRITE]); [m
[93m188 [m[7m[48;5;242m        }[m[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H188,10[8C35%[54;14H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m132 [m[36m * -------[m[69C[100m [m
[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m
[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m[59;99H[K[59;99H188,10[8C34%[57;14H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m129 [m}[78C[100m [m
[33m130 [m[79C[100m [m
[33m131 [m[36m/* spawn()[m[69C[100m [m[58;1H[93m186 [m[16Ce(jobs[[38;5;248m[104mjobid[m].down[READ]); [59;99H[K[59;99H186,17[8C34%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m126 [m[79C[100m [m
[33m127 [m    free(jobs);[64C[100m [m
[33m128 [m    [33mreturn[m [38;5;130m0[m;[66C[100m [m[58;1H[93m183 [m[59;99H[K[59;99H183,14[8C33%[58;18H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m123 [m[8Cfree(input);[59C[100m [m
[33m124 [m[8Cfree(tokens);[58C[100m [m
[33m125 [m    }[74C[100m [m[58;1H[93m180 [m[17C[7m[48;5;242ms = execvp(args[[m[7m[38;5;130m[48;5;242m0[m[7m[48;5;242m], args); [m[59;99H[K[59;99H180,17[8C32%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m120 [m[8Cprintf([38;5;130m"> "[m);[58C[100m [m
[33m121 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m122 [m[79C[100m [m[58;1H[93m177 [m[17C[7m[48;5;242mh([m[7m[38;5;130m[48;5;242mstderr[m[7m[48;5;242m); [m[59;99H[K[59;99H177,17[8C31%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m117 [m[12Cprintf([38;5;130m"Error: Invalid command[m[35m\n[m[38;5;130m"[m);[32C[100m [m
[33m118 [m[8C}[70C[100m [m
[33m119 [m[79C[100m [m[58;1H[93m174 [m[17C[7m[48;5;242m(jobs[jobid].up[WRITE]); [m[59;99H[K[59;99H174,17[8C30%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m114 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"cleanup"[m)) {[28C[100m [m
[33m115 [m[12Ccleanup();[57C[100m [m
[33m116 [m[8C} [33melse[m {[63C[100m [m[58;1H[93m171 [m[16C[46m([m[7m[48;5;242mjobs[jobid].down[READ], STDIN_FILENO); [m[59;99H[K[59;99H171,17[8C30%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m111 [m[12Crcv(args, spcs);[51C[100m [m
[33m112 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"eof"[m)) {[32C[100m [m
[33m113 [m[12Ceof(args, spcs);[51C[100m [m[58;1H[93m168 [m[17C[7m[48;5;242m(jobs[jobid].down[WRITE]); [m[59;99H[K[59;99H168,17[8C29%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m108 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"send"[m)) {[31C[100m [m
[33m109 [m[12Csend(args, spcs);[50C[100m [m
[33m110 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"rcv"[m)) {[32C[100m [m[58;1H[93m165 [m[17C[7m[36m[48;5;242mild[m[7m[48;5;242m [m[59;99H[K[59;99H165,17[8C28%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m105 [m[12Ccall_signal(args, spcs);[43C[100m [m
[33m106 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"sleep"[m)) {[30C[100m [m
[33m107 [m[12Chq_wait(args, spcs);[47C[100m [m[58;1H[93m162 [m[59;99H[K[59;99H162,0-1[7C27%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m102 [m[12C[36m// Report[m[58C[100m [m
[33m103 [m[12Creport(args, spcs);[48C[100m [m
[33m104 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"signal"[m)) {[29C[100m [m[58;1H[93m159 [m[59;99H[K[59;99H159,0-1[7C26%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 99 [m[12C[36m// spawn[m[59C[100m [m
[33m100 [m[12Cspawn(args, spcs);[49C[100m [m
[33m101 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"report"[m)) {[29C[100m [m[58;1H[93m156 [m[17C[7m[48;5;242mr([m[7m[38;5;130m[48;5;242m"Creating up pipe"[m[7m[48;5;242m); [m[59;99H[K[59;99H156,17[8C26%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 96 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m 97 [m[79C[100m [m
[33m 98 [m[8C[33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"spawn"[m)) {[37C[100m [m[58;1H[93m153 [m[59;99H[K[59;99H153,10[8C25%[58;14H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 93 [m[12Cargs[i - [38;5;130m1[m] = tokens[i];[43C[100m [m
[33m 94 [m[8C}[70C[100m [m
[33m 95 [m[8Cargs[spcs - [38;5;130m1[m] = [38;5;130m0[m;[52C[100m [m[58;1H[93m150 [m[16C[46m([m[7m[48;5;242mjobs[jobid].down) < [m[7m[38;5;130m[48;5;242m0[m[7m[48;5;242m) { [m[59;99H[K[59;99H150,17[8C24%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 90 [m[79C[100m [m
[33m 91 [m[8C[32mchar[m* args[spcs];[54C[100m [m
[33m 92 [m[8C[33mfor[m ([32mint[m i = [38;5;130m1[m; i < spcs; i++) {[39C[100m [m[58;1H[93m147 [m[59;99H[K[59;99H147,9[9C23%[58;13H[?25h[?25l[31;1H[93m120 [m[4m        printf([m[4m[38;5;130m"> "[m[4m);                                                          [m[4m[100m [m[4m                                [m[58;1H[33m147 [m[59;1H[K[59;99H120,11[8C23%[31;15H[?25h[?25l[33m120 [m        pr[7m[48;5;242mintf([m[7m[38;5;130m[48;5;242m"> "[m[7m[48;5;242m); [m                                                         [100m [m[31;85H[K[32;5H[7m[48;5;242m        fflush([m[7m[38;5;130m[48;5;242mstdout[m[7m[48;5;242m); [33;5H         [34;5H        free(input); [m
[93m124 [m[7m[48;5;242m        free(to[m[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H124,16[8C23%[35;20H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 87 [m[12C[33mcontinue[m;[58C[100m [m
[33m 88 [m[8C}[70C[100m [m
[33m 89 [m[8Ctokens = split_space_not_quote(input, &spcs);[26C[100m [m[59;99H[K[59;99H124,16[8C22%[38;20H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 84 [m[8C[33mif[m (!strcmp(input, [38;5;130m""[m)) {[46C[100m [m
[33m 85 [m[12Cprintf([38;5;130m"> "[m);[54C[100m [m
[33m 86 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m[59;99H[K[59;99H124,16[8C22%[41;20H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 81 [m    [33mwhile[m ((input = read_line([38;5;130mstdin[m)) != [38;5;130mNULL[m) {[31C[100m [m
[33m 82 [m[8C[32mint[m spcs = [38;5;130m0[m;[58C[100m [m
[33m 83 [m[79C[100m [m[59;99H[K[59;99H124,16[8C21%[44;20H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 78 [m    printf([38;5;130m"> "[m);[62C[100m [m
[33m 79 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m 80 [m    [36m// prompt loop[m[61C[100m [m[59;99H[K[59;99H124,16[8C20%[47;20H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 75 [m[79C[100m [m
[33m 76 [m    signal([38;5;130mSIGINT[m, handle_signal);[45C[100m [m
[33m 77 [m    signal([38;5;130mSIGCHLD[m, handle_signal);[44C[100m [m[59;99H[K[59;99H124,16[8C19%[50;20H[?25h[?25l[7;1H[93m 81 [m[4m    [m[4m[33mwhile[m[4m ((input = read_line([m[4m[38;5;130mstdin[m[4m)) != [m[4m[38;5;130mNULL[m[4m) {                               [m[4m[100m [m[4m                                [m[46;15Hintf([38;5;130m"> "[m); [47;5H        fflush([38;5;130mstdout[m); [48;5H         [49;5H        free(input); 
[33m124 [m        free(to[59;1H[K[59;99H81,24[9C19%[7;28H[?25h[?25l[59;102H13[7;17H[?25h[?25l[7;5H    [33mwhile[m [46m([m([7m[48;5;242minput = read_line([m[7m[38;5;130m[48;5;242mstdin[m[7m[48;5;242m)) != [m[7m[38;5;130m[48;5;242mNULL[m[46m)[m {                               [100m [m[7;85H[K[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H81,46[9C19%[7;50H[?25h[?25l[7;5H[4m    [m[4m[33mwhile[m[4m [m[4m[46m([m[4m(input = read_line([m[4m[38;5;130mstdin[m[4m)) != [m[4m[38;5;130mNULL[m[4m[46m)[m[4m {                               [m[4m[100m [m[4m                                [m[59;1H[K[59;99H81,46[9C19%[7;50H[?25h[?25l[7;15H[4m([m[4m[46m([24C)[m[8C[4m)[m[59;102H12[7;16H[?25h[?25l[7;5H    [33mwhile[m [46m([m[7m[48;5;242m(input = read_line([m[7m[38;5;130m[48;5;242mstdin[m[7m[48;5;242m)) != [m[7m[38;5;130m[48;5;242mNULL[m[46m)[m {                               [100m [m[7;85H[K[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H81,46[9C19%[7;50H[?25h[?25l[7;5H[4m    [m[4m[33mwhile[m[4m [m[4m[46m([m[4m(input = read_line([m[4m[38;5;130mstdin[m[4m)) != [m[4m[38;5;130mNULL[m[4m[46m)[m[4m {                               [m[4m[100m [m[4m                                [m[59;1H[K[59;99H81,46[9C19%[7;50H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 72 [m    [32mchar[m** tokens;[61C[100m [m
[33m 73 [m[79C[100m [m
[33m 74 [m    jobs = malloc([38;5;130m0[m * [33msizeof[m([32mstruct[m Job));[37C[100m [m[59;99H[K[59;99H81,46[9C18%[10;50H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 69 [m[79C[100m [m
[33m 70 [m[32mint[m main([32mint[m argc, [32mchar[m* argv[]) {[45C[100m [m
[33m 71 [m    [32mchar[m* input;[63C[100m [m[59;99H[K[59;99H81,46[9C18%[13;50H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 66 [m[79C[100m [m
[33m 67 [m[79C[100m [m
[33m 68 [m[36m// Program[m[69C[100m [m[59;99H[K[59;99H81,46[9C17%[16;50H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 63 [m[79C[100m [m
[33m 64 [m[32mint[m [38;5;248m[104mjobid[m = -[38;5;130m1[m;[64C[100m [m
[33m 65 [m[32mstruct[m Job* jobs;[62C[100m [m[59;99H[K[59;99H81,46[9C16%[19;50H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 60 [m};[77C[100m [m
[33m 61 [m[79C[100m [m
[33m 62 [m[36m// Globals[m[69C[100m [m[59;99H[K[59;99H81,46[9C15%[22;50H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 57 [m    [32mint[m up[[38;5;130m2[m];[65C[100m [m
[33m 58 [m    [32mint[m status;[64C[100m [m
[33m 59 [m    [32mint[m finished;[62C[100m [m[59;99H[K[59;99H81,46[9C14%[25;50H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 54 [m    [32mint[m pid;[67C[100m [m
[33m 55 [m    [32mchar[m name[MAX_BUFFER_SIZE];[48C[100m [m
[33m 56 [m    [32mint[m down[[38;5;130m2[m];[63C[100m [m[59;99H[K[59;99H81,46[9C14%[28;50H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 51 [m[36m// Structs[m[69C[100m [m
[33m 52 [m[79C[100m [m
[33m 53 [m[32mstruct[m Job {[67C[100m [m[59;99H[K[59;99H81,46[9C13%[31;50H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 48 [m[79C[100m [m
[33m 49 [m[32mbool[m is_job([32mchar[m job[]);[55C[100m [m
[33m 50 [m[79C[100m [m[59;99H[K[59;99H81,46[9C12%[34;50H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 45 [m[32mvoid[m handle_signal([32mint[m s);[53C[100m [m
[33m 46 [m[79C[100m [m
[33m 47 [m[32mbool[m is_number([32mchar[m number[]);[49C[100m [m[59;99H[K[59;99H81,46[9C11%[37;50H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m103 [m[12Creport(args, spcs);[48C[100m [m
[33m104 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"signal"[m)) {[29C[100m [m
[33m105 [m[12Ccall_signal(args, spcs);[43C[100m [m[59;99H[K[59;99H81,46[9C12%[34;50H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m106 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"sleep"[m)) {[30C[100m [m
[33m107 [m[12Chq_wait(args, spcs);[47C[100m [m
[33m108 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"send"[m)) {[31C[100m [m[59;99H[K[59;99H81,46[9C13%[31;50H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m109 [m[12Csend(args, spcs);[50C[100m [m
[33m110 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"rcv"[m)) {[32C[100m [m
[33m111 [m[12Crcv(args, spcs);[51C[100m [m[59;99H[K[59;99H81,46[9C14%[28;50H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m112 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"eof"[m)) {[32C[100m [m
[33m113 [m[12Ceof(args, spcs);[51C[100m [m
[33m114 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"cleanup"[m)) {[28C[100m [m[59;99H[K[59;99H81,46[9C14%[25;50H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m115 [m[12Ccleanup();[57C[100m [m
[33m116 [m[8C} [33melse[m {[63C[100m [m
[33m117 [m[12Cprintf([38;5;130m"Error: Invalid command[m[35m\n[m[38;5;130m"[m);[32C[100m [m[59;99H[K[59;99H81,46[9C15%[22;50H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m118 [m[8C}[70C[100m [m
[33m119 [m[79C[100m [m
[33m120 [m[8Cprintf([38;5;130m"> "[m);[58C[100m [m[59;99H[K[59;99H81,46[9C16%[19;50H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m121 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m122 [m[79C[100m [m
[33m123 [m[8Cfree(input);[59C[100m [m[59;99H[K[59;99H81,46[9C17%[16;50H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m124 [m[8Cfree(tokens);[58C[100m [m
[33m125 [m    }[74C[100m [m
[33m126 [m[79C[100m [m[59;99H[K[59;99H81,46[9C18%[13;50H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m127 [m    free(jobs);[64C[100m [m
[33m128 [m    [33mreturn[m [38;5;130m0[m;[66C[100m [m
[33m129 [m}[78C[100m [m[59;99H[K[59;99H81,46[9C18%[10;50H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m130 [m[79C[100m [m
[33m131 [m[36m/* spawn()[m[69C[100m [m
[33m132 [m[36m * -------[m[69C[100m [m[59;99H[K[59;99H81,46[9C19%[7;50H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m
[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m
[33m135 [m[36m * of the child process is unchanged[m[43C[100m [m[59;99H[K[59;99H81,46[9C20%[4;50H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m136 [m[36m *[m[77C[100m [m
[33m137 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m138 [m[36m * spcs: number of original tokens[m[45C[100m [m[59;99H[K[59;99H81,46[9C21%[1;50H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 84 [m[4m        [m[4m[33mif[m[4m (!strcmp(input, [m[4m[38;5;130m""[m[4m)) [m[4m[46m{[m[4m                                              [m[4m[100m [m[4m                                [m[5;13H[46m}[m[56;1H[33m139 [m[36m */[m[76C[100m [m
[33m140 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs) {[44C[100m [m
[33m141 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m[59;99H[K[59;99H84,33[9C22%[1;37H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 87 [m[4m            [m[4m[33mcontinue[m[4m;                                                          [m[4m[100m [m[4m                                [m[2;13H}[56;1H[33m142 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m143 [m    } [33melse[m {[67C[100m [m
[33m144 [m[8C[38;5;248m[104mjobid[m++;[63C[100m [m[59;99H[K[59;99H87,21[9C22%[1;25H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 90 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m145 [m[79C[100m [m
[33m146 [m[8Cjobs = realloc(jobs, ([38;5;248m[104mjobid[m + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));[16C[100m [m
[33m147 [m[79C[100m [m[59;99H[K[59;99H90,0-1[8C23%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 93 [m[4m            args[i - [m[4m[38;5;130m1[m[4m] = tokens[i];                                           [m[4m[100m [m[4m                                [m[56;1H[33m148 [m[8Cstrcpy(jobs[[38;5;248m[104mjobid[m].name, args[[38;5;130m0[m]);[37C[100m [m
[33m149 [m[79C[100m [m
[33m150 [m[8C[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].down) < [38;5;130m0[m) {[38C[100m [m[59;99H[K[59;99H93,36[9C24%[1;40H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 96 [m[4m        fflush([m[4m[38;5;130mstdout[m[4m);                                                        [m[4m[100m [m[4m                                [m[56;1H[33m151 [m[12Cperror([38;5;130m"Creating down pipe"[m);[38C[100m [m
[33m152 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m153 [m[8C}[70C[100m [m[59;99H[K[59;99H96,23[9C25%[1;27H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 99 [m[4m            [m[4m[36m// spawn[m[4m                                                           [m[4m[100m [m[4m                                [m[56;1H[33m154 [m[79C[100m [m
[33m155 [m[8C[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].up) < [38;5;130m0[m) {[40C[100m [m
[33m156 [m[12Cperror([38;5;130m"Creating up pipe"[m);[40C[100m [m[59;99H[K[59;99H99,20[9C26%[1;24H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m102 [m[4m            [m[4m[36m// Report[m[4m                                                          [m[4m[100m [m[4m                                [m[56;1H[33m157 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m158 [m[8C}[70C[100m [m
[33m159 [m[79C[100m [m[59;99H[K[59;99H102,21[8C26%[1;25H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m105 [m[4m            call_signal(args, spcs);                                           [m[4m[100m [m[4m                                [m[56;1H[33m160 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, [38;5;248m[104mjobid[m);[28C[100m [m
[33m161 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m162 [m[79C[100m [m[59;99H[K[59;99H105,36[8C27%[1;40H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m108 [m[4m        } [m[4m[33melse[m[4m [m[4m[33mif[m[4m [m[4m[46m([m[4m!strcmp(tokens[[m[4m[38;5;130m0[m[4m], [m[4m[38;5;130m"send"[m[4m)[m[4m[46m)[m[4m {                               [m[4m[100m [m[4m                                [m[56;1H[33m163 [m[8Cjobs[[38;5;248m[104mjobid[m].pid = fork();[46C[100m [m
[33m164 [m[8C[33mif[m (!jobs[[38;5;248m[104mjobid[m].pid) {[48C[100m [m
[33m165 [m[12C[36m// child[m[59C[100m [m[59;99H[K[59;99H108,46[8C28%[1;50H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m111 [m[4m            rcv(args, spcs);                                                   [m[4m[100m [m[4m                                [m[56;1H[33m166 [m[79C[100m [m
[33m167 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m168 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[WRITE]);[36C[100m [m[59;99H[K[59;99H111,28[8C29%[1;32H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m114 [m[4m        } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (!strcmp(tokens[[m[4m[38;5;130m0[m[4m], [m[4m[38;5;130m"cleanup"[m[4m)) {                            [m[4m[100m [m[4m                                [m[56;1H[33m169 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[READ]);[39C[100m [m
[33m170 [m[79C[100m [m
[33m171 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].down[READ], STDIN_FILENO);[24C[100m [m[59;99H[K[59;99H114,46[8C30%[1;50H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m117 [m[4m            printf[m[4m[46m([m[4m[38;5;130m"Error: Invalid command[m[4m[35m\n[m[4m[38;5;130m"[m[4m[46m)[m[4m;                                [m[4m[100m [m[4m                                [m[56;1H[33m172 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m173 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].up[WRITE], STDOUT_FILENO);[24C[100m [m
[33m174 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m[59;99H[K[59;99H117,46[8C30%[1;50H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m120 [m[4m        printf([m[4m[38;5;130m"> "[m[4m);                                                          [m[4m[100m [m[4m                                [m[56;1H[33m175 [m[79C[100m [m
[33m176 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m177 [m[12Cfflush([38;5;130mstderr[m);[52C[100m [m[59;99H[K[59;99H120,21[8C31%[1;25H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m123 [m[4m        free(input);                                                           [m[4m[100m [m[4m                                [m[56;1H[33m178 [m[79C[100m [m
[33m179 [m[12C[32mint[m status;[56C[100m [m
[33m180 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m[59;99H[K[59;99H123,20[8C32%[1;24H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m126 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m181 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m
[33m182 [m[16Cexit([38;5;130m99[m);[54C[100m [m
[33m183 [m[12C}[66C[100m [m[59;99H[K[59;99H126,4[9C33%[1;8H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m129 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[56;1H[33m184 [m[8C} [33melse[m {[63C[100m [m
[33m185 [m[12C[36m// parent[m[58C[100m [m
[33m186 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m[59;99H[K[59;99H129,1[9C34%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m132 [m[4m[36m * -------[m[4m                                                                     [m[4m[100m [m[4m                                [m[56;1H[33m187 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m
[33m188 [m[8C}[70C[100m [m
[33m189 [m    }[74C[100m [m[59;99H[K[59;99H132,10[8C34%[1;14H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m135 [m[4m[36m * of the child process is unchanged[m[4m                                           [m[4m[100m [m[4m                                [m[56;1H[33m190 [m}[78C[100m [m
[33m191 [m[79C[100m [m
[33m192 [m[36m/* report()[m[68C[100m [m[59;99H[K[59;99H135,36[8C35%[1;40H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m138 [m[4m[36m * spcs: number of original tokens[m[4m                                             [m[4m[100m [m[4m                                [m[56;1H[33m193 [m[36m * --------[m[68C[100m [m
[33m194 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m
[33m195 [m[36m *[m[77C[100m [m[59;99H[K[59;99H138,34[8C36%[1;38H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m141 [m[4m    [m[4m[33mif[m[4m (spcs < [m[4m[38;5;130m2[m[4m) [m[4m[46m{[m[4m                                                            [m[4m[100m [m[4m                                [m[3;9H[46m}[m[56;1H[33m196 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m197 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m198 [m[36m */[m[76C[100m [m[59;99H[K[59;99H141,19[8C37%[1;23H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m144 [m[4m        [m[4m[38;5;248m[104mjobid[m[4m++;                                                               [m[4m[100m [m[4m                                [m[56;1H[33m199 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[43C[100m [m
[33m200 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m201 [m[79C[100m [m[59;99H[K[59;99H144,16[8C38%[1;20H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m147 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m202 [m    [36m// Header row[m[62C[100m [m
[33m203 [m    printf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[46C[100m [m
[33m204 [m[79C[100m [m[59;99H[K[59;99H147,8[9C38%[1;12H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m150 [m[4m        [m[4m[33mif[m[4m (pipe(jobs[[m[4m[38;5;248m[104mjobid[m[4m].down) < [m[4m[38;5;130m0[m[4m) [m[4m[46m{[m[4m                                      [m[4m[100m [m[4m                                [m[4;13H[46m}[m[56;1H[33m205 [m    [36m// Job status output dependent on arg present status[m[23C[100m [m
[33m206 [m[79C[100m [m
[33m207 [m    [36m// check args[m[62C[100m [m[59;99H[K[59;99H150,41[8C39%[1;45H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m153 [m[4m        }                                                                      [m[4m[100m [m[4m                                [m[56;1H[33m208 [m    [33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[37C[100m [m
[33m209 [m[8C[33mfor[m ([32mint[m i = [38;5;130m0[m; i < [38;5;248m[104mjobid[m; i++) {[38C[100m [m
[33m210 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[31C[100m [m[59;99H[K[59;99H153,9[9C40%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m156 [m[4m            perror([m[4m[38;5;130m"Creating up pipe"[m[4m);                                        [m[4m[100m [m[4m                                [m[56;1H[33m211 [m[12C[33mif[m (!jobs[i].finished) {[43C[100m [m
[33m212 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m213 [m[12C} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[28C[100m [m[59;99H[K[59;99H156,39[8C41%[1;43H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m159 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m214 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[12C[100m [m
[33m215 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {[26C[100m [m
[33m216 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[11C[100m [m[59;99H[K[59;99H159,0-1[7C42%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m162 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m217 [m[12C} [33melse[m {[59C[100m [m
[33m218 [m[16Cprintf([38;5;130m"Error[m[35m\n[m[38;5;130m"[m);[45C[100m [m
[33m219 [m[12C}[66C[100m [m[59;99H[K[59;99H162,0-1[7C42%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m165 [m[4m            [m[4m[36m// child[m[4m                                                           [m[4m[100m [m[4m                                [m[56;1H[33m220 [m[8C}[70C[100m [m
[33m221 [m[79C[100m [m
[33m222 [m    } [33melse[m [33mif[m (spcs > [38;5;130m1[m) {      [36m// report on specific job[m[22C[100m [m[59;99H[K[59;99H165,20[8C43%[1;24H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m168 [m[4m            close(jobs[[m[4m[38;5;248m[104mjobid[m[4m].down[WRITE]);                                    [m[4m[100m [m[4m                                [m[56;1H[33m223 [m[8C[36m// check for job tokens[1][m[45C[100m [m
[33m224 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m225 [m[12C[32mint[m jobq = atoi(args[[38;5;130m0[m]);[42C[100m [m[59;99H[K[59;99H168,43[8C44%[1;47H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m171 [m[4m            dup2(jobs[[m[4m[38;5;248m[104mjobid[m[4m].down[READ], STDIN_FILENO);                        [m[4m[100m [m[4m                                [m[56;1H[33m226 [m[79C[100m [m
[33m227 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, jobq, jobs[jobq].name);[25C[100m [m
[33m228 [m[79C[100m [m[59;99H[K[59;99H171,46[8C45%[1;50H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m174 [m[4m            close(jobs[[m[4m[38;5;248m[104mjobid[m[4m].up[WRITE]);                                      [m[4m[100m [m[4m                                [m[56;1H[33m229 [m[12C[33mif[m (WIFEXITED(jobs[jobq].status)) {[32C[100m [m
[33m230 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WEXITSTATUS(jobs[jobq].status));[8C[100m [m
[33m231 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[jobq].status)) {[23C[100m [m[59;99H[K[59;99H174,41[8C46%[1;45H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m177 [m[4m            fflush([m[4m[38;5;130mstderr[m[4m);                                                    [m[4m[100m [m[4m                                [m[56;1H[33m232 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[jobq].status));[8C[100m [m
[33m233 [m[12C} [33melse[m {[59C[100m [m
[33m234 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m[59;99H[K[59;99H177,27[8C46%[1;31H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m180 [m[4m            status = execvp(args[[m[4m[38;5;130m0[m[4m], args);                                    [m[4m[100m [m[4m                                [m[56;1H[33m235 [m[12C}[66C[100m [m
[33m236 [m[8C} [33melse[m {[63C[100m [m
[33m237 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m[59;99H[K[59;99H180,43[8C47%[1;47H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m183 [m[4m            }                                                                  [m[4m[100m [m[4m                                [m[56;1H[33m238 [m[8C}[70C[100m [m
[33m239 [m    }[74C[100m [m
[33m240 [m}[78C[100m [m[59;99H[K[59;99H183,13[8C48%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m186 [m[4m            close(jobs[[m[4m[38;5;248m[104mjobid[m[4m].down[READ]);                                     [m[4m[100m [m[4m                                [m[56;1H[33m241 [m[79C[100m [m
[33m242 [m[36m/* call_signal()[m[63C[100m [m
[33m243 [m[36m * -------------[m[63C[100m [m[59;99H[K[59;99H186,42[8C49%[1;46H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m189 [m[4m    }                                                                          [m[4m[100m [m[4m                                [m[56;1H[33m244 [m[36m * Sends signal to child process specified[m[37C[100m [m
[33m245 [m[36m *[m[77C[100m [m
[33m246 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[59;99H[K[59;99H189,5[9C50%[1;9H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m192 [m[4m[36m/* report()[m[4m                                                                    [m[4m[100m [m[4m                                [m[56;1H[33m247 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m248 [m[36m */[m[76C[100m [m
[33m249 [m[32mvoid[m call_signal([32mchar[m** args, [32mint[m spcs) {[38C[100m [m[59;99H[K[59;99H192,11[8C50%[1;15H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m195 [m[4m[36m *[m[4m                                                                             [m[4m[100m [m[4m                                [m[56;1H[33m250 [m    [33mif[m (spcs < [38;5;130m3[m) {[60C[100m [m
[33m251 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m252 [m    } [33melse[m {[67C[100m [m[59;99H[K[59;99H195,2[9C51%[1;6H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m198 [m[4m[36m */[m[4m                                                                            [m[4m[100m [m[4m                                [m[56;1H[33m253 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m254 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m
[33m255 [m[12C[33mif[m (is_number(args[[38;5;130m1[m])){[43C[100m [m[59;99H[K[59;99H198,3[9C52%[1;7H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m201 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m256 [m[16C[32mint[m sgnl = atoi(args[[38;5;130m1[m]);[38C[100m [m
[33m257 [m[16C[33mif[m (sgnl >= [38;5;130m1[m && sgnl <= [38;5;130m31[m) {[33C[100m [m
[33m258 [m[20C[32mint[m pid = jobs[job].pid;[35C[100m [m[59;99H[K[59;99H201,0-1[7C53%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m204 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m259 [m[20Ckill(pid, sgnl);[43C[100m [m
[33m260 [m[16C} [33melse[m {[55C[100m [m
[33m261 [m[20Cprintf([38;5;130m"Error: Invalid signal[m[35m\n[m[38;5;130m"[m);[25C[100m [m[59;99H[K[59;99H204,0-1[7C54%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m207 [m[4m    [m[4m[36m// check args[m[4m                                                              [m[4m[100m [m[4m                                [m[56;1H[33m262 [m[16C}[62C[100m [m
[33m263 [m[12C} [33melse[m {[59C[100m [m
[33m264 [m[16Cprintf([38;5;130m"Error: Invalid signal[m[35m\n[m[38;5;130m"[m);[29C[100m [m[59;99H[K[59;99H207,17[8C54%[1;21H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m210 [m[4m            printf([m[4m[38;5;130m"[[m[4m[35m%d[m[4m[38;5;130m] [m[4m[35m%s[m[4m[38;5;130m:"[m[4m, i, jobs[i].name);                               [m[4m[100m [m[4m                                [m[56;1H[33m265 [m[12C}[66C[100m [m
[33m266 [m[8C} [33melse[m {[63C[100m [m
[33m267 [m[12Cprintf([38;5;130m"Error: invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m[59;99H[K[59;99H210,46[8C55%[1;50H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m213 [m[4m            } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (WIFEXITED(jobs[i].status)) {                            [m[4m[100m [m[4m                                [m[56;1H[33m268 [m[8C}[70C[100m [m
[33m269 [m    }[74C[100m [m
[33m270 [m}[78C[100m [m[59;99H[K[59;99H213,46[8C56%[1;50H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m216 [m[4m                printf([m[4m[38;5;130m"signalled([m[4m[35m%d[m[4m[38;5;130m)[m[4m[35m\n[m[4m[38;5;130m"[m[4m, WTERMSIG(jobs[i].status));           [m[4m[100m [m[4m                                [m[56;1H[33m271 [m[79C[100m [m
[33m272 [m[36m/* hq_wait()[m[67C[100m [m
[33m273 [m[36m * ---------[m[67C[100m [m[59;99H[K[59;99H216,46[8C57%[1;50H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m219 [m[4m            }                                                                  [m[4m[100m [m[4m                                [m[56;1H[33m274 [m[36m * Causes hq to wait for specified seconds[m[37C[100m [m
[33m275 [m[36m *[m[77C[100m [m
[33m276 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[59;99H[K[59;99H219,13[8C58%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m222 [m[4m    } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (spcs > [m[4m[38;5;130m1[m[4m) {      [m[4m[36m// report on specific job[m[4m                      [m[4m[100m [m[4m                                [m[56;1H[33m277 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m278 [m[36m */[m[76C[100m [m
[33m279 [m[32mvoid[m hq_wait([32mchar[m** args, [32mint[m spcs) {[42C[100m [m[59;99H[K[59;99H222,46[8C58%[1;50H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m225 [m[4m            [m[4m[32mint[m[4m jobq = atoi(args[[m[4m[38;5;130m0[m[4m]);                                          [m[4m[100m [m[4m                                [m[56;1H[33m280 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m281 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m282 [m    } [33melse[m {[67C[100m [m[59;99H[K[59;99H225,37[8C59%[1;41H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m228 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m283 [m[8C[33mif[m (strcmp(args[[38;5;130m0[m], [38;5;130m""[m) && is_number(args[[38;5;130m0[m])) {[23C[100m [m
[33m284 [m[12Csleep(atoi(args[[38;5;130m0[m]) * [38;5;130m1000000[m);[36C[100m [m
[33m285 [m[8C} [33melse[m {[63C[100m [m[59;99H[K[59;99H228,0-1[7C60%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m231 [m[4m            } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (WIFSIGNALED(jobs[jobq].status)) {                       [m[4m[100m [m[4m                                [m[56;1H[33m286 [m[12Cprintf([38;5;130m"Error: Invalid sleep time[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m287 [m[8C}[70C[100m [m
[33m288 [m    }[74C[100m [m[59;99H[K[59;99H231,46[8C61%[1;50H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m234 [m[4m                printf([m[4m[38;5;130m"running[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                           [m[4m[100m [m[4m                                [m[56;1H[33m289 [m}[78C[100m [m
[33m290 [m[79C[100m [m
[33m291 [m[36m/* send()[m[70C[100m [m[59;99H[K[59;99H234,36[8C62%[1;40H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m237 [m[4m            printf([m[4m[38;5;130m"Error: Invalid job[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                    [m[4m[100m [m[4m                                [m[56;1H[33m292 [m[36m * ------[m[70C[100m [m
[33m293 [m[36m * Sends text down the pipe to specified job[m[35C[100m [m
[33m294 [m[36m *[m[77C[100m [m[59;99H[K[59;99H237,43[8C62%[1;47H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m240 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[56;1H[33m295 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m296 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m297 [m[36m */[m[76C[100m [m[59;99H[K[59;99H240,1[9C63%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m243 [m[4m[36m * -------------[m[4m                                                               [m[4m[100m [m[4m                                [m[56;1H[33m298 [m[32mvoid[m send([32mchar[m** args, [32mint[m spcs) {[45C[100m [m
[33m299 [m    [33mif[m (spcs < [38;5;130m3[m) {[60C[100m [m
[33m300 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m[59;99H[K[59;99H243,16[8C64%[1;20H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m246 [m[4m[36m * args: arguments provided in command line without first command[m[4m              [m[4m[100m [m[4m                                [m[56;1H[33m301 [m    } [33melse[m {[67C[100m [m
[33m302 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m303 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m[59;99H[K[59;99H246,46[8C65%[1;50H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m249 [m[4m[32mvoid[m[4m call_signal([m[4m[32mchar[m[4m** args, [m[4m[32mint[m[4m spcs) [m[4m[46m{[m[4m                                      [m[4m[100m [m[4m                                [m[22;5H[46m}[m[56;1H[33m304 [m[12C[32mFILE[m* writef = fdopen(jobs[job].down[WRITE], [38;5;130m"w"[m);[17C[100m [m
[33m305 [m[12Cfprintf(writef, [38;5;130m"[m[35m%s\n[m[38;5;130m"[m, args[[38;5;130m1[m]);[34C[100m [m
[33m306 [m[8C} [33melse[m {[63C[100m [m[59;99H[K[59;99H249,41[8C66%[1;45H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m252 [m[4m    } [m[4m[33melse[m[4m [m[4m[46m{[m[4m                                                                   [m[4m[100m [m[4m                                [m[18;9H[46m}[m[19;5H}[56;1H[33m307 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m308 [m[8C}[70C[100m [m
[33m309 [m    }[74C[100m [m[59;99H[K[59;99H252,12[8C66%[1;16H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m255 [m[4m            [m[4m[33mif[m[4m (is_number(args[[m[4m[38;5;130m1[m[4m]))[m[4m[46m{[m[4m                                           [m[4m[100m [m[4m                                [m[9;17H[46m}[m[15;9H}[56;1H[33m310 [m}[78C[100m [m
[33m311 [m[79C[100m [m
[33m312 [m[36m/* rcv()[m[71C[100m [m[59;99H[K[59;99H255,36[8C67%[1;40H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m258 [m[4m                    [m[4m[32mint[m[4m pid = jobs[job].pid;                                   [m[4m[100m [m[4m                                [m[6;17H}[56;1H[33m313 [m[36m * -----[m[71C[100m [m
[33m314 [m[36m * Receives data through the pipe from the specified child process.[m[12C[100m [m
[33m315 [m[36m * Prints this to stdout in the parent, hq.[m[36C[100m [m[59;99H[K[59;99H258,44[8C68%[1;48H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m261 [m[4m                    printf([m[4m[38;5;130m"Error: Invalid signal[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                         [m[4m[100m [m[4m                                [m[56;1H[33m316 [m[36m *[m[77C[100m [m
[33m317 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m318 [m[36m * spcs: number of original tokens[m[45C[100m [m[59;99H[K[59;99H261,46[8C69%[1;50H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m264 [m[4m                printf([m[4m[38;5;130m"Error: Invalid signal[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                             [m[4m[100m [m[4m                                [m[56;1H[33m319 [m[36m */[m[76C[100m [m
[33m320 [m[32mvoid[m rcv([32mchar[m** args, [32mint[m spcs) {[46C[100m [m
[33m321 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m[59;99H[K[59;99H264,46[8C70%[1;50H[?25h[?25l[33m264 [m                printf([38;5;130m"Error: Invalid signal[m[35m\n[m[38;5;130m"[m);                             [100m [m[1;85H[K[21;1H[93m284 [m[4m            sleep(atoi(args[[m[4m[38;5;130m0[m[4m]) * [m[4m[38;5;130m1000000[m[4m);                                    [m[4m[100m [m[4m                                [m[59;100H84,14[21;18H[?25h[?25l[21;5H            s[7m[48;5;242mleep(atoi(args[[m[7m[38;5;130m[48;5;242m0[m[7m[48;5;242m]) * [m[7m[38;5;130m[48;5;242m1000000[m[7m[48;5;242m);[m                                    [100m [m[21;85H[K[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H284,44[8C70%[21;48H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m261 [m[20Cprintf([38;5;130m"Error: Invalid signal[m[35m\n[m[38;5;130m"[m);[25C[100m [m
[33m262 [m[16C}[62C[100m [m
[33m263 [m[12C} [33melse[m {[59C[100m [m[59;99H[K[59;99H284,44[8C69%[24;48H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m258 [m[20C[32mint[m pid = jobs[job].pid;[35C[100m [m
[33m259 [m[20Ckill(pid, sgnl);[43C[100m [m
[33m260 [m[16C} [33melse[m {[55C[100m [m[59;99H[K[59;99H284,44[8C68%[27;48H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m255 [m[12C[33mif[m (is_number(args[[38;5;130m1[m])){[43C[100m [m
[33m256 [m[16C[32mint[m sgnl = atoi(args[[38;5;130m1[m]);[38C[100m [m
[33m257 [m[16C[33mif[m (sgnl >= [38;5;130m1[m && sgnl <= [38;5;130m31[m) {[33C[100m [m[59;99H[K[59;99H284,44[8C67%[30;48H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m252 [m    } [33melse[m {[67C[100m [m
[33m253 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m254 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m[59;99H[K[59;99H284,44[8C66%[33;48H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m249 [m[32mvoid[m call_signal([32mchar[m** args, [32mint[m spcs) {[38C[100m [m
[33m250 [m    [33mif[m (spcs < [38;5;130m3[m) {[60C[100m [m
[33m251 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m[59;99H[K[59;99H284,44[8C66%[36;48H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m246 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m247 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m248 [m[36m */[m[76C[100m [m[59;99H[K[59;99H284,44[8C65%[39;48H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m243 [m[36m * -------------[m[63C[100m [m
[33m244 [m[36m * Sends signal to child process specified[m[37C[100m [m
[33m245 [m[36m *[m[77C[100m [m[59;99H[K[59;99H284,44[8C64%[42;48H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m240 [m}[78C[100m [m
[33m241 [m[79C[100m [m
[33m242 [m[36m/* call_signal()[m[63C[100m [m[59;99H[K[59;99H284,44[8C63%[45;48H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m237 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m238 [m[8C}[70C[100m [m
[33m239 [m    }[74C[100m [m[59;99H[K[59;99H284,44[8C62%[48;48H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m234 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m235 [m[12C}[66C[100m [m
[33m236 [m[8C} [33melse[m {[63C[100m [m[59;99H[K[59;99H284,44[8C62%[51;48H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m231 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[jobq].status)) {[23C[100m [m
[33m232 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[jobq].status));[8C[100m [m
[33m233 [m[12C} [33melse[m {[59C[100m [m[59;99H[K[59;99H284,44[8C61%[54;48H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m228 [m[79C[100m [m
[33m229 [m[12C[33mif[m (WIFEXITED(jobs[jobq].status)) {[32C[100m [m
[33m230 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WEXITSTATUS(jobs[jobq].status));[8C[100m [m[59;99H[K[59;99H284,44[8C60%[57;48H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m225 [m[12C[32mint[m jobq = atoi(args[[38;5;130m0[m]);[42C[100m [m
[33m226 [m[79C[100m [m
[33m227 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, jobq, jobs[jobq].name);[25C[100m [m[58;1H[93m282 [m[59;99H[K[59;99H282,13[8C59%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m222 [m    } [33melse[m [33mif[m (spcs > [38;5;130m1[m) {      [36m// report on specific job[m[22C[100m [m
[33m223 [m[8C[36m// check for job tokens[1][m[45C[100m [m
[33m224 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m[58;1H[93m279 [m[59;99H[K[59;99H279,38[8C58%[58;42H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m219 [m[12C}[66C[100m [m
[33m220 [m[8C}[70C[100m [m
[33m221 [m[79C[100m [m[58;1H[93m276 [m[44C[7m[36m[48;5;242mwithout first command[m[7m[48;5;242m [m[59;99H[K[59;99H276,44[8C58%[58;48H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m216 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[11C[100m [m
[33m217 [m[12C} [33melse[m {[59C[100m [m
[33m218 [m[16Cprintf([38;5;130m"Error[m[35m\n[m[38;5;130m"[m);[45C[100m [m[58;1H[93m273 [m[59;99H[K[59;99H273,13[8C57%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m213 [m[12C} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[28C[100m [m
[33m214 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[12C[100m [m
[33m215 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {[26C[100m [m[58;1H[93m270 [m[59;99H[K[59;99H270,2[9C56%[58;6H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m210 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[31C[100m [m
[33m211 [m[12C[33mif[m (!jobs[i].finished) {[43C[100m [m
[33m212 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m[58;1H[93m267 [m[59;99H[K[59;99H267,44[8C55%[58;48H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m207 [m    [36m// check args[m[62C[100m [m
[33m208 [m    [33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[37C[100m [m
[33m209 [m[8C[33mfor[m ([32mint[m i = [38;5;130m0[m; i < [38;5;248m[104mjobid[m; i++) {[38C[100m [m[58;1H[93m264 [m[44C[7m[38;5;130m[48;5;242ml[m[7m[35m[48;5;242m\n[m[7m[38;5;130m[48;5;242m"[m[7m[48;5;242m); [m[59;99H[K[59;99H264,44[8C54%[58;48H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m204 [m[79C[100m [m
[33m205 [m    [36m// Job status output dependent on arg present status[m[23C[100m [m
[33m206 [m[79C[100m [m[58;1H[93m261 [m[44C[7m[38;5;130m[48;5;242mignal[m[7m[35m[48;5;242m\n[m[7m[38;5;130m[48;5;242m"[m[7m[48;5;242m); [m[59;99H[K[59;99H261,44[8C54%[58;48H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m201 [m[79C[100m [m
[33m202 [m    [36m// Header row[m[62C[100m [m
[33m203 [m    printf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[46C[100m [m[58;1H[93m258 [m[44C[7m[48;5;242m [m[59;99H[K[59;99H258,44[8C53%[58;48H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m198 [m[36m */[m[76C[100m [m
[33m199 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[43C[100m [m
[33m200 [m    fflush([38;5;130mstdout[m);[60C[100m [m[58;1H[93m255 [m[59;99H[K[59;99H255,37[8C52%[58;41H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m195 [m[36m *[m[77C[100m [m
[33m196 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m197 [m[36m * spcs: number of original tokens[m[45C[100m [m[58;1H[93m252 [m[59;99H[K[59;99H252,13[8C51%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m192 [m[36m/* report()[m[68C[100m [m
[33m193 [m[36m * --------[m[68C[100m [m
[33m194 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m[58;1H[93m249 [m[59;99H[K[59;99H249,42[8C50%[58;46H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m189 [m    }[74C[100m [m
[33m190 [m}[78C[100m [m
[33m191 [m[79C[100m [m[58;1H[93m246 [m[44C[7m[36m[48;5;242mwithout first command[m[7m[48;5;242m [m[59;99H[K[59;99H246,44[8C50%[58;48H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m186 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m187 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m
[33m188 [m[8C}[70C[100m [m[58;1H[93m243 [m[59;99H[K[59;99H243,17[8C49%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m183 [m[12C}[66C[100m [m
[33m184 [m[8C} [33melse[m {[63C[100m [m
[33m185 [m[12C[36m// parent[m[58C[100m [m[58;1H[93m240 [m[59;99H[K[59;99H240,2[9C48%[58;6H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m180 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m
[33m181 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m
[33m182 [m[16Cexit([38;5;130m99[m);[54C[100m [m[58;1H[93m237 [m[59;99H[K[59;99H237,44[8C47%[58;48H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m177 [m[12Cfflush([38;5;130mstderr[m);[52C[100m [m
[33m178 [m[79C[100m [m
[33m179 [m[12C[32mint[m status;[56C[100m [m[58;1H[93m234 [m[59;99H[K[59;99H234,37[8C46%[58;41H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m174 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m
[33m175 [m[79C[100m [m
[33m176 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m[58;1H[93m231 [m[44C[7m[48;5;242m].status)) { [m[59;99H[K[59;99H231,44[8C46%[58;48H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m171 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].down[READ], STDIN_FILENO);[24C[100m [m
[33m172 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m173 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].up[WRITE], STDOUT_FILENO);[24C[100m [m[58;1H[93m228 [m[59;99H[K[59;99H228,0-1[7C45%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m168 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[WRITE]);[36C[100m [m
[33m169 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[READ]);[39C[100m [m
[33m170 [m[79C[100m [m[58;1H[93m225 [m[59;99H[K[59;99H225,38[8C44%[58;42H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m165 [m[12C[36m// child[m[59C[100m [m
[33m166 [m[79C[100m [m
[33m167 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m[58;1H[93m222 [m[44C[7m[36m[48;5;242m specific job[m[7m[48;5;242m [m[59;99H[K[59;99H222,44[8C43%[58;48H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m162 [m[79C[100m [m
[33m163 [m[8Cjobs[[38;5;248m[104mjobid[m].pid = fork();[46C[100m [m
[33m164 [m[8C[33mif[m (!jobs[[38;5;248m[104mjobid[m].pid) {[48C[100m [m[58;1H[93m219 [m[59;99H[K[59;99H219,14[8C42%[58;18H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m159 [m[79C[100m [m
[33m160 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, [38;5;248m[104mjobid[m);[28C[100m [m
[33m161 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m[58;1H[93m216 [m[44C[7m[48;5;242mERMSIG(jobs[i].status)); [m[59;99H[K[59;99H216,44[8C42%[58;48H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m156 [m[12Cperror([38;5;130m"Creating up pipe"[m);[40C[100m [m
[33m157 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m158 [m[8C}[70C[100m [m[58;1H[93m213 [m[44C[7m[48;5;242mtus)) { [m[59;99H[K[59;99H213,44[8C41%[58;48H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m153 [m[8C}[70C[100m [m
[33m154 [m[79C[100m [m
[33m155 [m[8C[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].up) < [38;5;130m0[m) {[40C[100m [m[58;1H[93m210 [m[44C[7m[48;5;242mme); [m[59;99H[K[59;99H210,44[8C40%[58;48H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m150 [m[8C[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].down) < [38;5;130m0[m) {[38C[100m [m
[33m151 [m[12Cperror([38;5;130m"Creating down pipe"[m);[38C[100m [m
[33m152 [m[12Cexit([38;5;130m1[m);[59C[100m [m[58;1H[93m207 [m[59;99H[K[59;99H207,18[8C39%[58;22H[?25h[?25l[38;1H[93m187 [m[4m            close(jobs[[m[4m[38;5;248m[104mjobid[m[4m].up[WRITE]);                                      [m[4m[100m [m[4m                                [m[58;1H[33m207 [m[59;1H[K[59;99H187,41[8C39%[38;45H[?25h[?25l[59;1H[38;5;130m-- INSERT --[m[59;99H[K[59;99H187,41[8C39%[38;45H[?25h[?25l[59;104H2[38;46H[?25h[?25l[33m187 [m            close(jobs[[38;5;248m[104mjobid[m].up[WRITE]);                                      [100m [m[38;85H[K[39;1H[93m188 [m[4m                                                                               [m[4m[100m [m[4m                                [m[40;9H    }[41;5H    }[42;5H}[43;5H           [44;5H[36m/* report()[45;8H--------[m                                                                   [46;7H[36m Produces an outline to stdout of current child processes and their statuses[m[47;7H                                                               [48;8H[36margs: arguments provided in command line without first command[49;7H spcs: number of original tokens[50;5H */[m                                 [51;5H[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[52;9Hfflush([38;5;130mstdout[m);[53;9H             [54;9H[36m// Header row[m                [55;9Hprintf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[56;9H                                                    [57;9H[36m// Job status output dependent on arg present status[m[58;9H             [59;101H8,13[39;17H[?25h[?25l[33m188 [m                                                                               [100m [m[39;85H[K[40;1H[93m189 [m[4m                                                                               [m[4m[100m [m[4m                                [m[41;9H    }[42;5H    }[43;5H}[44;5H           [45;5H[36m/* report()[46;8H--------[m                                                                   [47;7H[36m Produces an outline to stdout of current child processes and their statuses[m[48;7H                                                               [49;8H[36margs: arguments provided in command line without first command[50;7H spcs: number of original tokens[51;5H */[m                                 [52;5H[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[53;9Hfflush([38;5;130mstdout[m);[54;9H             [55;9H[36m// Header row[m                [56;9Hprintf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[57;9H                                                    [58;9H[36m// Job status output dependent on arg present status[m[59;101H9[40;17H[?25h[?25l[4ms[m[59;104H4[40;18H[?25h[?25l[4ml[m[59;104H5[40;19H[?25h[?25l[4me[m[59;104H6[40;20H[?25h[?25l[4me[m[59;104H7[40;21H[?25h[?25l[4mp[m[59;104H8[40;22H[?25h[?25l[4m([m[59;104H9[40;23H[?25h[?25l[4m[38;5;130m4[m[59;103H20[40;24H[?25h[?25l[59;104H1[40;25H[?25h[?25l[4m*[m[59;104H2[40;26H[?25h[?25l[59;104H3[40;27H[?25h[?25l[4m[38;5;130m1[m[59;104H4[40;28H[?25h[?25l[4m[38;5;130m0[m[59;104H5[40;29H[?25h[?25l[4m[38;5;130m0[m[59;104H6[40;30H[?25h[?25l[4m[38;5;130m0[m[59;104H7[40;31H[?25h[?25l[4m[38;5;130m0[m[59;104H8[40;32H[?25h[?25l[4m[38;5;130m0[m[59;104H9[40;33H[?25h[?25l[4m[38;5;130m0[m[59;103H30[40;34H[?25h[?25l[4m [m[59;103H29[40;33H[?25h[?25l[4m [m[59;104H8[40;32H[?25h[?25l[4m [m[59;104H7[40;31H[?25h[?25l[4m [m[59;104H6[40;30H[?25h[?25l[4m [m[59;104H5[40;29H[?25h[?25l[4m[38;5;130m0[m[59;104H6[40;30H[?25h[?25l[4m[38;5;130m0[m[59;104H7[40;31H[?25h[?25l[4m[38;5;130m0[m[59;104H8[40;32H[?25h[?25l[4m[38;5;130m0[m[59;104H9[40;33H[?25h[?25l[4m[38;5;130m0[m[59;103H30[40;34H[?25h[?25l[4m)[m[59;103H18[40;22H[?25h[59;1H[K[40;34H[?25l[40;22H[4m[46m([11C)[m[59;99H189,30[8C39%[40;34H[?25h[?25l[59;99H[K[59;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?1000l[?2004l"hq.c" 435L, 10735C written
[?2004l[?1l>[?25h[?1049l[23;0;0ts4698512@moss:~/CSSE2310/Assignments/a3$ make
gcc -g -Wall -pedantic -std=gnu99 -o hq hq.c -I/local/courses/csse2310/include -L/local/courses/csse2310/lib -lcsse2310a3
[01m[Khq.c:[m[K In function â€˜[01m[Kspawn[m[Kâ€™:
[01m[Khq.c:189:31:[m[K [01;31m[Kerror: [m[Kexpected â€˜[01m[K;[m[Kâ€™ before â€˜[01m[K}[m[Kâ€™ token
             sleep(4 * 1000000)
                               [01;31m[K^[m[K
                               [32m[K;[m[K
         [32m[K}[m[K
         [32m[K~[m[K                      
make: *** [makefile:10: hq] Error 1
s4698512@moss:~/CSSE2310/Assignments/a3$ makevim hq.c[4P./hqmakevim hq.c[4Pmake./hqvim hq.c[4P./hqvim hq.c
[?1000h[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;59r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[59;1H"hq.c" 435L, 10735C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[33m161 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m162 [m[79C[100m [m
[33m163 [m[8Cjobs[[38;5;248m[104mjobid[m].pid = fork();[46C[100m [m
[33m164 [m[8C[33mif[m (!jobs[[38;5;248m[104mjobid[m].pid) {[48C[100m [m
[33m165 [m[12C[36m// child[m[59C[100m [m
[33m166 [m[79C[100m [m
[33m167 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m168 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[WRITE]);[36C[100m [m
[33m169 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[READ]);[39C[100m [m
[33m170 [m[79C[100m [m
[33m171 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].down[READ], STDIN_FILENO);[24C[100m [m
[33m172 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m173 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].up[WRITE], STDOUT_FILENO);[24C[100m [m
[33m174 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m
[33m175 [m[79C[100m [m
[33m176 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m177 [m[12Cfflush([38;5;130mstderr[m);[52C[100m [m
[33m178 [m[79C[100m [m
[33m179 [m[12C[32mint[m status;[56C[100m [m
[33m180 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m
[33m181 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m
[33m182 [m[16Cexit([38;5;130m99[m);[54C[100m [m
[33m183 [m[12C}[66C[100m [m
[33m184 [m[8C} [33melse[m {[63C[100m [m
[33m185 [m[12C[36m// parent[m[58C[100m [m
[33m186 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m187 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m
[33m188 [m[79C[100m [m
[93m189 [m[4m            sleep([m[4m[38;5;130m4[m[4m * [m[4m[38;5;130m1000000[m[4m)                                                 [m[4m[100m [m[4m                                [m[30;1H[33m190 [m[8C}[70C[100m [m
[33m191 [m    }[74C[100m [m
[33m192 [m}[78C[100m [m
[33m193 [m[79C[100m [m
[33m194 [m[36m/* report()[m[68C[100m [m
[33m195 [m[36m * --------[m[68C[100m [m
[33m196 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m
[33m197 [m[36m *[m[77C[100m [m
[33m198 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m199 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m200 [m[36m */[m[76C[100m [m
[33m201 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[43C[100m [m
[33m202 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m203 [m[79C[100m [m
[33m204 [m    [36m// Header row[m[62C[100m [m
[33m205 [m    printf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[46C[100m [m
[33m206 [m[79C[100m [m
[33m207 [m    [36m// Job status output dependent on arg present status[m[23C[100m [m
[33m208 [m[79C[100m [m
[33m209 [m    [36m// check args[m[62C[100m [m
[33m210 [m    [33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[37C[100m [m
[33m211 [m[8C[33mfor[m ([32mint[m i = [38;5;130m0[m; i < [38;5;248m[104mjobid[m; i++) {[38C[100m [m
[33m212 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[31C[100m [m
[33m213 [m[12C[33mif[m (!jobs[i].finished) {[43C[100m [m
[33m214 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m215 [m[12C} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[28C[100m [m
[33m216 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[12C[100m [m
[33m217 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {[26C[100m [m
[33m218 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[11C[100m [m[59;99H189,13[8C42%[29;17H[?25h[?12$p[?25l[59;104H4[29;18H[?25h[?25l[4C[4m[46m([11C)[m[59;103H30[29;34H[?25h[?25l[59;1H[38;5;130m-- INSERT --[m[59;14H[K[59;99H189,30[8C42%[29;34H[?25h[?25l[4m[46m;[m[4m);[m[4m[46m)[m[59;104H1[29;35H[?25h[59;1H[K[29;34H[?25l[29;22H[4m([12C)[m[59;99H189,30[8C42%[29;34H[?25h[?25l[59;103H29[29;33H[?25h[?25l[59;103H30[29;34H[?25h[?25l[29;22H[4m[46m([12C)[m[59;104H1[29;35H[?25h[?25l[59;1H[38;5;130m-- INSERT --[m[59;99H[K[59;99H189,31[8C42%[29;35H[?25h[?25l[4m)[m[4m[46m )[m[4m [m[59;104H0[29;34H[?25h[?25l[59;104H1[29;35H[?25h[?25l[4m;[29;22H([11C)[m[59;104H2[29;36H[?25h[59;1H[K[29;35H[?25l[59;99H189,31[8C42%[29;35H[?25h[?25l[59;99H[K[59;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?1000l[?2004l"hq.c" 435L, 10736C written
[?2004l[?1l>[?25h[?1049l[23;0;0ts4698512@moss:~/CSSE2310/Assignments/a3$ mkae
bash: mkae: command not found
s4698512@moss:~/CSSE2310/Assignments/a3$ .//[K[Km[K[Kmake
gcc -g -Wall -pedantic -std=gnu99 -o hq hq.c -I/local/courses/csse2310/include -L/local/courses/csse2310/lib -lcsse2310a3
s4698512@moss:~/CSSE2310/Assignments/a3$ ./hq
> spawn cat
New Job ID [0] created
^C> s4698512@moss:~/CSSE2310/Assignments/a3$ ./hqmakekae
bash: mkae: command not found
s4698512@moss:~/CSSE2310/Assignments/a3$ mkae./hqmakekaevim hq.c
[?1000h[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;59r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[59;1H"hq.c" 435L, 10736C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[33m161 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m162 [m[79C[100m [m
[33m163 [m[8Cjobs[[38;5;248m[104mjobid[m].pid = fork();[46C[100m [m
[33m164 [m[8C[33mif[m (!jobs[[38;5;248m[104mjobid[m].pid) {[48C[100m [m
[33m165 [m[12C[36m// child[m[59C[100m [m
[33m166 [m[79C[100m [m
[33m167 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m168 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[WRITE]);[36C[100m [m
[33m169 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[READ]);[39C[100m [m
[33m170 [m[79C[100m [m
[33m171 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].down[READ], STDIN_FILENO);[24C[100m [m
[33m172 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m173 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].up[WRITE], STDOUT_FILENO);[24C[100m [m
[33m174 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m
[33m175 [m[79C[100m [m
[33m176 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m177 [m[12Cfflush([38;5;130mstderr[m);[52C[100m [m
[33m178 [m[79C[100m [m
[33m179 [m[12C[32mint[m status;[56C[100m [m
[33m180 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m
[33m181 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m
[33m182 [m[16Cexit([38;5;130m99[m);[54C[100m [m
[33m183 [m[12C}[66C[100m [m
[33m184 [m[8C} [33melse[m {[63C[100m [m
[33m185 [m[12C[36m// parent[m[58C[100m [m
[33m186 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m187 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m
[33m188 [m[79C[100m [m
[93m189 [m[4m            sleep([m[4m[38;5;130m4[m[4m * [m[4m[38;5;130m1000000[m[4m);                                                [m[4m[100m [m[4m                                [m[30;1H[33m190 [m[8C}[70C[100m [m
[33m191 [m    }[74C[100m [m
[33m192 [m}[78C[100m [m
[33m193 [m[79C[100m [m
[33m194 [m[36m/* report()[m[68C[100m [m
[33m195 [m[36m * --------[m[68C[100m [m
[33m196 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m
[33m197 [m[36m *[m[77C[100m [m
[33m198 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m199 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m200 [m[36m */[m[76C[100m [m
[33m201 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[43C[100m [m
[33m202 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m203 [m[79C[100m [m
[33m204 [m    [36m// Header row[m[62C[100m [m
[33m205 [m    printf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[46C[100m [m
[33m206 [m[79C[100m [m
[33m207 [m    [36m// Job status output dependent on arg present status[m[23C[100m [m
[33m208 [m[79C[100m [m
[33m209 [m    [36m// check args[m[62C[100m [m
[33m210 [m    [33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[37C[100m [m
[33m211 [m[8C[33mfor[m ([32mint[m i = [38;5;130m0[m; i < [38;5;248m[104mjobid[m; i++) {[38C[100m [m
[33m212 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[31C[100m [m
[33m213 [m[12C[33mif[m (!jobs[i].finished) {[43C[100m [m
[33m214 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m215 [m[12C} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[28C[100m [m
[33m216 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[12C[100m [m
[33m217 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {[26C[100m [m
[33m218 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[11C[100m [m[59;99H189,13[8C42%[29;17H[?25h[?12$p[?25l[59;103H21[29;25H[?25h[?25l[59;104H0[29;24H[?25h[?25l[59;1H[38;5;130m-- INSERT --[m[59;14H[K[59;99H189,20[8C42%[29;24H[?25h[?25l[4m * [m[4m[38;5;130m10[m[5C[4m); [m[29;22H[4m[46m([10C)[m[59;103H19[29;23H[?25h[?25l[4m[38;5;130m1[m[4m * [m[4m[38;5;130m1[m[5C[4m[38;5;130m[46m0[m[4m);[29;22H([m[10C[4m[38;5;130m0[m[59;103H20[29;24H[?25h[?25l[59;104H1[29;25H[?25h[?25l[59;104H2[29;26H[?25h[?25l[59;104H3[29;27H[?25h[?25l[59;104H4[29;28H[?25h[?25l[59;104H5[29;29H[?25h[?25l[59;104H6[29;30Hmif[m (WIFSIGNALED(jobs[i].status)) {[26C[100m [m
[33m218 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[11C[100m [m[59;99H189,13[8C42%[29;17H[?25h[?12$p[?25l[59;103H21[29;25H[?25h[?25l[59;104H0[29;24H[?25h[?25l[59;1H[38;5;130m-- INSERT --[m[59;14H[K[59;99H189,20[8C42%[29;24H[?25h[?25l[4m * [m[4m[38;5;130m10[m[5C[4m); [m[29;22H[4m[46m([10C)[m[59;103H19[29;23H[?25h[?25l[4m[38;5;130m1[m[4m * [m[4m[38;5;130m1[m[5C[4m[38;5;130m[46m0[m[4m);[29;22H([m[10C[4m[38;5;130m0[m[59;103H20[29;24H[?25h[?25l[59;104H1[29;25H[?25h[?25l[59;104H2[29;26H[?25h[?25l[59;104H3[29;27H[?25h[?25l[59;104H4[29;28H[?25h[?25l[59;104H5[29;29H[?25h[?25l[59;104H6[29;30H[?25h[?25l[59;104H7[29;31H[?25h[?25l[59;104H8[29;32H[?25h[?25l[59;104H9[29;33H[?25h[?25l[29;22H[4m[46m([11C)[m[59;103H30[29;34H[?25h[?25l[4m)[m[4m[46m;[m[4m [m[4m[46m)[m[4m;[m[59;103H29[29;33H[?25h[?25l[4m)[m[4m[46m;[m[4m [m[4m[46m)[m[4m;[m[59;104H8[29;32H[?25h[?25l[4m)[m[4m[46m;[m[4m [m[4m[46m)[m[4m;[m[59;104H7[29;31H[?25h[?25l[4m)[m[4m[46m;[m[4m [m[4m[46m)[m[4m;[m[59;104H6[29;30H[?25h[?25l[4m)[m[4m[46m;[m[4m [m[4m[46m)[m[4m;[m[59;104H5[29;29H[?25h[?25l[4m)[m[4m[46m;[m[4m [m[4m[46m)[m[4m;[m[59;104H4[29;28H[?25h[?25l[4m)[m[4m[46m;[m[4m [m[4m[46m)[m[4m;[m[59;104H3[29;27H[?25h[?25l[4m[38;5;130m[46m1[m[4m);[m[4m[38;5;130m1[m[4m[46m)[m[59;104H4[29;28H[?25h[?25l[4m[38;5;130m[46m0[m[4m);[m[4m[38;5;130m0[m[4m[46m)[m[59;104H5[29;29H[?25h[?25l[4m[38;5;130m[46m0[m[4m);[m[4m[38;5;130m0[m[4m[46m)[m[59;104H6[29;30H[?25h[?25l[4m[38;5;130m[46m0[m[4m);[m[4m[38;5;130m0[m[4m[46m)[m[59;104H7[29;31H[?25h[?25l[4m[38;5;130m[46m0[m[4m);[m[4m[38;5;130m0[m[4m[46m)[m[59;104H8[29;32H[?25h[?25l[4m[38;5;130m[46m0[m[4m);[m[4m[38;5;130m0[m[4m[46m)[m[59;104H9[29;33H[?25h[?25l[4m[38;5;130m[46m0[m[4m);[m[4m[38;5;130m0[m[4m[46m)[m[59;103H30[29;34H[?25h[?25l[4m)[m[4m[46m;[m[4m [m[4m[46m)[m[4m;[m[59;103H29[29;33H[?25h[?25l[4m)[m[4m[46m;[m[4m [m[4m[46m)[m[4m;[m[59;104H8[29;32H[?25h[59;1H[K[29;31H[?25l[29;22H[4m([9C)[m[59;99H189,27[8C42%[29;31H[?25h[?25l[59;99H[K[59;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?1000l[?2004l"hq.c" 435L, 10734C written
[?2004l[?1l>[?25h[?1049l[23;0;0ts4698512@moss:~/CSSE2310/Assignments/a3$ make
gcc -g -Wall -pedantic -std=gnu99 -o hq hq.c -I/local/courses/csse2310/include -L/local/courses/csse2310/lib -lcsse2310a3
s4698512@moss:~/CSSE2310/Assignments/a3$ ./hq
> spawn cat
New Job ID [0] created
^C> s4698512@moss:~/CSSE2310/Assignments/a3$ ./hqmakevim hq.c
[?1000h[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;59r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[59;1H"hq.c" 435L, 10734C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[33m161 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m162 [m[79C[100m [m
[33m163 [m[8Cjobs[[38;5;248m[104mjobid[m].pid = fork();[46C[100m [m
[33m164 [m[8C[33mif[m (!jobs[[38;5;248m[104mjobid[m].pid) {[48C[100m [m
[33m165 [m[12C[36m// child[m[59C[100m [m
[33m166 [m[79C[100m [m
[33m167 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m168 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[WRITE]);[36C[100m [m
[33m169 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[READ]);[39C[100m [m
[33m170 [m[79C[100m [m
[33m171 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].down[READ], STDIN_FILENO);[24C[100m [m
[33m172 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m173 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].up[WRITE], STDOUT_FILENO);[24C[100m [m
[33m174 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m
[33m175 [m[79C[100m [m
[33m176 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m177 [m[12Cfflush([38;5;130mstderr[m);[52C[100m [m
[33m178 [m[79C[100m [m
[33m179 [m[12C[32mint[m status;[56C[100m [m
[33m180 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m
[33m181 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m
[33m182 [m[16Cexit([38;5;130m99[m);[54C[100m [m
[33m183 [m[12C}[66C[100m [m
[33m184 [m[8C} [33melse[m {[63C[100m [m
[33m185 [m[12C[36m// parent[m[58C[100m [m
[33m186 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m187 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m
[33m188 [m[79C[100m [m
[93m189 [m[4m            sleep([m[4m[38;5;130m1[m[4m * [m[4m[38;5;130m10000[m[4m);                                                  [m[4m[100m [m[4m                                [m[30;1H[33m190 [m[8C}[70C[100m [m
[33m191 [m    }[74C[100m [m
[33m192 [m}[78C[100m [m
[33m193 [m[79C[100m [m
[33m194 [m[36m/* report()[m[68C[100m [m
[33m195 [m[36m * --------[m[68C[100m [m
[33m196 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m
[33m197 [m[36m *[m[77C[100m [m
[33m198 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m199 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m200 [m[36m */[m[76C[100m [m
[33m201 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[43C[100m [m
[33m202 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m203 [m[79C[100m [m
[33m204 [m    [36m// Header row[m[62C[100m [m
[33m205 [m    printf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[46C[100m [m
[33m206 [m[79C[100m [m
[33m207 [m    [36m// Job status output dependent on arg present status[m[23C[100m [m
[33m208 [m[79C[100m [m
[33m209 [m    [36m// check args[m[62C[100m [m
[33m210 [m    [33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[37C[100m [m
[33m211 [m[8C[33mfor[m ([32mint[m i = [38;5;130m0[m; i < [38;5;248m[104mjobid[m; i++) {[38C[100m [m
[33m212 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[31C[100m [m
[33m213 [m[12C[33mif[m (!jobs[i].finished) {[43C[100m [m
[33m214 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m215 [m[12C} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[28C[100m [m
[33m216 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[12C[100m [m
[33m217 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {[26C[100m [m
[33m218 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[11C[100m [m[59;99H189,13[8C42%[29;17H[?25h[?12$p[?25l[59;104H7[29;21H[?25h[?25l[24;20H[46m{[m[29;13H[4m[46m}[m[3C[4m                 [m[30;9H}    [31;5H}    [32;5H [33;5H[36m/* report()[34;5H * --------[35;8HProduces an outline to stdout of current child processes and their statuses[m[36;7H                                                                            [37;7H[36m args: arguments provided in command line without first command[38;8Hspcs: number of original tokens[m                               [39;7H[36m/[m                               [40;5H[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[41;5H    fflush([38;5;130mstdout[m);                 [42;9H               [43;9H[36m// Header row[m[44;9Hprintf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[45;9H                             [46;9H[36m// Job status output dependent on arg present status[m[47;9H                                                    [48;9H[36m// check args[m[                                       [59;103H9 [29;13H[?25h[?25l[24;20H{[28;1H[93m188 [m[4m                                                                               [m[4m[100m [m[4m                                [m[29;1H[33m189 [m        }                                                                      [100m [m[29;85H[K[59;101H8,0-1[28;5H[?25h[?25l[24;20H[46m{[m[28;13H[4m[46m}[m[29;9H}    [30;5H}    [31;5H [32;5H[36m/* report()[33;5H * --------[34;8HProduces an outline to stdout of current child processes and their statuses[m[35;7H                                                                            [36;7H[36m args: arguments provided in command line without first command[37;8Hspcs: number of original tokens[m                               [38;7H[36m/[m                               [39;5H[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[40;5H    fflush([38;5;130mstdout[m);                 [41;9H               [42;9H[36m// Header row[m[43;9Hprintf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[44;9H                             [45;9H[36m// Job status output dependent on arg present status[m[46;9H                                                    [47;9H[36m// check args[m[48;9H[33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[49;9H    [33mfor[m ([32mint[m i = [38;5;130m0[m; i < [38;5;248m[104mjobid[m; i++) { [50;13H    printf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[51;17H[33mif[m (!jobs[i].finished) {            [52;17H    printf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[53;17H} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[54;17H    printf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[55;17H} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {              [56;17H    printf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[57;17H} [33melse[m {                                                [58;17H    printf([38;5;130m"Error[m[35m\n[m[38;5;130m"[m);[59;103H9  [28;13H[?25h[?25l[8;1H[93m168 [m[4m            close(jobs[[m[4m[38;5;248m[104mjobid[m[4m].down[WRITE]);                                    [m[4m[100m [m[4m                                [m[24;20H{[28;1H[33m188 [m        }                                                                      [100m [m[28;85H[K[59;100H68,24[8;28H[?25h[?25l[33m168 [m            close(jobs[[7m[48;5;242mjobid].down[WRITE]); [m                                   [100m [m[8;85H[K[9;5H[7m[48;5;242m            close(jobs[jobid].up[READ]); [10;5H             [11;5H            dup2(jobs[jobid].down[READ], STDIN_FILENO); [12;5H            close(jobs[jobid].down[READ]); [m
[93m173 [m[7m[48;5;242m            dup2(jobs[jobid].up[WRIT[m[59;1H[38;5;130m-- VISUAL --[m[59;14H[K[59;99H173,37[8C42%[13;41H[?25h[?25l[8;28H[38;5;248m[104mjobid[m].down[WRITE]); [9;5H            close(jobs[[38;5;248m[104mjobid[m].up[READ]); [10;5H             [11;5H            dup2(jobs[[38;5;248m[104mjobid[m].down[READ], STDIN_FILENO); [12;5H            close(jobs[[38;5;248m[104mjobid[m].down[READ]); 
[33m173 [m            dup2(jobs[[38;5;248m[104mjobid[m].up[WRIT
[93m174 [m[4m            close(jobs[[m[4m[38;5;248m[104mjobid[m[4m].up[WRITE]);                                      [m[4m[100m [m[4m                                [m[59;1H[K[59;99H174,38[8C42%[14;42H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m158 [m[8C}[70C[100m [m
[33m159 [m[79C[100m [m
[33m160 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, [38;5;248m[104mjobid[m);[28C[100m [m[59;99H[K[59;99H174,38[8C41%[17;42H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m155 [m[8C[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].up) < [38;5;130m0[m) {[40C[100m [m
[33m156 [m[12Cperror([38;5;130m"Creating up pipe"[m);[40C[100m [m
[33m157 [m[12Cexit([38;5;130m1[m);[59C[100m [m[59;99H[K[59;99H174,38[8C41%[20;42H[?25h[?25l[14;1H[93m168 [m[4m            close(jobs[[m[4m[38;5;248m[104mjobid[m[4m].down[WRITE]);                                    [m[4m[100m [m[4m                                [m[20;1H[33m174 [m            close(jobs[[38;5;248m[104mjobid[m].up[WRITE]);                                      [100m [m[20;85H[K[59;100H68,36[14;40H[?25h[?25l[14;5H            close(jobs[[38;5;248m[104mjobid[m].down[46m[[m[7m[48;5;242mWRITE[m[46m][m);                                    [100m [m[14;85H[K[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H168,41[8C41%[14;45H[?25h[?25l[33m168 [m[34C[WRITE]
[93m169 [m[4m            close(jobs[[m[4m[38;5;248m[104mjobid[m[4m].up[READ]);                                       [m[4m[100m [m[4m                                [m[59;1H[K[59;99H169,34[8C41%[15;38H[?25h[?25l[15;5H            close[46m([mjobs[[38;5;248m[104mjobid[m].up[[7m[48;5;242mREAD][m[46m)[m;                                       [100m [m[15;85H[K[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H169,39[8C41%[15;43H[?25h[?25l[15;5H[4m            close[m[4m[46m([m[4mjobs[[m[4m[38;5;248m[104mjobid[m[4m].up[READ][m[4m[46m)[m[4m;                                       [m[4m[100m [m[4m                                [m[59;1H[K[59;99H169,39[8C41%[15;43H[?25h[?25l[33m169 [m            close(jobs[[38;5;248m[104mjobid[m].up[READ]);                                       [100m [m[15;85H[K[17;1H[93m171 [m[4m            dup2(jobs[[m[4m[38;5;248m[104mjobid[m[4m].down[READ], STDIN_FILENO);                        [m[4m[100m [m[4m                                [m[59;100H71,21[17;25H[?25h[?25l[33m171 [m            dup2(job[7m[48;5;242ms[jobid].down[READ], STDIN_FILENO); [m                       [100m [m[17;85H[K[18;1H[93m172 [m[7m[48;5;242m            close(jobs[jobid].down[RE[m[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H172,38[8C41%[18;42H[?25h[?25l[17;25Hs[[38;5;248m[104mjobid[m].down[READ], STDIN_FILENO); [18;5H[4m            close(jobs[[m[4m[38;5;248m[104mjobid[m[4m].down[READ]);                                     [m[4m[100m [m[4m                                [m[59;1H[K[59;99H172,38[8C41%[18;42H[?25h[?25l[17;1H[93m171 [m[4m            dup2(jobs[[m[4m[38;5;248m[104mjobid[m[4m].down[READ], STDIN_FILENO);                        [m[4m[100m [m[4m                                [m[18;1H[33m172 [m            close(jobs[[38;5;248m[104mjobid[m].down[READ]);                                     [100m [m[18;85H[K[59;101H1,27[17;31H[?25h[?25l[59;103H30[17;34H[?25h[?25l[17;5H            dup2(jobs[[38;5;248m[104mjobid[m].[7m[48;5;242mdown[READ[m[46m][m, STDIN_FILENO);                        [100m [m[17;85H[K[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H171,39[8C41%[17;43H[?25h[?25l[33m171 [m[29Cdown[READ]

[93m173 [m[4m            dup2(jobs[[m[4m[38;5;248m[104mjobid[m[4m].up[WRITE], STDOUT_FILENO);                        [m[4m[100m [m[4m                                [m[59;1H[K[59;99H173,29[8C41%[19;33H[?25h[?25l[33m173 [m            dup2(jobs[[38;5;248m[104mjobid[m][7m[48;5;242m.up[WRITE], STDOUT_FILENO); [m                       [100m [m[19;85H[K[20;1H[93m174 [m[7m[48;5;242m            close(jobs[jobid].up[WRIT[m[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H174,38[8C41%[20;42H[?25h[?25l[19;33H.up[WRITE], STDOUT_FILENO); [20;5H[4m            close(jobs[[m[4m[38;5;248m[104mjobid[m[4m].up[WRITE]);                                      [m[4m[100m [m[4m                                [m[59;1H[K[59;99H174,38[8C41%[20;42H[?25h[?25l[13;1H[93m167 [m[4m            fflush([m[4m[38;5;130mstdout[m[4m);                                                        [m[4m[100m [m[4m                                [m[59;1H[K[59;99H173,29[8C41%[19;33H[?25h[?25l[33m173 [m            dup2(jobs[[38;5;248m[104mjobid[m][7m[48;5;242m.up[WRITE], STDOUT_FILENO); [m                       [100m [m[19;85H[K[20;1H[93m174 [m[7m[48;5;242m            close(jobs[jobid].up[WRIT[m[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H174,38[8C41%[20;42H[?25h[?25l[19;33H.up[WRITE], STDOUT_FILENO); [20;5H[4m            close(jobs[[m[4m[38;5;248m[104mjobid[m[4m].up[WRITE]);                                      [m[4m[100m [m[4m                                [m[59;1H[K[59;99H174,38[8C41%[20;42H[?25h[?25l[13;1H[93m167 [m[4m            fflush([m[4m[38;5;130mstdout[m[4m);                                                    [m[4m[100m [m[4m                                [m[20;1H[33m174 [m            close(jobs[[38;5;248m[104mjobid[m].up[WRITE]);                                      [100m [m[20;85H[K[59;100H67,27[13;31H[?25h[?25l[13;17H[4mclose(jobs[[m[4m[38;5;248m[104mjobid[m[4m].down[WRITE]);[m[14;35Hup[READ]);   [15;17H                            [16;17Hdup2(jobs[[38;5;248m[104mjobid[m].down[READ], STDIN_FILENO);[17;17Hclose(jobs[[38;5;248m[104mjobid[m].down[READ]);             [18;17Hdup2(jobs[[38;5;248m[104mjobid[m].up[WRITE], STDOUT_FILENO);[19;17Hclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);              [20;17H                             [21;17Hfflush([38;5;130mstdout[m);[22;27H[38;5;130merr[m[23;17H               [24;17H[32mint[m status;[25;17Hstatus = execvp(args[[38;5;130m0[m], args);[26;17H[33mif[m (status == -[38;5;130m1[m) {            [27;17H    exit([38;5;130m99[m);      [28;17H}            [29;13H} [33melse[m {[30;13H    [36m// parent[m[31;17Hclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[32;35Hup[WRITE]); [33;13H}                                [34;9H}    [35;5H}    [36;5H [37;5H[36m/* report()[38;5H * --------[39;8HProduces an outline to stdout of current child processes and their statuses[m[40;7H                                                                            [41;7H[36m args: arguments provided in command line without first command[42;8Hspcs: number of original tokens[m                               [43;7H[36m/[m                               [44;5H[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[45;5H    fflush([38;5;130mstdout[m);                 [46;9H               [47;9H[36m// Header row[m[48;9Hprintf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[49;9H                             [50;9H[36m// Job status output dependent on arg present status[m[51;9H                                                    [52;9H[36m// check args[m[53;9H[33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[54;9H    [33mfor[m ([32mint[m i = [38;5;130m0[m; i < [38;5;248m[104mjobid[m; i++) { [55;13H    printf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[56;17H[33mif[m (!jobs[i].finished) {            [57;17H    printf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[58;17H} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[59;103H13[13;17H[?25h[?25l[33m167 [m            close(jobs[[38;5;248m[104mjobid[m].down[WRITE]);                                    [100m [m[13;85H[K[21;1H[93m175 [m[4m            fflush([m[4m[38;5;130mstdout[m[4m);                                                    [m[4m[100m [m[4m                                [m[59;100H75,21[21;25H[?25h[?25l[2C[4m[38;5;130merr[m[22;17H               [23;17H[32mint[m status;[24;17Hstatus = execvp(args[[38;5;130m0[m], args);[25;17H[33mif[m (status == -[38;5;130m1[m) {            [26;17H    exit([38;5;130m99[m);      [27;17H}            [28;13H} [33melse[m {[29;13H    [36m// parent[m[30;17Hclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[31;35Hup[WRITE]); [32;13H}                                [33;9H}    [34;5H}    [35;5H [36;5H[36m/* report()[37;5H * --------[38;8HProduces an outline to stdout of current child processes and their statuses[m[39;7H                                                                            [40;7H[36m args: arguments provided in command line without first command[41;8Hspcs: number of original tokens[m                               [42;7H[36m/[m                               [43;5H[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[44;5H    fflush([38;5;130mstdout[m);                 [45;9H               [46;9H[36m// Header row[m[47;9Hprintf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[48;9H                             [49;9H[36m// Job status output dependent on arg present status[m[50;9H                                                    [51;9H[36m// check args[m[52;9H[33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[53;9H    [33mfor[m ([32mint[m i = [38;5;130m0[m; i < [38;5;248m[104mjobid[m; i++) { [54;13H    printf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[55;17H[33mif[m (!jobs[i].finished) {            [56;17H    printf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[57;17H} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[58;17H    printf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[59;103H13[21;17H[?25h[?25l[4m               [m[22;17H[32mint[m status;[23;17Hstatus = execvp(args[[38;5;130m0[m], args);[24;17H[33mif[m (status == -[38;5;130m1[m) {            [25;17H    exit([38;5;130m99[m);      [26;17H}            [27;13H} [33melse[m {[28;13H    [36m// parent[m[29;17Hclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[30;35Hup[WRITE]); [31;13H}                                [32;9H}    [33;5H}    [34;5H [35;5H[36m/* report()[36;5H * --------[37;8HProduces an outline to stdout of current child processes and their statuses[m[38;7H                                                                            [39;7H[36m args: arguments provided in command line without first command[40;8Hspcs: number of original tokens[m                               [41;7H[36m/[m                               [42;5H[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[43;5H    fflush([38;5;130mstdout[m);                 [44;9H               [45;9H[36m// Header row[m[46;9Hprintf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[47;9H                             [48;9H[36m// Job status output dependent on arg present status[m[49;9H                                                    [50;9H[36m// check args[m[51;9H[33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[52;9H    [33mfor[m ([32mint[m i = [38;5;130m0[m; i < [38;5;248m[104mjobid[m; i++) { [53;13H    printf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[54;17H[33mif[m (!jobs[i].finished) {            [55;17H    printf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[56;17H} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[57;17H    printf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[58;17H} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {              [59;103H0-1[21;5H[?25h[?25l[59;1H[38;5;130m-- INSERT --[m[59;99H[K[59;99H175,1[9C41%[21;5H[?25h[?25l[20;1H[93m174 [m[4m                                                                               [m[4m[100m [m[4m                                [m[21;1H[33m175 [m            [32mint[m status;                                                        [100m [m[21;85H[K[22;17Hstatus = execvp(args[[38;5;130m0[m], args);[23;17H[33mif[m (status == -[38;5;130m1[m) {            [24;17H    exit([38;5;130m99[m);      [25;17H}            [26;13H} [33melse[m {[27;13H    [36m// parent[m[28;17Hclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[29;35Hup[WRITE]); [30;13H}                                [31;9H}    [32;5H}    [33;5H [34;5H[36m/* report()[35;5H * --------[36;8HProduces an outline to stdout of current child processes and their statuses[m[37;7H                                                                            [38;7H[36m args: arguments provided in command line without first command[39;8Hspcs: number of original tokens[m                               [40;7H[36m/[m                               [41;5H[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[42;5H    fflush([38;5;130mstdout[m);                 [43;9H               [44;9H[36m// Header row[m[45;9Hprintf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[46;9H                             [47;9H[36m// Job status output dependent on arg present status[m[48;9H                                                    [49;9H[36m// check args[m[50;9H[33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[51;9H    [33mfor[m ([32mint[m i = [38;5;130m0[m; i < [38;5;248m[104mjobid[m; i++) { [52;13H    printf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[53;17H[33mif[m (!jobs[i].finished) {            [54;17H    printf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[55;17H} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[56;17H    printf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[57;17H} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {              [58;17H    printf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[59;101H4,13[20;17H[?25h[59;1H[K[20;16H[?25l[59;99H174,12[8C41%[20;16H[?25h[?25l[59;99H[K[59;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?1000l[?2004l"hq.c" 429L, 10618C written
[?2004l[?1l>[?25h[?1049l[23;0;0ts4698512@moss:~/CSSE2310/Assignments/a3$ make
gcc -g -Wall -pedantic -std=gnu99 -o hq hq.c -I/local/courses/csse2310/include -L/local/courses/csse2310/lib -lcsse2310a3
s4698512@moss:~/CSSE2310/Assignments/a3$ ./hq
> spawn cat
New Job ID [0] created
> spawn ls
New Job ID [1] created
> ^Cs4698512@moss:~/CSSE2310/Assignments/a3$ testa3.sh
Setting up for tests
Time: Mon May 16 21:38:14 AEST 2022
[1mRunning make...(B[m
make: Nothing to be done for 'all'.
[1mRunning tests ... (B[m
----------------------------------------------------------------------
1.1   - sigcat_copies_input01                               [1m[32mPASS(B[m
1.2   - sigcat_copies_input02                               [1m[32mPASS(B[m
1.3   - sigcat_copies_input03                               [1m[31mFAIL(B[m
    Mismatch in file /tmp/1secondsample.out
2.1   - sigcat_signals01                                    [1m[32mPASS(B[m
2.2   - sigcat_signals02                                    [1m[32mPASS(B[m
2.3   - sigcat_signals03                                    [1m[32mPASS(B[m
2.4   - sigcat_signals04                                    [1m[32mPASS(B[m
2.5   - sigcat_signals05                                    [1m[32mPASS(B[m
2.6   - sigcat_signals06                                    [1m[32mPASS(B[m
2.7   - sigcat_signals07                                    [1m[32mPASS(B[m
2.8   - sigcat_signals08                                    [1m[32mPASS(B[m
2.9   - sigcat_signals09                                    [1m[32mPASS(B[m
2.10  - sigcat_signals10                                    [1m[32mPASS(B[m
2.11  - sigcat_signals11                                    [1m[32mPASS(B[m
2.12  - sigcat_signals12                                    [1m[32mPASS(B[m
2.13  - sigcat_signals13                                    [1m[32mPASS(B[m
2.14  - sigcat_signals14                                    [1m[32mPASS(B[m
2.15  - sigcat_signals15                                    [1m[32mPASS(B[m
3.1   - sigcat_sigusr01                                     [1m[32mPASS(B[m
3.2   - sigcat_sigusr02                                     [1m[32mPASS(B[m
4.1   - hq_invalid01                                        [1m[32mPASS(B[m
4.2   - hq_invalid02                                        [1m[32mPASS(B[m
5.1   - hq_spawn_cmd01                                      [1m[32mPASS(B[m
5.2   - hq_spawn_cmd02                                      [1m[32mPASS(B[m
5.3   - hq_spawn_cmd03                                      [1m[32mPASS(B[m
5.4   - hq_spawn_cmd04                                      [1m[32mPASS(B[m
5.5   - hq_spawn_cmd05                                      [1m[31mFAIL(B[m
    Got exitcode 124 (Timeout) - but expected 0
6.1   - hq_report_cmd01                                     [1m[32mPASS(B[m
6.2   - hq_report_cmd02                                     ^CCleaning up ...
Time: Mon May 16 21:39:10 AEST 2022
Done
s4698512@moss:~/CSSE2310/Assignments/a3$ exit
Script done, file is test1
s4698512@moss:~/CSSE2310/Assignments/a3$ script test1ps -ef | grep s4698512[10Pscript test1ps -ef | grep s4698512./hq[K[2Pls./hqqvim hq.c
[?1000h[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;59r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[59;1H"hq.c" 429L, 10618C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[33m146 [m[8Cjobs = realloc(jobs, ([38;5;248m[104mjobid[m + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));[16C[100m [m
[33m147 [m[79C[100m [m
[33m148 [m[8Cstrcpy(jobs[[38;5;248m[104mjobid[m].name, args[[38;5;130m0[m]);[37C[100m [m
[33m149 [m[79C[100m [m
[33m150 [m[8C[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].down) < [38;5;130m0[m) {[38C[100m [m
[33m151 [m[12Cperror([38;5;130m"Creating down pipe"[m);[38C[100m [m
[33m152 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m153 [m[8C}[70C[100m [m
[33m154 [m[79C[100m [m
[33m155 [m[8C[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].up) < [38;5;130m0[m) {[40C[100m [m
[33m156 [m[12Cperror([38;5;130m"Creating up pipe"[m);[40C[100m [m
[33m157 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m158 [m[8C}[70C[100m [m
[33m159 [m[79C[100m [m
[33m160 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, [38;5;248m[104mjobid[m);[28C[100m [m
[33m161 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m162 [m[79C[100m [m
[33m163 [m[8Cjobs[[38;5;248m[104mjobid[m].pid = fork();[46C[100m [m
[33m164 [m[8C[33mif[m (!jobs[[38;5;248m[104mjobid[m].pid) {[48C[100m [m
[33m165 [m[12C[36m// child[m[59C[100m [m
[33m166 [m[79C[100m [m
[33m167 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[WRITE]);[36C[100m [m
[33m168 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[READ]);[39C[100m [m
[33m169 [m[79C[100m [m
[33m170 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].down[READ], STDIN_FILENO);[24C[100m [m
[33m171 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m172 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].up[WRITE], STDOUT_FILENO);[24C[100m [m
[33m173 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m
[93m174 [m[4m                                                                               [m[4m[100m [m[4m                                [m[30;1H[33m175 [m[12C[32mint[m status;[56C[100m [m
[33m176 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m
[33m177 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m
[33m178 [m[16Cexit([38;5;130m99[m);[54C[100m [m
[33m179 [m[12C}[66C[100m [m
[33m180 [m[8C} [33melse[m {[63C[100m [m
[33m181 [m[12C[36m// parent[m[58C[100m [m
[33m182 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m183 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m
[33m184 [m[8C}[70C[100m [m
[33m18m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[46C[100m [m
[33m200 [m[79C[100m [m
[33m201 [m    [36m// Job status output dependent on arg present status[m[23C[100m [m
[33m202 [m[79C[100m [m
[33m203 [m    [36m// check args[m[62C[100m [m[59;99H174,12[8C39%[29;16H[?25h[?12$p[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m143 [m    } [33melse[m {[67C[100m [m
[33m144 [m[8C[38;5;248m[104mjobid[m++;[63C[100m [m
[33m145 [m[79C[100m [m[59;1H[K[59;99H174,12[8C38%[32;16H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m140 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs) {[44C[100m [m
[33m141 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m142 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m[59;99H[K[59;99H174,12[8C37%[35;16H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m137 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m138 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m139 [m[36m */[m[76C[100m [m[59;99H[K[59;99H174,12[8C36%[38;16H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m
[33m135 [m[36m * of the child process is unchanged[m[43C[100m [m
[33m136 [m[36m *[m[77C[100m [m[59;99H[K[59;99H174,12[8C35%[41;16H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m131 [m[36m/* spawn()[m[69C[100m [m
[33m132 [m[36m * -------[m[69C[100m [m
[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m[59;99H[K[59;99H174,12[8C35%[44;16H[?25h[?25l[33m174 [m                                                                               [100m [m[44;85H[K[52;1H[93m182 [m[4m            close(jobs[[m[4m[38;5;248m[104mjobid[m[4m].down[READ]);                                     [m[4m[100m [m[4m                                [m[59;100H82,16[52;20H[?25h[?25l[33m182 [m            clo[7m[48;5;242mse(jobs[jobid].down[READ]); [m                                    [100m [m[52;85H[K[53;1H[93m183 [m[7m[48;5;242m            close(jobs[jobid].up[WRITE][m[46m)[m[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H183,40[8C35%[53;44H[?25h[?25l[52;20Hse(jobs[[38;5;248m[104mjobid[m].down[READ]); [53;5H[4m            close[m[4m[46m([m[4mjobs[[m[4m[38;5;248m[104mjobid[m[4m].up[WRITE][m[4m[46m)[m[4m;                                      [m[4m[100m [m[4m                                [m[59;1H[K[59;99H183,40[8C35%[53;44H[?25h[?25l[53;22H[4m([21C)[m[59;104H1[53;45H[?25h[?25l[52;1H[93m182 [m[30C[7m[48;5;242mdown[READ]); [m
[33m183 [m[7m[48;5;242m            close(jobs[jobid].up[WRITE]);[m                                      [100m [m[53;85H[K[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H182,30[8C35%[52;34H[?25h[?25l[52;5H[4m            close(jobs[[m[4m[38;5;248m[104mjobid[m[4m].down[READ]);                                     [m[4m[100m [m[4m                                [m[53;5H            close(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[59;1H[K[59;99H182,30[8C35%[52;34H[?25h[?25l[59;104H1[52;35H[?25h[?25l[52;5H            close(jobs[[38;5;248m[104mjobid[m].[7m[48;5;242mdow[mn[READ]);                                     [100m [m[52;85H[K[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H182,34[8C35%[52;38H[?25h[?25l[52;5H[4m            close(jobs[[m[4m[38;5;248m[104mjobid[m[4m].down[READ]);                                     [m[4m[100m [m[4m                                [m[59;1H[K[59;99H182,34[8C35%[52;38H[?25h[?25l[33m182 [m            close(jobs[[38;5;248m[104mjobid[m].down[READ]);                                     [100m [m[52;85H[K[53;1H[93m183 [m[4m            close(jobs[[m[4m[38;5;248m[104mjobid[m[4m].up[WRITE]);                                      [m[4m[100m [m[4m                                [m[59;101H3,31[53;35H[?25h[?25l[53;5H            close[46m([mjobs[[38;5;248m[104mjobid[m].[7m[48;5;242mup[WRITE][m[46m)[m;                                      [100m [m[53;85H[K[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H183,40[8C35%[53;44H[?25h[?25l[53;5H[4m            close[m[4m[46m([m[4mjobs[[m[4m[38;5;248m[104mjobid[m[4m].up[WRITE][m[4m[46m)[m[4m;                                      [m[4m[100m [m[4m                                [m[59;1H[K[59;99H183,40[8C35%[53;44H[?25h[?25l[52;1H[93m182 [m[4m            close(jobs[[m[4m[38;5;248m[104mjobid[m[4m].down[READ]);                                     [m[4m[100m [m[4m                                [m[53;1H[33m183 [m            close(jobs[[38;5;248m[104mjobid[m].up[WRITE]);                                      [100m [m[53;85H[K[59;101H2,37[52;41H[?25h[?25l[50;20H[46m{[m

[33m182 [m            close(jobs[[38;5;248m[104mjobid[m].down[READ]);                                     [100m [m[52;85H[K[54;1H[93m184 [m[4m        [m[4m[46m}[m[4m                                                                      [m[4m[100m [m[4m                                [m[59;101H4,9 [54;13H[?25h[?25l[50;20H{


[93m183 [m[37C[7m[48;5;242mE]); [m
[33m184 [m[7m[48;5;242m        }[m                                                                      [100m [m[54;85H[K[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H183,37[8C35%[53;41H[?25h[?25l[53;5H[4m            close(jobs[[m[4m[38;5;248m[104mjobid[m[4m].up[WRITE]);                                      [m[4m[100m [m[4m                                [m[54;5H        }[59;1H[K[59;99H183,37[8C35%[53;41H[?25h[?25l[59;103H41[53;45H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m189 [m[36m * --------[m[68C[100m [m
[33m190 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m
[33m191 [m[36m *[m[77C[100m [m[59;99H[K[59;99H183,41[8C35%[50;45H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m192 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m193 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m194 [m[36m */[m[76C[100m [m[59;99H[K[59;99H183,41[8C36%[47;45H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m195 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[43C[100m [m
[33m196 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m197 [m[79C[100m [m[59;99H[K[59;99H183,41[8C37%[44;45H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m198 [m    [36m// Header row[m[62C[100m [m
[33m199 [m    printf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[46C[100m [m
[33m200 [m[79C[100m [m[59;99H[K[59;99H183,41[8C38%[41;45H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m201 [m    [36m// Job status output dependent on arg present status[m[23C[100m [m
[33m202 [m[79C[100m [m
[33m203 [m    [36m// check args[m[62C[100m [m[59;99H[K[59;99H183,41[8C39%[38;45H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m204 [m    [33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[37C[100m [m
[33m205 [m[8C[33mfor[m ([32mint[m i = [38;5;130m0[m; i < [38;5;248m[104mjobid[m; i++) {[38C[100m [m
[33m206 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[31C[100m [m[59;99H[K[59;99H183,41[8C39%[35;45H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m207 [m[12C[33mif[m (!jobs[i].finished) {[43C[100m [m
[33m208 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m209 [m[12C} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[28C[100m [m[59;99H[K[59;99H183,41[8C40%[32;45H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m210 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[12C[100m [m
[33m211 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {[26C[100m [m
[33m212 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[11C[100m [m[59;99H[K[59;99H183,41[8C41%[29;45H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m213 [m[12C} [33melse[m {[59C[100m [m
[33m214 [m[16Cprintf([38;5;130m"Error[m[35m\n[m[38;5;130m"[m);[45C[100m [m
[33m215 [m[12C}[66C[100m [m[59;99H[K[59;99H183,41[8C42%[26;45H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m216 [m[8C}[70C[100m [m
[33m217 [m[79C[100m [m
[33m218 [m    } [33melse[m [33mif[m (spcs > [38;5;130m1[m) {      [36m// report on specific job[m[22C[100m [m[59;99H[K[59;99H183,41[8C43%[23;45H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m219 [m[8C[36m// check for job tokens[1][m[45C[100m [m
[33m220 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m221 [m[12C[32mint[m jobq = atoi(args[[38;5;130m0[m]);[42C[100m [m[59;99H[K[59;99H183,41[8C43%[20;45H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m222 [m[79C[100m [m
[33m223 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, jobq, jobs[jobq].name);[25C[100m [m
[33m224 [m[79C[100m [m[59;99H[K[59;99H183,41[8C44%[17;45H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m225 [m[12C[33mif[m (WIFEXITED(jobs[jobq].status)) {[32C[100m [m
[33m226 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WEXITSTATUS(jobs[jobq].status));[8C[100m [m
[33m227 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[jobq].status)) {[23C[100m [m[59;99H[K[59;99H183,41[8C45%[14;45H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m228 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[jobq].status));[8C[100m [m
[33m229 [m[12C} [33melse[m {[59C[100m [m
[33m230 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m[59;99H[K[59;99H183,41[8C46%[11;45H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m231 [m[12C}[66C[100m [m
[33m232 [m[8C} [33melse[m {[63C[100m [m
[33m233 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m[59;99H[K[59;99H183,41[8C47%[8;45H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m234 [m[8C}[70C[100m [m
[33m235 [m    }[74C[100m [m
[33m236 [m}[78C[100m [m[59;99H[K[59;99H183,41[8C47%[5;45H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m237 [m[79C[100m [m
[33m238 [m[36m/* call_signal()[m[63C[100m [m
[33m239 [m[36m * -------------[m[63C[100m [m[59;99H[K[59;99H183,41[8C48%[2;45H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m185 [m[4m    }                                                                          [m[4m[100m [m[4m                                [m[56;1H[33m240 [m[36m * Sends signal to child process specified[m[37C[100m [m
[33m241 [m[36m *[m[77C[100m [m
[33m242 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[59;99H[K[59;99H185,5[9C49%[1;9H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m188 [m[4m[36m/* report()[m[4m                                                                    [m[4m[100m [m[4m                                [m[56;1H[33m243 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m244 [m[36m */[m[76C[100m [m
[33m245 [m[32mvoid[m call_signal([32mchar[m** args, [32mint[m spcs) {[38C[100m [m[59;99H[K[59;99H188,11[8C50%[1;15H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m191 [m[4m[36m *[m[4m                                                                             [m[4m[100m [m[4m                                [m[56;1H[33m246 [m    [33mif[m (spcs < [38;5;130m3[m) {[60C[100m [m
[33m247 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m248 [m    } [33melse[m {[67C[100m [m[59;99H[K[59;99H191,2[9C51%[1;6H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m194 [m[4m[36m */[m[4m                                                                            [m[4m[100m [m[4m                                [m[56;1H[33m249 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m250 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m
[33m251 [m[12C[33mif[m (is_number(args[[38;5;130m1[m])){[43C[100m [m[59;99H[K[59;99H194,3[9C52%[1;7H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m197 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m252 [m[16C[32mint[m sgnl = atoi(args[[38;5;130m1[m]);[38C[100m [m
[33m253 [m[16C[33mif[m (sgnl >= [38;5;130m1[m && sgnl <= [38;5;130m31[m) {[33C[100m [m
[33m254 [m[20C[32mint[m pid = jobs[job].pid;[35C[100m [m[59;99H[K[59;99H197,0-1[7C52%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m200 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m255 [m[20Ckill(pid, sgnl);[43C[100m [m
[33m256 [m[16C} [33melse[m {[55C[100m [m
[33m257 [m[20Cprintf([38;5;130m"Error: Invalid signal[m[35m\n[m[38;5;130m"[m);[25C[100m [m[59;99H[K[59;99H200,0-1[7C53%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m203 [m[4m    [m[4m[36m// check args[m[4m                                                              [m[4m[100m [m[4m                                [m[56;1H[33m258 [m[16C}[62C[100m [m
[33m259 [m[12C} [33melse[m {[59C[100m [m
[33m260 [m[16Cprintf([38;5;130m"Error: Invalid signal[m[35m\n[m[38;5;130m"[m);[29C[100m [m[59;99H[K[59;99H203,17[8C54%[1;21H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m206 [m[4m            printf([m[4m[38;5;130m"[[m[4m[35m%d[m[4m[38;5;130m] [m[4m[35m%s[m[4m[38;5;130m:"[m[4m, i, jobs[i].name);                               [m[4m[100m [m[4m                                [m[56;1H[33m261 [m[12C}[66C[100m [m
[33m262 [m[8C} [33melse[m {[63C[100m [m
[33m263 [m[12Cprintf([38;5;130m"Error: invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m[59;99H[K[59;99H206,43[8C55%[1;47H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m209 [m[4m            } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (WIFEXITED(jobs[i].status)) {                            [m[4m[100m [m[4m                                [m[56;1H[33m264 [m[8C}[70C[100m [m
[33m265 [m    }[74C[100m [m
[33m266 [m}[78C[100m [m[59;99H[K[59;99H209,43[8C56%[1;47H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m212 [m[4m                printf([m[4m[38;5;130m"signalled([m[4m[35m%d[m[4m[38;5;130m)[m[4m[35m\n[m[4m[38;5;130m"[m[4m, WTERMSIG(jobs[i].status));           [m[4m[100m [m[4m                                [m[56;1H[33m267 [m[79C[100m [m
[33m268 [m[36m/* hq_wait()[m[67C[100m [m
[33m269 [m[36m * ---------[m[67C[100m [m[59;99H[K[59;99H212,43[8C56%[1;47H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m215 [m[4m            }                                                                  [m[4m[100m [m[4m                                [m[56;1H[33m270 [m[36m * Causes hq to wait for specified seconds[m[37C[100m [m
[33m271 [m[36m *[m[77C[100m [m
[33m272 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[59;99H[K[59;99H215,13[8C57%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m218 [m[4m    } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (spcs > [m[4m[38;5;130m1[m[4m) {      [m[4m[36m// report on specific job[m[4m                      [m[4m[100m [m[4m                                [m[56;1H[33m273 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m274 [m[36m */[m[76C[100m [m
[33m275 [m[32mvoid[m hq_wait([32mchar[m** args, [32mint[m spcs) {[42C[100m [m[59;99H[K[59;99H218,43[8C58%[1;47H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m221 [m[4m            [m[4m[32mint[m[4m jobq = atoi(args[[m[4m[38;5;130m0[m[4m]);                                          [m[4m[100m [m[4m                                [m[56;1H[33m276 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m277 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m278 [m    } [33melse[m {[67C[100m [m[59;99H[K[59;99H221,37[8C59%[1;41H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m224 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m279 [m[8C[33mif[m (strcmp(args[[38;5;130m0[m], [38;5;130m""[m) && is_number(args[[38;5;130m0[m])) {[23C[100m [m
[33m280 [m[12Csleep(atoi(args[[38;5;130m0[m]) * [38;5;130m1000000[m);[36C[100m [m
[33m281 [m[8C} [33melse[m {[63C[100m [m[59;99H[K[59;99H224,0-1[7C60%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m227 [m[4m            } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (WIFSIGNALED(jobs[jobq].status)) {                       [m[4m[100m [m[4m                                [m[56;1H[33m282 [m[12Cprintf([38;5;130m"Error: Invalid sleep time[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m283 [m[8C}[70C[100m [m
[33m284 [m    }[74C[100m [m[59;99H[K[59;99H227,43[8C60%[1;47H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m230 [m[4m                printf([m[4m[38;5;130m"running[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                           [m[4m[100m [m[4m                                [m[56;1H[33m285 [m}[78C[100m [m
[33m286 [m[79C[100m [m
[33m287 [m[36m/* send()[m[70C[100m [m[59;99H[K[59;99H230,36[8C61%[1;40H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m233 [m[4m            printf([m[4m[38;5;130m"Error: Invalid job[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                    [m[4m[100m [m[4m                                [m[56;1H[33m288 [m[36m * ------[m[70C[100m [m
[33m289 [m[36m * Sends text down the pipe to specified job[m[35C[100m [m
[33m290 [m[36m *[m[77C[100m [m[59;99H[K[59;99H233,43[8C62%[1;47H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m236 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[56;1H[33m291 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m292 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m293 [m[36m */[m[76C[100m [m[59;99H[K[59;99H236,1[9C63%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m239 [m[4m[36m * -------------[m[4m                                                               [m[4m[100m [m[4m                                [m[56;1H[33m294 [m[32mvoid[m send([32mchar[m** args, [32mint[m spcs) {[45C[100m [m
[33m295 [m    [33mif[m (spcs < [38;5;130m3[m) {[60C[100m [m
[33m296 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m[59;99H[K[59;99H239,16[8C64%[1;20H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m242 [m[4m[36m * args: arguments provided in command line without first command[m[4m              [m[4m[100m [m[4m                                [m[56;1H[33m297 [m    } [33melse[m {[67C[100m [m
[33m298 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m299 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m[59;99H[K[59;99H242,43[8C64%[1;47H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m245 [m[4m[32mvoid[m[4m call_signal([m[4m[32mchar[m[4m** args, [m[4m[32mint[m[4m spcs) [m[4m[46m{[m[4m                                      [m[4m[100m [m[4m                                [m[22;5H[46m}[m[56;1H[33m300 [m[12C[32mFILE[m* writef = fdopen(jobs[job].down[WRITE], [38;5;130m"w"[m);[17C[100m [m
[33m301 [m[12Cfprintf(writef, [38;5;130m"[m[35m%s\n[m[38;5;130m"[m, args[[38;5;130m1[m]);[34C[100m [m
[33m302 [m[8C} [33melse[m {[63C[100m [m[59;99H[K[59;99H245,41[8C65%[1;45H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m248 [m[4m    } [m[4m[33melse[m[4m [m[4m[46m{[m[4m                                                                   [m[4m[100m [m[4m                                [m[18;9H[46m}[m[19;5H}[56;1H[33m303 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m304 [m[8C}[70C[100m [m
[33m305 [m    }[74C[100m [m[59;99H[K[59;99H248,12[8C66%[1;16H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m251 [m[4m            [m[4m[33mif[m[4m (is_number(args[[m[4m[38;5;130m1[m[4m]))[m[4m[46m{[m[4m                                           [m[4m[100m [m[4m                                [m[9;17H[46m}[m[15;9H}[56;1H[33m306 [m}[78C[100m [m
[33m307 [m[79C[100m [m
[33m308 [m[36m/* rcv()[m[71C[100m [m[59;99H[K[59;99H251,36[8C67%[1;40H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m254 [m[4m                    [m[4m[32mint[m[4m pid = jobs[job].pid;                                   [m[4m[100m [m[4m                                [m[6;17H}[56;1H[33m309 [m[36m * -----[m[71C[100m [m
[33m310 [m[36m * Receives data through the pipe from the specified child process.[m[12C[100m [m
[33m311 [m[36m * Prints this to stdout in the parent, hq.[m[36C[100m [m[59;99H[K[59;99H254,43[8C68%[1;47H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m257 [m[4m                    printf([m[4m[38;5;130m"Error: Invalid signal[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                         [m[4m[100m [m[4m                                [m[56;1H[33m312 [m[36m *[m[77C[100m [m
[33m313 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m314 [m[36m * spcs: number of original tokens[m[45C[100m [m[59;99H[K[59;99H257,43[8C69%[1;47H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m260 [m[4m                printf([m[4m[38;5;130m"Error: Invalid signal[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                             [m[4m[100m [m[4m                                [m[56;1H[33m315 [m[36m */[m[76C[100m [m
[33m316 [m[32mvoid[m rcv([32mchar[m** args, [32mint[m spcs) {[46C[100m [m
[33m317 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m[59;99H[K[59;99H260,43[8C69%[1;47H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m263 [m[4m            printf([m[4m[38;5;130m"Error: invalid job[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                    [m[4m[100m [m[4m                                [m[56;1H[33m318 [m[8Cprintf([38;5;130m"Error: Insufficient arguments.[m[35m\n[m[38;5;130m"[m);[28C[100m [m
[33m319 [m    } [33melse[m {[67C[100m [m
[33m320 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m[59;99H[K[59;99H263,43[8C70%[1;47H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m266 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[56;1H[33m321 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m
[33m322 [m[12C[32mint[m ready = is_ready(jobs[job].up[READ]);[26C[100m [m
[33m323 [m[12C[32mFILE[m* readf = fdopen(jobs[job].up[READ], [38;5;130m"r"[m);[21C[100m [m[59;99H[K[59;99H266,1[9C71%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m269 [m[4m[36m * ---------[m[4m                                                                   [m[4m[100m [m[4m                                [m[56;1H[33m324 [m[12C[33mif[m (ready) {[55C[100m [m
[33m325 [m[16C[32mchar[m* buffer = read_line(readf);[31C[100m [m
[33m326 [m[16C[33mif[m (buffer == [38;5;130m0[m) {[45C[100m [m[59;99H[K[59;99H269,12[8C72%[1;16H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m272 [m[4m[36m * args: arguments provided in command line without first command[m[4m              [m[4m[100m [m[4m                                [m[56;1H[33m327 [m[20Cprintf([38;5;130m"<no input>[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m328 [m[16C} [33melse[m [33mif[m (buffer == [38;5;130mNULL[m) {[35C[100m [m
[33m329 [m[20Cprintf([38;5;130m"<EOF>[m[35m\n[m[38;5;130m"[m);[41C[100m [m[59;99H[K[59;99H272,43[8C73%[1;47H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m275 [m[4m[32mvoid[m[4m hq_wait([m[4m[32mchar[m[4m** args, [m[4m[32mint[m[4m spcs) [m[4m[46m{[m[4m                                          [m[4m[100m [m[4m                                [m[11;5H[46m}[m[56;1H[33m330 [m[16C} [33melse[m {[55C[100m [m
[33m331 [m[20Cprintf([38;5;130m"[m[35m%s\n[m[38;5;130m"[m, buffer);[36C[100m [m
[33m332 [m[16C}[62C[100m [m[59;99H[K[59;99H275,37[8C73%[1;41H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m278 [m[4m    } [m[4m[33melse[m[4m [m[4m[46m{[m[4m                                                                   [m[4m[100m [m[4m                                [m[7;9H[46m}[m[8;5H}[56;1H[33m333 [m[12C}[66C[100m [m
[33m334 [m[8C} [33melse[m {[63C[100m [m
[33m335 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m[59;99H[K[59;99H278,12[8C74%[1;16H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m281 [m[4m        } [m[4m[33melse[m[4m [m[4m[46m{[m[4m                                                               [m[4m[100m [m[4m                                [m[3;13H[46m}[m[4;9H}[56;1H[33m336 [m[8C}[70C[100m [m
[33m337 [m[79C[100m [m
[33m338 [m[79C[100m [m[59;99H[K[59;99H281,16[8C75%[1;20H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m284 [m[4m    }                                                                          [m[4m[100m [m[4m                                [m[56;1H[33m339 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m340 [m    }[74C[100m [m
[33m341 [m}[78C[100m [m[59;99H[K[59;99H284,5[9C76%[1;9H[?25h[?25l[33m284 [m    }                                                                          [100m [m[1;85H[K[40;1H[93m323 [m[4m            [m[4m[32mFILE[m[4m* readf = fdopen(jobs[job].up[READ], [m[4m[38;5;130m"r"[m[4m);                     [m[4m[100m [m[4m                                [m[59;99H323,28[40;32H[?25h[?25l[40;5H            [32mFILE[m* readf = f[7m[48;5;242mdopen(jobs[job].up[READ], [m[7m[38;5;130m[48;5;242m"r"[m[7m[48;5;242m);[m                     [100m [m[40;85H[K[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H323,59[8C76%[40;63H[?25h[?25l[40;5H[4m            [m[4m[32mFILE[m[4m* readf = fdopen(jobs[job].up[READ], [m[4m[38;5;130m"r"[m[4m);                     [m[4m[100m [m[4m                                [m[59;1H[K[59;99H323,58[8C76%[40;62H[?25h[?25l[59;99H[K[59;1H:[?2004h[?25hq[?25l[?25h[?25l[?1000l[?2004l[59;1H[K[59;1H[?2004l[?1l>[?25h[?1049l[23;0;0ts4698512@moss:~/CSSE2310/Assignments/a3$ ./hq
> spaw  n ls
New Job ID [0] created
> re cv 0
Error: Invalid job
> rcv 0
Error: Invalid job
> ^Cs4698512@moss:~/CSSE2310/Assignments/a3$ ./hqvim hq.c
[?1000h[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;59r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[59;1H"hq.c" 429L, 10618C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[33m295 [m    [33mif[m (spcs < [38;5;130m3[m) {[60C[100m [m
[33m296 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m297 [m    } [33melse[m {[67C[100m [m
[33m298 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m299 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m
[33m300 [m[12C[32mFILE[m* writef = fdopen(jobs[job].down[WRITE], [38;5;130m"w"[m);[17C[100m [m
[33m301 [m[12Cfprintf(writef, [38;5;130m"[m[35m%s\n[m[38;5;130m"[m, args[[38;5;130m1[m]);[34C[100m [m
[33m302 [m[8C} [33melse[m {[63C[100m [m
[33m303 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m304 [m[8C}[70C[100m [m
[33m305 [m    }[74C[100m [m
[33m306 [m}[78C[100m [m
[33m307 [m[79C[100m [m
[33m308 [m[36m/* rcv()[m[71C[100m [m
[33m309 [m[36m * -----[m[71C[100m [m
[33m310 [m[36m * Receives data through the pipe from the specified child process.[m[12C[100m [m
[33m311 [m[36m * Prints this to stdout in the parent, hq.[m[36C[100m [m
[33m312 [m[36m *[m[77C[100m [m
[33m313 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m314 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m315 [m[36m */[m[76C[100m [m
[33m316 [m[32mvoid[m rcv([32mchar[m** args, [32mint[m spcs) {[46C[100m [m
[33m317 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m318 [m[8Cprintf([38;5;130m"Error: Insufficient arguments.[m[35m\n[m[38;5;130m"[m);[28C[100m [m
[33m319 [m    } [33melse[m {[67C[100m [m
[33m320 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m321 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m
[33m322 [m[12C[32mint[m ready = is_ready(jobs[job].up[READ]);[26C[100m [m
[93m323 [m[4m            [m[4m[32mFILE[m[4m* readf = fdopen(jobs[job].up[READ], [m[4m[38;5;130m"r"[m[4m);                     [m[4m[100m [m[4m                                [m[30;1H[33m324 [m[12C[33mif[m (ready) {[55C[100m [m
[33m325 [m[16C[32mchar[m* buffer = read_line(readf);[31C[100m [m
[33m326 [m[16C[33mif[m (buffer == [38;5;130m0[m) {[45C[100m [m
[33m327 [m[20Cprintf([38;5;130m"<no input>[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m328 [m[16C} [33melse[m [33mif[m (buffer == [38;5;130mNULL[m) {[35C[100m [m
[33m329 [m[20Cprintf([38;5;130m"<EOF>[m[35m\n[m[38;5;130m"[m);[41C[100m [m
[33m330 [m[16C} [33melse[m {[55C[100m [m
[33m331 [m[20Cprintf([38;5;130m"[m[35m%s\n[m[38;5;130m"[m, buffer);[36C[100m [m
[33m332 [m[16C}[62C[100m [m
[33m333 [m[12C}[66C[100m [m
[33m334 [m[8C} [33melse[m {[63C[100m [m
[33m335 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m336 [m[8C}[70C[100m [m
[33m337 [m[79C[100m [m
[33m338 [m[79C[100m [m
[33m339 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m340 [m    }[74C[100m [m
[33m341 [m}[78C[100m [m
[33m342 [m[79C[100m [m
[33m343 [m[36m/* eof()[m[71C[100m [m
[33m344 [m[36m * -----[m[71C[100m [m
[33m345 [m[36m * Closes the stdin side of the pipe so the child process can no longer read [m  [100m [m
[33m346 [m[36m * as the pipe will be EOF.[m[52C[100m [m
[33m347 [m[36m *[m[77C[100m [m
[33m348 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m349 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m350 [m[36m */[m[76C[100m [m
[33m351 [m[32mvoid[m eof([32mchar[m** args, [32mint[m spcs) {[46C[100m [m
[33m352 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m[59;99H323,13[8C79%[29;17H[?25h[?12$p[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m353 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m354 [m    } [33melse[m {[67C[100m [m
[33m355 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m[59;1H[K[59;99H323,13[8C80%[26;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m356 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m
[33m357 [m[12Cclose(jobs[job].down[WRITE]);[38C[100m [m
[33m358 [m[8C} [33melse[m {[63C[100m [m[59;99H[K[59;99H323,13[8C80%[23;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m359 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m360 [m[8C}[70C[100m [m
[33m361 [m    }[74C[100m [m[59;99H[K[59;99H323,13[8C81%[20;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m362 [m}[78C[100m [m
[33m363 [m[79C[100m [m
[33m364 [m[36m/* cleanup()[m[67C[100m [m[59;99H[K[59;99H323,13[8C82%[17;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m365 [m[36m * ---------[m[67C[100m [m
[33m366 [m[36m * Terminates all child processes spawned by hq. It does this by sending [m      [100m [m
[33m367 [m[36m * signal 9 (SIGKILL). Reaps all processes.[m[36C[100m [m[59;99H[K[59;99H323,13[8C83%[14;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m368 [m[36m *[m[77C[100m [m
[33m369 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m370 [m[36m * spcs: number of original tokens[m[45C[100m [m[59;99H[K[59;99H323,13[8C84%[11;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m371 [m[36m */[m[76C[100m [m
[33m372 [m[32mvoid[m cleanup([32mvoid[m) {[59C[100m [m
[33m373 [m    [33mfor[m ([32mint[m job = [38;5;130m0[m; job < [38;5;248m[104mjobid[m; job++) {[36C[100m [m[59;99H[K[59;99H323,13[8C84%[8;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m374 [m[8Ckill(jobs[job].pid, [38;5;130mSIGKILL[m);[42C[100m [m
[33m375 [m    }[74C[100m [m
[33m376 [m[79C[100m [m[59;99H[K[59;99H323,13[8C85%[5;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m377 [m}[78C[100m [m
[33m378 [m[79C[100m [m
[33m379 [m[36m/* handle_signal()[m[61C[100m [m[59;99H[K[59;99H323,13[8C86%[2;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m325 [m[4m                [m[4m[32mchar[m[4m* buffer = read_line(readf);                               [m[4m[100m [m[4m                                [m[56;1H[33m380 [m[36m * ---------------[m[61C[100m [m
[33m381 [m[36m * Signal handler[m[62C[100m [m
[33m382 [m[36m *[m[77C[100m [m[59;99H[K[59;99H325,13[8C87%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m328 [m[4m                } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (buffer == [m[4m[38;5;130mNULL[m[4m) {                                   [m[4m[100m [m[4m                                [m[56;1H[33m383 [m[36m * s: signal number[m[60C[100m [m
[33m384 [m[36m */[m[76C[100m [m
[33m385 [m[32mvoid[m handle_signal([32mint[m s) {[52C[100m [m[59;99H[K[59;99H328,13[8C88%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m331 [m[4m                    printf([m[4m[38;5;130m"[m[4m[35m%s\n[m[4m[38;5;130m"[m[4m, buffer);                                    [m[4m[100m [m[4m                                [m[56;1H[33m386 [m    [33mfor[m ([32mint[m i = [38;5;130m0[m; i < [38;5;248m[104mjobid[m; i++) {[42C[100m [m
[33m387 [m[8Cjobs[i].finished = [38;5;130m1[m;[50C[100m [m
[33m388 [m[8Cwaitpid(jobs[i].pid, &jobs[i].status, [38;5;130m0[m);[30C[100m [m[59;99H[K[59;99H331,13[8C88%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m334 [m[4m        } [m[4m[33melse[m[4m {                                                               [m[4m[100m [m[4m                                [m[56;1H[33m389 [m    }[74C[100m [m
[33m390 [m[79C[100m [m
[33m391 [m    signal(s, handle_signal);[50C[100m [m[59;99H[K[59;99H334,13[8C89%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m337 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m392 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m393 [m}[78C[100m [m
[33m394 [m[79C[100m [m[59;99H[K[59;99H337,0-1[7C90%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m340 [m[4m    }                                                                          [m[4m[100m [m[4m                                [m[56;1H[33m395 [m[36m/* is_number()[m[65C[100m [m
[33m396 [m[36m * -----------[m[65C[100m [m
[33m397 [m[36m * Determines if inputer number[] is a number or not[m[27C[100m [m[59;99H[K[59;99H340,5[9C91%[1;9H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m343 [m[4m[36m/* eof()[m[4m                                                                       [m[4m[100m [m[4m                                [m[56;1H[33m398 [m[36m *[m[77C[100m [m
[33m399 [m[36m * number[]: array of characters to be checked[m[33C[100m [m
[33m400 [m[36m * Returns: true if number, false if not[m[39C[100m [m[59;99H[K[59;99H343,8[9C92%[1;12H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m346 [m[4m[36m * as the pipe will be EOF.[m[4m                                                    [m[4m[100m [m[4m                                [m[56;1H[33m401 [m[36m */[m[76C[100m [m
[33m402 [m[32mbool[m is_number([32mchar[m number[]) {[48C[100m [m
[33m403 [m    [33mfor[m([32mint[m i = [38;5;130m0[m; number[i] != [38;5;130m0[m; i++) {[38C[100m [m[59;99H[K[59;99H346,13[8C92%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m349 [m[4m[36m * spcs: number of original tokens[m[4m                                             [m[4m[100m [m[4m                                [m[56;1H[33m404 [m[8C[33mif[m (!isdigit(number[i])) {[45C[100m [m
[33m405 [m[12C[33mreturn[m [38;5;130mfalse[m;[54C[100m [m
[33m406 [m[8C}[70C[100m [m[59;99H[K[59;99H349,13[8C93%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m352 [m[4m    [m[4m[33mif[m[4m (spcs < [m[4m[38;5;130m2[m[4m) {                                                            [m[4m[100m [m[4m                                [m[56;1H[33m407 [m    }[74C[100m [m
[33m408 [m    [33mreturn[m [38;5;130mtrue[m;[63C[100m [m
[33m409 [m}[78C[100m [m[59;99H[K[59;99H352,13[8C94%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m355 [m[4m        [m[4m[33mif[m[4m (is_job(args[[m[4m[38;5;130m0[m[4m])) {                                                 [m[4m[100m [m[4m                                [m[56;1H[33m410 [m[79C[100m [m
[33m411 [m[36m/* is_job()[m[68C[100m [m
[33m412 [m[36m * --------[m[68C[100m [m[59;99H[K[59;99H355,13[8C95%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m358 [m[4m        } [m[4m[33melse[m[4m {                                                               [m[4m[100m [m[4m                                [m[56;1H[33m413 [m[36m * Checks if job[] is a valid job number.[m[38C[100m [m
[33m414 [m[36m *[m[77C[100m [m
[33m415 [m[36m * job[]: array of characters of job number[m[36C[100m [m[59;99H[K[59;99H358,13[8C96%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m361 [m[4m    }                                                                          [m[4m[100m [m[4m                                [m[56;1H[33m416 [m[36m * Returns: true if valid job, false if not[m[36C[100m [m
[33m417 [m[36m */[m[76C[100m [m
[33m418 [m[32mbool[m is_job([32mchar[m job[]) {[54C[100m [m[59;99H[K[59;99H361,5[9C97%[1;9H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m364 [m[4m[36m/* cleanup()[m[4m                                                                   [m[4m[100m [m[4m                                [m[56;1H[33m419 [m    [33mif[m (strcmp(job, [38;5;130m""[m) && is_number(job)) {[35C[100m [m
[33m420 [m[8C[32mint[m jobNum = atoi(job);[48C[100m [m
[33m421 [m[8C[33mif[m (jobNum <= [38;5;248m[104mjobid[m && [38;5;248m[104mjobid[m != [38;5;130m0[m) {[35C[100m [m[59;99H[K[59;99H364,12[8C97%[1;16H[?25h[?25l[1;58r[1;1H[3M         [m[56;1H[33m416 [m[36m * Returns: true if valid job, false if not[m[36C[100m [m
[33m417 [m[36m */[m[76C[100m [m
[33m418 [m[32mbool[m is_job([32mchar[m job[]) {[54C[100m [m[59;99H[K[59;99H361,5[9C97%[1;9H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m364 [m[4m[36m/* cleanup()[m[4m                                                                   [m[4m[100m [m[4m                                [m[56;1H[33m419 [m    [33mif[m (strcmp(job, [38;5;130m""[m) && is_number(job)) {[35C[100m [m
[33m420 [m[8C[32mint[m jobNum = atoi(job);[48C[100m [m
[33m421 [m[8C[33mif[m (jobNum <= [38;5;248m[104mjobid[m && [38;5;248m[104mjobid[m != [38;5;130m0[m) {[35C[100m [m[59;99H[K[59;99H364,12[8C97%[1;16H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m367 [m[4m[36m * signal 9 (SIGKILL). Reaps all processes.[m[4m                                    [m[4m[100m [m[4m                                [m[56;1H[33m422 [m[12C[33mreturn[m [38;5;130mtrue[m;[55C[100m [m
[33m423 [m[8C} [33melse[m {[63C[100m [m
[33m424 [m[12C[33mreturn[m [38;5;130mfalse[m;[54C[100m [m[59;99H[K[59;99H367,13[8C98%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m370 [m[4m[36m * spcs: number of original tokens[m[4m                                             [m[4m[100m [m[4m                                [m[56;1H[33m425 [m[8C}[70C[100m [m
[33m426 [m    } [33melse[m {[67C[100m [m
[33m427 [m[8C[33mreturn[m [38;5;130mfalse[m;[58C[100m [m[59;99H[K[59;99H370,13[8C99%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m373 [m[4m    [m[4m[33mfor[m[4m ([m[4m[32mint[m[4m job = [m[4m[38;5;130m0[m[4m; job < [m[4m[38;5;248m[104mjobid[m[4m; job++) {                                    [m[4m[100m [m[4m                                [m[56;1H[33m428 [m    }[74C[100m [m
[33m429 [m}[78C[100m [m
[1m[34m~                                                                                                                   [m[59;99H[K[59;99H373,13[8CBot[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m376 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[1m[34m~                                                                                                                   [57;1H~                                                                                                                   [58;1H~                                                                                                                   [m[59;99H[K[59;99H376,0-1[7CBot[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m379 [m[4m[36m/* handle_signal()[m[4m                                                             [m[4m[100m [m[4m                                [m[56;1H[1m[34m~                                                                                                                   [57;1H~                                                                                                                   [58;1H~                                                                                                                   [m[59;99H[K[59;99H379,13[8CBot[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m382 [m[4m[36m *[m[4m                                                                             [m[4m[100m [m[4m                                [m[56;1H[1m[34m~                                                                                                                   [57;1H~                                                                                                                   [58;1H~                                                                                                                   [m[59;99H[K[59;99H382,2[9CBot[1;6H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m385 [m[4m[32mvoid[m[4m handle_signal([m[4m[32mint[m[4m s) {                                                    [m[4m[100m [m[4m                                [m[56;1H[1m[34m~                                                                                                                   [57;1H~                                                                                                                   [58;1H~                                                                                                                   [m[59;99H[K[59;99H385,13[8CBot[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m388 [m[4m        waitpid(jobs[i].pid, &jobs[i].status, [m[4m[38;5;130m0[m[4m);                              [m[4m[100m [m[4m                                [m[56;1H[1m[34m~                                                                                                                   [57;1H~                                                                                                                   [58;1H~                                                                                                                   [m[59;99H[K[59;99H388,13[8CBot[1;17H[?25h[?25l[33m388 [m        waitpid(jobs[i].pid, &jobs[i].status, [38;5;130m0[m);                              [100m [m[1;85H[K[34;1H[93m421 [m[4m        [m[4m[33mif[m[4m [m[4m[46m([m[4mjobNum <= [m[4m[38;5;248m[104mjobid[m[4m && [m[4m[38;5;248m[104mjobid[m[4m != [m[4m[38;5;130m0[m[4m[46m)[m[4m {                                   [m[4m[100m [m[4m                                [m[59;99H421,42[34;46H[?25h[?25l[59;1H[38;5;130m-- INSERT --[m[59;99H[K[59;99H421,42[8CBot[34;46H[?25h[?25l[4m)[m[4m[46m [m[4m{ [m[4m[46m)[m[4m [m[59;104H1[34;45H[?25h[?25l[4m)[m[4m[46m [m[4m{ [m[4m[46m)[m[4m [m[59;104H0[34;44H[?25h[?25l[4m)[m[4m[46m [m[4m{ [m[4m[46m)[m[4m [m[59;103H39[34;43H[?25h[?25l[4m)[m[4m[46m [m[4m{ [m[4m[46m)[m[4m [m[59;104H8[34;42H[?25h[?25l[4m)[m[4m[46m [m[4m{ [m[4m[46m)[m[4m [m[59;104H7[34;41H[?25h[?25l[4mjobi)[m[4m[46m [m[4m{ [m[4m[46m)[m[4m [m[59;104H6[34;40H[?25h[?25l[4m)[m[4m[46m [m[4m{ [m[4m[46m)[m[4m [m[59;104H5[34;39H[?25h[?25l[4m)[m[4m[46m [m[4m{ [m[4m[46m)[m[4m [m[59;104H4[34;38H[?25h[?25l[4m)[m[4m[46m [m[4m{ [m[4m[46m)[m[4m [m[59;104H3[34;37H[?25h[?25l[4m)[m[4m[46m [m[4m{ [m[4m[46m)[m[4m [m[59;104H2[34;36H[?25h[?25l[4m)[m[4m[46m [m[4m{ [m[4m[46m)[m[4m [m[59;104H1[34;35H[?25h[?25l[4m)[m[4m[46m [m[4m{ [m[4m[46m)[m[4m [m[59;104H0[34;34H[?25h[?25l[4m)[m[4m[46m [m[4m{ [m[4m[46m)[m[4m [m[59;103H29[34;33H[?25h[?25l[4m)[m[4m[46m [m[4m{ [m[4m[46m)[m[4m [m[59;104H8[34;32H[?25h[59;1H[K[34;31H[?25l[34;16H[4m([15C)[m[59;99H421,27[8CBot[34;31H[?25h[?25l[59;99H[K[59;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?1000l[?2004l"hq.c" 429L, 10604C written
[?2004l[?1l>[?25h[?1049l[23;0;0ts4698512@moss:~/CSSE2310/Assignments/a3$ make
gcc -g -Wall -pedantic -std=gnu99 -o hq hq.c -I/local/courses/csse2310/include -L/local/courses/csse2310/lib -lcsse2310a3
s4698512@moss:~/CSSE2310/Assignments/a3$ ./[K./[K[K.[K/hq
> spawn ls
New Job ID [0] created
> rcv 0
\
> rv cv0
Error: Invalid command
> rcvv  0
10.3.stderr
> rcv 0
10.3.stdout
> rcv 0
12.2.stderr
> ^Cs4698512@moss:~/CSSE2310/Assignments/a3$ ./hqmakevim hq.c
[?1000h[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;59r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[59;1H"hq.c" 429L, 10604C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[33m372 [m[32mvoid[m cleanup([32mvoid[m) {[59C[100m [m
[33m373 [m    [33mfor[m ([32mint[m job = [38;5;130m0[m; job < [38;5;248m[104mjobid[m; job++) {[36C[100m [m
[33m374 [m[8Ckill(jobs[job].pid, [38;5;130mSIGKILL[m);[42C[100m [m
[33m3750m [m
[33m391 [m    signal(s, handle_signal);[50C[100m [m
[33m392 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m393 [m}[78C[100m [m
[33m394 [m[79C[100m [m
[33m395 [m[36m/* is_number()[m[65C[100m [m
[33m396 [m[36m * -----------[m[65C[100m [m
[33m397 [m[36m * Determines if inputer number[] is a number or not[m[27C[100m [m
[33m398 [m[36m *[m[77C[100m [m
[33m399 [m[36m * number[]: array of characters to be checked[m[33C[100m [m
[33m400 [m[36m * Returns: true if number, false if not[m[39C[100m [m
[33m401 [m[36m */[m[76C[100m [m
[33m402 [m[32mbool[m is_number([32mchar[m number[]) {[48C[100m [m
[33m403 [m    [33mfor[m([32mint[m i = [38;5;130m0[m; number[i] != [38;5;130m0[m; i++) {[38C[100m [m
[33m404 [m[8C[33mif[m (!isdigit(number[i])) {[45C[100m [m
[33m405 [m[12C[33mreturn[m [38;5;130mfalse[m;[54C[100m [m
[33m406 [m[8C}[70C[100m [m
[33m407 [m    }[74C[100m [m
[33m408 [m    [33mreturn[m [38;5;130mtrue[m;[63C[100m [m
[33m409 [m}[78C[100m [m
[33m410 [m[79C[100m [m
[33m411 [m[36m/* is_job()[m[68C[100m [m
[33m412 [m[36m * --------[m[68C[100m [m
[33m413 [m[36m * Checks if job[] is a valid job number.[m[38C[100m [m
[33m414 [m[36m *[m[77C[100m [m
[33m415 [m[36m * job[]: array of characters of job number[m[36C[100m [m
[33m416 [m[36m * Returns: true if valid job, false if not[m[36C[100m [m
[33m417 [m[36m */[m[76C[100m [m
[33m418 [m[32mbool[m is_job([32mchar[m job[]) {[54C[100m [m
[33m419 [m    [33mif[m (strcmp(job, [38;5;130m""[m) && is_number(job)) {[35C[100m [m
[33m420 [m[8C[32mint[m jobNum = atoi(job);[48C[100m [m
[93m421 [m[4m        [m[4m[33mif[m[4m (jobNum <= [m[4m[38;5;248m[104mjobid[m[4m) {                                                 [m[4m[100m [m[4m                                [m[51;1H[33m422 [m[12C[33mreturn[m [38;5;130mtrue[m;[55C[100m [m
[33m423 [m[8C} [33melse[m {[63C[100m [m
[33m424 [m[12C[33mreturn[m [38;5;130mfalse[m;[54C[100m [m
[33m425 [m[8C}[70C[100m [m
[33m426 [m    } [33melse[m {[67C[100m [m
[33m427 [m[8C[33mreturn[m [38;5;130mfalse[m;[58C[100m [m
[33m428 [m    }[74C[100m [m
[33m429 [m}[78C[100m [m[59;99H421,9[9CBot[50;13H[?25h[?12$p[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m369 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m370 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m371 [m[36m */[m[76C[100m [m[59;1H[K[59;99H421,9[9C99%[53;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m366 [m[36m * Terminates all child processes spawned by hq. It does this by sending [m      [100m [m
[33m367 [m[36m * signal 9 (SIGKILL). Reaps all processes.[m[36C[100m [m
[33m368 [m[36m *[m[77C[100m [m[59;99H[K[59;99H421,9[9C98%[56;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m363 [m[79C[100m [m
[33m364 [m[36m/* cleanup()[m[67C[100m [m
[33m365 [m[36m * ---------[m[67C[100m [m[58;1H[93m420 [m[4m        [m[4m[32mint[m[4m jobNum = atoi(job);                                                [m[4m[100m [m[4m                                [m[59;99H[K[59;99H420,9[9C97%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m360 [m[8C}[70C[100m [m
[33m361 [m    }[74C[100m [m
[33m362 [m}[78C[100m [m[58;1H[93m417 [m[4m[36m */[m[4m                                                                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H417,3[9C96%[58;7H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m357 [m[12Cclose(jobs[job].down[WRITE]);[38C[100m [m
[33m358 [m[8C} [33melse[m {[63C[100m [m
[33m359 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m[58;1H[93m414 [m[4m[36m *[m[4m                                                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H414,2[9C95%[58;6H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m354 [m    } [33melse[m {[67C[100m [m
[33m355 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m356 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m[58;1H[93m411 [m[4m[36m/* is_job()[m[4m                                                                    [m[4m[100m [m[4m                                [m[59;99H[K[59;99H411,9[9C95%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m351 [m[32mvoid[m eof([32mchar[m** args, [32mint[m spcs) {[46C[100m [m
[33m352 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m353 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m[58;1H[93m408 [m[4m    [m[4m[33mreturn[m[4m [m[4m[38;5;130mtrue[m[4m;                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H408,9[9C94%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m348 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m349 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m350 [m[36m */[m[76C[100m [m[58;1H[93m405 [m[4m            [m[4m[33mreturn[m[4m [m[4m[38;5;130mfalse[m[4m;                                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H405,9[9C93%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m345 [m[36m * Closes the stdin side of the pipe so the child process can no longer read [m  [100m [m
[33m346 [m[36m * as the pipe will be EOF.[m[52C[100m [m
[33m347 [m[36m *[m[77C[100m [m[58;1H[93m402 [m[4m[32mbool[m[4m is_number([m[4m[32mchar[m[4m number[]) {                                                [m[4m[100m [m[4m                                [m[59;99H[K[59;99H402,9[9C92%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m342 [m[79C[100m [m
[33m343 [m[36m/* eof()[m[71C[100m [m
[33m344 [m[36m * -----[m[71C[100m [m[58;1H[93m399 [m[4m[36m * number[]: array of characters to be checked[m[4m                                 [m[4m[100m [m[4m                                [m[59;99H[K[59;99H399,9[9C91%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m339 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m340 [m    }[74C[100m [m
[33m341 [m}[78C[100m [m[58;1H[93m396 [m[4m[36m * -----------[m[4m                                                                 [m[4m[100m [m[4m                                [m[59;99H[K[59;99H396,9[9C91%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m336 [m[8C}[70C[100m [m
[33m337 [m[79C[100m [m
[33m338 [m[79C[100m [m[50;31H[46m{[m[58;1H[93m393 [m[4m[46m}[m[4m                                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H393,1[9C90%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m333 [m[12C}[66C[100m [m
[33m334 [m[8C} [33melse[m {[63C[100m [m
[33m335 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m[53;31H{[58;1H[93m390 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H390,0-1[7C89%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m330 [m[16C} [33melse[m {[55C[100m [m
[33m331 [m[20Cprintf([38;5;130m"[m[35m%s\n[m[38;5;130m"[m, buffer);[36C[100m [m
[33m332 [m[16C}[62C[100m [m[58;1H[93m387 [m[4m        jobs[i].finished = [m[4m[38;5;130m1[m[4m;                                                  [m[4m[100m [m[4m                                [m[59;99H[K[59;99H387,9[9C88%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m327 [m[20Cprintf([38;5;130m"<no input>[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m328 [m[16C} [33melse[m [33mif[m (buffer == [38;5;130mNULL[m) {[35C[100m [m
[33m329 [m[20Cprintf([38;5;130m"<EOF>[m[35m\n[m[38;5;130m"[m);[41C[100m [m[58;1H[93m384 [m[4m[36m */[m[4m                                                                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H384,3[9C87%[58;7H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m324 [m[12C[33mif[m (ready) {[55C[100m [m
[33m325 [m[16C[32mchar[m* buffer = read_line(readf);[31C[100m [m
[33m326 [m[16C[33mif[m (buffer == [38;5;130m0[m) {[45C[100m [m[58;1H[93m381 [m[4m[36m * Signal handler[m[4m                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H381,9[9C87%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m321 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m
[33m322 [m[12C[32mint[m ready = is_ready(jobs[job].up[READ]);[26C[100m [m
[33m323 [m[12C[32mFILE[m* readf = fdopen(jobs[job].up[READ], [38;5;130m"r"[m);[21C[100m [m[58;1H[93m378 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H378,0-1[7C86%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m318 [m[8Cprintf([38;5;130m"Error: Insufficient arguments.[m[35m\n[m[38;5;130m"[m);[28C[100m [m
[33m319 [m    } [33melse[m {[67C[100m [m
[33m320 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m[56;47H[46m{[m

[93m375 [m[4m    [m[4m[46m}[m[4m                                                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H375,5[9C85%[58;9H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m315 [m[36m */[m[76C[100m [m
[33m316 [m[32mvoid[m rcv([32mchar[m** args, [32mint[m spcs) {[46C[100m [m
[33m317 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m[58;1H[93m372 [m[4m[32mvoid[m[4m cleanup([m[4m[32mvoid[m[4m) {                                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H372,9[9C84%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m312 [m[36m *[m[77C[100m [m
[33m313 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m314 [m[36m * spcs: number of original tokens[m[45C[100m [m[58;1H[93m369 [m[4m[36m * args: arguments provided in command line without first command[m[4m              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H369,9[9C83%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m309 [m[36m * -----[m[71C[100m [m
[33m310 [m[36m * Receives data through the pipe from the specified child process.[m[12C[100m [m
[33m311 [m[36m * Prints this to stdout in the parent, hq.[m[36C[100m [m[58;1H[93m366 [m[4m[36m * Terminates all child processes spawned by hq. It does this by sending [m[4m      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H366,9[9C83%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m306 [m}[78C[100m [m
[33m307 [m[79C[100m [m
[33m308 [m[36m/* rcv()[m[71C[100m [m[58;1H[93m363 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H363,0-1[7C82%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m303 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m304 [m[8C}[70C[100m [m
[33m305 [m    }[74C[100m [m[56;20H[46m{[m

[93m360 [m[4m        [m[4m[46m}[m[4m                                                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H360,9[9C81%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m300 [m[12C[32mFILE[m* writef = fdopen(jobs[job].down[WRITE], [38;5;130m"w"[m);[17C[100m [m
[33m301 [m[12Cfprintf(writef, [38;5;130m"[m[35m%s\n[m[38;5;130m"[m, args[[38;5;130m1[m]);[34C[100m [m
[33m302 [m[8C} [33melse[m {[63C[100m [m[58;1H[93m357 [m[4m            close(jobs[job].down[WRITE]);                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H357,9[9C80%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m297 [m    } [33melse[m {[67C[100m [m
[33m298 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m299 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m[58;1H[93m354 [m[4m    } [m[4m[33melse[m[4m {                                                                   [m[4m[100m [m[4m                                [m[59;99H[K[59;99H354,9[9C79%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m294 [m[32mvoid[m send([32mchar[m** args, [32mint[m spcs) {[45C[100m [m
[33m295 [m    [33mif[m (spcs < [38;5;130m3[m) {[60C[100m [m
[33m296 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m[58;1H[93m351 [m[4m[32mvoid[m[4m eof[m[4m[46m([m[4m[32mchar[m[4m** args, [m[4m[32mint[m[4m spcs[m[4m[46m)[m[4m {                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H351,9[9C78%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m291 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m292 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m293 [m[36m */[m[76C[100m [m[58;1H[93m348 [m[4m[36m * args: arguments provided in command line without first command[m[4m              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H348,9[9C78%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m288 [m[36m * ------[m[70C[100m [m
[33m289 [m[36m * Sends text down the pipe to specified job[m[35C[100m [m
[33m290 [m[36m *[m[77C[100m [m[58;1H[93m345 [m[4m[36m * Closes the stdin side of the pipe so the child process can no longer read [m[4m  [m[4m[100m [m[4m                                [m[59;99H[K[59;99H345,9[9C77%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m285 [m}[78C[100m [m
[33m286 [m[79C[100m [m
[33m287 [m[36m/* send()[m[70C[100m [m[58;1H[93m342 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H342,0-1[7C76%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m282 [m[12Cprintf([38;5;130m"Error: Invalid sleep time[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m283 [m[8C}[70C[100m [m
[33m284 [m    }[74C[100m [m[58;1H[93m339 [m[4m        fflush([m[4m[38;5;130mstdout[m[4m);                                                        [m[4m[100m [m[4m                                [m[59;99H[K[59;99H339,9[9C75%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m279 [m[8C[33mif[m (strcmp(args[[38;5;130m0[m], [38;5;130m""[m) && is_number(args[[38;5;130m0[m])) {[23C[100m [m
[33m280 [m[12Csleep(atoi(args[[38;5;130m0[m]) * [38;5;130m1000000[m);[36C[100m [m
[33m281 [m[8C} [33melse[m {[63C[100m [m[56;20H[46m{[m

[93m336 [m[4m        [m[4m[46m}[m[4m                                                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H336,9[9C74%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m276 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m277 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m278 [m    } [33melse[m {[67C[100m [m[58;1H[93m333 [m[4m            }                                                                  [m[4m[100m [m[4m                                [m[59;99H[K[59;99H333,9[9C74%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m273 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m274 [m[36m */[m[76C[100m [m
[33m275 [m[32mvoid[m hq_wait([32mchar[m** args, [32mint[m spcs) {[42C[100m [m[58;1H[93m330 [m[4m                } [m[4m[33melse[m[4m {                                                       [m[4m[100m [m[4m                                [m[59;99H[K[59;99H330,9[9C73%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m270 [m[36m * Causes hq to wait for specified seconds[m[37C[100m [m
[33m271 [m[36m *[m[77C[100m [m
[33m272 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[58;1H[93m327 [m[4m                    printf([m[4m[38;5;130m"<no input>[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                    [m[4m[100m [m[4m                                [m[59;99H[K[59;99H327,9[9C72%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m267 [m[79C[100m [m
[33m268 [m[36m/* hq_wait()[m[67C[100m [m
[33m269 [m[36m * ---------[m[67C[100m [m[58;1H[93m324 [m[4m            [m[4m[33mif[m[4m (ready) {                                                       [m[4m[100m [m[4m                                [m[59;99H[K[59;99H324,9[9C71%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m264 [m[8C}[70C[100m [m
[33m265 [m    }[74C[100m [m
[33m266 [m}[78C[100m [m[58;1H[93m321 [m[4m            [m[4m[32mint[m[4m job = atoi(args[[m[4m[38;5;130m0[m[4m]);                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H321,9[9C70%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m261 [m[12C}[66C[100m [m
[33m262 [m[8C} [33melse[m {[63C[100m [m
[33m263 [m[12Cprintf([38;5;130m"Error: invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m[58;1H[93m318 [m[4m        printf([m[4m[38;5;130m"Error: Insufficient arguments.[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H318,9[9C70%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m258 [m[16C}[62C[100m [m
[33m259 [m[12C} [33melse[m {[59C[100m [m
[33m260 [m[16Cprintf([38;5;130m"Error: Invalid signal[m[35m\n[m[38;5;130m"[m);[29C[100m [m[58;1H[93m315 [m[4m[36m */[m[4m                                                                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H315,3[9C69%[58;7H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m255 [m[20Ckill(pid, sgnl);[43C[100m [m
[33m256 [m[16C} [33melse[m {[55C[100m [m
[33m257 [m[20Cprintf([38;5;130m"Error: Invalid signal[m[35m\n[m[38;5;130m"[m);[25C[100m [m[58;1H[93m312 [m[4m[36m *[m[4m                                                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H312,2[9C68%[58;6H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m252 [m[16C[32mint[m sgnl = atoi(args[[38;5;130m1[m]);[38C[100m [m
[33m253 [m[16C[33mif[m (sgnl >= [38;5;130m1[m && sgnl <= [38;5;130m31[m) {[33C[100m [m
[33m254 [m[20C[32mint[m pid = jobs[job].pid;[35C[100m [m[58;1H[93m309 [m[4m[36m * -----[m[4m                                                                       [m[4m[100m [m[4m                                [m[59;99H[K[59;99H309,8[9C67%[58;12H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m249 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m250 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m
[33m251 [m[12C[33mif[m (is_number(args[[38;5;130m1[m])){[43C[100m [m[46;38H[46m{[m[58;1H[93m306 [m[4m[46m}[m[4m                                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H306,1[9C66%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m246 [m    [33mif[m (spcs < [38;5;130m3[m) {[60C[100m [m
[33m247 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m248 [m    } [33melse[m {[67C[100m [m[49;38H{[58;1H[93m303 [m[4m            printf([m[4m[38;5;130m"Error: Invalid job[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                    [m[4m[100m [m[4m                                [m[59;99H[K[59;99H303,9[9C66%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m243 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m244 [m[36m */[m[76C[100m [m
[33m245 [m[32mvoid[m call_signal([32mchar[m** args, [32mint[m spcs) {[38C[100m [m[58;1H[93m300 [m[4m            [m[4m[32mFILE[m[4m* writef = fdopen(jobs[job].down[WRITE], [m[4m[38;5;130m"w"[m[4m);                 [m[4m[100m [m[4m                                [m[59;99H[K[59;99H300,9[9C65%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m240 [m[36m * Sends signal to child process specified[m[37C[100m [m
[33m241 [m[36m *[m[77C[100m [m
[33m242 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[58;1H[93m297 [m[4m    } [m[4m[33melse[m[4m {                                                                   [m[4m[100m [m[4m                                [m[59;99H[K[59;99H297,9[9C64%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m237 [m[79C[100m [m
[33m238 [m[36m/* call_signal()[m[63C[100m [m
[33m239 [m[36m * -------------[m[63C[100m [m[58;1H[93m294 [m[4m[32mvoid[m[4m send([m[4m[32mchar[m[4m** args, [m[4m[32mint[m[4m spcs) {                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H294,9[9C63%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m234 [m[8C}[70C[100m [m
[33m235 [m    }[74C[100m [m
[33m236 [m}[78C[100m [m[58;1H[93m291 [m[4m[36m * args: arguments provided in command line without first command[m[4m              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H291,9[9C62%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m231 [m[12C}[66C[100m [m
[33m232 [m[8C} [33melse[m {[63C[100m [m
[33m233 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m[58;1H[93m288 [m[4m[36m * ------[m[4m                                                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H288,9[9C61%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m228 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[jobq].status));[8C[100m [m
[33m229 [m[12C} [33melse[m {[59C[100m [m
[33m230 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m[48;41H[46m{[m[58;1H[93m285 [m[4m[46m}[m[4m                                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H285,1[9C61%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m225 [m[12C[33mif[m (WIFEXITED(jobs[jobq].status)) {[32C[100m [m
[33m226 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WEXITSTATUS(jobs[jobq].status));[8C[100m [m
[33m227 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[jobq].status)) {[23C[100m [m[51;41H{[58;1H[93m282 [m[4m            printf([m[4m[38;5;130m"Error: Invalid sleep time[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H282,9[9C60%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m222 [m[79C[100m [m
[33m223 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, jobq, jobs[jobq].name);[25C[100m [m
[33m224 [m[79C[100m [m[58;1H[93m279 [m[4m        [m[4m[33mif[m[4m (strcmp(args[[m[4m[38;5;130m0[m[4m], [m[4m[38;5;130m""[m[4m) && is_number(args[[m[4m[38;5;130m0[m[4m])) {                       [m[4m[100m [m[4m                                [m[59;99H[K[59;99H279,9[9C59%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m219 [m[8C[36m// check for job tokens[1][m[45C[100m [m
[33m220 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m221 [m[12C[32mint[m jobq = atoi(args[[38;5;130m0[m]);[42C[100m [m[58;1H[93m276 [m[4m    [m[4m[33mif[m[4m (spcs < [m[4m[38;5;130m2[m[4m) {                                                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H276,9[9C58%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m216 [m[8C}[70C[100m [m
[33m217 [m[79C[100m [m
[33m218 [m    } [33melse[m [33mif[m (spcs > [38;5;130m1[m) {      [36m// report on specific job[m[22C[100m [m[58;1H[93m273 [m[4m[36m * spcs: number of original tokens[m[4m                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H273,9[9C57%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m213 [m[12C} [33melse[m {[59C[100m [m
[33m214 [m[16Cprintf([38;5;130m"Error[m[35m\n[m[38;5;130m"[m);[45C[100m [m
[33m215 [m[12C}[66C[100m [m[58;1H[93m270 [m[4m[36m * Causes hq to wait for specified seconds[m[4m                                     [m[4m[100m [m[4m                                [m[59;99H[K[59;99H270,9[9C57%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m210 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[12C[100m [m
[33m211 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {[26C[100m [m
[33m212 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[11C[100m [m[58;1H[93m267 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H267,0-1[7C56%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m207 [m[12C[33mif[m (!jobs[i].finished) {[43C[100m [m
[33m208 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m209 [m[12C} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[28C[100m [m[56;20H[46m{[m

[93m264 [m[4m        [m[4m[46m}[m[4m                                                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H264,9[9C55%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m204 [m    [33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[37C[100m [m
[33m205 [m[8C[33mfor[m ([32mint[m i = [38;5;130m0[m; i < [38;5;248m[104mjobid[m; i++) {[38C[100m [m
[33m206 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[31C[100m [m[58;1H[93m261 [m[4m            }                                                                  [m[4m[100m [m[4m                                [m[59;99H[K[59;99H261,9[9C54%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m201 [m    [36m// Job status output dependent on arg present status[m[23C[100m [m
[33m202 [m[79C[100m [m
[33m203 [m    [36m// check args[m[62C[100m [m[58;1H[93m258 [m[4m                }                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H258,9[9C53%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m198 [m    [36m// Header row[m[62C[100m [m
[33m199 [m    printf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[46C[100m [m
[33m200 [m[79C[100m [m[58;1H[93m255 [m[4m                    kill(pid, sgnl);                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H255,9[9C53%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m195 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[43C[100m [m
[33m196 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m197 [m[79C[100m [m[58;1H[93m252 [m[4m                [m[4m[32mint[m[4m sgnl = atoi(args[[m[4m[38;5;130m1[m[4m]);                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H252,9[9C52%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m192 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m193 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m194 [m[36m */[m[76C[100m [m[58;1H[93m249 [m[4m        [m[4m[33mif[m[4m (is_job(args[[m[4m[38;5;130m0[m[4m])) {                                                 [m[4m[100m [m[4m                                [m[59;99H[K[59;99H249,9[9C51%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m189 [m[36m * --------[m[68C[100m [m
[33m190 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m
[33m191 [m[36m *[m[77C[100m [m[58;1H[93m246 [m[4m    [m[4m[33mif[m[4m (spcs < [m[4m[38;5;130m3[m[4m) {                                                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H246,9[9C50%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m186 [m}[78C[100m [m
[33m187 [m[79C[100m [m
[33m188 [m[36m/* report()[m[68C[100m [m[58;1H[93m243 [m[4m[36m * spcs: number of original tokens[m[4m                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H243,9[9C49%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m183 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m
[33m184 [m[8C}[70C[100m [m
[33m185 [m    }[74C[100m [m[58;1H[93m240 [m[4m[36m * Sends signal to child process specified[m[4m                                     [m[4m[100m [m[4m                                [m[59;99H[K[59;99H240,9[9C49%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m180 [m[8C} [33melse[m {[63C[100m [m
[33m181 [m[12C[36m// parent[m[58C[100m [m
[33m182 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m[58;1H[93m237 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H237,0-1[7C48%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m177 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m
[33m178 [m[16Cexit([38;5;130m99[m);[54C[100m [m
[33m179 [m[12C}[66C[100m [m[56;20H[46m{[m

[93m234 [m[4m        [m[4m[46m}[m[4m                                                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H234,9[9C47%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m174 [m[79C[100m [m
[33m175 [m[12C[32mint[m status;[56C[100m [m
[33m176 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m[58;1H[93m231 [m[4m            }                                                                  [m[4m[100m [m[4m                                [m[59;99H[K[59;99H231,9[9C46%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m171 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m172 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].up[WRITE], STDOUT_FILENO);[24C[100m [m
[33m173 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m[58;1H[93m228 [m[4m                printf([m[4m[38;5;130m"signalle59;99H[K[59;99H234,9[9C47%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m174 [m[79C[100m [m
[33m175 [m[12C[32mint[m status;[56C[100m [m
[33m176 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m[58;1H[93m231 [m[4m            }                                                                  [m[4m[100m [m[4m                                [m[59;99H[K[59;99H231,9[9C46%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m171 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m172 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].up[WRITE], STDOUT_FILENO);[24C[100m [m
[33m173 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m[58;1H[93m228 [m[4m                printf([m[4m[38;5;130m"signalled([m[4m[35m%d[m[4m[38;5;130m)[m[4m[35m\n[m[4m[38;5;130m"[m[4m, WTERMSIG(jobs[jobq].status));        [m[4m[100m [m[4m                                [m[59;99H[K[59;99H228,9[9C45%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m168 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[READ]);[39C[100m [m
[33m169 [m[79C[100m [m
[33m170 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].down[READ], STDIN_FILENO);[24C[100m [m[58;1H[93m225 [m[4m            [m[4m[33mif[m[4m (WIFEXITED(jobs[jobq].status)) {                                [m[4m[100m [m[4m                                [m[59;99H[K[59;99H225,9[9C45%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m165 [m[12C[36m// child[m[59C[100m [m
[33m166 [m[79C[100m [m
[33m167 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[WRITE]);[36C[100m [m[58;1H[93m222 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H222,0-1[7C44%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m162 [m[79C[100m [m
[33m163 [m[8Cjobs[[38;5;248m[104mjobid[m].pid = fork();[46C[100m [m
[33m164 [m[8C[33mif[m (!jobs[[38;5;248m[104mjobid[m].pid) {[48C[100m [m[58;1H[93m219 [m[4m        [m[4m[36m// check for job tokens[1][m[4m                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H219,9[9C43%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m159 [m[79C[100m [m
[33m160 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, [38;5;248m[104mjobid[m);[28C[100m [m
[33m161 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m[47;45H[46m{[m[58;1H[93m216 [m[4m        [m[4m[46m}[m[4m                                                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H216,9[9C42%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m156 [m[12Cperror([38;5;130m"Creating up pipe"[m);[40C[100m [m
[33m157 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m158 [m[8C}[70C[100m [m[50;45H{[58;1H[93m213 [m[4m            } [m[4m[33melse[m[4m {                                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H213,9[9C41%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m153 [m[8C}[70C[100m [m
[33m154 [m[79C[100m [m
[33m155 [m[8C[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].up) < [38;5;130m0[m) {[40C[100m [m[58;1H[93m210 [m[4m                printf([m[4m[38;5;130m"exited([m[4m[35m%d[m[4m[38;5;130m)[m[4m[35m\n[m[4m[38;5;130m"[m[4m,WEXITSTATUS(jobs[i].status));            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H210,9[9C40%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m150 [m[8C[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].down) < [38;5;130m0[m) {[38C[100m [m
[33m151 [m[12Cperror([38;5;130m"Creating down pipe"[m);[38C[100m [m
[33m152 [m[12Cexit([38;5;130m1[m);[59C[100m [m[58;1H[93m207 [m[4m            [m[4m[33mif[m[4m (!jobs[i].finished) {                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H207,9[9C40%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m147 [m[79C[100m [m
[33m148 [m[8Cstrcpy(jobs[[38;5;248m[104mjobid[m].name, args[[38;5;130m0[m]);[37C[100m [m
[33m149 [m[79C[100m [m[58;1H[93m204 [m[4m    [m[4m[33mif[m[4m (spcs == [m[4m[38;5;130m1[m[4m) {    [m[4m[36m// report all jobs[m[4m                                     [m[4m[100m [m[4m                                [m[59;99H[K[59;99H204,9[9C39%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m144 [m[8C[38;5;248m[104mjobid[m++;[63C[100m [m
[33m145 [m[79C[100m [m
[33m146 [m[8Cjobs = realloc(jobs, ([38;5;248m[104mjobid[m + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));[16C[100m [m[58;1H[93m201 [m[4m    [m[4m[36m// Job status output dependent on arg present status[m[4m                       [m[4m[100m [m[4m                                [m[59;99H[K[59;99H201,9[9C38%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m141 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m142 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m143 [m    } [33melse[m {[67C[100m [m[58;1H[93m198 [m[4m    [m[4m[36m// Header row[m[4m                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H198,9[9C37%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m138 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m139 [m[36m */[m[76C[100m [m
[33m140 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs) {[44C[100m [m[58;1H[93m195 [m[4m[32mvoid[m[4m report([m[4m[32mchar[m[4m** args, [m[4m[32mint[m[4m spcs) {                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H195,9[9C36%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m135 [m[36m * of the child process is unchanged[m[43C[100m [m
[33m136 [m[36m *[m[77C[100m [m
[33m137 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[58;1H[93m192 [m[4m[36m * args: arguments provided in command line without first command[m[4m              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H192,9[9C36%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m132 [m[36m * -------[m[69C[100m [m
[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m
[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m[58;1H[93m189 [m[4m[36m * --------[m[4m                                                                    [m[4m[100m [m[4m                                [m[59;99H[K[59;99H189,9[9C35%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m129 [m}[78C[100m [m
[33m130 [m[79C[100m [m
[33m131 [m[36m/* spawn()[m[69C[100m [m[12;39H[46m{[m[58;1H[93m186 [m[4m[46m}[m[4m                                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H186,1[9C34%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m126 [m[79C[100m [m
[33m127 [m    free(jobs);[64C[100m [m
[33m128 [m    [33mreturn[m [38;5;130m0[m;[66C[100m [m[15;39H{[58;1H[93m183 [m[4m            close(jobs[[m[4m[38;5;248m[104mjobid[m[4m].up[WRITE]);                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H183,9[9C33%[58;13H[?25h[?25l[21;1H[93m146 [m[19C[7m[48;5;242mloc(jobs, (jobid + [m[7m[38;5;130m[48;5;242m1[m[7m[48;5;242m) * [m[7m[33m[48;5;242msizeof[m[7m[48;5;242m([m[7m[32m[48;5;242mstruct[m[7m[48;5;242m Job)); [22;5H         30m[48;5;242m"New Job ID [[m[7m[35m[48;5;242m%d[m[7m[38;5;130m[48;5;242m] created[m[7m[35m[48;5;242m\n[m[7m[38;5;130m[48;5;242m"[m[7m[48;5;242m, jobid); [36;5H        fflush([m[7m[38;5;130m[48;5;242mstdout[m[7m[48;5;242m); [37;5H [38;5H        jobs[jobid].pid = fork(); [39;5H        [m[7m[33m[48;5;242mif[m[7m[48;5;242m (!jobs[jobid].pid) { [40;5H            [m[7m[36m[48;5;242m// child[m[7m[48;5;242m [41;5H [42;5H            close(jobs[jobid].down[WRITE]); [43;5H            close(jobs[jobid].up[READ]); [44;5H             [45;5H            dup2(jobs[jobid].down[READ], STDIN_FILENO); [46;5H            close(jobs[jobid].down[READ]); [47;5H            dup2(jobs[jobid].up[WRITE], STDOUT_FILENO); [48;5H            close(jobs[jobid].up[WRITE]); [49;5H             [50;5H            [m[7m[32m[48;5;242mint[m[7m[48;5;242m status; [51;5H            status = execvp(args[[m[7m[38;5;130m[48;5;242m0[m[7m[48;5;242m], args); [52;5H            [m[7m[33m[48;5;242mif[m[7m[48;5;242m (status == -[m[7m[38;5;130m[48;5;242m1[m[7m[48;5;242m) { [53;5H                exit([m[7m[38;5;130m[48;5;242m99[m[7m[48;5;242m); [54;5H            } [55;5H        } [m[7m[33m[48;5;242melse[m[7m[48;5;242m { [56;5H            [m[7m[36m[48;5;242m// parent[m[7m[48;5;242m [57;5H            close(jobs[jobid].down[READ]); [m
[33m183 [m[7m[48;5;242m         [m   close(jobs[[38;5;248m[104mjobid[m].up[WRITE]);                                      [100m [m[58;85H[K[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H146,19[8C33%[21;23H[?25h[?25l[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m123 [m[8Cfree(input);[59C[100m [m
[33m124 [m[8Cfree(tokens);[58C[100m [m
[33m125 [m    }[74C[100m [m[59;99H[K[59;99H146,19[8C32%[24;23H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m120 [m[8Cprintf([38;5;130m"> "[m);[58C[100m [m
[33m121 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m122 [m[79C[100m [m[59;99H[K[59;99H146,19[8C32%[27;23H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m117 [m[12Cprintf([38;5;130m"Error: Invalid command[m[35m\n[m[38;5;130m"[m);[32C[100m [m
[33m118 [m[8C}[70C[100m [m
[33m119 [m[79C[100m [m[59;99H[K[59;99H146,19[8C31%[30;23H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m114 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"cleanup"[m)) {[28C[100m [m
[33m115 [m[12Ccleanup();[57C[100m [m
[33m116 [m[8C} [33melse[m {[63C[100m [m[59;99H[K[59;99H146,19[8C30%[33;23H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m111 [m[12Crcv(args, spcs);[51C[100m [m
[33m112 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"eof"[m)) {[32C[100m [m
[33m113 [m[12Ceof(args, spcs);[51C[100m [m[59;99H[K[59;99H146,19[8C29%[36;23H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m108 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"send"[m)) {[31C[100m [m
[33m109 [m[12Csend(args, spcs);[50C[100m [m
[33m110 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"rcv"[m)) {[32C[100m [m[59;99H[K[59;99H146,19[8C28%[39;23H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m105 [m[12Ccall_signal(args, spcs);[43C[100m [m
[33m106 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"sleep"[m)) {[30C[100m [m
[33m107 [m[12Chq_wait(args, spcs);[47C[100m [m[59;99H[K[59;99H146,19[8C28%[42;23H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m102 [m[12C[36m// Report[m[58C[100m [m
[33m103 [m[12Creport(args, spcs);[48C[100m [m
[33m104 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"signal"[m)) {[29C[100m [m[59;99H[K[59;99H146,19[8C27%[45;23H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 99 [m[12C[36m// spawn[m[59C[100m [m
[33m100 [m[12Cspawn(args, spcs);[49C[100m [m
[33m101 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"report"[m)) {[29C[100m [m[59;99H[K[59;99H146,19[8C26%[48;23H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 96 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m 97 [m[79C[100m [m
[33m 98 [m[8C[33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"spawn"[m)) {[37C[100m [m[59;99H[K[59;99H146,19[8C25%[51;23H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 93 [m[12Cargs[i - [38;5;130m1[m] = tokens[i];[43C[100m [m
[33m 94 [m[8C}[70C[100m [m
[33m 95 [m[8Cargs[spcs - [38;5;130m1[m] = [38;5;130m0[m;[52C[100m [m[59;99H[K[59;99H146,19[8C24%[54;23H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 90 [m[79C[100m [m
[33m 91 [m[8C[32mchar[m* args[spcs];[54C[100m [m
[33m 92 [m[8C[33mfor[m ([32mint[m i = [38;5;130m1[m; i < spcs; i++) {[39C[100m [m[59;99H[K[59;99H146,19[8C23%[57;23H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 87 [m[12C[33mcontinue[m;[58C[100m [m
[33m 88 [m[8C}[70C[100m [m
[33m 89 [m[8Ctokens = split_space_not_quote(input, &spcs);[26C[100m [m[58;1H[93m144 [m[59;99H[K[59;99H144,17[8C23%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 84 [m[8C[33mif[m (!strcmp(input, [38;5;130m""[m)) {[46C[100m [m
[33m 85 [m[12Cprintf([38;5;130m"> "[m);[54C[100m [m
[33m 86 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m[58;1H[93m141 [m[19C[7m[48;5;242m [m[59;99H[K[59;99H141,19[8C22%[58;23H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 81 [m    [33mwhile[m ((input = read_line([38;5;130mstdin[m)) != [38;5;130mNULL[m) {[31C[100m [m
[33m 82 [m[8C[32mint[m spcs = [38;5;130m0[m;[58C[100m [m
[33m 83 [m[79C[100m [m[58;1H[93m138 [m[19C[7m[36m[48;5;242moriginal tokens[m[7m[48;5;242m [m[59;99H[K[59;99H138,19[8C21%[58;23H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 78 [m    printf([38;5;130m"> "[m);[62C[100m [m
[33m 79 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m 80 [m    [36m// prompt loop[m[61C[100m [m[58;1H[93m135 [m[19C[7m[36m[48;5;242mcess is unchanged[m[7m[48;5;242m [m[59;99H[K[59;99H135,19[8C20%[58;23H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 75 [m[79C[100m [m
[33m 76 [m    signal([38;5;130mSIGINT[m, handle_signal);[45C[100m [m
[33m 77 [m    signal([38;5;130mSIGCHLD[m, handle_signal);[44C[100m [m[58;1H[93m132 [m[59;99H[K[59;99H132,11[8C19%[58;15H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 72 [m    [32mchar[m** tokens;[61C[100m [m
[33m 73 [m[79C[100m [m
[33m 74 [m    jobs = malloc([38;5;130m0[m * [33msizeof[m([32mstruct[m Job));[37C[100m [m[58;1H[93m129 [m[59;99H[K[59;99H129,2[9C19%[58;6H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 69 [m[79C[100m [m
[33m 70 [m[32mint[m main([32mint[m argc, [32mchar[m* argv[]) {[45C[100m [m
[33m 71 [m    [32mchar[m* input;[63C[100m [m[58;1H[93m126 [m[59;99H[K[59;99H126,5[9C18%[58;9H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 66 [m[79C[100m [m
[33m 67 [m[79C[100m [m
[33m 68 [m[36m// Program[m[69C[100m [m[58;1H[93m123 [m[12C[46m([minput[46m)[m[7m[48;5;242m; [m[59;99H[K[59;99H123,19[8C17%[58;23H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 63 [m[79C[100m [m
[33m 64 [m[32mint[m [38;5;248m[104mjobid[m = -[38;5;130m1[m;[64C[100m [m
[33m 65 [m[32mstruct[m Job* jobs;[62C[100m [m[58;1H[93m120 [m[19C[7m[48;5;242m); [m[59;99H[K[59;99H120,19[8C16%[58;23H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 60 [m};[77C[100m [m
[33m 61 [m[79C[100m [m
[33m 62 [m[36m// Globals[m[69C[100m [m[58;1H[93m117 [m[18C[46m([m[7m[38;5;130m[48;5;242m"Error: Invalid command[m[7m[35m[48;5;242m\n[m[7m[38;5;130m[48;5;242m"[m[7m[48;5;242m); [m[59;99H[K[59;99H117,19[8C15%[58;23H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 57 [m    [32mint[m up[[38;5;130m2[m];[65C[100m [m
[33m 58 [m    [32mint[m status;[64C[100m [m
[33m 59 [m    [32mint[m finished;[62C[100m [m[58;1H[93m114 [m[18C[46m([m[7m[48;5;242m!strcmp(tokens[[m[7m[38;5;130m[48;5;242m0[m[7m[48;5;242m], [m[7m[38;5;130m[48;5;242m"cleanup"[m[7m[48;5;242m)) { [m[59;99H[K[59;99H114,19[8C15%[58;23H[?25h[?25l[25;1H[93m 81 [m[4m    [m[4m[33mwhile[m[4m ((input = read_line([m[4m[38;5;130mstdin[m[4m)) != [m[4m[38;5;130mNULL[m[4m) {                               [m[4m[100m [m[4m                                [m[58;1H[33m114 [m[18C(!strcmp(tokens[[38;5;130m0[m], [38;5;130m"cleanup"[m)) { [59;1H[K[59;99H81,26[9C15%[25;30H[?25h[?25l[25;5H    [33mwhile[m [46m([m(input = read_[7m[48;5;242mline([m[7m[38;5;130m[48;5;242mstdin[m[7m[48;5;242m)) != [m[7m[38;5;130m[48;5;242mNULL[m[46m)[m {                               [100m [m[25;85H[K[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H81,46[9C15%[25;50H[?25h[?25l[25;5H[4m    [m[4m[33mwhile[m[4m [m[4m[46m([m[4m(input = read_line([m[4m[38;5;130mstdin[m[4m)) != [m[4m[38;5;130mNULL[m[4m[46m)[m[4m {                               [m[4m[100m [m[4m                                [m[59;1H[K[59;99H81,46[9C15%[25;50H[?25h[?25l[25;15H[4m([34C)[m[59;102H31[25;35H[?25h[?25l[25;5H    [33mwhile[m ((input = read_line[46m([m[7m[38;5;130m[48;5;242mstdin[m[46m)[m) != [38;5;130mNULL[m) {                               [100m [m[25;85H[K[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H81,36[9C15%[25;40H[?25h[?25l[25;5H[4m    [m[4m[33mwhile[m[4m ((input = read_line[m[4m[46m([m[4m[38;5;130mstdin[m[4m[46m)[m[4m) != [m[4m[38;5;130mNULL[m[4m) {                               [m[4m[100m [m[4m                                [m[59;1H[K[59;99H81,36[9C15%[25;40H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m115 [m[12Ccleanup();[57C[100m [m
[33m116 [m[8C} [33melse[m {[63C[100m [m
[33m117 [m[12Cprintf([38;5;130m"Error: Invalid command[m[35m\n[m[38;5;130m"[m);[32C[100m [m[59;99H[K[59;99H81,36[9C15%[22;40H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m118 [m[8C}[70C[100m [m
[33m119 [m[79C[100m [m
[33m120 [m[8Cprintf([38;5;130m"> "[m);[58C[100m [m[59;99H[K[59;99H81,36[9C16%[19;40H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m121 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m122 [m[79C[100m [m
[33m123 [m[8Cfree(input);[59C[100m [m[59;99H[K[59;99H81,36[9C17%[16;40H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m124 [m[8Cfree(tokens);[58C[100m [m
[33m125 [m    }[74C[100m [m
[33m126 [m[79C[100m [m[59;99H[K[59;99H81,36[9C18%[13;40H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m127 [m    free(jobs);[64C[100m [m
[33m128 [m    [33mreturn[m [38;5;130m0[m;[66C[100m [m
[33m129 [m}[78C[100m [m[59;99H[K[59;99H81,36[9C19%[10;40H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m130 [m[79C[100m [m
[33m131 [m[36m/* spawn()[m[69C[100m [m
[33m132 [m[36m * -------[m[69C[100m [m[59;99H[K[59;99H81,36[9C19%[7;40H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m
[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m
[33m135 [m[36m * of the child process is unchanged[m[43C[100m [m[59;99H[K[59;99H81,36[9C20%[4;40H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m136 [m[36m *[m[77C[100m [m
[33m137 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m138 [m[36m * spcs: number of original tokens[m[45C[100m [m[59;99H[K[59;99H81,36[9C21%[1;40H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 84 [m[4m        [m[4m[33mif[m[4m (!strcmp(input, [m[4m[38;5;130m""[m[4m)) [m[4m[46m{[m[4m                                              [m[4m[100m [m[4m                                [m[5;13H[46m}[m[56;1H[33m139 [m[36m */[m[76C[100m [m
[33m140 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs) {[44C[100m [m
[33m141 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m[59;99H[K[59;99H84,33[9C22%[1;37H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 87 [m[4m            [m[4m[33mcontinue[m[4m;                                                          [m[4m[100m [m[4m                                [m[2;13H}[56;1H[33m142 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m143 [m    } [33melse[m {[67C[100m [m
[33m144 [m[8C[38;5;248m[104mjobid[m++;[63C[100m [m[59;99H[K[59;99H87,21[9C23%[1;25H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 90 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m145 [m[79C[100m [m
[33m146 [m[8Cjobs = realloc(jobs, ([38;5;248m[104mjobid[m + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));[16C[100m [m
[33m147 [m[79C[100m [m[59;99H[K[59;99H90,0-1[8C23%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 93 [m[4m            args[i - [m[4m[38;5;130m1[m[4m] = tokens[i];                                           [m[4m[100m [m[4m                                [m[56;1H[33m148 [m[8Cstrcpy(jobs[[38;5;248m[104mjobid[m].name, args[[38;5;130m0[m]);[37C[100m [m
[33m149 [m[79C[100m [m
[33m150 [m[8C[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].down) < [38;5;130m0[m) {[38C[100m [m[59;99H[K[59;99H93,36[9C24%[1;40H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 96 [m[4m        fflush([m[4m[38;5;130mstdout[m[4m);                                                        [m[4m[100m [m[4m                                [m[56;1H[33m151 [m[12Cperror([38;5;130m"Creating down pipe"[m);[38C[100m [m
[33m152 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m153 [m[8C}[70C[100m [m[59;99H[K[59;99H96,23[9C25%[1;27H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 99 [m[4m            [m[4m[36m// spawn[m[4m                                                           [m[4m[100m [m[4m                                [m[56;1H[33m154 [m[79C[100m [m
[33m155 [m[8C[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].up) < [38;5;130m0[m) {[40C[100m [m
[33m156 [m[12Cperror([38;5;130m"Creating up pipe"[m);[40C[100m [m[59;99H[K[59;99H99,20[9C26%[1;24H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m102 [m[4m            [m[4m[36m// Report[m[4m                                                          [m[4m[100m [m[4m                                [m[56;1H[33m157 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m158 [m[8C}[70C[100m [m
[33m159 [m[79C[100m [m[59;99H[K[59;99H102,21[8C27%[1;25H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m105 [m[4m            call_signal(args, spcs);                                           [m[4m[100m [m[4m                                [m[56;1H[33m160 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, [38;5;248m[104mjobid[m);[28C[100m [m
[33m161 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m162 [m[79C[100m [m[59;99H[K[59;99H105,36[8C28%[1;40H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m108 [m[4m        } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (!strcmp(tokens[m[4m[46m[[m[4m[38;5;130m0[m[4m[46m][m[4m, [m[4m[38;5;130m"send"[m[4m)) {                               [m[4m[100m [m[4m                                [m[56;1H[33m163 [m[8Cjobs[[38;5;248m[104mjobid[m].pid = fork();[46C[100m [m
[33m164 [m[8C[33mif[m (!jobs[[38;5;248m[104mjobid[m].pid) {[48C[100m [m
[33m165 [m[12C[36m// child[m[59C[100m [m[59;99H[K[59;99H108,36[8C28%[1;40H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m111 [m[4m            rcv(args, spcs);                                                   [m[4m[100m [m[4m                                [m[56;1H[33m166 [m[79C[100m [m
[33m167 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[WRITE]);[36C[100m [m
[33m168 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[READ]);[39C[100m [m[59;99H[K[59;99H111,28[8C29%[1;32H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m114 [m[4m        } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (!strcmp(tokens[m[4m[46m[[m[4m[38;5;130m0[m[4m[46m][m[4m, [m[4m[38;5;130m"cleanup"[m[4m)) {                            [m[4m[100m [m[4m                                [m[56;1H[33m169 [m[79C[100m [m
[33m170 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].down[READ], STDIN_FILENO);[24C[100m [m
[33m171 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m[59;99H[K[59;99H114,36[8C30%[1;40H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m117 [m[4m            printf([m[4m[38;5;130m"Error: Invalid command[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                [m[4m[100m [m[4m                                [m[56;1H[33m172 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].up[WRITE], STDOUT_FILENO);[24C[100m [m
[33m173 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m
[33m174 [m[79C[100m [m[59;99H[K[59;99H117,36[8C31%[1;40H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m120 [m[4m        printf([m[4m[38;5;130m"> "[m[4m);                                                          [m[4m[100m [m[4m                                [m[56;1H[33m175 [m[12C[32mint[m status;[56C[100m [m
[33m176 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m
[33m177 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m[59;99H[K[59;99H120,21[8C32%[1;25H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m123 [m[4m        free(input);                                                           [m[4m[100m [m[4m                                [m[56;1H[33m178 [m[16Cexit([38;5;130m99[m);[54C[100m [m
[33m179 [m[12C}[66C[100m [m
[33m180 [m[8C} [33melse[m {[63C[100m [m[59;99H[K[59;99H123,20[8C32%[1;24H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m126 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m181 [m[12C[36m// parent[m[58C[100m [m
[33m182 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m183 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m[59;99H[K[59;99H126,4[9C33%[1;8H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m129 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[56;1H[33m184 [m[8C}[70C[100m [m
[33m185 [m    }[74C[100m [m
[33m186 [m}[78C[100m [m[59;99H[K[59;99H129,1[9C34%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m132 [m[4m[36m * -------[m[4m                                                                     [m[4m[100m [m[4m                                [m[56;1H[33m187 [m[79C[100m [m
[33m188 [m[36m/* report()[m[68C[100m [m
[33m189 [m[36m * --------[m[68C[100m [m[59;99H[K[59;99H132,10[8C35%[1;14H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m135 [m[4m[36m * of the child process is unchanged[m[4m                                           [m[4m[100m [m[4m                                [m[56;1H[33m190 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m
[33m191 [m[36m *[m[77C[100m [m
[33m192 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[59;99H[K[59;99H135,36[8C36%[1;40H[?25h[?25l[33m135 [m[36m * of the child process is unchanged[m                                           [100m [m[1;85H[K[48;1H[93m182 [m[4m            close(jobs[[m[4m[38;5;248m[104mjobid[m[4m].down[READ]);                                     [m[4m[100m [m[4m                                [m[59;100H82,1[48;20H[?25h[?25l[33m182 [m            clo[7m[48;5;242mse(jobs[jobid].down[READ]); [m                                    [100m [m[48;85H[K[49;5H[7m[48;5;242m            close(jobs[jobid].up[WRITE]); [m
[93m184 [m[7m[48;5;242m        }[m[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H184,10[8C36%[50;14H[?25h[?25l[46;20H[46m{[m[48;20Hse(jobs[[38;5;248m[104mjobid[m].down[READ]); [49;5H            close(jobs[[38;5;248m[104mjobid[m].up[WRITE]); [50;5H[4m        [m[4m[46m}[m[4m                                                                      [m[4m[100m [m[4m                                [m[59;1H[K[59;99H184,9[9C36%[50;13H[?25h[?25l[46;20H{


[93m183 [m[4m            close(jobs[[m[4m[38;5;248m[104mjobid[m[4m].up[WRITE]);                                      [m[4m[100m [m[4m                                [m[50;1H[33m184 [m        }                                                                      [100m [m[50;85H[K[59;101H3,22[49;26H[?25h[?25l[59;103H41[49;45H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m132 [m[36m * -------[m[69C[100m [m
[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m
[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m[59;99H[K[59;99H183,41[8C35%[52;45H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m129 [m}[78C[100m [m
[33m130 [m[79C[100m [m
[33m131 [m[36m/* spawn()[m[69C[100m [m[59;99H[K[59;99H183,41[8C34%[55;45H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m126 [m[79C[100m [m
[33m127 [m    free(jobs);[64C[100m [m
[33m128 [m    [33mreturn[m [38;5;130m0[m;[66C[100m [m[59;99H[K[59;99H183,41[8C33%[58;45H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m123 [m[8Cfree(input);[59C[100m [m
[33m124 [m[8Cfree(tokens);[58C[100m [m
[33m125 [m    }[74C[100m [m[58;1H[93m180 [m[4m        } [m[4m[33melse[m[4m {                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H180,16[8C32%[58;20H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m120 [m[8Cprintf([38;5;130m"> "[m);[58C[100m [m
[33m121 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m122 [m[79C[100m [m[58;1H[93m177 [m[4m            [m[4m[33mif[m[4m (status == -[m[4m[38;5;130m1[m[4m) {                                                [m[4m[100m [m[4m                                [m[59;99H[K[59;99H177,31[8C32%[58;35H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m117 [m[12Cprintf([38;5;130m"Error: Invalid command[m[35m\n[m[38;5;130m"[m);[32C[100m [m
[33m118 [m[8C}[70C[100m [m
[33m119 [m[79C[100m [m[58;1H[93m174 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H174,12[8C31%[58;16H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m114 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"cleanup"[m)) {[28C[100m [m
[33m115 [m[12Ccleanup();[57C[100m [m
[33m116 [m[8C} [33melse[m {[63C[100m [m[58;1H[93m171 [m[4m            close(jobs[[m[4m[38;5;248m[104mjobid[m[4m].down[READ]);                                     [m[4m[100m [m[4m                                [m[59;99H[K[59;99H171,42[8C30%[58;46H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m111 [m[12Crcv(args, spcs);[51C[100m [m
[33m112 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"eof"[m)) {[32C[100m [m
[33m113 [m[12Ceof(args, spcs);[51C[100m [m[58;1H[93m168 [m[4m            close(jobs[[m[4m[38;5;248m[104mjobid[m[4m].up[READ]);                                       [m[4m[100m [m[4m                                [m[59;99H[K[59;99H168,40[8C29%[58;44H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m108 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"send"[m)) {[31C[100m [m
[33m109 [m[12Csend(args, spcs);[50C[100m [m
[33m110 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"rcv"[m)) {[32C[100m [m[58;1H[93m165 [m[4m            [m[4m[36m// child[m[4m                                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H165,20[8C28%[58;24H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m105 [m[12Ccall_signal(args, spcs);[43C[100m [m
[33m106 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"sleep"[m)) {[30C[100m [m
[33m107 [m[12Chq_wait(args, spcs);[47C[100m [m[58;1H[93m162 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H162,0-1[7C28%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m102 [m[12C[36m// Report[m[58C[100m [m
[33m103 [m[12Creport(args, spcs);[48C[100m [m
[33m104 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"signal"[m)) {[29C[100m [m[58;1H[93m159 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H159,0-1[7C27%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 99 [m[12C[36m// spawn[m[59C[100m [m
[33m100 [m[12Cspawn(args, spcs);[49C[100m [m
[33m101 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"report"[m)) {[29C[100m [m[58;1H[93m156 [m[4m            perror([m[4m[38;5;130m"Creating up pipe"[m[4m);                                        [m[4m[100m [m[4m                                [m[59;99H[K[59;99H156,39[8C26%[58;43H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 96 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m 97 [m[79C[100m [m
[33m 98 [m[8C[33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"spawn"[m)) {[37C[100m [m[55;45H[46m{[m


[93m153 [m[4m        [m[4m[46m}[m[4m                                                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H153,9[9C25%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 93 [m[12Cargs[i - [38;5;130m1[m] = tokens[i];[43C[100m [m
[33m 94 [m[8C}[70C[100m [m
[33m 95 [m[8Cargs[spcs - [38;5;130m1[m] = [38;5;130m0[m;[52C[100m [m[58;1H[93m150 [m[4m        [m[4m[33mif[m[4m (pipe(jobs[[m[4m[38;5;248m[104mjobid[m[4m].down) < [m[4m[38;5;130m0[m[4m) {                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H150,41[8C24%[58;45H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 90 [m[79C[100m [m
[33m 91 [m[8C[32mchar[m* args[spcs];[54C[100m [m
[33m 92 [m[8C[33mfor[m ([32mint[m i = [38;5;130m1[m; i < spcs; i++) {[39C[100m [m[58;1H[93m147 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H147,8[9C23%[58;12H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 87 [m[12C[33mcontinue[m;[58C[100m [m
[33m 88 [m[8C}[70C[100m [m
[33m 89 [m[8Ctokens = split_space_not_quote(input, &spcs);[26C[100m [m[58;1H[93m144 [m[4m        [m[4m[38;5;248m[104mjobid[m[4m++;                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H144,16[8C23%[58;20H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 84 [m[8C[33mif[m (!strcmp(input, [38;5;130m""[m)) {[46C[100m [m
[33m 85 [m[12Cprintf([38;5;130m"> "[m);[54C[100m [m
[33m 86 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m[58;1H[93m141 [m[4m    [m[4m[33mif[m[4m (spcs < [m[4m[38;5;130m2[m[4m) {                                                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H141,19[8C22%[58;23H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 81 [m    [33mwhile[m ((input = read_line([38;5;130mstdin[m)) != [38;5;130mNULL[m) {[31C[100m [m
[33m 82 [m[8C[32mint[m spcs = [38;5;130m0[m;[58C[100m [m
[33m 83 [m[79C[100m [m[58;1H[93m138 [m[4m[36m * spcs: number of original tokens[m[4m                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H138,34[8C21%[58;38H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 78 [m    printf([38;5;130m"> "[m);[62C[100m [m
[33m 79 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m 80 [m    [36m// prompt loop[m[61C[100m [m[58;1H[93m135 [m[4m[36m * of the child process is unchanged[m[4m                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H135,36[8C20%[58;40H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 75 [m[79C[100m [m
[33m 76 [m    signal([38;5;130mSIGINT[m, handle_signal);[45C[100m [m
[33m 77 [m    signal([38;5;130mSIGCHLD[m, handle_signal);[44C[100m [m[58;1H[93m132 [m[4m[36m * -------[m[4m                                                                     [m[4m[100m [m[4m                                [m[59;99H[K[59;99H132,10[8C19%[58;14H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 72 [m    [32mchar[m** tokens;[61C[100m [m
[33m 73 [m[79C[100m [m
[33m 74 [m    jobs = malloc([38;5;130m0[m * [33msizeof[m([32mstruct[m Job));[37C[100m [m[58;1H[93m129 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H129,1[9C19%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 69 [m[79C[100m [m
[33m 70 [m[32mint[m main([32mint[m argc, [32mchar[m* argv[]) {[45C[100m [m
[33m 71 [m    [32mchar[m* input;[63C[100m [m[58;1H[93m126 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H126,4[9C18%[58;8H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 66 [m[79C[100m [m
[33m 67 [m[79C[100m [m
[33m 68 [m[36m// Program[m[69C[100m [m[58;1H[93m123 [m[4m        free(input);                                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H123,20[8C17%[58;24H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 63 [m[79C[100m [m
[33m 64 [m[32mint[m [38;5;248m[104mjobid[m = -[38;5;130m1[m;[64C[100m [m
[33m 65 [m[32mstruct[m Job* jobs;[62C[100m [m[58;1H[93m120 [m[4m        printf([m[4m[38;5;130m"> "[m[4m);                                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H120,21[8C16%[58;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 60 [m};[77C[100m [m
[33m 61 [m[79C[100m [m
[33m 62 [m[36m// Globals[m[69C[100m [m[58;1H[93m117 [m[4m            printf([m[4m[38;5;130m"Error: Invalid command[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                [m[4m[100m [m[4m                                [m[59;99H[K[59;99H117,43[8C15%[58;47H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 57 [m    [32mint[m up[[38;5;130m2[m];[65C[100m [m
[33m 58 [m    [32mint[m status;[64C[100m [m
[33m 59 [m    [32mint[m finished;[62C[100m [m[58;1H[93m114 [m[4m        } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (!strcmp(tokens[[m[4m[38;5;130m0[m[4m], [m[4m[38;5;130m"cleanup"[m[4m)) {                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H114,43[8C15%[58;47H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 54 [m    [32mint[m pid;[67C[100m [m
[33m 55 [m    [32mchar[m name[MAX_BUFFER_SIZE];[48C[100m [m
[33m 56 [m    [32mint[m down[[38;5;130m2[m];[63C[100m [m[58;1H[93m111 [m[4m            rcv(args, spcs);                                                   [m[4m[100m [m[4m                                [m[59;99H[K[59;99H111,28[8C14%[58;32H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 51 [m[36m// Structs[m[69C[100m [m
[33m 52 [m[79C[100m [m
[33m 53 [m[32mstruct[m Job {[67C[100m [m[58;1H[93m108 [m[4m        } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (!strcmp(tokens[[m[4m[38;5;130m0[m[4m], [m[4m[38;5;130m"send"[m[4m)) {                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H108,43[8C13%[58;47H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 48 [m[79C[100m [m
[33m 49 [m[32mbool[m is_job([32mchar[m job[]);[55C[100m [m
[33m 50 [m[79C[100m [m[58;1H[93m105 [m[4m            call_signal(args, spcs);                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H105,36[8C12%[58;40H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 45 [m[32mvoid[m handle_signal([32mint[m s);[53C[100m [m
[33m 46 [m[79C[100m [m
[33m 47 [m[32mbool[m is_number([32mchar[m number[]);[49C[100m [m[58;1H[93m102 [m[4m            [m[4m[36m// Report[m[4m                                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H102,21[8C11%[58;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 42 [m[79C[100m [m
[33m 43 [m[32mvoid[m cleanup([32mvoid[m);[60C[100m [m
[33m 44 [m[79C[100m [m[58;1H[93m 99 [m[4m            [m[4m[36m// spawn[m[4m                                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H99,20[9C11%[58;24H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 39 [m[32mvoid[m rcv([32mchar[m** args, [32mint[m spcs);[47C[100m [m
[33m 40 [m[79C[100m [m
[33m 41 [m[32mvoid[m eof([32mchar[m** args, [32mint[m spcs);[47C[100m [m[58;1H[93m 96 [m[4m        fflush([m[4m[38;5;130mstdout[m[4m);                                                        [m[4m[100m [m[4m                                [m[59;99H[K[59;99H96,23[9C10%[58;27H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 36 [m[79C[100m [m
[33m 37 [m[32mvoid[m send([32mchar[m** args, [32mint[m spcs);[46C[100m [m
[33m 38 [m[79C[100m [m[58;1H[93m 93 [m[4m            args[i - [m[4m[38;5;130m1[m[4m] = tokens[i];                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H93,36[10C9%[58;40H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 33 [m[32mvoid[m call_signal([32mchar[m** args, [32mint[m spcs);[39C[100m [m
[33m 34 [m[79C[100m [m
[33m 35 [m[32mvoid[m hq_wait([32mchar[m** args, [32mint[m spcs);[43C[100m [m[58;1H[93m 90 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H90,0-1[9C8%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 30 [m[79C[100m [m
[33m 31 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs);[44C[100m [m
[33m 32 [m[79C[100m [m[58;1H[93m 87 [m[4m            [m[4m[33mcontinue[m[4m;                                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H87,21[10C7%[58;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 27 [m[36m// Function declarations[m[55C[100m [m
[33m 28 [m[79C[100m [m
[33m 29 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs);[45C[100m [m[58;1H[93m 84 [m[4m        [m[4m[33mif[m[4m (!strcmp(input, [m[4m[38;5;130m""[m[4m)) {                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H84,33[10C7%[58;37H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 24 [m[79C[100m [m
[33m 25 [m[35m#endif[m      [36m// hq_h[m[60C[100m [m
[33m 26 [m[79C[100m [m[58;1H[93m 81 [m[4m    [m[4m[33mwhile[m[4m ((input = read_line([m[4m[38;5;130mstdin[m[4m)) != [m[4m[38;5;130mNULL[m[4m) {                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H81,43[10C6%[58;47H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 21 [m[35m#define MAX_BUFFER_SIZE [m[38;5;130m52[m[53C[100m [m
[33m 22 [m[35m#define READ [m[38;5;130m0[m[65C[100m [m
[33m 23 [m[35m#define WRITE [m[38;5;130m1[m[64C[100m [m[58;1H[93m 78 [m[4m    printf([m[4m[38;5;130m"> "[m[4m);                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H78,17[10C5%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 18 [m[79C[100m [m
[33m 19 [m[36m// Defintions[m[66C[100m [m
[33m 20 [m[79C[100m [m[58;1H[93m 75 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H75,4[11C4%[58;8H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 15 [m[35m#include [m[38;5;130m<signal.h>[m[60C[100m [m
[33m 16 [m[35m#include [m[38;5;130m<ctype.h>[m[61C[100m [m
[33m 17 [m[35m#include [m[38;5;130m<stdbool.h>[m[59C[100m [m[58;1H[93m 72 [m[4m    [m[4m[32mchar[m[4m** tokens;                                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H72,18[10C3%[58;22H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 73 [m[79C[100m [m
[33m 74 [m    jobs = malloc([38;5;130m0[m * [33msizeof[m([32mstruct[m Job));[37C[100m [m
[33m 75 [m[79C[100m [m[59;99H[K[59;99H72,18[10C4%[55;22H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 76 [m    signal([38;5;130mSIGINT[m, handle_signal);[45C[100m [m
[33m 77 [m    signal([38;5;130mSIGCHLD[m, handle_signal);[44C[100m [m
[33m 78 [m    printf([38;5;130m"> "[m);[62C[100m [m[59;99H[K[59;99H72,18[10C5%[52;22H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 79 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m 80 [m    [36m// prompt loop[m[61C[100m [m
[33m 81 [m    [33mwhile[m ((input = read_line([38;5;130mstdin[m)) != [38;5;130mNULL[m) {[31C[100m [m[59;99H[K[59;99H72,18[10C6%[49;22H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 82 [m[8C[32mint[m spcs = [38;5;130m0[m;[58C[100m [m
[33m 83 [m[79C[100m [m
[33m 84 [m[8C[33mif[m (!strcmp(input, [38;5;130m""[m)) {[46C[100m [m[59;99H[K[59;99H72,18[10C7%[46;22H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 85 [m[12Cprintf([38;5;130m"> "[m);[54C[100m [m
[33m 86 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m 87 [m[12C[33mcontinue[m;[58C[100m [m[59;99H[K[59;99H72,18[10C7%[43;22H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 88 [m[8C}[70C[100m [m
[33m 89 [m[8Ctokens = split_space_not_quote(input, &spcs);[26C[100m [m
[33m 90 [m[79C[100m [m[59;99H[K[59;99H72,18[10C8%[40;22H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 91 [m[8C[32mchar[m* args[spcs];[54C[100m [m
[33m 92 [m[8C[33mfor[m ([32mint[m i = [38;5;130m1[m; i < spcs; i++) {[39C[100m [m
[33m 93 [m[12Cargs[i - [38;5;130m1[m] = tokens[i];[43C[100m [m[59;99H[K[59;99H72,18[10C9%[37;22H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 94 [m[8C}[70C[100m [m
[33m 95 [m[8Cargs[spcs - [38;5;130m1[m] = [38;5;130m0[m;[52C[100m [m
[33m 96 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m[59;99H[K[59;99H72,18[9C10%[34;22H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 97 [m[79C[100m [m
[33m 98 [m[8C[33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"spawn"[m)) {[37C[100m [m
[33m 99 [m[12C[36m// spawn[m[59C[100m [m[59;99H[K[59;99H72,18[9C11%[31;22H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m100 [m[12Cspawn(args, spcs);[49C[100m [m
[33m101 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"report"[m)) {[29C[100m [m
[33m102 [m[12C[36m// Report[m[58C[100m [m[59;99H[K[59;99H72,18[9C11%[28;22H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m103 [m[12Creport(args, spcs);[48C[100m [m
[33m104 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"signal"[m)) {[29C[100m [m
[33m105 [m[12Ccall_signal(args, spcs);[43C[100m [m[59;99H[K[59;99H72,18[9C12%[25;22H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m106 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"sleep"[m)) {[30C[100m [m
[33m107 [m[12Chq_wait(args, spcs);[47C[100m [m
[33m108 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"send"[m)) {[31C[100m [m[59;99H[K[59;99H72,18[9C13%[22;22H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m109 [m[12Csend(args, spcs);[50C[100m [m
[33m110 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"rcv"[m)) {[32C[100m [m
[33m111 [m[12Crcv(args, spcs);[51C[100m [m[59;99H[K[59;99H72,18[9C14%[19;22H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m112 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"eof"[m)) {[32C[100m [m
[33m113 [m[12Ceof(args, spcs);[51C[100m [m
[33m114 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"cleanup"[m)) {[28C[100m [m[59;99H[K[59;99H72,18[9C15%[16;22H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m115 [m[12Ccleanup();[57C[100m [m
[33m116 [m[8C} [33melse[m {[63C[100m [m
[33m117 [m[12Cprintf([38;5;130m"Error: Invalid command[m[35m\n[m[38;5;130m"[m);[32C[100m [m[59;99H[K[59;99H72,18[9C15%[13;22H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m118 [m[8C}[70C[100m [m
[33m119 [m[79C[100m [m
[33m120 [m[8Cprintf([38;5;130m"> "[m);[58C[100m [m[59;99H[K[59;99H72,18[9C16%[10;22H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m121 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m122 [m[79C[100m [m
[33m123 [m[8Cfree(input);[59C[100m [m[59;99H[K[59;99H72,18[9C17%[7;22H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m124 [m[8Cfree(tokens);[58C[100m [m
[33m125 [m    }[74C[100m [m
[33m126 [m[79C[100m [m[59;99H[K[59;99H72,18[9C18%[4;22H[?25h[?25l[33m 72 [m    [32mchar[m** tokens;                                                             [100m [m[4;85H[K[13;1H[93m 81 [m[4m    [m[4m[33mwhile[m[4m ([m[4m[46m([m[4minput = read_line([m[4m[38;5;130mstdin[m[4m)[m[4m[46m)[m[4m != [m[4m[38;5;130mNULL[m[4m) {                               [m[4m[100m [m[4m                                [m[59;99H81,37[13;41H[?25h[?25l[13;5H    [33mwhile[m [46m([m(input = read_line([38;5;130mstdin[m)[7m[48;5;242m) != [m[7m[38;5;130m[48;5;242mNULL[m[46m)[m {                               [100m [m[13;85H[K[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H81,46[9C18%[13;50H[?25h[?25l[13;5H[4m    [m[4m[33mwhile[m[4m [m[4m[46m([m[4m(input = read_line([m[4m[38;5;130mstdin[m[4m)) != [m[4m[38;5;130mNULL[m[4m[46m)[m[4m {                               [m[4m[100m [m[4m                                [m[59;1H[K[59;99H81,46[9C18%[13;50H[?25h[?25l[13;5H    [33mwhile[m ((i[7m[48;5;242mnput = read_line([m[7m[38;5;130m[48;5;242mstdin[m[7m[48;5;242m)) != [m[7m[38;5;130m[48;5;242mNULL[m[7m[48;5;242m)[m {                               [100m [m[13;85H[K[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H81,13[9C18%[13;17H[?25h[?25l[13;5H[4m    [m[4m[33mwhile[m[4m ([m[4m[46m([m[4minput = read_line([m[4m[38;5;130mstdin[m[4m)[m[4m[46m)[m[4m != [m[4m[38;5;130mNULL[m[4m) {                               [m[4m[100m [m[4m                                [m[59;1H[K[59;99H81,12[9C18%[13;16H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m127 [m    free(jobs);[64C[100m [m
[33m128 [m    [33mreturn[m [38;5;130m0[m;[66C[100m [m
[33m129 [m}[78C[100m [m[59;99H[K[59;99H81,12[9C19%[10;16H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m130 [m[79C[100m [m
[33m131 [m[36m/* spawn()[m[69C[100m [m
[33m132 [m[36m * -------[m[69C[100m [m[59;99H[K[59;99H81,12[9C19%[7;16H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m
[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m
[33m135 [m[36m * of the child process is unchanged[m[43C[100m [m[59;99H[K[59;99H81,12[9C20%[4;16H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m136 [m[36m *[m[77C[100m [m
[33m137 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m138 [m[36m * spcs: number of original tokens[m[45C[100m [m[59;99H[K[59;99H81,12[9C21%[1;16H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 84 [m[4m        [m[4m[33mif[m[4m [m[4m[46m([m[4m!strcmp(input, [m[4m[38;5;130m""[m[4m)[m[4m[46m)[m[4m {                                              [m[4m[100m [m[4m                                [m[56;1H[33m139 [m[36m */[m[76C[100m [m
[33m140 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs) {[44C[100m [m
[33m141 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m[59;99H[K[59;99H84,12[9C22%[1;16H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 87 [m[4m            [m[4m[33mcontinue[m[4m;                                                          [m[4m[100m [m[4m                                [m[56;1H[33m142 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m143 [m    } [33melse[m {[67C[100m [m
[33m144 [m[8C[38;5;248m[104mjobid[m++;[63C[100m [m[59;99H[K[59;99H87,12[9C23%[1;16H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 90 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m145 [m[79C[100m [m
[33m146 [m[8Cjobs = realloc(jobs, ([38;5;248m[104mjobid[m + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));[16C[100m [m
[33m147 [m[79C[100m [m[59;99H[K[59;99H90,0-1[8C23%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 93 [m[4m            args[i - [m[4m[38;5;130m1[m[4m] = tokens[i];                                           [m[4m[100m [m[4m                                [m[56;1H[33m148 [m[8Cstrcpy(jobs[[38;5;248m[104mjobid[m].name, args[[38;5;130m0[m]);[37C[100m [m
[33m149 [m[79C[100m [m
[33m150 [m[8C[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].down) < [38;5;130m0[m) {[38C[100m [m[59;99H[K[59;99H93,12[9C24%[1;16H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 96 [m[4m        fflush([m[4m[38;5;130mstdout[m[4m);                                                        [m[4m[100m [m[4m                                [m[56;1H[33m151 [m[12Cperror([38;5;130m"Creating down pipe"[m);[38C[100m [m
[33m152 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m153 [m[8C}[70C[100m [m[59;99H[K[59;99H96,12[9C25%[1;16H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 99 [m[4m            [m[4m[36m// spawn[m[4m                                                           [m[4m[100m [m[4m                                [m[56;1H[33m154 [m[79C[100m [m
[33m155 [m[8C[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].up) < [38;5;130m0[m) {[40C[100m [m
[33m156 [m[12Cperror([38;5;130m"Creating up pipe"[m);[40C[100m [m[59;99H[K[59;99H99,12[9C26%[1;16H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m102 [m[4m            [m[4m[36m// Report[m[4m                                                          [m[4m[100m [m[4m                                [m[56;1H[33m157 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m158 [m[8C}[70C[100m [m
[33m159 [m[79C[100m [m[59;99H[K[59;99H102,12[8C27%[1;16H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m105 [m[4m            call_signal(args, spcs);                                           [m[4m[100m [m[4m                                [m[56;1H[33m160 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, [38;5;248m[104mjobid[m);[28C[100m [m
[33m161 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m162 [m[79C[100m [m[59;99H[K[59;99H105,12[8C28%[1;16H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m108 [m[4m        } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (!strcmp(tokens[[m[4m[38;5;130m0[m[4m], [m[4m[38;5;130m"send"[m[4m)) {                               [m[4m[100m [m[4m                                [m[56;1H[33m163 [m[8Cjobs[[38;5;248m[104mjobid[m].pid = fork();[46C[100m [m
[33m164 [m[8C[33mif[m (!jobs[[38;5;248m[104mjobid[m].pid) {[48C[100m [m
[33m165 [m[12C[36m// child[m[59C[100m [m[59;99H[K[59;99H108,12[8C28%[1;16H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m111 [m[4m            rcv(args, spcs);                                                   [m[4m[100m [m[4m                                [m[56;1H[33m166 [m[79C[100m [m
[33m167 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[WRITE]);[36C[100m [m
[33m168 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[READ]);[39C[100m [m[59;99H[K[59;99H111,12[8C29%[1;16H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m114 [m[4m        } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (!strcmp(tokens[[m[4m[38;5;130m0[m[4m], [m[4m[38;5;130m"cleanup"[m[4m)) {                            [m[4m[100m [m[4m                                [m[56;1H[33m169 [m[79C[100m [m
[33m170 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].down[READ], STDIN_FILENO);[24C[100m [m
[33m171 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m[59;99H[K[59;99H114,12[8C30%[1;16H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m117 [m[4m            printf([m[4m[38;5;130m"Error: Invalid command[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                [m[4m[100m [m[4m                                [m[56;1H[33m172 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].up[WRITE], STDOUT_FILENO);[24C[100m [m
[33m173 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m
[33m174 [m[79C[100m [m[59;99H[K[59;99H117,12[8C31%[1;16H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m120 [m[4m        printf([m[4m[38;5;130m"> "[m[4m);                                                          [m[4m[100m [m[4m                                [m[56;1H[33m175 [m[12C[32mint[m status;[56C[100m [m
[33m176 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m
[33m177 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m[59;99H[K[59;99H120,12[8C32%[1;16H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m123 [m[4m        free(input);                                                           [m[4m[100m [m[4m                                [m[56;1H[33m178 [m[16Cexit([38;5;130m99[m);[54C[100m [m
[33m179 [m[12C}[66C[100m [m
[33m180 [m[8C} [33melse[m {[63C[100m [m[59;99H[K[59;99H123,12[8C32%[1;16H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m126 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m181 [m[12C[36m// parent[m[58C[100m [m
[33m182 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m183 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m[59;99H[K[59;99H126,4[9C33%[1;8H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m129 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[56;1H[33m184 [m[8C}[70C[100m [m
[33m185 [m    }[74C[100m [m
[33m186 [m}[78C[100m [m[59;99H[K[59;99H129,1[9C34%[1;5H[?25h[?25l[33m129 [m}                                                                              [100m [m[1;85H[K[48;1H[93m176 [m[4m            status = execvp(args[[m[4m[38;5;130m0[m[4m], args);                                    [m[4m[100m [m[4m                                [m[59;100H76,22[48;26H[?25h[?25l[48;5H            status = [7m[48;5;242mexecvp(args[[m[7m[38;5;130m[48;5;242m0[m[7m[48;5;242m], args);[m                                    [100m [m[48;85H[K[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H176,44[8C34%[48;48H[?25h[?25l[48;5H[4m            status = execvp(args[[m[4m[38;5;130m0[m[4m], args);                                    [m[4m[100m [m[4m                                [m[59;1H[K[59;99H176,43[8C34%[48;47H[?25h[?25l[59;99H[K[59;1H:[?2004h[?25hq[?25l[?25h[?25l[?1000l[?2004l[59;1H[K[59;1H[?2004l[?1l>[?25h[?1049l[23;0;0ts4698512@moss:~/CSSE2310/Assignments/a3$ ./q=[K[Khq
> ca  spaw  n cat
New Job ID [0] created
> report
[Job] cmd:status
> spawn ls
New Job ID [1] created
> s spawn cat
s ^Csp  s4698512@moss:~/CSSE2310/Assignments/a3$ ./hqvim hq.c
[?1000h[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;59r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[59;1H"hq.c" 429L, 10604C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[33m148 [m[8Cstrcpy(jobs[[38;5;248m[104mjobid[m].name, args[[38;5;130m0[m]);[37C[100m [m
[33m149 [m[79C[100m [m
[33m150 [m[8C[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].down) < [38;5;130m0[m) {[38C[100m [m
[33m151 [m[12Cperror([38;5;130m"Creating down pipe"[m);[38C[100m [m
[33m152 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m153 [m[8C}[70C[100m [m
[33m154 [m[79C[100m [m
[33m155 [m[8C[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].up) < [38;5;130m0[m) {[40C[100m [m
[33m156 [m[12Cperror([38;5;130m"Creating up pipe"[m);[40C[100m [m
[33m157 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m158 [m[8C}[70C[100m [m
[33m159 [m[79C[100m [m
[33m160 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, [38;5;248m[104mjobid[m);[28C[100m [m
[33m161 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m162 [m[79C[100m [m
[33m163 [m[8Cjobs[[38;5;248m[104mjobid[m].pid = fork();[46C[100m [m
[33m164 [m[8C[33mif[m (!jobs[[38;5;248m[104mjobid[m].pid) {[48C[100m [m
[33m165 [m[12C[36m// child[m[59C[100m [m
[33m166 [m[79C[100m [m
[33m167 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[WRITE]);[36C[100m [m
[33m168 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[READ]);[39C[100m [m
[33m169 [m[79C[100m [m
[33m170 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].down[READ], STDIN_FILENO);[24C[100m [m
[33m171 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m172 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].up[WRITE], STDOUT_FILENO);[24C[100m [m
[33m173 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m
[33m174 [m[79C[100m [m
[33m175 [m[12C[32mint[m status;[56C[100m [m
[93m176 [m[4m            status = execvp(args[[m[4m[38;5;130m0[m[4m], args);                                    [m[4m[100m [m[4m                                [m[30;1H[33m177 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m
[33m178 [m[16Cexit([38;5;130m99[m);[54C[100m [m
[33m179 [m[12C}[66C[100m [m
[33m180 [m[8C} [33melse[m {[63C[100m [m
[33m181 [m[12C[36m// parent[m[58C[100m [m
[33m182 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m183 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m
[33m184 [m[8C}[70C[100m [m
[33m185 [m    }[74C[100m [m
[33m186 [m}[78C[100m [m
[33m187 [m[79C[100m [m
[33m188 [m[36m/* report()[m[68C[100m [m
[33m189 [m[36m * --------[m[68C[100m [m
[33m190 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m
[33m191 [m[36m *[m[77C[100m [m
[33m192 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m193 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m194 [m[36m */[m[76C[100m [m
[33m195 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[43C[100m [m
[33m196 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m197 [m[79C[100m [m
[33m198 [m    [36m// Header row[m[62C[100m [m
[33m199 [m    printf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[46C[100m [m
[33m200 [m[79C[100m [m
[33m201 [m    [36m// Job status output dependent on arg present status[m[23C[100m [m
[33m202 [m[79C[100m [m
[33m203 [m    [36m// check args[m[62C[100m [m
[33m204 [m    [33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[37C[100m [m
[33m205 [m[8C[33mfor[m ([32mint[m i = [38;5;130m0[m; i < [38;5;248m[104mjobid[m; i++) {[38C[100m [m[59;99H176,13[8C39%[29;17H[?25h[?12$p[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m145 [m[79C[100m [m
[33m146 [m[8Cjobs = realloc(jobs, ([38;5;248m[104mjobid[m + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));[16C[100m [m
[33m147 [m[79C[100m [m[59;1H[K[59;99H176,13[8C38%[32;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m142 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m143 [m    } [33melse[m {[67C[100m [m
[33m144 [m[8C[38;5;248m[104mjobid[m++;[63C[100m [m[59;99H[K[59;99H176,13[8C38%[35;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m139 [m[36m */[m[76C[100m [m
[33m140 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs) {[44C[100m [m
[33m141 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m[59;99H[K[59;99H176,13[8C37%[38;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m136 [m[36m *[m[77C[100m [m
[33m137 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m138 [m[36m * spcs: number of original tokens[m[45C[100m [m[59;99H[K[59;99H176,13[8C36%[41;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m
[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m
[33m135 [m[36m * of the child process is unchanged[m[43C[100m [m[59;99H[K[59;99H176,13[8C35%[44;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m130 [m[79C[100m [m
[33m131 [m[36m/* spawn()[m[69C[100m [m
[33m132 [m[36m * -------[m[69C[100m [m[59;99H[K[59;99H176,13[8C34%[47;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m127 [m    free(jobs);[64C[100m [m
[33m128 [m    [33mreturn[m [38;5;130m0[m;[66C[100m [m
[33m129 [m}[78C[100m [m[59;99H[K[59;99H176,13[8C33%[50;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m124 [m[8Cfree(tokens);[58C[100m [m
[33m125 [m    }[74C[100m [m
[33m126 [m[79C[100m [m[59;99H[K[59;99H176,13[8C33%[53;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m121 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m122 [m[79C[100m [m
[33m123 [m[8Cfree(input);[59C[100m [m[59;99H[K[59;99H176,13[8C32%[56;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m118 [m[8C}[70C[100m [m
[33m119 [m[79C[100m [m
[33m120 [m[8Cprintf([38;5;130m"> "[m);[58C[100m [m[58;1H[93m175 [m[4m            [m[4m[32mint[m[4m status;                                                        [m[4m[100m [m[4m                                [m[59;99H[K[59;99H175,13[8C31%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m115 [m[12Ccleanup();[57C[100m [m
[33m116 [m[8C} [33melse[m {[63C[100m [m
[33m117 [m[12Cprintf([38;5;130m"Error: Invalid command[m[35m\n[m[38;5;130m"[m);[32C[100m [m[58;1H[93m172 [m[4m            dup2(jobs[[m[4m[38;5;248m[104mjobid[m[4m].up[WRITE], STDOUT_FILENO);                        [m[4m[100m [m[4m                                [m[59;99H[K[59;99H172,13[8C30%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m112 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"eof"[m)) {[32C[100m [m
[33m113 [m[12Ceof(args, spcs);[51C[100m [m
[33m114 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"cleanup"[m)) {[28C[100m [m[58;1H[93m169 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H169,12[8C29%[58;16H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m109 [m[12Csend(args, spcs);[50C[100m [m
[33m110 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"rcv"[m)) {[32C[100m [m
[33m111 [m[12Crcv(args, spcs);[51C[100m [m[58;1H[93m166 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H166,0-1[7C29%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m106 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"sleep"[m)) {[30C[100m [m
[33m107 [m[12Chq_wait(args, spcs);[47C[100m [m
[33m108 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"send"[m)) {[31C[100m [m[58;1H[93m163 [m[4m        jobs[m[4m[46m[[m[4m[38;5;248m[104mjobid[m[4m[46m][m[4m.pid = fork();                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H163,13[8C28%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m103 [m[12Creport(args, spcs);[48C[100m [m
[33m104 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"signal"[m)) {[29C[100m [m
[33m105 [m[12Ccall_signal(args, spcs);[43C[100m [m[58;1H[93m160 [m[4m        printf([m[4m[38;5;130m"New Job ID [[m[4m[35m%d[m[4m[38;5;130m] created[m[4m[35m\n[m[4m[38;5;130m"[m[4m, [m[4m[38;5;248m[104mjobid[m[4m);                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H160,13[8C27%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m100 [m[12Cspawn(args, spcs);[49C[100m [m
[33m101 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"report"[m)) {[29C[100m [m
[33m102 [m[12C[36m// Report[m[58C[100m [m[58;1H[93m157 [m[4m            exit([m[4m[38;5;130m1[m[4m);                                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H157,13[8C26%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 97 [m[79C[100m [m
[33m 98 [m[8C[33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"spawn"[m)) {[37C[100m [m
[33m 99 [m[12C[36m// spawn[m[59C[100m [m[58;1H[93m154 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H154,0-1[7C25%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 94 [m[8C}[70C[100m [m
[33m 95 [m[8Cargs[spcs - [38;5;130m1[m] = [38;5;130m0[m;[52C[100m [m
[33m 96 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m[58;1H[93m151 [m[4m            perror([m[4m[38;5;130m"Creating down pipe"[m[4m);                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H151,13[8C25%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 91 [m[8C[32mchar[m* args[spcs];[54C[100m [m
[33m 92 [m[8C[33mfor[m ([32mint[m i = [38;5;130m1[m; i < spcs; i++) {[39C[100m [m
[33m 93 [m[12Cargs[i - [38;5;130m1[m] = tokens[i];[43C[100m [m[58;1H[93m148 [m[4m        strcpy(jobs[[m[4m[38;5;248m[104mjobid[m[4m].name, args[[m[4m[38;5;130m0[m[4m]);                                     [m[4m[100m [m[4m                                [m[59;99H[K[59;99H148,13[8C24%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 88 [m[8C}[70C[100m [m
[33m 89 [m[8Ctokens = split_space_not_quote(input, &spcs);[26C[100m [m
[33m 90 [m[79C[100m [m[58;1H[93m145 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H145,0-1[7C23%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 85 [m[12Cprintf([38;5;130m"> "[m);[54C[100m [m
[33m 86 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m 87 [m[12C[33mcontinue[m;[58C[100m [m[58;1H[93m142 [m[4m        printf([m[4m[38;5;130m"Error: Insufficient arguments[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H142,13[8C22%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 82 [m[8C[32mint[m spcs = [38;5;130m0[m;[58C[100m [m
[33m 83 [m[79C[100m [m
[33m 84 [m[8C[33mif[m (!strcmp(input, [38;5;130m""[m)) {[46C[100m [m[58;1H[93m139 [m[4m[36m */[m[4m                                                                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H139,3[9C21%[58;7H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 79 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m 80 [m    [36m// prompt loop[m[61C[100m [m
[33m 81 [m    [33mwhile[m ((input = read_line([38;5;130mstdin[m)) != [38;5;130mNULL[m) {[31C[100m [m[58;1H[93m136 [m[4m[36m *[m[4m                                                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H136,2[9C21%[58;6H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 76 [m    signal([38;5;130mSIGINT[m, handle_signal);[45C[100m [m
[33m 77 [m    signal([38;5;130mSIGCHLD[m, handle_signal);[44C[100m [m
[33m 78 [m    printf([38;5;130m"> "[m);[62C[100m [m[58;1H[93m133 [m[4m[36m * Runs specified program in a new process with optional arguments provided.[m[4m   [m[4m[100m [m[4m                                [m[59;99H[K[59;99H133,13[8C20%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 73 [m[79C[100m [m
[33m 74 [m    jobs = malloc([38;5;130m0[m * [33msizeof[m([32mstruct[m Job));[37C[100m [m
[33m 75 [m[79C[100m [m[58;1H[93m130 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H130,0-1[7C19%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 70 [m[32mint[m main([32mint[m argc, [32mchar[m* argv[]) {[45C[100m [m
[33m 71 [m    [32mchar[m* input;[63C[100m [m
[33m 72 [m    [32mchar[m** tokens;[61C[100m [m[58;1H[93m127 [m[4m    free(jobs);                                                                [m[4m[100m [m[4m                                [m[59;99H[K[59;99H127,13[8C18%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 67 [m[79C[100m [m
[33m 68 [m[36m// Program[m[69C[100m [m
[33m 69 [m[79C[100m [m[58;1H[93m124 [m[4m        free[m[4m[46m([m[4mtokens[m[4m[46m)[m[4m;                                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H124,13[8C17%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 64 [m[32mint[m [38;5;248m[104mjobid[m = -[38;5;130m1[m;[64C[100m [m
[33m 65 [m[32mstruct[m Job* jobs;[62C[100m [m
[33m 66 [m[79C[100m [m[58;1H[93m121 [m[4m        fflush([m[4m[38;5;130mstdout[m[4m);                                                        [m[4m[100m [m[4m                                [m[59;99H[K[59;99H121,13[8C16%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 61 [m[79C[100m [m
[33m 62 [m[36m// Globals[m[69C[100m [m
[33m 63 [m[79C[100m [m[56;20H[46m{[m

[93m118 [m[4m        [m[4m[46m}[m[4m                                                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H118,9[9C16%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 58 [m    [32mint[m status;[64C[100m [m
[33m 59 [m    [32mint[m finished;[62C[100m [m
[33m 60 [m};[77C[100m [m[58;1H[93m115 [m[4m            cleanup();                                                         [m[4m[100m [m[4m                                [m[59;99H[K[59;99H115,13[8C15%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 55 [m    [32mchar[m name[MAX_BUFFER_SIZE];[48C[100m [m
[33m 56 [m    [32mint[m down[[38;5;130m2[m];[63C[100m [m
[33m 57 [m    [32mint[m up[[38;5;130m2[m];[65C[100m [m[58;1H[93m112 [m[4m        } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (!strcmp(tokens[[m[4m[38;5;130m0[m[4m], [m[4m[38;5;130m"eof"[m[4m)) {                                [m[4m[100m [m[4m                                [m[59;99H[K[59;99H112,13[8C14%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 52 [m[79C[100m [m
[33m 53 [m[32mstruct[m Job {[67C[100m [m
[33m 54 [m    [32mint[m pid;[67C[100m [m[58;1H[93m109 [m[4m            send(args, spcs);                                                  [m[4m[100m [m[4m                                [m[59;99H[K[59;99H109,13[8C13%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 49 [m[32mbool[m is_job([32mchar[m job[]);[55C[100m [m
[33m 50 [m[79C[100m [m
[33m 51 [m[36m// Structs[m[69C[100m [m[58;1H[93m106 [m[4m        } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (!strcmp(tokens[[m[4m[38;5;130m0[m[4m], [m[4m[38;5;130m"sleep"[m[4m)) {                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H106,13[8C12%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 46 [m[79C[100m [m
[33m 47 [m[32mbool[m is_number([32mchar[m number[]);[49C[100m [m
[33m 48 [m[79C[100m [m[58;1H[93m103 [m[4m            report(args, spcs);                                                [m[4m[100m [m[4m                                [m[59;99H[K[59;99H103,13[8C12%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 43 [m[32mvoid[m cleanup([32mvoid[m);[60C[100m [m
[33m 44 [m[79C[100m [m
[33m 45 [m[32mvoid[m handle_signal([32mint[m s);[53C[100m [m[58;1H[93m100 [m[4m            spawn(args, spcs);                                                 [m[4m[100m [m[4m                                [m[59;99H[K[59;99H100,13[8C11%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 40 [m[79C[100m [m
[33m 41 [m[32mvoid[m eof([32mchar[m** args, [32mint[m spcs);[47C[100m [m
[33m 42 [m[79C[100m [m[58;1H[93m 97 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H97,0-1[8C10%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 37 [m[32mvoid[m send([32mchar[m** args, [32mint[m spcs);[46C[100m [m
[33m 38 [m[79C[100m [m
[33m 39 [m[32mvoid[m rcv([32mchar[m** args, [32mint[m spcs);[47C[100m [m[56;44H[46m{[m

[93m 94 [m[4m        [m[4m[46m}[m[4m                                                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H94,9[11C9%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 34 [m[79C[100m [m
[33m 35 [m[32mvoid[m hq_wait([32mchar[m** args, [32mint[m spcs);[43C[100m [m
[33m 36 [m[79C[100m [m[58;1H[93m 91 [m[4m        [m[4m[32mchar[m[4m* args[spcs];                                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H91,13[10C8%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 31 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs);[44C[100m [m
[33m 32 [m[79C[100m [m
[33m 33 [m[32mvoid[m call_signal([32mchar[m** args, [32mint[m spcs);[39C[100m [m[54;37H[46m{[m[58;1H[93m 88 [m[4m        [m[4m[46m}[m[4m                                                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H88,9[11C8%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 28 [m[79C[100m [m
[33m 29 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs);[45C[100m [m
[33m 30 [m[79C[100m [m[57;37H{
[93m 85 [m[4m            printf([m[4m[38;5;130m"> "[m[4m);                                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H85,13[10C7%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 25 [m[35m#endif[m      [36m// hq_h[m[60C[100m [m
[33m 26 [m[79C[100m [m
[33m 27 [m[36m// Function declarations[m[55C[100m [m[58;1H[93m 82 [m[4m        [m[4m[32mint[m[4m spcs = [m[4m[38;5;130m0[m[4m;                                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H82,13[10C6%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 22 [m[35m#define READ [m[38;5;130m0[m[65C[100m [m
[33m 23 [m[35m#define WRITE [m[38;5;130m1[m[64C[100m [m
[33m 24 [m[79C[100m [m[58;1H[93m 79 [m[4m    fflush([m[4m[38;5;130mstdout[m[4m);                                                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H79,13[10C5%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 19 [m[36m// Defintions[m[66C[100m [m
[33m 20 [m[79C[100m [m
[33m 21 [m[35m#define MAX_BUFFER_SIZE [m[38;5;130m52[m[53C[100m [m[58;1H[93m 76 [m[4m    signal([m[4m[38;5;130mSIGINT[m[4m, handle_signal);                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H76,13[10C4%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 16 [m[35m#include [m[38;5;130m<ctype.h>[m[61C[100m [m
[33m 17 [m[35m#include [m[38;5;130m<stdbool.h>[m[59C[100m [m
[33m 18 [m[79C[100m [m[58;1H[93m 73 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H73,4[11C4%[58;8H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 13 [m[35m#include [m[38;5;130m<unistd.h>[m[60C[100m [m
[33m 14 [m[35m#include [m[38;5;130m<sys/wait.h>[m[58C[100m [m
[33m 15 [m[35m#include [m[38;5;130m<signal.h>[m[60C[100m [m[58;1H[93m 70 [m[4m[32mint[m[4m main([m[4m[32mint[m[4m argc, [m[4m[32mchar[m[4m* argv[]) {                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H70,13[10C3%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 10 [m[35m#include [m[38;5;130m<string.h>[m[60C[100m [m
[33m 11 [m[35m#include [m[38;5;130m<csse2310a3.h>[m     [36m// given library[m[35C[100m [m
[33m 12 [m[35m#include [m[38;5;130m<fcntl.h>[m[61C[100m [m[58;1H[93m 67 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H67,0-1[9C2%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m  7 [m[35m#ifndef hq_h[m[67C[100m [m
[33m  8 [m[35m#include [m[38;5;130m<stdlib.h>[m[60C[100m [m
[33m  9 [m[35m#include [m[38;5;130m<stdio.h>[m[61C[100m [m[58;1H[93m 64 [m[4m[32mint[m[4m [m[4m[38;5;248m[104mjobid[m[4m = -[m[4m[38;5;130m1[m[4m;                                                                [m[4m[100m [m[4m                                [m[59;99H[K[59;99H64,13[10C1%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m  4 [m[36m// Due Date: 4pm Friday 13th May, 2022[m[41C[100m [m
[33m  5 [m[36m// Student Number: s4698512 (46985123)[m[41C[100m [m
[33m  6 [m[79C[100m [m[58;1H[93m 61 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H61,0-1[9C0%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m  1 [m[36m// CSSE2310 Assignment 3 a3[m[52C[100m [m
[33m  2 [m[36m// By Hugo Burton[m[62C[100m [m
[33m  3 [m[36m// Start Date: 4pm Friday 15th April, 2022[m[37C[100m [m[58;1H[93m 58 [m[4m    [m[4m[32mint[m[4m status;                                                                [m[4m[100m [m[4m                                [m[59;99H[K[59;99H58,13[9CTop[58;17H[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 59 [m    [32mint[m finished;[62C[100m [m
[33m 60 [m};[77C[100m [m
[33m 61 [m[79C[100m [m[59;99H[K[59;99H58,13[10C0%[55;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 62 [m[36m// Globals[m[69C[100m [m
[33m 63 [m[79C[100m [m
[33m 64 [m[32mint[m [38;5;248m[104mjobid[m = -[38;5;130m1[m;[64C[100m [m[59;99H[K[59;99H58,13[10C1%[52;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 65 [m[32mstruct[m Job* jobs;[62C[100m [m
[33m 66 [m[79C[100m [m
[33m 67 [m[79C[100m [m[59;99H[K[59;99H58,13[10C2%[49;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 68 [m[36m// Program[m[69C[100m [m
[33m 69 [m[79C[100m [m
[33m 70 [m[32mint[m main([32mint[m argc, [32mchar[m* argv[]) {[45C[100m [m[59;99H[K[59;99H58,13[10C3%[46;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 71 [m    [32mchar[m* input;[63C[100m [m
[33m 72 [m    [32mchar[m** tokens;[61C[100m [m
[33m 73 [m[79C[100m [m[59;99H[K[59;99H58,13[10C4%[43;17H[?25h[?25l[38;1H[93m 53 [m[4m[32mstruct[m[4m Job {                                                                   [m[4m[100m [m[4m                                [m[43;1H[33m 58 [m    [32mint[m status;                                                                [100m [m[43;85H[K[59;100H3,2 [38;6H[?25h[?25l[33m 53 [m[32ms[m[7m[32m[48;5;242mtruct[m[7m[48;5;242m Job { [m                                                                  [100m [m[38;85H[K[39;5H[7m[48;5;242m    [m[7m[32m[48;5;242mint[m[7m[48;5;242m pid; [40;5H    [m[7m[32m[48;5;242mchar[m[7m[48;5;242m name[MAX_BUFFER_SIZE]; [41;5H    [m[7m[32m[48;5;242mint[m[7m[48;5;242m down[[m[7m[38;5;130m[48;5;242m2[m[7m[48;5;242m]; [42;5H    [m[7m[32m[48;5;242mint[m[7m[48;5;242m up[[m[7m[38;5;130m[48;5;242m2[m[7m[48;5;242m]; [m
[93m 58 [m[7m[48;5;242m    [m[7m[32m[48;5;242mint[m[7m[48;5;242m st[m[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H58,11[10C4%[43;15H[?25h[?25l[38;6H[32mtruct[m Job { [39;5H    [32mint[m pid; [40;5H    [32mchar[m name[MAX_BUFFER_SIZE]; [41;5H    [32mint[m down[[38;5;130m2[m]; [42;5H    [32mint[m up[[38;5;130m2[m]; 
[33m 58 [m    [32mint[m st

[93m 60 [m[4m};                                                                             [m[4m[100m [m[4m                                [m[59;1H[K[59;99H60,2[11C4%[45;6H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 74 [m    jobs = malloc([38;5;130m0[m * [33msizeof[m([32mstruct[m Job));[37C[100m [m
[33m 75 [m[79C[100m [m
[33m 76 [m    signal([38;5;130mSIGINT[m, handle_signal);[45C[100m [m[59;99H[K[59;99H60,2[11C4%[42;6H[?25h[?25l[33m 60 [m};                                                                             [100m [m[42;85H[K[47;1H[93m 65 [m[4m[32mstruct[m[4m Job* jobs;                                                              [m[4m[100m [m[4m                                [m[59;100H5,8[47;12H[?25h[?25l[47;5H[32mstruct[m [7m[48;5;242mJob* jobs;[m                                                              [100m [m[47;85H[K[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H65,18[10C4%[47;22H[?25h[?25l[47;5H[4m[32mstruct[m[4m Job* jobs;                                                              [m[4m[100m [m[4m                                [m[59;1H[K[59;99H65,17[10C4%[47;21H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 77 [m    signal([38;5;130mSIGCHLD[m, handle_signal);[44C[100m [m
[33m 78 [m    printf([38;5;130m"> "[m);[62C[100m [m
[33m 79 [m    fflush([38;5;130mstdout[m);[60C[100m [m[59;99H[K[59;99H65,17[10C5%[44;21H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 80 [m    [36m// prompt loop[m[61C[100m [m
[33m 81 [m    [33mwhile[m ((input = read_line([38;5;130mstdin[m)) != [38;5;130mNULL[m) {[31C[100m [m
[33m 82 [m[8C[32mint[m spcs = [38;5;130m0[m;[58C[100m [m[59;99H[K[59;99H65,17[10C6%[41;21H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 83 [m[79C[100m [m
[33m 84 [m[8C[33mif[m (!strcmp(input, [38;5;130m""[m)) {[46C[100m [m
[33m 85 [m[12Cprintf([38;5;130m"> "[m);[54C[100m [m[59;99H[K[59;99H65,17[10C7%[38;21H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 86 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m 87 [m[12C[33mcontinue[m;[58C[100m [m
[33m 88 [m[8C}[70C[100m [m[59;99H[K[59;99H65,17[10C8%[35;21H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 89 [m[8Ctokens = split_space_not_quote(input, &spcs);[26C[100m [m
[33m 90 [m[79C[100m [m
[33m 91 [m[8C[32mchar[m* args[spcs];[54C[100m [m[59;99H[K[59;99H65,17[10C8%[32;21H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 92 [m[8C[33mfor[m ([32mint[m i = [38;5;130m1[m; i < spcs; i++) {[39C[100m [m
[33m 93 [m[12Cargs[i - [38;5;130m1[m] = tokens[i];[43C[100m [m
[33m 94 [m[8C}[70C[100m [m[59;99H[K[59;99H65,17[10C9%[29;21H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 95 [m[8Cargs[spcs - [38;5;130m1[m] = [38;5;130m0[m;[52C[100m [m
[33m 96 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m 97 [m[79C[100m [m[59;99H[K[59;99H65,17[9C10%[26;21H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 98 [m[8C[33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"spawn"[m)) {[37C[100m [m
[33m 99 [m[12C[36m// spawn[m[59C[100m [m
[33m100 [m[12Cspawn(args, spcs);[49C[100m [m[59;99H[K[59;99H65,17[9C11%[23;21H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m101 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"report"[m)) {[29C[100m [m
[33m102 [m[12C[36m// Report[m[58C[100m [m
[33m103 [m[12Creport(args, spcs);[48C[100m [m[59;99H[K[59;99H65,17[9C12%[20;21H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m104 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"signal"[m)) {[29C[100m [m
[33m105 [m[12Ccall_signal(args, spcs);[43C[100m [m
[33m106 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"sleep"[m)) {[30C[100m [m[59;99H[K[59;99H65,17[9C12%[17;21H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m107 [m[12Chq_wait(args, spcs);[47C[100m [m
[33m108 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"send"[m)) {[31C[100m [m
[33m109 [m[12Csend(args, spcs);[50C[100m [m[59;99H[K[59;99H65,17[9C13%[14;21H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m110 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"rcv"[m)) {[32C[100m [m
[33m111 [m[12Crcv(args, spcs);[51C[100m [m
[33m112 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"eof"[m)) {[32C[100m [m[59;99H[K[59;99H65,17[9C14%[11;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 52 [m[79C[100m [m
[33m 53 [m[32mstruct[m Job {[67C[100m [m
[33m 54 [m    [32mint[m pid;[67C[100m [m[59;99H[K[59;99H65,17[9C13%[14;21H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m110 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"rcv"[m)) {[32C[100m [m
[33m111 [m[12Crcv(args, spcs);[51C[100m [m
[33m112 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"eof"[m)) {[32C[100m [m[59;99H[K[59;99H65,17[9C14%[11;21H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m113 [m[12Ceof(args, spcs);[51C[100m [m
[33m114 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"cleanup"[m)) {[28C[100m [m
[33m115 [m[12Ccleanup();[57C[100m [m[59;99H[K[59;99H65,17[9C15%[8;21H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m116 [m[8C} [33melse[m {[63C[100m [m
[33m117 [m[12Cprintf([38;5;130m"Error: Invalid command[m[35m\n[m[38;5;130m"[m);[32C[100m [m
[33m118 [m[8C}[70C[100m [m[59;99H[K[59;99H65,17[9C16%[5;21H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m119 [m[79C[100m [m
[33m120 [m[8Cprintf([38;5;130m"> "[m);[58C[100m [m
[33m121 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m[59;99H[K[59;99H65,17[9C16%[2;21H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 67 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m122 [m[79C[100m [m
[33m123 [m[8Cfree(input);[59C[100m [m
[33m124 [m[8Cfree(tokens);[58C[100m [m[59;99H[K[59;99H67,0-1[8C17%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 70 [m[4m[32mint[m[4m main([m[4m[32mint[m[4m argc, [m[4m[32mchar[m[4m* argv[]) {                                             [m[4m[100m [m[4m                                [m[56;1H[33m125 [m    }[74C[100m [m
[33m126 [m[79C[100m [m
[33m127 [m    free(jobs);[64C[100m [m[59;99H[K[59;99H70,21[9C18%[1;25H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 73 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m128 [m    [33mreturn[m [38;5;130m0[m;[66C[100m [m
[33m129 [m}[78C[100m [m
[33m130 [m[79C[100m [m[59;99H[K[59;99H73,4[10C19%[1;8H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 76 [m[4m    signal([m[4m[38;5;130mSIGINT[m[4m, handle_signal);                                             [m[4m[100m [m[4m                                [m[56;1H[33m131 [m[36m/* spawn()[m[69C[100m [m
[33m132 [m[36m * -------[m[69C[100m [m
[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m[59;99H[K[59;99H76,21[9C20%[1;25H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 79 [m[4m    fflush([m[4m[38;5;130mstdout[m[4m);                                                            [m[4m[100m [m[4m                                [m[56;1H[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m
[33m135 [m[36m * of the child process is unchanged[m[43C[100m [m
[33m136 [m[36m *[m[77C[100m [m[59;99H[K[59;99H79,19[9C21%[1;23H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 82 [m[4m        [m[4m[32mint[m[4m spcs = [m[4m[38;5;130m0[m[4m;                                                          [m[4m[100m [m[4m                                [m[56;1H[33m137 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m138 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m139 [m[36m */[m[76C[100m [m[59;99H[K[59;99H82,21[9C21%[1;25H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 85 [m[4m            printf([m[4m[38;5;130m"> "[m[4m);                                                      [m[4m[100m [m[4m                                [m[56;1H[33m140 [m[32mvoid[m spawn([32mchar[m*7C[100m [m[59;99H[K[59;99H79,19[9C21%[1;23H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 82 [m[4m        [m[4m[32mint[m[4m spcs = [m[4m[38;5;130m0[m[4m;                                                          [m[4m[100m [m[4m                                [m[56;1H[33m137 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m138 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m139 [m[36m */[m[76C[100m [m[59;99H[K[59;99H82,21[9C21%[1;25H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 85 [m[4m            printf([m[4m[38;5;130m"> "[m[4m);                                                      [m[4m[100m [m[4m                                [m[56;1H[33m140 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs) {[44C[100m [m
[33m141 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m142 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m[59;99H[K[59;99H85,21[9C22%[1;25H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 88 [m[4m        }                                                                      [m[4m[100m [m[4m                                [m[56;1H[33m143 [m    } [33melse[m {[67C[100m [m
[33m144 [m[8C[38;5;248m[104mjobid[m++;[63C[100m [m
[33m145 [m[79C[100m [m[59;99H[K[59;99H88,9[10C23%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 91 [m[4m        [m[4m[32mchar[m[4m* args[spcs];                                                      [m[4m[100m [m[4m                                [m[56;1H[33m146 [m[8Cjobs = realloc(jobs, ([38;5;248m[104mjobid[m + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));[16C[100m [m
[33m147 [m[79C[100m [m
[33m148 [m[8Cstrcpy(jobs[[38;5;248m[104mjobid[m].name, args[[38;5;130m0[m]);[37C[100m [m[59;99H[K[59;99H91,21[9C24%[1;25H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 94 [m[4m        }                                                                      [m[4m[100m [m[4m                                [m[56;1H[33m149 [m[79C[100m [m
[33m150 [m[8C[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].down) < [38;5;130m0[m) {[38C[100m [m
[33m151 [m[12Cperror([38;5;130m"Creating down pipe"[m);[38C[100m [m[59;99H[K[59;99H94,9[10C25%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 97 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m152 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m153 [m[8C}[70C[100m [m
[33m154 [m[79C[100m [m[59;99H[K[59;99H97,0-1[8C25%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m100 [m[4m            spawn(args, spcs);                                                 [m[4m[100m [m[4m                                [m[56;1H[33m155 [m[8C[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].up) < [38;5;130m0[m) {[40C[100m [m
[33m156 [m[12Cperror([38;5;130m"Creating up pipe"[m);[40C[100m [m
[33m157 [m[12Cexit([38;5;130m1[m);[59C[100m [m[59;99H[K[59;99H100,21[8C26%[1;25H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m103 [m[4m            report(args, spcs);                                                [m[4m[100m [m[4m                                [m[56;1H[33m158 [m[8C}[70C[100m [m
[33m159 [m[79C[100m [m
[33m160 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, [38;5;248m[104mjobid[m);[28C[100m [m[59;99H[K[59;99H103,21[8C27%[1;25H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m106 [m[4m        } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (!strcmp(tokens[[m[4m[38;5;130m0[m[4m], [m[4m[38;5;130m"sleep"[m[4m)) {                              [m[4m[100m [m[4m                                [m[56;1H[33m161 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m162 [m[79C[100m [m
[33m163 [m[8Cjobs[[38;5;248m[104mjobid[m].pid = fork();[46C[100m [m[59;99H[K[59;99H106,21[8C28%[1;25H[?25h[?25l[33m106 [m        } [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"sleep"[m)) {                              [100m [m[1;85H[K[41;1H[93m146 [m[4m        jobs = realloc(jobs, ([m[4m[38;5;248m[104mjobid[m[4m + [m[4m[38;5;130m1[m[4m) * [m[4m[33msizeof[m[4m([m[4m[32mstruct[m[4m Job));                [m[4m[100m [m[4m                                [m[59;100H46,19[41;23H[?25h[?25l[41;5H        jobs = rea[7m[48;5;242mlloc(jobs, (jobid + [m[7m[38;5;130m[48;5;242m1[m[7m[48;5;242m)[m * [33msizeof[m([32mstruct[m Job));                [100m [m[41;85H[K[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H146,41[8C28%[41;45H[?25h[?25l[41;5H[4m        jobs = realloc(jobs, ([m[4m[38;5;248m[104mjobid[m[4m + [m[4m[38;5;130m1[m[4m) * [m[4m[33msizeof[m[4m([m[4m[32mstruct[m[4m Job));                [m[4m[100m [m[4m                                [m[59;1H[K[59;99H146,41[8C28%[41;45H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m164 [m[8C[33mif[m (!jobs[[38;5;248m[104mjobid[m].pid) {[48C[100m [m
[33m165 [m[12C[36m// child[m[59C[100m [m
[33m166 [m[79C[100m [m[59;99H[K[59;99H146,41[8C29%[38;45H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m167 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[WRITE]);[36C[100m [m
[33m168 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[READ]);[39C[100m [m
[33m169 [m[79C[100m [m[59;99H[K[59;99H146,41[8C29%[35;45H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m170 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].down[READ], STDIN_FILENO);[24C[100m [m
[33m171 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m172 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].up[WRITE], STDOUT_FILENO);[24C[100m [m[59;99H[K[59;99H146,41[8C30%[32;45H[?25h[?25l[59;99H[K[59;1H:[?2004h[?25hq[?25l[?25h[?25l[?1000l[?2004l[59;1H[K[59;1H[?2004l[?1l>[?25h[?1049l[23;0;0ts4698512@moss:~/CSSE2310/Assignments/a3$ ,.[K[K./hq
> spaw    spwan     awn cat ./hq.c
New Job ID [0] created
> rcv 0
// CSSE2310 Assignment 3 a3
> rcv0  0
// By Hugo Burton
> rcv 0
// Start Date: 4pm Friday 15th April, 2022
> rcv 0
// Due Date: 4pm Friday 13th May, 2022
> rcv 0
// Student Number: s4698512 (46985123)
> rcv 0

> rcv 0
#ifndef hq_h
> rcv 0
#include <stdlib.h>
> rcv 0
#include <stdio.h>
> rcv 0
#include <string.h>
> report
[Job] cmd:status
> report 00 
[Job] cmd:status
[0] cat:exited(0)
> spawn cat ./   
New Job ID [1] created
> report
[Job] cmd:status
[0] cat:running
> ^[^Cs4698512@moss:~/CSSE2310/Assignments/a3$ ./hqvim hq.c[4P./hqvim hq.c
[?1000h[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;59r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[59;1H"hq.c" 429L, 10604C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[33m118 [m[8C}[70C[100m [m
[33m119 [m[79C[100m [m
[33m120 [m[8Cprintf([38;5;130m"> "[m);[58C[100m [m
[33m121 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m122 [m[79C[100m [m
[33m123 [m[8Cfree(input);[59C[100m [m
[33m124 [m[8Cfree(tokens);[58C[100m [m
[33m125 [m    }[74C[100m [m
[33m126 [m[79C[100m [m
[33m127 [m    free(jobs);[64C[100m [m
[33m128 [m    [33mreturn[m [38;5;130m0[m;[66C[100m [m
[33m129 [m}[78C[100m [m
[33m130 [m[79C[100m [m
[33m131 [m[36m/* spawn()[m[69C[100m [m
[33m132 [m[36m * -------[m[69C[100m [m
[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m
[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m
[33m135 [m[36m * of the child process is unchanged[m[43C[100m [m
[33m136 [m[36m *[m[77C[100m [m
[33m137 [m[36m * args: arguments provided in command line without first command[m[14
[33m148 [m[8Cstrcpy(jobs[[38;5;248m[104mjobid[m].name, args[[38;5;130m0[m]);[37C[100m [m
[33m149 [m[79C[100m [m
[33m150 [m[8C[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].down) < [38;5;130m0[m) {[38C[100m [m
[33m151 [m[12Cperror([38;5;130m"Creating down pipe"[m);[38C[100m [m
[33m152 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m153 [m[8C}[70C[100m [m
[33m154 [m[79C[100m [m
[33m155 [m[8C[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].up) < [38;5;130m0[m) {[40C[100m [m
[33m156 [m[12Cperror([38;5;130m"Creating up pipe"[m);[40C[100m [m
[33m157 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m158 [m[8C}[70C[100m [m
[33m159 [m[79C[100m [m
[33m160 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, [38;5;248m[104mjobid[m);[28C[100m [m
[33m161 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m162 [m[79C[100m [m
[33m163 [m[8Cjobs[[38;5;248m[104mjobid[m].pid = fork();[46C[100m [m
[33m164 [m[8C[33mif[m (!jobs[[38;5;248m[104mjobid[m].pid) {[48C[100m [m
[33m165 [m[12C[36m// child[m[59C[100m [m
[33m166 [m[79C[100m [m
[33m167 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[WRITE]);[36C[100m [m
[33m168 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[READ]);[39C[100m [m
[33m169 [m[79C[100m [m
[33m170 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].down[READ], STDIN_FILENO);[24C[100m [m
[33m171 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m172 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].up[WRITE], STDOUT_FILENO);[24C[100m [m
[33m173 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m
[33m174 [m[79C[100m [m
[33m175 [m[12C[32mint[m status;[56C[100m [m[59;99H146,9[9C31%[29;13H[?25h[?12$p[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m176 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m
[33m177 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m
[33m178 [m[16Cexit([38;5;130m99[m);[54C[100m [m[59;1H[K[59;99H146,9[9C32%[26;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m179 [m[12C}[66C[100m [m
[33m180 [m[8C} [33melse[m {[63C[100m [m
[33m181 [m[12C[36m// parent[m[58C[100m [m[59;99H[K[59;99H146,9[9C33%[23;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m182 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m183 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m
[33m184 [m[8C}[70C[100m [m[59;99H[K[59;99H146,9[9C33%[20;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m185 [m    }[74C[100m [m
[33m186 [m}[78C[100m [m
[33m187 [m[79C[100m [m[59;99H[K[59;99H146,9[9C34%[17;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m188 [m[36m/* report()[m[68C[100m [m
[33m189 [m[36m * --------[m[68C[100m [m
[33m190 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m[59;99H[K[59;99H146,9[9C35%[14;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m191 [m[36m *[m[77C[100m [m
[33m192 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m193 [m[36m * spcs: number of original tokens[m[45C[100m [m[59;99H[K[59;99H146,9[9C36%[11;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m194 [m[36m */[m[76C[100m [m
[33m195 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[43C[100m [m
[33m196 [m    fflush([38;5;130mstdout[m);[60C[100m [m[59;99H[K[59;99H146,9[9C37%[8;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m197 [m[79C[100m [m
[33m198 [m    [36m// Header row[m[62C[100m [m
[33m199 [m    printf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[46C[100m [m[59;99H[K[59;99H146,9[9C38%[5;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m200 [m[79C[100m [m
[33m201 [m    [36m// Job status output dependent on arg present status[m[23C[100m [m
[33m202 [m[79C[100m [m[59;99H[K[59;99H146,9[9C38%[2;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m148 [m[4m        strcpy(jobs[[m[4m[38;5;248m[104mjobid[m[4m].name, args[[m[4m[38;5;130m0[m[4m]);                                     [m[4m[100m [m[4m                                [m[56;1H[33m203 [m    [36m// check args[m[62C[100m [m
[33m204 [m    [33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[37C[100m [m
[33m205 [m[8C[33mfor[m ([32mint[m i = [38;5;130m0[m; i < [38;5;248m[104mjobid[m; i++) {[38C[100m [m[59;99H[K[59;99H148,9[9C39%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m151 [m[4m            perror([m[4m[38;5;130m"Creating down pipe"[m[4m);                                      [m[4m[100m [m[4m                                [m[56;1H[33m206 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[31C[100m [m
[33m207 [m[12C[33mif[m (!jobs[i].finished) {[43C[100m [m
[33m208 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m[59;99H[K[59;99H151,9[9C40%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m154 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m209 [m[12C} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[28C[100m [m
[33m210 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[12C[100m [m
[33m211 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {[26C[100m [m[59;99H[K[59;99H154,0-1[7C41%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m157 [m[4m            exit([m[4m[38;5;130m1[m[4m);                                                           [m[4m[100m [m[4m                                [m[56;1H[33m212 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[11C[100m [m
[33m213 [m[12C} [33melse[m {[59C[100m [m
[33m214 [m[16Cprintf([38;5;130m"Error[m[35m\n[m[38;5;130m"[m);[45C[100m [m[59;99H[K[59;99H157,9[9C42%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m160 [m[4m        printf([m[4m[38;5;130m"New Job ID [[m[4m[35m%d[m[4m[38;5;130m] created[m[4m[35m\n[m[4m[38;5;130m"[m[4m, [m[4m[38;5;248m[104mjobid[m[4m);                            [m[4m[100m [m[4m                                [m[56;1H[33m215 [m[12C}[66C[100m [m
[33m216 [m[8C}[70C[100m [m
[33m217 [m[79C[100m [m[59;99H[K[59;99H160,9[9C42%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m163 [m[4m        jobs[[m[4m[38;5;248m[104mjobid[m[4m].pid = fork();                                              [m[4m[100m [m[4m                                [m[56;1H[33m218 [m    } [33melse[m [33mif[m (spcs > [38;5;130m1[m) {      [36m// report on specific job[m[22C[100m [m
[33m219 [m[8C[36m// check for job tokens[1][m[45C[100m [m
[33m220 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m[59;99H[K[59;99H163,9[9C43%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m166 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m221 [m[12C[32mint[m jobq = atoi(args[[38;5;130m0[m]);[42C[100m [m
[33m222 [m[79C[100m [m
[33m223 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, jobq, jobs[jobq].name);[25C[100m [m[59;99H[K[59;99H166,0-1[7C44%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m169 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m224 [m[79C[100m [m
[33m225 [m[12C[33mif[m (WIFEXITED(jobs[jobq].status)) {[32C[100m [m
[33m226 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WEXITSTATUS(jobs[jobq].status));[8C[100m [m[59;99H[K[59;99H169,9[9C45%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m172 [m[4m            dup2(jobs[[m[4m[38;5;248m[104mjobid[m[4m].up[WRITE], STDOUT_FILENO);                        [m[4m[100m [m[4m                                [m[56;1H[33m227 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[jobq].status)) {[23C[100m [m
[33m228 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[jobq].status));[8C[100m [m
[33m229 [m[12C} [33melse[m {[59C[100m [m[59;99H[K[59;99H172,9[9C46%[1;13H[?25h[?25l[33m172 [m            dup2(jobs[[38;5;248m[104mjobid[m].up[WRITE], STDOUT_FILENO);                        [100m [m[1;85H[K[34;1H[93m205 [m[4m        [m[4m[33mfor[m[4m ([m[4m[32mint[m[4m i = [m[4m[38;5;130m0[m[4m; i < [m[4m[38;5;248m[104mjobid[m[4m; i++) {                                      [m[4m[100m [m[4m                                [m[59;99H205,27[34;31H[?25h[?25l[59;104H8[34;32H[?25h[?25l[59;1H[38;5;130m-- INSERT --[m[59;99H[K[59;99H205,28[8C46%[34;32H[?25h[?25l[4m= [m[4m[38;5;248m[104mjobid[m[4m; i++) {[m[59;104H9[34;33H[?25h[59;1H[K[34;32H[?25l[59;99H205,28[8C46%[34;32H[?25h[?25l[59;99H[K[59;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?1000l[?2004l"hq.c" 429L, 10605C written
[?2004l[?1l>[?25h[?1049l[23;0;0ts4698512@moss:~/CSSE2310/Assignments/a3$ make
gcc -g -Wall -pedantic -std=gnu99 -o hq hq.c -I/local/courses/csse2310/include -L/local/courses/csse2310/lib -lcsse2310a3
s4698512@moss:~/CSSE2310/Assignments/a3$ sp[K[K./hq
> spawn cat ./h sigcat.c
New Job ID [0] created
> rcv 0
// CSSE2310 Assignment 3 a3
> rcv 0
// By Hugo Burton
> rcv 0
// Start Date: 4pm Friday 15th April, 2022
> rcv 0
// Due Date: 4pm Friday 13th May, 2022
> rcv 0
// Student Number: s4698512 (46985123)
> rcv 0

> rcv 0
#ifndef sigcat_h
> rcv 0

> report
[Job] cmd:status
[0] cat:running
> spawn ls
New Job ID [1] created
> spawn ls
New Job ID [2] created
> report
[Job] cmd:status
[0] cat:exited(0)
[1] ls:exited(0)
[2] ls:running
> vim hq.c
Error: Invalid command
> ^Cs4698512@moss:~/CSSE2310/Assignments/a3$ vi, [K[Kmk [K[K hq.c
[?1000h[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;59r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[59;1H"hq.c" 429L, 10605C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[33m177 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m
[33m178 [m[16Cexit([38;5;130m99[m);[54C[100m [m
[33m179 [m[12C}[66C[100m [m
[33m180 [m[8C} [33melse[m {[63C[100m [m
[33m181 [m[12C[36m// parent[m[58C[100m [m
[33m182 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m183 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m
[33m184 [m[8C}[70C[100m [m
[33m185 [m    }[74C[100m [m
[33m186 [m}[78C[100m [m
[33m187 [m[79C[100m [m
[33m188 [m[36m/* report()[m[68C[100m [m
[33m189 [m[36m * --------[m[68C[100m [m
[33m190 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m
[33m191 [m[36m *[m[77C[100m [m
[33m192 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m193 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m194 [m[36m */[m[76C[100m [m
[33m195 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[43C[100m [m
[33m196 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m197 [m[79C[100m [m
[33m198 [m    [36m// Header row[m[62C[100m [m
[33m199 [m    printf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[46C[100m [m
[33m200 [m[79C[100m [m
[33m201 [m    [36m// Job status output dependent on arg present status[m[23C[100m [m
[33m202 [m[79C[100m [m
[33m203 [m    [36m// check args[m[62C[100m [m
[33m204 [m    [33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[37C[100m [m
[93m205 [m[4m        [m[4m[33mfor[m[4m ([m[4m[32mint[m[4m i = [m[4m[38;5;130m0[m[4m; i <= [m[4m[38;5;248m[104mjobid[m[4m; i++) {                                     [m[4m[100m [m[4m                                [m[30;1H[33m206 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[31C[100m [m
[33m207 [m[12C[33mif[m (!jobs[i].finished) {[43C[100m [m
[33m208 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m209 [m[12C} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[28C[100m [m
[33m210 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[12C[100m [m
[33m211 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {[26C[100m [m
[33m212 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[11C[100m [m
[33m213 [m[12C} [33melse[m {[59C[100m [m
[33m214 [m[16Cprintf([38;5;130m"Error[m[35m\n[m[38;5;130m"[m);[45C[100m [m
[33m215 [m[12C}[66C[100m [m
[33m216 [m[8C}[70C[100m [m
[33m217 [m[79C[100m [m
[33m218 [m    } [33melse[m [33mif[m (spcs > [38;5;130m1[m) {      [36m// report on specific job[m[22C[100m [m
[33m219 [m[8C[36m// check for job tokens[1][m[45C[100m [m
[33m220 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m221 [m[12C[32mint[m jobq = atoi(args[[38;5;130m0[m]);[42C[100m [m
[33m222 [m[79C[100m [m
[33m223 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, jobq, jobs[jobq].name);[25C[100m [m
[33m224 [m[79C[100m [m
[33m225 [m[12C[33mif[m (WIFEXITED(jobs[jobq].status)) {[32C[100m [m
[33m226 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WEXITSTATUS(jobs[jobq].status));[8C[100m [m
[33m227 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[jobq].status)) {[23C[100m [m
[33m228 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[jobq].status));[8C[100m [m
[33m229 [m[12C} [33melse[m {[59C[100m [m
[33m230 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m231 [m[12C}[66C[100m [m
[33m232 [m[8C} [33melse[m {[63C[100m [m
[33m233 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m234 [m[8C}[70C[100m [m[59;99H205,9[9C47%[29;13H[?25h[?12$p[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m174 [m[79C[100m [m
[33m175 [m[12C[32mint[m status;[56C[100m [m
[33m176 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m[59;1H[K[59;99H205,9[9C46%[32;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m171 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m172 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].up[WRITE], STDOUT_FILENO);[24C[100m [m
[33m173 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m[59;99H[K[59;99H205,9[9C45%[35;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m168 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[READ]);[39C[100m [m
[33m169 [m[79C[100m [m
[33m170 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].down[READ], STDIN_FILENO);[24C[100m [m[59;99H[K[59;99H205,9[9C45%[38;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m165 [m[12C[36m// child[m[59C[100m [m
[33m166 [m[79C[100m [m
[33m167 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[WRITE]);[36C[100m [m[59;99H[K[59;99H205,9[9C44%[41;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m223 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, jobq, jobs[jobq].name);[25C[100m [m
[33m224 [m[79C[100m [m
[33m225 [m[12C[33mif[m (WIFEXITED(jobs[jobq].status)) {[32C[100m [m[59;99H[K[59;99H205,9[9C45%[38;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m226 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WEXITSTATUS(jobs[jobq].status));[8C[100m [m
[33m227 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[jobq].status)) {[23C[100m [m
[33m228 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[jobq].status));[8C[100m [m[59;99H[K[59;99H205,9[9C45%[35;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m229 [m[12C} [33melse[m {[59C[100m [m
[33m230 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m231 [m[12C}[66C[100m [m[59;99H[K[59;99H205,9[9C46%[32;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m232 [m[8C} [33melse[m {[63C[100m [m
[33m233 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m234 [m[8C}[70C[100m [m[59;99H[K[59;99H205,9[9C47%[29;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m235 [m    }[74C[100m [m
[33m236 [m}[78C[100m [m
[33m237 [m[79C[100m [m[59;99H[K[59;99H205,9[9C48%[26;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m238 [m[36m/* call_signal()[m[63C[100m [m
[33m239 [m[36m * -------------[m[63C[100m [m
[33m240 [m[36m * Sends signal to child process specified[m[37C[100m [m[59;99H[K[59;99H205,9[9C49%[23;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m241 [m[36m *[m[77C[100m [m
[33m242 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m243 [m[36m * spcs: number of original tokens[m[45C[100m [m[59;99H[K[59;99H205,9[9C49%[20;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m183 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m
[33m184 [m[8C}[70C[100m [m
[33m185 [m    }[74C[100m [m[59;99H[K[59;99H205,9[9C49%[23;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m180 [m[8C} [33melse[m {[63C[100m [m
[33m181 [m[12C[36m// parent[m[58C[100m [m
[33m182 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m[59;99H[K[59;99H205,9[9C48%[26;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m177 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m
[33m178 [m[16Cexit([38;5;130m99[m);[54C[100m [m
[33m179 [m[12C}[66C[100m [m[59;99H[K[59;99H205,9[9C47%[29;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m174 [m[79C[100m [m
[33m175 [m[12C[32mint[m status;[56C[100m [m
[33m176 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m[59;99H[K[59;99H205,9[9C46%[32;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m171 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m172 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].up[WRITE], STDOUT_FILENO);[24C[100m [m
[33m173 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m[59;99H[K[59;99H205,9[9C45%[35;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m168 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[READ]);[39C[100m [m
[33m169 [m[79C[100m [m
[33m170 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].down[READ], STDIN_FILENO);[24C[100m [m[59;99H[K[59;99H205,9[9C45%[38;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m165 [m[12C[36m// child[m[59C[100m [m
[33m166 [m[79C[100m [m
[33m167 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[WRITE]);[36C[100m [m[59;99H[K[59;99H205,9[9C44%[41;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m162 [m[79C[100m [m
[33m163 [m[8Cjobs[[38;5;248m[104mjobid[m].pid = fork();[46C[100m [m
[33m164 [m[8C[33mif[m (!jobs[[38;5;248m[104mjobid[m].pid) {[48C[100m [m[59;99H[K[59;99H205,9[9C43%[44;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m220 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m221 [m[12C[32mint[m jobq = atoi(args[[38;5;130m0[m]);[42C[100m [m
[33m222 [m[79C[100m [m[59;99H[K[59;99H205,9[9C44%[41;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m223 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, jobq, jobs[jobq].name);[25C[100m [m
[33m224 [m[79C[100m [m
[33m225 [m[12C[33mif[m (WIFEXITED(jobs[jobq].status)) {[32C[100m [m[59;99H[K[59;99H205,9[9C45%[38;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m226 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WEXITSTATUS(jobs[jobq].status));[8C[100m [m
[33m227 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[jobq].status)) {[23C[100m [m
[33m228 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[jobq].status));[8C[100m [m[59;99H[K[59;99H205,9[9C45%[35;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m229 [m[12C} [33melse[m {[59C[100m [m
[33m230 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m231 [m[12C}[66C[100m [m[59;99H[K[59;99H205,9[9C46%[32;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m232 [m[8C} [33melse[m {[63C[100m [m
[33m233 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m234 [m[8C}[70C[100m [m[59;99H[K[59;99H205,9[9C47%[29;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m235 [m    }[74C[100m [m
[33m236 [m}[78C[100m [m
[33m237 [m[79C[100m [m[59;99H[K[59;99H205,9[9C48%[26;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m238 [m[36m/* call_signal()[m[63C[100m [m
[33m239 [m[36m * -------------[m[63C[100m [m
[33m240 [m[36m * Sends signal to child process specified[m[37C[100m [m[59;99H[K[59;99H205,9[9C49%[23;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m241 [m[36m *[m[77C[100m [m
[33m242 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m243 [m[36m * spcs: number of original tokens[m[45C[100m [m[59;99H[K[59;99H205,9[9C49%[20;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m244 [m[36m */[m[76C[100m [m
[33m245 [m[32mvoid[m call_signal([32mchar[m** args, [32mint[m spcs) {[38C[100m [m
[33m246 [m    [33mif[m (spcs < [38;5;130m3[m) {[60C[100m [m[59;99H[K[59;99H205,9[9C50%[17;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m247 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m248 [m    } [33melse[m {[67C[100m [m
[33m249 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m[59;99H[K[59;99H205,9[9C51%[14;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m250 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m
[33m251 [m[12C[33mif[m (is_number(args[[38;5;130m1[m])){[43C[100m [m
[33m252 [m[16C[32mint[m sgnl = atoi(args[[38;5;130m1[m]);[38C[100m [m[59;99H[K[59;99H205,9[9C52%[11;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m253 [m[16C[33mif[m (sgnl >= [38;5;130m1[m && sgnl <= [38;5;130m31[m) {[33C[100m [m
[33m254 [m[20C[32mint[m pid = jobs[job].pid;[35C[100m [m
[33m255 [m[20Ckill(pid, sgnl);[43C[100m [m[59;99H[K[59;99H205,9[9C53%[8;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m256 [m[16C} [33melse[m {[55C[100m [m
[33m257 [m[20Cprintf([38;5;130m"Error: Invalid signal[m[35m\n[m[38;5;130m"[m);[25C[100m [m
[33m258 [m[16C}[62C[100m [m[59;99H[K[59;99H205,9[9C53%[5;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m259 [m[12C} [33melse[m {[59C[100m [m
[33m260 [m[16Cprintf([38;5;130m"Error: Invalid signal[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m261 [m[12C}[66C[100m [m[59;99H[K[59;99H205,9[9C54%[2;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m207 [m[4m            [m[4m[33mif[m[4m (!jobs[i].finished) {                                           [m[4m[100m [m[4m                                [m[56;1H[33m262 [m[8C} [33melse[m {[63C[100m [m
[33m263 [m[12Cprintf([38;5;130m"Error: invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m264 [m[8C}[70C[100m [m[59;99H[K[59;99H207,9[9C55%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m210 [m[4m                printf([m[4m[38;5;130m"exited([m[4m[35m%d[m[4m[38;5;130m)[m[4m[35m\n[m[4m[38;5;130m"[m[4m,WEXITSTATUS(jobs[i].status));            [m[4m[100m [m[4m                                [m[56;1H[33m265 [m    }[74C[100m [m
[33m266 [m}[78C[100m [m
[33m267 [m[79C[100m [m[59;99H[K[59;99H210,9[9C56%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m213 [m[4m            } [m[4m[33melse[m[4m {                                                           [m[4m[100m [m[4m                                [m[56;1H[33m268 [m[36m/* hq_wait()[m[67C[100m [m
[33m269 [m[36m * ---------[m[67C[100m [m
[33m270 [m[36m * Causes hq to wait for specified seconds[m[37C[100m [m[59;99H[K[59;99H213,9[9C57%[1;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m210 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[12C[100m [m
[33m211 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {[26C[100m [m
[33m212 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[11C[100m [m[59;99H[K[59;99H213,9[9C56%[4;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m207 [m[12C[33mif[m (!jobs[i].finished) {[43C[100m [m
[33m208 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m209 [m[12C} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[28C[100m [m[59;99H[K[59;99H213,9[9C55%[7;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m204 [m    [33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[37C[100m [m
[33m205 [m[8C[33mfor[m ([32mint[m i = [38;5;130m0[m; i <= [38;5;248m[104mjobid[m; i++) {[37C[100m [m
[33m206 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[31C[100m [m[59;99H[K[59;99H213,9[9C54%[10;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m201 [m    [36m// Job status output dependent on arg present status[m[23C[100m [m
[33m202 [m[79C[100m [m
[33m203 [m    [36m// check args[m[62C[100m [m[59;99H[K[59;99H213,9[9C53%[13;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m198 [m    [36m// Header row[m[62C[100m [m
[33m199 [m    printf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[46C[100m [m
[33m200 [m[79C[100m [m[59;99H[K[59;99H213,9[9C53%[16;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m195 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[43C[100m [m
[33m196 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m197 [m[79C[100m [m[59;99H[K[59;99H213,9[9C52%[19;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m253 [m[16C[33mif[m (sgnl >= [38;5;130m1[m && sgnl <= [38;5;130m31[m) {[33C[100m [m
[33m254 [m[20C[32mint[m pid = jobs[job].pid;[35C[100m [m
[33m255 [m[20Ckill(pid, sgnl);[43C[100m [m[59;99H[K[59;99H213,9[9C53%[16;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m256 [m[16C} [33melse[m {[55C[100m [m
[33m257 [m[20Cprintf([38;5;130m"Error: Invalid signal[m[35m\n[m[38;5;130m"[m);[25C[100m [m
[33m258 [m[16C}[62C[100m [m[59;99H[K[59;99H213,9[9C53%[13;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m259 [m[12C} [33melse[m {[59C[100m [m
[33m260 [m[16Cprintf([38;5;130m"Error: Invalid signal[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m261 [m[12C}[66C[100m [m[59;99H[K[59;99H213,9[9C54%[10;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m262 [m[8C} [33melse[m {[63C[100m [m
[33m263 [m[12Cprintf([38;5;130m"Error: invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m264 [m[8C}[70C[100m [m[59;99H[K[59;99H213,9[9C55%[7;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m265 [m    }[74C[100m [m
[33m266 [m}[78C[100m [m
[33m267 [m[79C[100m [m[59;99H[K[59;99H213,9[9C56%[4;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m268 [m[36m/* hq_wait()[m[67C[100m [m
[33m269 [m[36m * ---------[m[67C[100m [m
[33m270 [m[36m * Causes hq to wait for specified seconds[m[37C[100m [m[59;99H[K[59;99H213,9[9C57%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m216 [m[4m        }                                                                      [m[4m[100m [m[4m                                [m[56;1H[33m271 [m[36m *[m[77C[100m [m
[33m272 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m273 [m[36m * spcs: number of original tokens[m[45C[100m [m[59;99H[K[59;99H216,9[9C57%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m219 [m[4m        [m[4m[36m// check for job tokens[1][m[4m                                             [m[4m[100m [m[4m                                [m[56;1H[33m274 [m[36m */[m[76C[100m [m
[33m275 [m[32mvoid[m hq_wait([32mchar[m** args, [32mint[m spcs) {[42C[100m [m
[33m276 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m[59;99H[K[59;99H219,9[9C58%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m222 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m277 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m278 [m    } [33melse[m {[67C[100m [m
[33m279 [m[8C[33mif[m (strcmp(args[[38;5;130m0[m], [38;5;130m""[m) && is_number(args[[38;5;130m0[m])) {[23C[100m [m[59;99H[K[59;99H222,0-1[7C59%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m225 [m[4m            [m[4m[33mif[m[4m (WIFEXITED(jobs[jobq].status)) {                                [m[4m[100m [m[4m                                [m[56;1H[33m280 [m[12Csleep(atoi(args[[38;5;130m0[m]) * [38;5;130m1000000[m);[36C[100m [m
[33m281 [m[8C} [33melse[m {[63C[100m [m
[33m282 [m[12Cprintf([38;5;130m"Error: Invalid sleep time[m[35m\n[m[38;5;130m"[m);[29C[100m [m[59;99H[K[59;99H225,9[9C60%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m228 [m[4m                printf([m[4m[38;5;130m"signalled([m[4m[35m%d[m[4m[38;5;130m)[m[4m[35m\n[m[4m[38;5;130m"[m[4m, WTERMSIG(jobs[jobq].status));        [m[4m[100m [m[4m                                [m[56;1H[33m283 [m[8C}[70C[100m [m
[33m284 [m    }[74C[100m [m
[33m285 [m}[78C[100m [m[59;99H[K[59;99H228,9[9C61%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m231 [m[4m            }                                                                  [m[4m[100m [m[4m                                [m[56;1H[33m286 [m[79C[100m [m
[33m287 [m[36m/* send()[m[70C[100m [m
[33m288 [m[36m * ------[m[70C[100m [m[59;99H[K[59;99H231,9[9C61%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m234 [m[4m        }                                                                      [m[4m[100m [m[4m                                [m[56;1H[33m289 [m[36m * Sends text down the pipe to specified job[m[35C[100m [m
[33m290 [m[36m *[m[77C[100m [m
[33m291 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[59;99H[K[59;99H234,9[9C62%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m237 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m292 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m293 [m[36m */[m[76C[100m [m
[33m294 [m[32mvoid[m send([32mchar[m** args, [32mint[m spcs) {[45C[100m [m[59;99H[K[59;99H237,0-1[7C63%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m240 [m[4m[36m * Sends signal to child process specified[m[4m                                     [m[4m[100m [m[4m                                [m[56;1H[33m295 [m    [33mif[m (spcs < [38;5;130m3[m) {[60C[100m [m
[33m296 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m297 [m    } [33melse[m {[67C[100m [m[59;99H[K[59;99H240,9[9C64%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m243 [m[4m[36m * spcs: number of original tokens[m[4m                                             [m[4m[100m [m[4m                                [m[56;1H[33m298 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m299 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m
[33m300 [m[12C[32mFILE[m* writef = fdopen(jobs[job].down[WRITE], [38;5;130m"w"[m);[17C[100m [m[59;99H[K[59;99H243,9[9C65%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m246 [m[4m    [m[4m[33mif[m[4m (spcs < [m[4m[38;5;130m3[m[4m) {                                                            [m[4m[100m [m[4m                                [m[56;1H[33m301 [m[12Cfprintf(writef, [38;5;130m"[m[35m%s\n[m[38;5;130m"[m, args[[38;5;130m1[m]);[34C[100m [m
[33m302 [m[8C} [33melse[m {[63C[100m [m
[33m303 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m[59;99H[K[59;99H246,9[9C66%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m249 [m[4m        [m[4m[33mif[m[4m (is_job(args[[m[4m[38;5;130m0[m[4m])) {                                                 [m[4m[100m [m[4m                                [m[56;1H[33m304 [m[8C}[70C[100m [m
[33m305 [m    }[74C[100m [m
[33m306 [m}[78C[100m [m[59;99H[K[59;99H249,9[9C66%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m252 [m[4m                [m[4m[32mint[m[4m sgnl = atoi(args[[m[4m[38;5;130m1[m[4m]);                                      [m[4m[100m [m[4m                                [m[56;1H[33m307 [m[79C[100m [m
[33m308 [m[36m/* rcv()[m[71C[100m [m
[33m309 [m[36m * -----[m[71C[100m [m[59;99H[K[59;99H252,9[9C67%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m255 [m[4m                    kill(pid, sgnl);                                           [m[4m[100m [m[4m                                [m[56;1H[33m310 [m[36m * Receives data through the pipe from the specified child process.[m[12C[100m [m
[33m311 [m[36m * Prints this to stdout in the parent, hq.[m[36C[100m [m
[33m312 [m[36m *[m[77C[100m [m[59;99H[K[59;99H255,9[9C68%[1;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m252 [m[16C[32mint[m sgnl = atoi(args[[38;5;130m1[m]);[38C[100m [m
[33m253 [m[16C[33mif[m (sgnl >= [38;5;130m1[m && sgnl <= [38;5;130m31[m) {[33C[100m [m
[33m254 [m[20C[32mint[m pid = jobs[job].pid;[35C[100m [m[59;99H[K[59;99H255,9[9C67%[4;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m249 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m250 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m
[33m251 [m[12C[33mif[m (is_number(args[[38;5;130m1[m])){[43C[100m [m[59;99H[K[59;99H255,9[9C66%[7;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m246 [m    [33mif[m (spcs < [38;5;130m3[m) {[60C[100m [m
[33m247 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m248 [m    } [33melse[m {[67C[100m [m[59;99H[K[59;99H255,9[9C66%[10;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m243 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m244 [m[36m */[m[76C[100m [m
[33m245 [m[32mvoid[m call_signal([32mchar[m** args, [32mint[m spcs) {[38C[100m [m[59;99H[K[59;99H255,9[9C65%[13;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m240 [m[36m * Sends signal to child process specified[m[37C[100m [m
[33m241 [m[36m *[m[77C[100m [m
[33m242 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[59;99H[K[59;99H255,9[9C64%[16;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m298 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m299 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m
[33m300 [m[12C[32mFILE[m* writef = fdopen(jobs[job].down[WRITE], [38;5;130m"w"[m);[17C[100m [m[59;99H[K[59;99H255,9[9C65%[13;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m301 [m[12Cfprintf(writef, [38;5;130m"[m[35m%s\n[m[38;5;130m"[m, args[[38;5;130m1[m]);[34C[100m [m
[33m302 [m[8C} [33melse[m {[63C[100m [m
[33m303 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m[59;99H[K[59;99H255,9[9C66%[10;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m304 [m[8C}[70C[100m [m
[33m305 [m    }[74C[100m [m
[33m306 [m}[78C[100m [m[59;99H[K[59;99H255,9[9C66%[7;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m307 [m[79C[100m [m
[33m308 [m[36m/* rcv()[m[71C[100m [m
[33m309 [m[36m * -----[m[71C[100m [m[59;99H[K[59;99H255,9[9C67%[4;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m249 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m250 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m
[33m251 [m[12C[33mif[m (is_number(args[[38;5;130m1[m])){[43C[100m [m[59;99H[K[59;99H255,9[9C66%[7;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m246 [m    [33mif[m (spcs < [38;5;130m3[m) {[60C[100m [m
[33m247 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m248 [m    } [33melse[m {[67C[100m [m[59;99H[K[59;99H255,9[9C66%[10;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m243 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m244 [m[36m */[m[76C[100m [m
[33m245 [m[32mvoid[m call_signal([32mchar[m** args, [32mint[m spcs) {[38C[100m [m[59;99H[K[59;99H255,9[9C65%[13;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m301 [m[12Cfprintf(writef, [38;5;130m"[m[35m%s\n[m[38;5;130m"[m, args[[38;5;130m1[m]);[34C[100m [m
[33m302 [m[8C} [33melse[m {[63C[100m [m
[33m303 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m[59;99H[K[59;99H255,9[9C66%[10;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m304 [m[8C}[70C[100m [m
[33m305 [m    }[74C[100m [m
[33m306 [m}[78C[100m [m[59;99H[K[59;99H255,9[9C66%[7;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m307 [m[79C[100m [m
[33m308 [m[36m/* rcv()[m[71C[100m [m
[33m309 [m[36m * -----[m[71C[100m [m[59;99H[K[59;99H255,9[9C67%[4;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m310 [m[36m * Receives data through the pipe from the specified child process.[m[12C[100m [m
[33m311 [m[36m * Prints this to stdout in the parent, hq.[m[36C[100m [m
[33m312 [m[36m *[m[77C[100m [m[59;99H[K[59;99H255,9[9C68%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m258 [m[4m                }                                                              [m[4m[100m [m[4m                                [m[56;1H[33m313 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m314 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m315 [m[36m */[m[76C[100m [m[59;99H[K[59;99H258,9[9C69%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m261 [m[4m            }                                                                  [m[4m[100m [m[4m                                [m[56;1H[33m316 [m[32mvoid[m rcv([32mchar[m** args, [32mint[m spcs) {[46C[100m [m
[33m317 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m318 [m[8Cprintf([38;5;130m"Error: Insufficient arguments.[m[35m\n[m[38;5;130m"[m);[28C[100m [m[59;99H[K[59;99H261,9[9C70%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m264 [m[4m        }                                                                      [m[4m[100m [m[4m                                [m[56;1H[33m319 [m    } [33melse[m {[67C[100m [m
[33m320 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m321 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m[59;99H[K[59;99H264,9[9C70%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m267 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m322 [m[12C[32mint[m ready = is_ready(jobs[job].up[READ]);[26C[100m [m
[33m323 [m[12C[32mFILE[m* readf = fdopen(jobs[job].up[READ], [38;5;130m"r"[m);[21C[100m [m
[33m324 [m[12C[33mif[m (ready) {[55C[100m [m[59;99H[K[59;99H267,0-1[7C71%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m270 [m[4m[36m * Causes hq to wait for specified seconds[m[4m                                     [m[4m[100m [m[4m                                [m[56;1H[33m325 [m[16C[32mchar[m* buffer = read_line(readf);[31C[100m [m
[33m326 [m[16C[33mif[m (buffer == [38;5;130m0[m) {[45C[100m [m
[33m327 [m[20Cprintf([38;5;130m"<no input>[m[35m\n[m[38;5;130m"[m);[36C[100m [m[59;99H[K[59;99H270,9[9C72%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m273 [m[4m[36m * spcs: number of original tokens[m[4m                                             [m[4m[100m [m[4m                                [m[56;1H[33m328 [m[16C} [33melse[m [33mif[m (buffer == [38;5;130mNULL[m) {[35C[100m [m
[33m329 [m[20Cprintf([38;5;130m"<EOF>[m[35m\n[m[38;5;130m"[m);[41C[100m [m
[33m330 [m[16C} [33melse[m {[55C[100m [m[59;99H[K[59;99H273,9[9C73%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m276 [m[4m    [m[4m[33mif[m[4m (spcs < [m[4m[38;5;130m2[m[4m) {                                                            [m[4m[100m [m[4m                                [m[56;1H[33m331 [m[20Cprintf([38;5;130m"[m[35m%s\n[m[38;5;130m"[m, buffer);[36C[100m [m
[33m332 [m[16C}[62C[100m [m
[33m333 [m[12C}[66C[100m [m[59;99H[K[59;99H276,9[9C74%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m279 [m[4m        [m[4m[33mif[m[4m (strcmp(args[[m[4m[38;5;130m0[m[4m], [m[4m[38;5;130m""[m[4m) && is_number(args[[m[4m[38;5;130m0[m[4m])) {                       [m[4m[100m [m[4m                                [m[56;1H[33m334 [m[8C} [33melse[m {[63C[100m [m
[33m335 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m336 [m[8C}[70C[100m [m[59;99H[K[59;99H279,9[9C74%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m282 [m[4m            printf([m[4m[38;5;130m"Error: Invalid sleep time[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                             [m[4m[100m [m[4m                                [m[56;1H[33m337 [m[79C[100m [m
[33m338 [m[79C[100m [m
[33m339 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m[59;99H[K[59;99H282,9[9C75%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m285 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[56;1H[33m340 [m    }[74C[100m [m
[33m341 [m}[78C[100m [m
[33m342 [m[79C[100m [m[59;99H[K[59;99H285,1[9C76%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m288 [m[4m[36m * ------[m[4m                                                                      [m[4m[100m [m[4m                                [m[56;1H[33m343 [m[36m/* eof()[m[71C[100m [m
[33m344 [m[36m * -----[m[71C[100m [m
[33m345 [m[36m * Closes the stdin side of the pipe so the child process can no longer read [m  [100m [m[59;99H[K[59;99H288,9[9C77%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m291 [m[4m[36m * args: arguments provided in command line without first command[m[4m              [m[4m[100m [m[4m                                [m[56;1H[33m346 [m[36m * as the pipe will be EOF.[m[52C[100m [m
[33m347 [m[36m *[m[77C[100m [m
[33m348 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[59;99H[K[59;99H291,9[9C78%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m294 [m[4m[32mvoid[m[4m send([m[4m[32mchar[m[4m** args, [m[4m[32mint[m[4m spcs) {                                             [m[4m[100m [m[4m                                [m[56;1H[33m349 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m350 [m[36m */[m[76C[100m [m
[33m351 [m[32mvoid[m eof([32mchar[m** args, [32mint[m spcs) {[46C[100m [m[59;99H[K[59;99H294,9[9C78%[1;13H[?25h[?25l[33m294 [m[32mvoid[m send([32mchar[m** args, [32mint[m spcs) {                                             [100m [m[1;85H[K[28;1H[93m321 [m[4m            [m[4m[32mint[m[4m job = atoi(args[[m[4m[38;5;130m0[m[4m]);                                           [m[4m[100m [m[4m                                [m[59;99H321,13[28;17H[?25h[?25l[27;1H[93m320 [m[23C[46m[[m[7m[38;5;130m[48;5;242m0[m[7m[48;5;242m])) { [m
[33m321 [m[7m[48;5;242m            [m[7m[32m[48;5;242mi[m[32mnt[m job = atoi(args[[38;5;130m0[m]);                                           [100m [m[28;85H[K[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H320,24[8C78%[27;28H[?25h[?25l[27;5H[4m        [m[4m[33mif[m[4m (is_job(args[m[4m[46m[[m[4m[38;5;130m0[m[4m[46m][m[4m)) {                                                 [m[4m[100m [m[4m                                [m[28;5H            [32mi[m[59;1H[K[59;99H320,24[8C78%[27;28H[?25h[?25l[33m320 [m        [33mif[m (is_job(args[[38;5;130m0[m])) {                                                 [100m [m[27;85H[K[29;1H[93m322 [m[4m            [m[4m[32mint[m[4m ready = is_ready(jobs[job].up[READ]);                          [m[4m[100m [m[4m                                [m[59;101H2,25[29;29H[?25h[?25l[29;5H            [32mint[m ready = [7m[48;5;242mis_ready(jobs[job].up[READ][m[46m)[m;                          [100m [m[29;85H[K[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H322,52[8C78%[29;56H[?25h[?25l[29;5H[4m            [m[4m[32mint[m[4m ready = is_ready[m[4m[46m([m[4mjobs[job].up[READ][m[4m[46m)[m[4m;                          [m[4m[100m [m[4m                                [m[59;1H[K[59;99H322,52[8C78%[29;56H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m291 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m292 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m293 [m[36m */[m[76C[100m [m[59;99H[K[59;99H322,52[8C78%[32;56H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m288 [m[36m * ------[m[70C[100m [m
[33m289 [m[36m * Sends text down the pipe to specified job[m[35C[100m [m
[33m290 [m[36m *[m[77C[100m [m[59;99H[K[59;99H322,52[8C77%[35;56H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m285 [m}[78C[100m [m
[33m286 [m[79C[100m [m
[33m287 [m[36m/* send()[m[70C[100m [m[59;99H[K[59;99H322,52[8C76%[38;56H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m282 [m[12Cprintf([38;5;130m"Error: Invalid sleep time[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m283 [m[8C}[70C[100m [m
[33m284 [m    }[74C[100m [m[59;99H[K[59;99H322,52[8C75%[41;56H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m279 [m[8C[33mif[m (strcmp(args[[38;5;130m0[m], [38;5;130m""[m) && is_number(args[[38;5;130m0[m])) {[23C[100m [m
[33m280 [m[12Csleep(atoi(args[[38;5;130m0[m]) * [38;5;130m1000000[m);[36C[100m [m
[33m281 [m[8C} [33melse[m {[63C[100m [m[59;99H[K[59;99H322,52[8C74%[44;56H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m276 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m277 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m278 [m    } [33melse[m {[67C[100m [m[59;99H[K[59;99H322,52[8C74%[47;56H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m273 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m274 [m[36m */[m[76C[100m [m
[33m275 [m[32mvoid[m hq_wait([32mchar[m** args, [32mint[m spcs) {[42C[100m [m[59;99H[K[59;99H322,52[8C73%[50;56H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m270 [m[36m * Causes hq to wait for specified seconds[m[37C[100m [m
[33m271 [m[36m *[m[77C[100m [m
[33m272 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[59;99H[K[59;99H322,52[8C72%[53;56H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m267 [m[79C[100m [m
[33m268 [m[36m/* hq_wait()[m[67C[100m [m
[33m269 [m[36m * ---------[m[67C[100m [m[59;99H[K[59;99H322,52[8C71%[56;56H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m264 [m[8C}[70C[100m [m
[33m265 [m    }[74C[100m [m
[33m266 [m}[78C[100m [m[58;1H[93m321 [m[4m            [m[4m[32mint[m[4m job = atoi(args[[m[4m[38;5;130m0[m[4m]);                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H321,36[8C70%[58;40H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m261 [m[12C}[66C[100m [m
[33m262 [m[8C} [33melse[m {[63C[100m [m
[33m263 [m[12Cprintf([38;5;130m"Error: invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m[58;1H[93m318 [m[4m        printf([m[4m[38;5;130m"Error: Insufficient arguments.[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H318,51[8C70%[58;55H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m258 [m[16C}[62C[100m [m
[33m259 [m[12C} [33melse[m {[59C[100m [m
[33m260 [m[16Cprintf([38;5;130m"Error: Invalid signal[m[35m\n[m[38;5;130m"[m);[29C[100m [m[58;1H[93m315 [m[4m[36m */[m[4m                                                                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H315,3[9C69%[58;7H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m255 [m[20Ckill(pid, sgnl);[43C[100m [m
[33m256 [m[16C} [33melse[m {[55C[100m [m
[33m257 [m[20Cprintf([38;5;130m"Error: Invalid signal[m[35m\n[m[38;5;130m"[m);[25C[100m [m[58;1H[93m312 [m[4m[36m *[m[4m                                                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H312,2[9C68%[58;6H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m252 [m[16C[32mint[m sgnl = atoi(args[[38;5;130m1[m]);[38C[100m [m
[33m253 [m[16C[33mif[m (sgnl >= [38;5;130m1[m && sgnl <= [38;5;130m31[m) {[33C[100m [m
[33m254 [m[20C[32mint[m pid = jobs[job].pid;[35C[100m [m[58;1H[93m309 [m[4m[36m * -----[m[4m                                                                       [m[4m[100m [m[4m                                [m[59;99H[K[59;99H309,8[9C67%[58;12H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m249 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m250 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m
[33m251 [m[12C[33mif[m (is_number(args[[38;5;130m1[m])){[43C[100m [m[46;38H[46m{[m[58;1H[93m306 [m[4m[46m}[m[4m                                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H306,1[9C66%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m246 [m    [33mif[m (spcs < [38;5;130m3[m) {[60C[100m [m
[33m247 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m248 [m    } [33melse[m {[67C[100m [m[49;38H{[58;1H[93m303 [m[4m            printf([m[4m[38;5;130m"Error: Invalid job[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                    [m[4m[100m [m[4m                                [m[59;99H[K[59;99H303,43[8C66%[58;47H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m243 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m244 [m[36m */[m[76C[100m [m
[33m245 [m[32mvoid[m call_signal([32mchar[m** args, [32mint[m spcs) {[38C[100m [m[58;1H[93m300 [m[4m            [m[4m[32mFILE[m[4m* writef = fdopen(jobs[job].down[WRITE], [m[4m[38;5;130m"w"[m[4m);                 [m[4m[100m [m[4m                                [m[59;99H[K[59;99H300,52[8C65%[58;56H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m240 [m[36m * Sends signal to child process specified[m[37C[100m [m
[33m241 [m[36m *[m[77C[100m [m
[33m242 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[58;1H[93m297 [m[4m    } [m[4m[33melse[m[4m {                                                                   [m[4m[100m [m[4m                                [m[59;99H[K[59;99H297,12[8C64%[58;16H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m237 [m[79C[100m [m
[33m238 [m[36m/* call_signal()[m[63C[100m [m
[33m239 [m[36m * -------------[m[63C[100m [m[58;1H[93m294 [m[4m[32mvoid[m[4m send([m[4m[32mchar[m[4m** args, [m[4m[32mint[m[4m spcs) {                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H294,34[8C63%[58;38H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m234 [m[8C}[70C[100m [m
[33m235 [m    }[74C[100m [m
[33m236 [m}[78C[100m [m[58;1H[93m291 [m[4m[36m * args: arguments provided in command line without first command[m[4m              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H291,52[8C62%[58;56H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m231 [m[12C}[66C[100m [m
[33m232 [m[8C} [33melse[m {[63C[100m [m
[33m233 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m[58;1H[93m288 [m[4m[36m * ------[m[4m                                                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H288,9[9C61%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m228 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[jobq].status));[8C[100m [m
[33m229 [m[12C} [33melse[m {[59C[100m [m
[33m230 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m[48;41H[46m{[m[58;1H[93m285 [m[4m[46m}[m[4m                                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H285,1[9C61%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m225 [m[12C[33mif[m (WIFEXITED(jobs[jobq].status)) {[32C[100m [m
[33m226 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WEXITSTATUS(jobs[jobq].status));[8C[100m [m
[33m227 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[jobq].status)) {[23C[100m [m[51;41H{[58;1H[93m282 [m[4m            printf([m[4m[38;5;130m"Error: Invalid sleep time[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H282,50[8C60%[58;54H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m222 [m[79C[100m [m
[33m223 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, jobq, jobs[jobq].name);[25C[100m [m
[33m224 [m[79C[100m [m[58;1H[93m279 [m[4m        [m[4m[33mif[m[4m (strcmp(args[[m[4m[38;5;130m0[m[4m], [m[4m[38;5;130m""[m[4m) && is_number(args[m[4m[46m[[m[4m[38;5;130m0[m[4m[46m][m[4m)) {                       [m[4m[100m [m[4m                                [m[59;99H[K[59;99H279,52[8C59%[58;56H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m219 [m[8C[36m// check for job tokens[1][m[45C[100m [m
[33m220 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m221 [m[12C[32mint[m jobq = atoi(args[[38;5;130m0[m]);[42C[100m [m[58;1H[93m276 [m[4m    [m[4m[33mif[m[4m (spcs < [m[4m[38;5;130m2[m[4m) {                                                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H276,19[8C58%[58;23H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m216 [m[8C}[70C[100m [m
[33m217 [m[79C[100m [m
[33m218 [m    } [33melse[m [33mif[m (spcs > [38;5;130m1[m) {      [36m// report on specific job[m[22C[100m [m[58;1H[93m273 [m[4m[36m * spcs: number of original tokens[m[4m                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H273,34[8C57%[58;38H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m213 [m[12C} [33melse[m {[59C[100m [m
[33m214 [m[16Cprintf([38;5;130m"Error[m[35m\n[m[38;5;130m"[m);[45C[100m [m
[33m215 [m[12C}[66C[100m [m[58;1H[93m270 [m[4m[36m * Causes hq to wait for specified seconds[m[4m                                     [m[4m[100m [m[4m                                [m[59;99H[K[59;99H270,42[8C57%[58;46H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m210 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[12C[100m [m
[33m211 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {[26C[100m [m
[33m212 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[11C[100m [m[58;1H[93m267 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H267,0-1[7C56%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m207 [m[12C[33mif[m (!jobs[i].finished) {[43C[100m [m
[33m208 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m209 [m[12C} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[28C[100m [m[56;20H[46m{[m

[93m264 [m[4m        [m[4m[46m}[m[4m                                                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H264,9[9C55%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m204 [m    [33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[37C[100m [m
[33m205 [m[8C[33mfor[m ([32mint[m i = [38;5;130m0[m; i <= [38;5;248m[104mjobid[m; i++) {[37C[100m [m
[33m206 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[31C[100m [m[56;24H[46m{[m

[93m261 [m[4m            [m[4m[46m}[m[4m                                                                  [m[4m[100m [m[4m                                [m[59;99H[K[59;99H261,13[8C54%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m201 [m    [36m// Job status output dependent on arg present status[m[23C[100m [m
[33m202 [m[79C[100m [m
[33m203 [m    [36m// check args[m[62C[100m [m[56;28H[46m{[m

[93m258 [m[4m                [m[4m[46m}[m[4m                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H258,17[8C53%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m198 [m    [36m// Header row[m[62C[100m [m
[33m199 [m    printf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[46C[100m [m
[33m200 [m[79C[100m [m[58;1H[93m255 [m[4m                    kill(pid, sgnl);                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H255,36[8C53%[58;40H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m195 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[43C[100m [m
[33m196 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m197 [m[79C[100m [m[58;1H[93m252 [m[4m                [m[4m[32mint[m[4m sgnl = atoi(args[[m[4m[38;5;130m1[m[4m]);                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H252,41[8C52%[58;45H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m192 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m193 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m194 [m[36m */[m[76C[100m [m[58;1H[93m249 [m[4m        [m[4m[33mif[m[4m (is_job(args[[m[4m[38;5;130m0[m[4m])) {                                                 [m[4m[100m [m[4m                                [m[59;99H[K[59;99H249,30[8C51%[58;34H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m189 [m[36m * --------[m[68C[100m [m
[33m190 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m
[33m191 [m[36m *[m[77C[100m [m[58;1H[93m246 [m[4m    [m[4m[33mif[m[4m (spcs < [m[4m[38;5;130m3[m[4m) {                                                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H246,19[8C50%[58;23H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m186 [m}[78C[100m [m
[33m187 [m[79C[100m [m
[33m188 [m[36m/* report()[m[68C[100m [m[58;1H[93m243 [m[4m[36m * spcs: number of original tokens[m[4m                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H243,34[8C49%[58;38H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m183 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m
[33m184 [m[8C}[70C[100m [m
[33m185 [m    }[74C[100m [m[58;1H[93m240 [m[4m[36m * Sends signal to child process specified[m[4m                                     [m[4m[100m [m[4m                                [m[59;99H[K[59;99H240,42[8C49%[58;46H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m180 [m[8C} [33melse[m {[63C[100m [m
[33m181 [m[12C[36m// parent[m[58C[100m [m
[33m182 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m[58;1H[93m237 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H237,0-1[7C48%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m177 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m
[33m178 [m[16Cexit([38;5;130m99[m);[54C[100m [m
[33m179 [m[12C}[66C[100m [m[56;20H[46m{[m

[93m234 [m[4m        [m[4m[46m}[m[4m                                                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H234,9[9C47%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m174 [m[79C[100m [m
[33m175 [m[12C[32mint[m status;[56C[100m [m
[33m176 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m[56;24H[46m{[m

[93m231 [m[4m            [m[4m[46m}[m[4m                                                                  [m[4m[100m [m[4m                                [m[59;99H[K[59;99H231,13[8C46%[58;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m232 [m[8C} [33melse[m {[63C[100m [m
[33m233 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m234 [m[8C}[70C[100m [m[59;99H[K[59;99H231,13[8C47%[55;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m235 [m    }[74C[100m [m
[33m236 [m}[78C[100m [m
[33m237 [m[79C[100m [m[59;99H[K[59;99H231,13[8C48%[52;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m238 [m[36m/* call_signal()[m[63C[100m [m
[33m239 [m[36m * -------------[m[63C[100m [m
[33m240 [m[36m * Sends signal to child process specified[m[37C[100m [m[59;99H[K[59;99H231,13[8C49%[49;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m241 [m[36m *[m[77C[100m [m
[33m242 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m243 [m[36m * spcs: number of original tokens[m[45C[100m [m[59;99H[K[59;99H231,13[8C49%[46;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m244 [m[36m */[m[76C[100m [m
[33m245 [m[32mvoid[m call_signal([32mchar[m** args, [32mint[m spcs) {[38C[100m [m
[33m246 [m    [33mif[m (spcs < [38;5;130m3[m) {[60C[100m [m[59;99H[K[59;99H231,13[8C50%[43;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m247 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m248 [m    } [33melse[m {[67C[100m [m
[33m249 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m[59;99H[K[59;99H231,13[8C51%[40;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m250 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m
[33m251 [m[12C[33mif[m (is_number(args[[38;5;130m1[m])){[43C[100m [m
[33m252 [m[16C[32mint[m sgnl = atoi(args[[38;5;130m1[m]);[38C[100m [m[59;99H[K[59;99H231,13[8C52%[37;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m192 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m193 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m194 [m[36m */[m[76C[100m [m[59;99H[K[59;99H231,13[8C51%[40;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m189 [m[36m * --------[m[68C[100m [m
[33m190 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m
[33m191 [m[36m *[m[77C[100m [m[59;99H[K[59;99H231,13[8C50%[43;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m186 [m}[78C[100m [m
[33m187 [m[79C[100m [m
[33m188 [m[36m/* report()[m[68C[100m [m[59;99H[K[59;99H231,13[8C49%[46;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m183 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m
[33m184 [m[8C}[70C[100m [m
[33m185 [m    }[74C[100m [m[59;99H[K[59;99H231,13[8C49%[49;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m180 [m[8C} [33melse[m {[63C[100m [m
[33m181 [m[12C[36m// parent[m[58C[100m [m
[33m182 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m[59;99H[K[59;99H231,13[8C48%[52;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m177 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m
[33m178 [m[16Cexit([38;5;130m99[m);[54C[100m [m
[33m179 [m[12C}[66C[100m [m[59;99H[K[59;99H231,13[8C47%[55;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m174 [m[79C[100m [m
[33m175 [m[12C[32mint[m status;[56C[100m [m
[33m176 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m[59;99H[K[59;99H231,13[8C46%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m171 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m172 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].up[WRITE], STDOUT_FILENO);[24C[100m [m
[33m173 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m[58;1H[93m228 [m[4m                printf([m[4m[38;5;130m"signalled([m[4m[35m%d[m[4m[38;5;130m)[m[4m[35m\n[m[4m[38;5;130m"[m[4m, WTERMSIG(jobs[jobq].status));        [m[4m[100m [m[4m                                [m[59;99H[K[59;99H228,52[8C45%[58;56H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m168 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[READ]);[39C[100m [m
[33m169 [m[79C[100m [m
[33m170 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].down[READ], STDIN_FILENO);[24C[100m [m[58;1H[93m225 [m[4m            [m[4m[33mif[m[4m (WIFEXITED(jobs[jobq].status)) {                                [m[4m[100m [m[4m                                [m[59;99H[K[59;99H225,47[8C45%[58;51H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m165 [m[12C[36m// child[m[59C[100m [m
[33m166 [m[79C[100m [m
[33m167 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[WRITE]);[36C[100m [m[58;1H[93m222 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H222,0-1[7C44%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m162 [m[79C[100m [m
[33m163 [m[8Cjobs[[38;5;248m[104mjobid[m].pid = fork();[46C[100m [m
[33m164 [m[8C[33mif[m (!jobs[[38;5;248m[104mjobid[m].pid) {[48C[100m [m[58;1H[93m219 [m[4m        [m[4m[36m// check for job tokens[1][m[4m                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H219,34[8C43%[58;38H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m159 [m[79C[100m [m
[33m160 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, [38;5;248m[104mjobid[m);[28C[100m [m
[33m161 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m[47;46H[46m{[m[58;1H[93m216 [m[4m        [m[4m[46m}[m[4m                                                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H216,9[9C42%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m156 [m[12Cperror([38;5;130m"Creating up pipe"[m);[40C[100m [m
[33m157 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m158 [m[8C}[70C[100m [m[50;46H{[58;1H[93m213 [m[4m            } [m[4m[33melse[m[4m {                                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H213,20[8C41%[58;24H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m153 [m[8C}[70C[100m [m
[33m154 [m[79C[100m [m
[33m155 [m[8C[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].up) < [38;5;130m0[m) {[40C[100m [m[58;1H[93m210 [m[4m                printf([m[4m[38;5;130m"exited([m[4m[35m%d[m[4m[38;5;130m)[m[4m[35m\n[m[4m[38;5;130m"[m[4m,WEXITSTATUS(jobs[i].status));            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H210,52[8C40%[58;56H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m150 [m[8C[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].down) < [38;5;130m0[m) {[38C[100m [m
[33m151 [m[12Cperror([38;5;130m"Creating down pipe"[m);[38C[100m [m
[33m152 [m[12Cexit([38;5;130m1[m);[59C[100m [m[58;1H[93m207 [m[4m            [m[4m[33mif[m[4m (!jobs[i].finished) {                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H207,36[8C40%[58;40H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m147 [m[79C[100m [m
[33m148 [m[8Cstrcpy(jobs[[38;5;248m[104mjobid[m].name, args[[38;5;130m0[m]);[37C[100m [m
[33m149 [m[79C[100m [m[58;1H[93m204 [m[4m    [m[4m[33mif[m[4m (spcs == [m[4m[38;5;130m1[m[4m) {    [m[4m[36m// report all jobs[m[4m                                     [m[4m[100m [m[4m                                [m[59;99H[K[59;99H204,42[8C39%[58;46H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m144 [m[8C[38;5;248m[104mjobid[m++;[63C[100m [m
[33m145 [m[79C[100m [m
[33m146 [m[8Cjobs = realloc(jobs, ([38;5;248m[104mjobid[m + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));[16C[100m [m[58;1H[93m201 [m[4m    [m[4m[36m// Job status output dependent on arg present status[m[4m                       [m[4m[100m [m[4m                                [m[59;99H[K[59;99H201,52[8C38%[58;56H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m141 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m142 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m143 [m    } [33melse[m {[67C[100m [m[58;1H[93m198 [m[4m    [m[4m[36m// Header row[m[4m                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H198,17[8C37%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m138 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m139 [m[36m */[m[76C[100m [m
[33m140 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs) {[44C[100m [m[58;1H[93m195 [m[4m[32mvoid[m[4m report([m[4m[32mchar[m[4m** args, [m[4m[32mint[m[4m spcs) {                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H195,36[8C36%[58;40H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m135 [m[36m * of the child process is unchanged[m[43C[100m [m
[33m136 [m[36m *[m[77C[100m [m
[33m137 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[58;1H[93m192 [m[4m[36m * args: arguments provided in command line without first command[m[4m              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H192,52[8C36%[58;56H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m132 [m[36m * -------[m[69C[100m [m
[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m
[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m[58;1H[93m189 [m[4m[36m * --------[m[4m                                                                    [m[4m[100m [m[4m                                [m[59;99H[K[59;99H189,11[8C35%[58;15H[?25h[?25l[49;20H[46m{[m[53;1H[93m184 [m[4m        [m[4m[46m}[m[4m                                                                      [m[4m[100m [m[4m                                [m[58;1H[33m189 [m[36m * --------[m                                                                    [100m [m[58;85H[K[59;101H4,9 [53;13H[?25h[?25l[49;20H{


[93m183 [m[4m            close(jobs[[m[4m[38;5;248m[104mjobid[m[4m].up[WRITE]);                                      [m[4m[100m [m[4m                                [m[53;1H[33m184 [m        }                                                                      [100m [m[53;85H[K[59;101H3,41[52;45H[?25h[?25l[59;1H[38;5;130m-- INSERT --[m[59;99H[K[59;99H183,41[8C35%[52;45H[?25h[?25l[59;104H2[52;46H[?25h[?25l[33m183 [m            close(jobs[[38;5;248m[104mjobid[m].up[WRITE]);                                      [100m [m[52;85H[K[53;1H[93m184 [m[4m                                                                               [m[4m[100m [m[4m                                [m[54;9H    }[55;5H    }[56;5H}[57;5H           [58;5H[36m/* report()[m[59;101H4,13[53;17H[?25h[?25l[33m184 [m                                                                               [100m [m[53;85H[K[54;1H[93m185 [m[4m                                                                               [m[4m[100m [m[4m                                [m[55;9H    }[56;5H    }[57;5H}[58;5H           [59;101H5[54;17H[?25h[?25l[4mi[m[59;104H4[54;18H[?25h[?25l[4ms[m[59;104H5[54;19H[?25h[?25l[4m_[m[59;104H6[54;20H[?25h[?25l[4mr[m[59;104H7[54;21H[?25h[?25l[4ma[m[59;104H8[54;22H[?25h[?25l[4md[m[59;104H9[54;23H[?25h[?25l[4m [m[59;104H8[54;22H[?25h[?25l[4me[m[59;104H9[54;23H[?25h[?25l[4m [m[59;104H8[54;22H[?25h[?25l[4m [m[59;104H7[54;21H[?25h[?25l[4me[m[59;104H8[54;22H[?25h[?25l[4ma[m[59;104H9[54;23H[?25h[?25l[4md[m[59;103H20[54;24H[?25h[?25l[4my[m[59;104H1[54;25H[?25h[?25l[4m([m[59;104H2[54;26H[?25h[?25l[33m185 [m            is_ready(                                                          [100m [m[54;85H[K[55;1H[93m186 [m[4m        }                                                                      [m[4m[100m [m[4m                                [m[49;20H[46m{[m[55;13H[4m[46m}[m[59;101H6,10[55;14H[?25h[?25l[54;1H[93m185 [m[4m            is_ready(                                                          [m[4m[100m [m[4m                                [m[55;1H[33m186 [m        [46m}[m                                                                      [100m [m[55;85H[K[49;20H{[55;13H}[59;101H5,22[54;26H[?25h[?25l[4mj[m[59;104H3[54;27H[?25h[?25l[4mo[m[59;104H4[54;28H[?25h[?25l[4mb[m[59;104H5[54;29H[?25h[?25l[4ms[m[59;104H6[54;30H[?25h[?25l[4m[[m[59;104H7[54;31H[?25h[?25l[4mj[m[59;104H8[54;32H[?25h[?25l[4mo[m[59;104H9[54;33H[?25h[?25l[4mb[m[59;103H30[54;34H[?25h[?25l[4mi[m[59;104H1[54;35H[?25h[?25l[4m[38;5;248m[104mjobid[m[59;104H2[54;36H[?25h[?25l[4m[[m[59;104H3[54;37H[?25h[?25l[4m.[m[59;104H4[54;38H[?25h[?25l[4m [m[59;104H3[54;37H[?25h[?25l[4m [m[59;104H2[54;36H[?25h[?25l[4m][m[59;103H26[54;30H[?25h[?25l[7C[4m.[m[59;103H34[54;38H[?25h[?25l[4md[m[59;104H5[54;39H[?25h[?25l[4m[33mdo[m[59;104H6[54;40H[?25h[?25l[4mdow[m[59;104H7[54;41H[?25h[?25l[4mn[m[59;104H8[54;42H[?25h[?25l[4m[[m[59;104H9[54;43H[?25h[?25l[4mR[m[59;103H40[54;44H[?25h[?25l[4mE[m[59;104H1[54;45H[?25h[?25l[4mA[m[59;104H2[54;46H[?25h[?25l[4mD[m[59;104H3[54;47H[?25h[?25l[4m [m[59;104H2[54;46H[?25h[?25l[4m [m[59;104H1[54;45H[?25h[?25l[4m [m[59;104H0[54;44H[?25h[?25l[4mW[?25h[?25lE[m[59;104H1[54;45H[?25h[?25l[4m [m[59;104H0[54;44H[?25h[?25l[4m [m[59;103H39[54;43H[?25h[?25l[4mW[m[59;103H40[54;44H[?25h[?25l[4mR[m[59;104H1[54;45H[?25h[?25l[4mI[m[59;104H2[54;46H[?25h[?25l[4mTE[m[59;104H4[54;48H[?25h[?25l[4m][m[59;103H38[54;42H[?25h[?25l[7C[4m)[m[59;103H21[54;25H[?25h[?25l[25C[4m;[m[59;103H47[54;51H[?25h[?25l[33m185 [m            is_ready(jobs[[38;5;248m[104mjobid[m].down[WRITE]);                                 [100m [m[54;85H[K[55;1H[93m186 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;9H    }[57;5H    }[58;5H}[59;101H6,13[55;17H[?25h[?25l[4mi[m[59;104H4[55;18H[?25h[?25l[4ms[m[59;104H5[55;19H[?25h[?25l[4m_[m[59;104H6[55;20H[?25h[?25l[4mr[m[59;104H7[55;21H[?25h[?25l[4me[m[59;104H8[55;22H[?25h[?25l[4ma[m[59;104H9[55;23H[?25h[?25l[4md[m[59;103H20[55;24H[?25h[?25l[4my[m[59;104H1[55;25H[?25h[?25l[4m([m[59;104H2[55;26H[?25h[?25l[4mj[m[59;104H3[55;27H[?25h[?25l[4mo[m[59;104H4[55;28H[?25h[?25l[4mb[m[59;104H5[55;29H[?25h[?25l[4ms[m[59;104H6[55;30H[?25h[?25l[4m[[m[59;104H7[55;31H[?25h[?25l[4mj[m[59;104H8[55;32H[?25h[?25l[4mo[m[59;104H9[55;33H[?25h[?25l[4mb[m[59;103H30[55;34H[?25h[?25l[4mi[m[59;104H1[55;35H[?25h[?25l[4m[38;5;248m[104mjobid[m[59;104H2[55;36H[?25h[?25l[4m[[m[59;104H3[55;37H[?25h[?25l[4m [m[59;104H2[55;36H[?25h[?25l[4m][m[59;103H26[55;30H[?25h[?25l[7C[4m.[m[59;103H34[55;38H[?25h[?25l[4mu[m[59;104H5[55;39H[?25h[?25l[4mp[m[59;104H6[55;40H[?25h[?25l[4m([m[59;104H7[55;41H[?25h[?25l[4m [m[59;104H6[55;40H[?25h[?25l[4m[[m[59;104H7[55;41H[?25h[?25l[4mw[m[59;104H8[55;42H[?25h[?25l[4m [m[59;104H7[55;41H[?25h[?25l[4mD[m[59;104H8[55;42H[?25h[?25l[4mO[m[59;104H9[55;43H[?25h[?25l[4m [m[59;104H8[55;42H[?25h[?25l[4mR[m[59;104H9[55;43H[?25h[?25l[4m [m[59;104H8[55;42H[?25h[?25l[4m [m[59;104H7[55;41H[?25h[?25l[4mR[m[59;104H8[55;42H[?25h[?25l[4mE[m[59;104H9[55;43H[?25h[?25l[4mA[m[59;103H40[55;44H[?25h[?25l[4mD[m[59;104H1[55;45H[?25h[?25l[4m][m[59;103H36[55;40H[?25h[?25l[6C[4m)[m[59;103H21[55;25H[?25h[?25l[4m[46m([20C)[m[59;103H43[55;47H[?25h[?25l[4m;[55;25H([20C)[m[59;104H4[55;48H[?25h[?25l[54;1H[93m185 [m[4m            is_ready(jobs[[m[4m[38;5;248m[104mjobid[m[4m].down[WRITE]);                                 [m[4m[100m [m[4m                                [m[55;1H[33m186 [m            is_ready(jobs[[38;5;248m[104mjobid[m].up[READ]);                                    [100m [m[55;85H[K[59;101H5,13[54;17H[?25h[?25l[53;1H[93m184 [m[4m                                                                               [m[4m[100m [m[4m                                [m[54;1H[33m185 [m            is_ready(jobs[[38;5;248m[104mjobid[m].down[WRITE]);                                 [100m [m[54;85H[K[59;101H4,1 [53;5H[?25h[?25l[59;103H5[53;9H[?25h[?25l[59;103H9[53;13H[?25h[?25l[59;103H13[53;17H[?25h[?25l[4mi[m[59;104H4[53;18H[?25h[?25l[59;104H7[53;21H[?25h[?25l[59;104H4[53;18H[?25h[?25l[4m [m[59;104H3[53;17H[?25h[?25l[4mi[m[59;104H4[53;18H[?25h[?25l[4mn[m[59;104H5[53;19H[?25h[?25l[4m[32mint[m[59;104H6[53;20H[?25h[?25l[59;104H7[53;21H[?25h[?25l[59;104H6[53;20H[?25h[?25l[4min [m[59;104H5[53;19H[?25h[?25l[4m [m[59;104H4[53;18H[?25h[?25l[4m [m[59;104H3[53;17H[?25h[?25l[33m184 [m                                                                               [100m [m[53;85H[K[54;1H[93m185 [m[4m                                                                               [m[4m[100m [m[4m                                [m[55;38Hdown[WRITE]);[56;13H    is_ready(jobs[[38;5;248m[104mjobid[m].up[READ]);[57;9H    }[58;5H    }[59;101H5[12C4[54;17H[?25h[?25l[4mi[m[59;104H4[54;18H[?25h[?25l[4mn[m[59;104H5[54;19H[?25h[?25l[4m[32mint[m[59;104H6[54;20H[?25h[?25l[59;104H7[54;21H[?25h[?25l[4mr[m[59;104H8[54;22H[?25h[?25l[4me[m[59;104H9[54;23H[?25h[?25l[4ma[m[59;103H20[54;24H[?25h[?25l[4md[m[59;104H1[54;25H[?25h[?25l[4my[m[59;104H2[54;26H[?25h[?25l[4m:[m[59;104H3[54;27H[?25h[?25l[4m [m[59;104H2[54;26H[?25h[?25l[59;104H3[54;27H[?25h[?25l[12C[4mis_ready(jobs[[m[4m[38;5;248m[104mjobid[m[4m].down[WRITE]);[m[55;38Hup[READ]);   [56;13H}                                  [57;9H}    [58;5H}    [59;114H5[54;27H[?25h[?25l[11C[4mis_ready(jobs[[m[4m[38;5;248m[104mjobid[m[4m].down[WRITE]); [54;27H[?25h[?25l[10Cis_ready(jobs[[m[4m[38;5;248m[104mjobid[m[4m].down[WRITE]); [54;27H[?25h[?25l[9Cis_ready(jobs[[m[4m[38;5;248m[104mjobid[m[4m].down[WRITE]); [54;27H[?25h[?25l[8Cis_ready(jobs[[m[4m[38;5;248m[104mjobid[m[4m].down[WRITE]); [54;27H[?25h[?25l[7Cis_ready(jobs[[m[4m[38;5;248m[104mjobid[m[4m].down[WRITE]); [54;27H[?25h[?25l      is_ready(jobs[[m[4m[38;5;248m[104mjobid[m[4m].down[WRITE]); [54;27H[?25h[?25l     is_ready(jobs[[m[4m[38;5;248m[104mjobid[m[4m].down[WRITE]); [54;27H[?25h[?25l    is_ready(jobs[[m[4m[38;5;248m[104mjobid[m[4m].down[WRITE]); [54;27H[?25h[?25l   is_ready(jobs[[m[4m[38;5;248m[104mjobid[m[4m].down[WRITE]); [54;27H[?25h[?25l  is_ready(jobs[[m[4m[38;5;248m[104mjobid[m[4m].down[WRITE]); [54;27H[?25h[?25l is_ready(jobs[[m[4m[38;5;248m[104mjobid[m[4m].down[WRITE]); [54;27H[?25h[?25lis_ready(jobs[[m[4m[38;5;248m[104mjobid[m[4m].down[WRITE]); [54;27H[?25h[?25l=is_ready(jobs[[m[4m[38;5;248m[104mjobid[m[4m].down[WRITE]);[m[59;104H4[54;28H[?25h[?25l[4m is_ready(jobs[[m[4m[38;5;248m[104mjobid[m[4m].down[WRITE]);[m[59;104H5[54;29H[?25h[?25l[4mis_ready(jobs[[m[4m[38;5;248m[104mjobid[m[4m].down[WRITE]); [m[59;104H4[54;28H[?25h[?25l[4m is_ready(jobs[[m[4m[38;5;248m[104mjobid[m[4m].down[WRITE]);[m[59;104H5[54;29H[?25h[?25l[53;1H[93m184 [m[4m                                                                               [m[4m[100m [m[4m                                [m[54;1H[33m185 [m            [32mint[m ready = is_ready(jobs[[38;5;248m[104mjobid[m].down[WRITE]);                     [100m [m[54;85H[K[59;101H4,13[53;17H[?25h[?25l[33m184 [m                                                                               [100m [m[53;85H[K[54;1H[93m185 [m[4m            [m[4m[32mint[m[4m ready = is_ready(jobs[[m[4m[38;5;248m[104mjobid[m[4m].down[WRITE]);                     [m[4m[100m [m[4m                                [m[59;101H5,25[54;29H[?25h[?25l[33m185 [m            [32mint[m ready = is_ready(jobs[[38;5;248m[104mjobid[m].down[WRITE]);                     [100m [m[54;85H[K[55;1H[93m186 [m[4m            is_ready(jobs[[m[4m[38;5;248m[104mjobid[m[4m].up[READ]);                                    [m[4m[100m [m[4m                                [m[59;101H6[55;29H[?25h[?25l[59;104H4[55;28H[?25h[?25l[59;104H3[55;27H[?25h[?25l[4m[46m([20C)[m[59;104H2[55;26H[?25h[?25l[59;104H1[55;25H[?25h[?25l[4m([20C)[m[59;104H0[55;24H[?25h[?25l[59;103H19[55;23H[?25h[?25l[59;104H8[55;22H[?25h[?25l[59;104H7[55;21H[?25h[?25l[59;104H6[55;20H[?25h[?25l[59;104H5[55;19H[?25h[?25l[59;104H4[55;18H[?25h[?25l[59;104H3[55;17H[?25h[?25l[1C[4mis_ready(jobs[[m[4m[38;5;248m[104mjobid[m[4m].up[READ]);[m[59;104H4[55;18H[?25h[?25l[4mnis_ready(jobs[[m[4m[38;5;248m[104mjobid[m[4m].up[READ]);[m[59;104H5[55;19H[?25h[?25l[4mtis_ready(jobs[[m[4m[38;5;248m[104mjobid[m[4m].up[READ]);[m[59;104H6[55;20H[?25h[?25l[4m[32mint[m[4m is_ready(jobs[[m[4m[38;5;248m[104mjobid[m[4m].up[READ]);[m[59;104H7[55;21H[?25h[?25l[4mris_ready(jobs[[m[4m[38;5;248m[104mjobid[m[4m].up[READ]);[m[59;104H8[55;22H[?25h[?25l[4meis_ready(jobs[[m[4m[38;5;248m[104mjobid[m[4m].up[READ]);[m[59;104H9[55;23H[?25h[?25l[4mais_ready(jobs[[m[4m[38;5;248m[104mjobid[m[4m].up[READ]);[m[59;103H20[55;24H[?25h[?25l[4mdis_ready(jobs[[m[4m[38;5;248m[104mjobid[m[4m].up[READ]);[m[59;104H1[55;25H[?25h[?25l[4myis_ready(jobs[[m[4m[38;5;248m[104mjobid[m[4m].up[READ]);[m[59;104H2[55;26H[?25h[?25l[4m2is_ready(jobs[[m[4m[38;5;248m[104mjobid[m[4m].up[READ]);[m[59;104H3[55;27H[?25h[?25l[4m is_ready(jobs[[m[4m[38;5;248m[104mjobid[m[4m].up[READ]);[m[59;104H4[55;28H[?25h[?25l[4m=is_ready(jobs[[m[4m[38;5;248m[104mjobid[m[4m].up[READ]);[m[59;104H5[55;29H[?25h[?25l[4m is_ready(jobs[[m[4m[38;5;248m[104mjobid[m[4m].up[READ]);[m[59;104H6[55;30H[?25h[59;1H[K[55;29H[?25l[59;99H186,25[8C35%[55;29H[?25h[?25l[59;99H[K[59;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?1000l[?2004l"hq.c" 432L, 10734C written
[?2004l[?1l>[?25h[?1049l[23;0;0ts4698512@moss:~/CSSE2310/Assignments/a3$ make
gcc -g -Wall -pedantic -std=gnu99 -o hq hq.c -I/local/courses/csse2310/include -L/local/courses/csse2310/lib -lcsse2310a3
[01m[Khq.c:[m[K In function â€˜[01m[Kspawn[m[Kâ€™:
[01m[Khq.c:186:17:[m[K [01;35m[Kwarning: [m[Kunused variable â€˜[01m[Kready2[m[Kâ€™ [[01;35m[K-Wunused-variable[m[K]
             int [01;35m[Kready2[m[K = is_ready(jobs[jobid].up[READ]);
                 [01;35m[K^~~~~~[m[K
[01m[Khq.c:185:17:[m[K [01;35m[Kwarning: [m[Kunused variable â€˜[01m[Kready[m[Kâ€™ [[01;35m[K-Wunused-variable[m[K]
             int [01;35m[Kready[m[K = is_ready(jobs[jobid].down[WRITE]);
                 [01;35m[K^~~~~[m[K
s4698512@moss:~/CSSE2310/Assignments/a3$ spawn [K[K[K[K[K[K./hq
> spawn cat
New Job ID [0] created
> spawn ls
New Job ID [1] created
> spawn ls
^Cs4698512@moss:~/CSSE2310/Assignments/a3$ ./hq
> spawn cat
New Job ID [0] created
> s s4698512@moss:~/CSSE2310/Assignments/a3$ ./hq
> spawn cat ./gis   sigcatc .c
New Job ID [0] created
> rcv 0
// CSSE2310 Assignment 3 a3
> spawn cl  ls
New Job ID [1] created
> spawn ls
New Job ID [2] created
> ^Cs4698512@moss:~/CSSE2310/Assignments/a3$ ./hqmakevim hq.c
[?1000h[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;59r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[59;1H"hq.c" 432L, 10734C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[33m158 [m[8C}[70C[100m [m
[33m159 [m[79C[100m [m
[33m160 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m spawn [K[K[K[K[K[K./hq
> spawn cat
New Job ID [0] created
> spawn ls
New Job ID [1] created
> spawn ls
^Cs4698512@moss:~/CSSE2310/Assignments/a3$ ./hq
> spawn cat
New Job ID [0] created
> s s4698512@moss:~/CSSE2310/Assignments/a3$ ./hq
> spawn cat ./gis   sigcatc .c
New Job ID [0] created
> rcv 0
// CSSE2310 Assignment 3 a3
> spawn cl  ls
New Job ID [1] created
> spawn ls
New Job ID [2] created
> ^Cs4698512@moss:~/CSSE2310/Assignments/a3$ ./hqmakevim hq.c
[?1000h[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;59r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[59;1H"hq.c" 432L, 10734C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[33m158 [m[8C}[70C[100m [m
[33m159 [m[79C[100m [m
[33m160 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, [38;5;248m[104mjobid[m);[28C[100m [m
[33m161 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m162 [m[79C[100m [m
[33m163 [m[8Cjobs[[38;5;248m[104mjobid[m].pid = fork();[46C[100m [m
[33m164 [m[8C[33mif[m (!jobs[[38;5;248m[104mjobid[m].pid) {[48C[100m [m
[33m165 [m[12C[36m// child[m[59C[100m [m
[33m166 [m[79C[100m [m
[33m167 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[WRITE]);[36C[100m [m
[33m168 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[READ]);[39C[100m [m
[33m169 [m[79C[100m [m
[33m170 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].down[READ], STDIN_FILENO);[24C[100m [m
[33m171 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m172 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].up[WRITE], STDOUT_FILENO);[24C[100m [m
[33m173 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m
[33m174 [m[79C[100m [m
[33m175 [m[12C[32mint[m status;[56C[100m [m
[33m176 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m
[33m177 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m
[33m178 [m[16Cexit([38;5;130m99[m);[54C[100m [m
[33m179 [m[12C}[66C[100m [m
[33m180 [m[8C} [33melse[m {[63C[100m [m
[33m181 [m[12C[36m// parent[m[58C[100m [m
[33m182 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m183 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m
[33m184 [m[79C[100m [m
[33m185 [m[12C[32mint[m ready = is_ready(jobs[[38;5;248m[104mjobid[m].down[WRITE]);[21C[100m [m
[93m186 [m[4m            [m[4m[32mint[m[4m ready2 = is_ready(jobs[[m[4m[38;5;248m[104mjobid[m[4m].up[READ]);                       [m[4m[100m [m[4m                                [m[30;1H[33m187 [m[8C}[70C[100m [m
[33m188 [m    }[74C[100m [m
[33m189 [m}[78C[100m [m
[33m190 [m[79C[100m [m
[33m191 [m[36m/* report()[m[68C[100m [m
[33m192 [m[36m * --------[m[68C[100m [m
[33m193 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m
[33m194 [m[36m *[m[77C[100m [m
[33m195 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m196 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m197 [m[36m */[m[76C[100m [m
[33m198 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[43C[100m [m
[33m199 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m200 [m[79C[100m [m
[33m201 [m    [36m// Header row[m[62C[100m [m
[33m202 [m    printf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[46C[100m [m
[33m203 [m[79C[100m [m
[33m204 [m    [36m// Job status output dependent on arg present status[m[23C[100m [m
[33m205 [m[79C[100m [m
[33m206 [m    [36m// check args[m[62C[100m [m
[33m207 [m    [33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[37C[100m [m
[33m208 [m[8C[33mfor[m ([32mint[m i = [38;5;130m0[m; i <= [38;5;248m[104mjobid[m; i++) {[37C[100m [m
[33m209 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[31C[100m [m
[33m210 [m[12C[33mif[m (!jobs[i].finished) {[43C[100m [m
[33m211 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m212 [m[12C} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[28C[100m [m
[33m213 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[12C[100m [m
[33m214 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {[26C[100m [m
[33m215 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[11C[100m [m[59;99H186,13[8C41%[29;17H[?25h[?12$p[?25l[28;1H[93m185 [m[4m            [m[4m[32mint[m[4m ready = is_ready(jobs[[m[4m[38;5;248m[104mjobid[m[4m].down[WRITE]);                     [m[4m[100m [m[4m                                [m[29;1H[33m186 [m            [32mint[m ready2 = is_ready(jobs[[38;5;248m[104mjobid[m].up[READ]);                       [100m [m[29;85H[K[59;101H5,19[28;23H[?25h[?25l[3C[4m2 = is_ready(jobs[[m[4m[38;5;248m[104mjobid[m[4m].up[READ]);  [m[29;13H}                                               [30;9H}    [31;5H}    [32;5H [33;5H[36m/* report()[34;5H * --------[35;8HProduces an outline to stdout of current child processes and their statuses[m[36;7H                                                                            [37;7H[36m args: arguments provided in command line without first command[38;8Hspcs: number of original tokens[m                               [39;7H[36m/[m                               [40;5H[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[41;5H    fflush([38;5;130mstdout[m);                 [42;9H               [43;9H[36m// Header row[m[44;9Hprintf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[45;9H                             [46;9H[36m// Job status output dependent on arg present status[m[47;9H                                                    [48;9H[36m// check args[m[49;9H[33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[50;9H    [33mfor[m ([32mint[m i = [38;5;130m0[m; i <= [38;5;248m[104mjobid[m; i++) {[51;13H    printf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[52;17H[33mif[m (!jobs[i].finished) {            [53;17H    printf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[54;17H} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[55;17H    printf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[56;17H} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {              [57;17H    printf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[58;17H} [33melse[m {                                                [59;104H3[9C2[28;17H[?25h[?25l[23;20H[46m{[m[28;13H[4m[46m}[m[3C[4m                                            [m[29;9H}    [30;5H}    [31;5H [32;5H[36m/* report()[33;5H * --------[34;8HProduces an outline to stdout of current child processes and their statuses[m[35;7H                                                                            [36;7H[36m args: arguments provided in command line without first command[37;8Hspcs: number of original tokens[m                               [38;7H[36m/[m                               [39;5H[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[40;5H    fflush([38;5;130mstdout[m);                 [41;9H               [42;9H[36m// Header row[m[43;9Hprintf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[44;9H                             [45;9H[36m// Job status output dependent on arg present status[m[46;9H                                                    [47;9H[36m// check args[m[48;9H[33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobsrror[m[35m\n[m[38;5;130m"[m);[59;103H9 [28;13H[?25h[?25l[23;20H{[27;1H[93m184 [m[4m                                                                               [m[4m[100m [m[4m                                [m[28;1H[33m185 [m        }                                                                      [100m [m[28;85H[K[59;101H4,12[27;16H[?25h[?25l[23;20H[46m{[m[27;13H[4m[46m}[m[28;9H}    [29;5H}    [30;5H [31;5H[36m/* report()[32;5H * --------[33;8HProduces an outline to stdout of current child processes and their statuses[m[34;7H                                                                            [35;7H[36m args: arguments provided in command line without first command[36;8Hspcs: number of original tokens[m                               [37;7H[36m/[m                               [38;5H[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[39;5H    fflush([38;5;130mstdout[m);                 [40;9H               [41;9H[36m// Header row[m[42;9Hprintf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[43;9H                             [44;9H[36m// Job status output dependent on arg present status[m[45;9H                                                    [46;9H[36m// check args[m[47;9H[33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[48;9H    [33mfor[m ([32mint[m i = [38;5;130m0[m; i <= [38;5;248m[104mjobid[m; i++) {[49;13H    printf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[50;17H[33mif[m (!jobs[i].finished) {            [51;17H    printf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[52;17H} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[53;17H    printf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[54;17H} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {              [55;17H    printf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[56;17H} [33melse[m {                                                [57;17H    printf([38;5;130m"Error[m[35m\n[m[38;5;130m"[m);[58;17H}                     [59;103H9 [27;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m216 [m[8C}[70C[100m [m
[33m217 [m[79C[100m [m
[33m218 [m    } [33melse[m [33mif[m (spcs > [38;5;130m1[m) {      [36m// report on specific job[m[22C[100m [m[59;1H[K[59;99H184,9[9C43%[24;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m219 [m[8C[36m// check for job tokens[1][m[45C[100m [m
[33m220 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m221 [m[12C[32mint[m jobq = atoi(args[[38;5;130m0[m]);[42C[100m [m[59;99H[K[59;99H184,9[9C43%[21;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m222 [m[79C[100m [m
[33m223 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, jobq, jobs[jobq].name);[25C[100m [m
[33m224 [m[79C[100m [m[59;99H[K[59;99H184,9[9C44%[18;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m225 [m[12C[33mif[m (WIFEXITED(jobs[jobq].status)) {[32C[100m [m
[33m226 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WEXITSTATUS(jobs[jobq].status));[8C[100m [m
[33m227 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[jobq].status)) {[23C[100m [m[59;99H[K[59;99H184,9[9C45%[15;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m228 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[jobq].status));[8C[100m [m
[33m229 [m[12C} [33melse[m {[59C[100m [m
[33m230 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m[59;99H[K[59;99H184,9[9C46%[12;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m231 [m[12C}[66C[100m [m
[33m232 [m[8C} [33melse[m {[63C[100m [m
[33m233 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m[59;99H[K[59;99H184,9[9C47%[9;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m234 [m[8C}[70C[100m [m
[33m235 [m    }[74C[100m [m
[33m236 [m}[78C[100m [m[59;99H[K[59;99H184,9[9C47%[6;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m237 [m[79C[100m [m
[33m238 [m[36m/* call_signal()[m[63C[100m [m
[33m239 [m[36m * -------------[m[63C[100m [m[59;99H[K[59;99H184,9[9C48%[3;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m185 [m[4m    }                                                                          [m[4m[100m [m[4m                                [m[56;1H[33m240 [m[36m * Sends signal to child process specified[m[37C[100m [m
[33m241 [m[36m *[m[77C[100m [m
[33m242 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[59;99H[K[59;99H185,5[9C49%[1;9H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m188 [m[4m[36m/* report()[m[4m                                                                    [m[4m[100m [m[4m                                [m[56;1H[33m243 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m244 [m[36m */[m[76C[100m [m
[33m245 [m[32mvoid[m call_signal([32mchar[m** args, [32mint[m spcs) {[38C[100m [m[59;99H[K[59;99H188,9[9C50%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m191 [m[4m[36m *[m[4m                                                                             [m[4m[100m [m[4m                                [m[56;1H[33m246 [m    [33mif[m (spcs < [38;5;130m3[m) {[60C[100m [m
[33m247 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m248 [m    } [33melse[m {[67C[100m [m[59;99H[K[59;99H191,2[9C51%[1;6H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m194 [m[4m[36m */[m[4m                                                                            [m[4m[100m [m[4m                                [m[56;1H[33m249 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m250 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m
[33m251 [m[12C[33mif[m (is_number(args[[38;5;130m1[m])){[43C[100m [m[59;99H[K[59;99H194,3[9C52%[1;7H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m197 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m252 [m[16C[32mint[m sgnl = atoi(args[[38;5;130m1[m]);[38C[100m [m
[33m253 [m[16C[33mif[m (sgnl >= [38;5;130m1[m && sgnl <= [38;5;130m31[m) {[33C[100m [m
[33m254 [m[20C[32mint[m pid = jobs[job].pid;[35C[100m [m[59;99H[K[59;99H197,0-1[7C52%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m200 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m255 [m[20Ckill(pid, sgnl);[43C[100m [m
[33m256 [m[16C} [33melse[m {[55C[100m [m
[33m257 [m[20Cprintf([38;5;130m"Error: Invalid signal[m[35m\n[m[38;5;130m"[m);[25C[100m [m[59;99H[K[59;99H200,0-1[7C53%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m203 [m[4m    [m[4m[36m// check args[m[4m                                                              [m[4m[100m [m[4m                                [m[56;1H[33m258 [m[16C}[62C[100m [m
[33m259 [m[12C} [33melse[m {[59C[100m [m
[33m260 [m[16Cprintf([38;5;130m"Error: Invalid signal[m[35m\n[m[38;5;130m"[m);[29C[100m [m[59;99H[K[59;99H203,9[9C54%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m206 [m[4m            printf([m[4m[38;5;130m"[[m[4m[35m%d[m[4m[38;5;130m] [m[4m[35m%s[m[4m[38;5;130m:"[m[4m, i, jobs[i].name);                               [m[4m[100m [m[4m                                [m[56;1H[33m261 [m[12C}[66C[100m [m
[33m262 [m[8C} [33melse[m {[63C[100m [m
[33m263 [m[12Cprintf([38;5;130m"Error: invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m[59;99H[K[59;99H206,9[9C55%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m209 [m[4m            } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (WIFEXITED(jobs[i].status)) {                            [m[4m[100m [m[4m                                [m[56;1H[33m264 [m[8C}[70C[100m [m
[33m265 [m    }[74C[100m [m
[33m266 [m}[78C[100m [m[59;99H[K[59;99H209,9[9C56%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m212 [m[4m                printf([m[4m[38;5;130m"signalled([m[4m[35m%d[m[4m[38;5;130m)[m[4m[35m\n[m[4m[38;5;130m"[m[4m, WTERMSIG(jobs[i].status));           [m[4m[100m [m[4m                                [m[56;1H[33m267 [m[79C[100m [m
[33m268 [m[36m/* hq_wait()[m[67C[100m [m
[33m269 [m[36m * ---------[m[67C[100m [m[59;99H[K[59;99H212,9[9C56%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m215 [m[4m            }                                                                  [m[4m[100m [m[4m                                [m[56;1H[33m270 [m[36m * Causes hq to wait for specified seconds[m[37C[100m [m
[33m271 [m[36m *[m[77C[100m [m
[33m272 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[59;99H[K[59;99H215,9[9C57%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m218 [m[4m    } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (spcs > [m[4m[38;5;130m1[m[4m) {      [m[4m[36m// report on specific job[m[4m                      [m[4m[100m [m[4m                                [m[56;1H[33m273 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m274 [m[36m */[m[76C[100m [m
[33m275 [m[32mvoid[m hq_wait([32mchar[m** args, [32mint[m spcs) {[42C[100m [m[59;99H[K[59;99H218,9[9C58%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m221 [m[4m            [m[4m[32mint[m[4m jobq = atoi(args[[m[4m[38;5;130m0[m[4m]);                                          [m[4m[100m [m[4m                                [m[56;1H[33m276 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m277 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m278 [m    } [33melse[m {[67C[100m [m[59;99H[K[59;99H221,9[9C59%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m224 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m279 [m[8C[33mif[m (strcmp(args[[38;5;130m0[m], [38;5;130m""[m) && is_number(args[[38;5;130m0[m])) {[23C[100m [m
[33m280 [m[12Csleep(atoi(args[[38;5;130m0[m]) * [38;5;130m1000000[m);[36C[100m [m
[33m281 [m[8C} [33melse[m {[63C[100m [m[59;99H[K[59;99H224,0-1[7C60%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m227 [m[4m            } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (WIFSIGNALED(jobs[jobq].status)) {                       [m[4m[100m [m[4m                                [m[56;1H[33m282 [m[12Cprintf([38;5;130m"Error: Invalid sleep time[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m283 [m[8C}[70C[100m [m
[33m284 [m    }[74C[100m [m[59;99H[K[59;99H227,9[9C60%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m230 [m[4m                printf([m[4m[38;5;130m"running[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                           [m[4m[100m [m[4m                                [m[56;1H[33m285 [m}[78C[100m [m
[33m286 [m[79C[100m [m
[33m287 [m[36m/* send()[m[70C[100m [m[59;99H[K[59;99H230,9[9C61%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m233 [m[4m            printf([m[4m[38;5;130m"Error: Invalid job[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                    [m[4m[100m [m[4m                                [m[56;1H[33m288 [m[36m * ------[m[70C[100m [m
[33m289 [m[36m * Sends text down the pipe to specified job[m[35C[100m [m
[33m290 [m[36m *[m[77C[100m [m[59;99H[K[59;99H233,9[9C62%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m236 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[56;1H[33m291 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m292 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m293 [m[36m */[m[76C[100m [m[59;99H[K[59;99H236,1[9C63%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m239 [m[4m[36m * -------------[m[4m                                                               [m[4m[100m [m[4m                                [m[56;1H[33m294 [m[32mvoid[m send([32mchar[m** args, [32mint[m spcs) {[45C[100m [m
[33m295 [m    [33mif[m (spcs < [38;5;130m3[m) {[60C[100m [m
[33m296 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m[59;99H[K[59;99H239,9[9C64%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m242 [m[4m[36m * args: arguments provided in command line without first command[m[4m              [m[4m[100m [m[4m                                [m[56;1H[33m297 [m    } [33melse[m {[67C[100m [m
[33m298 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m299 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m[59;99H[K[59;99H242,9[9C64%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m245 [m[4m[32mvoid[m[4m call_signal([m[4m[32mchar[m[4m** args, [m[4m[32mint[m[4m spcs) {                                      [m[4m[100m [m[4m                                [m[56;1H[33m300 [m[12C[32mFILE[m* writef = fdopen(jobs[job].down[WRITE], [38;5;130m"w"[m);[17C[100m [m
[33m301 [m[12Cfprintf(writef, [38;5;130m"[m[35m%s\n[m[38;5;130m"[m, args[[38;5;130m1[m]);[34C[100m [m
[33m302 [m[8C} [33melse[m {[63C[100m [m[59;99H[K[59;99H245,9[9C65%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m248 [m[4m    } [m[4m[33melse[m[4m {                                                                   [m[4m[100m [m[4m                                [m[56;1H[33m303 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m304 [m[8C}[70C[100m [m
[33m305 [m    }[74C[100m [m[59;99H[K[59;99H248,9[9C66%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m251 [m[4m            [m[4m[33mif[m[4m (is_number(args[[m[4m[38;5;130m1[m[4m])){                                           [m[4m[100m [m[4m                                [m[56;1H[33m306 [m}[78C[100m [m
[33m307 [m[79C[100m [m
[33m308 [m[36m/* rcv()[m[71C[100m [m[59;99H[K[59;99H251,9[9C67%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m254 [m[4m                    [m[4m[32mint[m[4m pid = jobs[job].pid;                                   [m[4m[100m [m[4m                                [m[56;1H[33m309 [m[36m * -----[m[71C[100m [m
[33m310 [m[36m * Receives data through the pipe from the specified child process.[m[12C[100m [m
[33m311 [m[36m * Prints this to stdout in the parent, hq.[m[36C[100m [m[59;99H[K[59;99H254,9[9C68%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m257 [m[4m                    printf([m[4m[38;5;130m"Error: Invalid signal[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                         [m[4m[100m [m[4m                                [m[56;1H[33m312 [m[36m *[m[77C[100m [m
[33m313 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m314 [m[36m * spcs: number of original tokens[m[45C[100m [m[59;99H[K[59;99H257,9[9C69%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m260 [m[4m                printf([m[4m[38;5;130m"Error: Invalid signal[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                             [m[4m[100m [m[4m                                [m[56;1H[33m315 [m[36m */[m[76C[100m [m
[33m316 [m[32mvoid[m rcv([32mchar[m** args, [32mint[m spcs) {[46C[100m [m
[33m317 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m[59;99H[K[59;99H260,9[9C69%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m263 [m[4m            printf([m[4m[38;5;130m"Error: invalid job[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                    [m[4m[100m [m[4m                                [m[56;1H[33m318 [m[8Cprintf([38;5;130m"Error: Insufficient arguments.[m[35m\n[m[38;5;130m"[m);[28C[100m [m
[33m319 [m    } [33melse[m {[67C[100m [m
[33m320 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m[59;99H[K[59;99H263,9[9C70%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m266 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[56;1H[33m321 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m
[33m322 [m[12C[32mint[m ready = is_ready(jobs[job].up[READ]);[26C[100m [m
[33m323 [m[12C[32mFILE[m* readf = fdopen(jobs[job].up[READ], [38;5;130m"r"[m);[21C[100m [m[59;99H[K[59;99H266,1[9C71%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m269 [m[4m[36m * ---------[m[4m                                                                   [m[4m[100m [m[4m                                [m[56;1H[33m324 [m[12C[33mif[m (ready) {[55C[100m [m
[33m325 [m[16C[32mchar[m* buffer = read_line(readf);[31C[100m [m
[33m326 [m[16C[33mif[m (buffer == [38;5;130m0[m) {[45C[100m [m[59;99H[K[59;99H269,9[9C72%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m272 [m[4m[36m * args: arguments provided in command line without first command[m[4m              [m[4m[100m [m[4m                                [m[56;1H[33m327 [m[20Cprintf([38;5;130m"<no input>[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m328 [m[16C} [33melse[m [33mif[m (buffer == [38;5;130mNULL[m) {[35C[100m [m
[33m329 [m[20Cprintf([38;5;130m"<EOF>[m[35m\n[m[38;5;130m"[m);[41C[100m [m[59;99H[K[59;99H272,9[9C73%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m275 [m[4m[32mvoid[m[4m hq_wait([m[4m[32mchar[m[4m** args, [m[4m[32mint[m[4m spcs) {                                          [m[4m[100m [m[4m                                [m[56;1H[33m330 [m[16C} [33melse[m {[55C[100m [m
[33m331 [m[20Cprintf([38;5;130m"[m[35m%s\n[m[38;5;130m"[m, buffer);[36C[100m [m
[33m332 [m[16C}[62C[100m [m[59;99H[K[59;99H275,9[9C73%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m278 [m[4m    } [m[4m[33melse[m[4m {                                                                   [m[4m[100m [m[4m                                [m[56;1H[33m333 [m[12C}[66C[100m [m
[33m334 [m[8C} [33melse[m {[63C[100m [m
[33m335 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m[59;99H[K[59;99H278,9[9C74%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m281 [m[4m        } [m[4m[33melse[m[4m {                                                               [m[4m[100m [m[4m                                [m[56;1H[33m336 [m[8C}[70C[100m [m
[33m337 [m[79C[100m [m
[33m338 [m[79C[100m [m[59;99H[K[59;99H281,9[9C75%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m284 [m[4m    }                                                                          [m[4m[100m [m[4m                                [m[56;1H[33m339 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m340 [m    }[74C[100m [m
[33m341 [m}[78C[100m [m[59;99H[K[59;99H284,5[9C76%[1;9H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m287 [m[4m[36m/* send()[m[4m                                                                      [m[4m[100m [m[4m                                [m[56;1H[33m342 [m[79C[100m [m
[33m343 [m[36m/* eof()[m[71C[100m [m
[33m344 [m[36m * -----[m[71C[100m [m[59;99H[K[59;99H287,9[9C77%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m290 [m[4m[36m *[m[4m                                                                             [m[4m[100m [m[4m                                [m[56;1H[33m345 [m[36m * Closes the stdin side of the pipe so the child process can no longer read [m  [100m [m
[33m346 [m[36m * as the pipe will be EOF.[m[52C[100m [m
[33m347 [m[36m *[m[77C[100m [m[59;99H[K[59;99H290,2[9C77%[1;6H[?25h[?25l[33m290 [m[36m *[m                                                                             [100m [m[1;85H[K[34;1H[93m323 [m[4m            [m[4m[32mFILE[m[4m* readf = fdopen(jobs[job].up[READ], [m[4m[38;5;130m"r"[m[4m);                     [m[4m[100m [m[4m                                [m[59;99H323,27[34;31H[?25h[?25l[34;5H            [32mFILE[m* readf = [7m[48;5;242mfdopen(jobs[job].up[READ], [m[7m[38;5;130m[48;5;242m"r"[m[7m[48;5;242m)[m;                     [100m [m[34;85H[K[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H323,58[8C77%[34;62H[?25h[?25l[34;5H[4m            [m[4m[32mFILE[m[4m* readf = fdopen(jobs[job].up[READ], [m[4m[38;5;130m"r"[m[4m);                     [m[4m[100m [m[4m                                [m[59;1H[K[59;99H323,58[8C77%[34;62H[?25h[?25l[59;103H27[34;31H[?25h[?25l[34;5H            [32mFILE[m* readf = [7m[48;5;242mfdopen(jobs[job].up[READ], [m[7m[38;5;130m[48;5;242m"r"[m[7m[48;5;242m);[m                     [100m [m[34;85H[K[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H323,59[8C77%[34;63H[?25h[?25l[34;5H[4m            [m[4m[32mFILE[m[4m* readf = fdopen(jobs[job].up[READ], [m[4m[38;5;130m"r"[m[4m);                     [m[4m[100m [m[4m                                [m[59;1H[K[59;99H323,27[8C77%[34;31H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m287 [m[36m/* send()[m[70C[100m [m
[33m288 [m[36m * ------[m[70C[100m [m
[33m289 [m[36m * Sends text down the pipe to specified job[m[35C[100m [m[59;99H[K[59;99H323,27[8C77%[37;31H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m284 [m    }[74C[100m [m
[33m285 [m}[78C[100m [m
[33m286 [m[79C[100m [m[59;99H[K[59;99H323,27[8C76%[40;31H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m281 [m[8C} [33melse[m {[63C[100m [m
[33m282 [m[12Cprintf([38;5;130m"Error: Invalid sleep time[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m283 [m[8C}[70C[100m [m[59;99H[K[59;99H323,27[8C75%[43;31H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m278 [m    } [33melse[m {[67C[100m [m
[33m279 [m[8C[33mif[m (strcmp(args[[38;5;130m0[m], [38;5;130m""[m) && is_number(args[[38;5;130m0[m])) {[23C[100m [m
[33m280 [m[12Csleep(atoi(args[[38;5;130m0[m]) * [38;5;130m1000000[m);[36C[100m [m[59;99H[K[59;99H323,27[8C74%[46;31H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m275 [m[32mvoid[m hq_wait([32mchar[m** args, [32mint[m spcs) {[42C[100m [m
[33m276 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m277 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m[59;99H[K[59;99H323,27[8C73%[49;31H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m272 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m273 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m274 [m[36m */[m[76C[100m [m[59;99H[K[59;99H323,27[8C73%[52;31H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m269 [m[36m * ---------[m[67C[100m [m
[33m270 [m[36m * Causes hq to wait for specified seconds[m[37C[100m [m
[33m271 [m[36m *[m[77C[100m [m[59;99H[K[59;99H323,27[8C72%[55;31H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m266 [m}[78C[100m [m
[33m267 [m[79C[100m [m
[33m268 [m[36m/* hq_wait()[m[67C[100m [m[59;99H[K[59;99H323,27[8C71%[58;31H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m263 [m[12Cprintf([38;5;130m"Error: invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m264 [m[8C}[70C[100m [m
[33m265 [m    }[74C[100m [m[58;1H[93m320 [m[4m        [m[4m[33mif[m[4m (is_job[m[4m[46m([m[4margs[[m[4m[38;5;130m0[m[4m][m[4m[46m)[m[4m) {                                                 [m[4m[100m [m[4m                                [m[59;99H[K[59;99H320,27[8C70%[58;31H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m260 [m[16Cprintf([38;5;130m"Error: Invalid signal[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m261 [m[12C}[66C[100m [m
[33m262 [m[8C} [33melse[m {[63C[100m [m[58;1H[93m317 [m[4m    [m[4m[33mif[m[4m (spcs < [m[4m[38;5;130m2[m[4m) {                                                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H317,19[8C69%[58;23H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m257 [m[20Cprintf([38;5;130m"Error: Invalid signal[m[35m\n[m[38;5;130m"[m);[25C[100m [m
[33m258 [m[16C}[62C[100m [m
[33m259 [m[12C} [33melse[m {[59C[100m [m[58;1H[93m314 [m[4m[36m * spcs: number of original tokens[m[4m                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H314,27[8C69%[58;31H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m254 [m[20C[32mint[m pid = jobs[job].pid;[35C[100m [m
[33m255 [m[20Ckill(pid, sgnl);[43C[100m [m
[33m256 [m[16C} [33melse[m {[55C[100m [m[58;1H[93m311 [m[4m[36m * Prints this to stdout in the parent, hq.[m[4m                                    [m[4m[100m [m[4m                                [m[59;99H[K[59;99H311,27[8C68%[58;31H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m251 [m[12C[33mif[m (is_number(args[[38;5;130m1[m])){[43C[100m [m
[33m252 [m[16C[32mint[m sgnl = atoi(args[[38;5;130m1[m]);[38C[100m [m
[33m253 [m[16C[33mif[m (sgnl >= [38;5;130m1[m && sgnl <= [38;5;130m31[m) {[33C[100m [m[58;1H[93m308 [m[4m[36m/* rcv()[m[4m                                                                       [m[4m[100m [m[4m                                [m[59;99H[K[59;99H308,8[9C67%[58;12H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m248 [m    } [33melse[m {[67C[100m [m
[33m249 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m250 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m[50;16H[46m{[m[58;1H[93m305 [m[4m    [m[4m[46m}[m[4m                                                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H305,5[9C66%[58;9H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m245 [m[32mvoid[m call_signal([32mchar[m** args, [32mint[m spcs) {[38C[100m [m
[33m246 [m    [33mif[m (spcs < [38;5;130m3[m) {[60C[100m [m
[33m247 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m[53;16H{[58;1H[93m302 [m[4m        } [m[4m[33melse[m[4m {                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H302,16[8C65%[58;20H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m242 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m243 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m244 [m[36m */[m[76C[100m [m[58;1H[93m299 [m[4m            [m[4m[32mint[m[4m job = atoi[m[4m[46m([m[4margs[[m[4m[38;5;130m0[m[4m][m[4m[46m)[m[4m;                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H299,27[8C64%[58;31H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m239 [m[36m * -------------[m[63C[100m [m
[33m240 [m[36m * Sends signal to child process specified[m[37C[100m [m
[33m241 [m[36m *[m[77C[100m [m[58;1H[93m296 [m[4m        printf([m[4m[38;5;130m"Error: Insufficient arguments[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H296,27[8C64%[58;31H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m236 [m}[78C[100m [m
[33m237 [m[79C[100m [m
[33m238 [m[36m/* call_signal()[m[63C[100m [m[58;1H[93m293 [m[4m[36m */[m[4m                                                                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H293,3[9C63%[58;7H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m233 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m234 [m[8C}[70C[100m [m
[33m235 [m    }[74C[100m [m[58;1H[93m290 [m[4m[36m *[m[4m                                                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H290,2[9C62%[58;6H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m230 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m231 [m[12C}[66C[100m [m
[33m232 [m[8C} [33melse[m {[63C[100m [m[58;1H[93m287 [m[4m[36m/* send()[m[4m                                                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H287,9[9C61%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m227 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[jobq].status)) {[23C[100m [m
[33m228 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[jobq].status));[8C[100m [m
[33m229 [m[12C} [33melse[m {[59C[100m [m[52;16H[46m{[m[58;1H[93m284 [m[4m    [m[4m[46m}[m[4m                                                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H284,5[9C60%[58;9H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m224 [m[79C[100m [m
[33m225 [m[12C[33mif[m (WIFEXITED(jobs[jobq].status)) {[32C[100m [m
[33m226 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WEXITSTATUS(jobs[jobq].status));[8C[100m [m[55;16H{


[93m281 [m[4m        } [m[4m[33melse[m[4m {                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H281,16[8C60%[58;20H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m221 [m[12C[32mint[m jobq = atoi(args[[38;5;130m0[m]);[42C[100m [m
[33m222 [m[79C[100m [m
[33m223 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, jobq, jobs[jobq].name);[25C[100m [m[58;1H[93m278 [m[4m    } [m[4m[33melse[m[4m {                                                                   [m[4m[100m [m[4m                                [m[59;99H[K[59;99H278,12[8C59%[58;16H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m218 [m    } [33melse[m [33mif[m (spcs > [38;5;130m1[m) {      [36m// report on specific job[m[22C[100m [m
[33m219 [m[8C[36m// check for job tokens[1][m[45C[100m [m
[33m220 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m[58;1H[93m275 [m[4m[32mvoid[m[4m hq_wait([m[4m[32mchar[m[4m** args, [m[4m[32mint[m[4m spcs) {                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H275,27[8C58%[58;31H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m215 [m[12C}[66C[100m [m
[33m216 [m[8C}[70C[100m [m
[33m217 [m[79C[100m [m[58;1H[93m272 [m[4m[36m * args: arguments provided in command line without first command[m[4m              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H272,27[8C57%[58;31H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m212 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[11C[100m [m
[33m213 [m[12C} [33melse[m {[59C[100m [m
[33m214 [m[16Cprintf([38;5;130m"Error[m[35m\n[m[38;5;130m"[m);[45C[100m [m[58;1H[93m269 [m[4m[36m * ---------[m[4m                                                                   [m[4m[100m [m[4m                                [m[59;99H[K[59;99H269,12[8C56%[58;16H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m209 [m[12C} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[28C[100m [m
[33m210 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[12C[100m [m
[33m211 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {[26C[100m [m[37;45H[46m{[m[58;1H[93m266 [m[4m[46m}[m[4m                                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H266,1[9C56%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m206 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[31C[100m [m
[33m207 [m[12C[33mif[m (!jobs[i].finished) {[43C[100m [m
[33m208 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m[40;45H{[58;1H[93m263 [m[4m            printf([m[4m[38;5;130m"Error: invalid job[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                    [m[4m[100m [m[4m                                [m[59;99H[K[59;99H263,27[8C55%[58;31H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m203 [m    [36m// check args[m[62C[100m [m
[33m204 [m    [33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[37C[100m [m
[33m205 [m[8C[33mfor[m ([32mint[m i = [38;5;130m0[m; i <= [38;5;248m[104mjobid[m; i++) {[37C[100m [m[58;1H[93m260 [m[4m                printf([m[4m[38;5;130m"Error: Invalid signal[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H260,27[8C54%[58;31H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m200 [m[79C[100m [m
[33m201 [m    [36m// Job status output dependent on arg present status[m[23C[100m [m
[33m202 [m[79C[100m [m[58;1H[93m257 [m[4m                    printf[m[4m[46m([m[4m[38;5;130m"Error: Invalid signal[m[4m[35m\n[m[4m[38;5;130m"[m[4m[46m)[m[4m;                         [m[4m[100m [m[4m                                [m[59;99H[K[59;99H257,27[8C53%[58;31H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m197 [m[79C[100m [m
[33m198 [m    [36m// Header row[m[62C[100m [m
[33m199 [m    printf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[46C[100m [m[58;1H[93m254 [m[4m                    [m[4m[32mint[m[4m pid = jobs[job].pid;                                   [m[4m[100m [m[4m                                [m[59;99H[K[59;99H254,27[8C52%[58;31H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m194 [m[36m */[m[76C[100m [m
[33m195 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[43C[100m [m
[33m196 [m    fflush([38;5;130mstdout[m);[60C[100m [m[58;1H[93m251 [m[4m            [m[4m[33mif[m[4m (is_number(args[[m[4m[38;5;130m1[m[4m])){                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H251,27[8C52%[58;31H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m191 [m[36m *[m[77C[100m [m
[33m192 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m193 [m[36m * spcs: number of original tokens[m[45C[100m [m[58;1H[93m248 [m[4m    } [m[4m[33melse[m[4m {                                                                   [m[4m[100m [m[4m                                [m[59;99H[K[59;99H248,12[8C51%[58;16H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m188 [m[36m/* report()[m[68C[100m [m
[33m189 [m[36m * --------[m[68C[100m [m
[33m190 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m[58;1H[93m245 [m[4m[32mvoid[m[4m call_signal([m[4m[32mchar[m[4m** args, [m[4m[32mint[m[4m spcs) {                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H245,27[8C50%[58;31H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m185 [m    }[74C[100m [m
[33m186 [m}[78C[100m [m
[33m187 [m[79C[100m [m[58;1H[93m242 [m[4m[36m * args: arguments provided in command line without first command[m[4m              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H242,27[8C49%[58;31H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m182 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m183 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m
[33m184 [m[8C}[70C[100m [m[58;1H[93m239 [m[4m[36m * -------------[m[4m                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H239,16[8C48%[58;20H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m179 [m[12C}[66C[100m [m
[33m180 [m[8C} [33melse[m {[63C[100m [m
[33m181 [m[12C[36m// parent[m[58C[100m [m[17;40H[46m{[m[58;1H[93m236 [m[4m[46m}[m[4m                                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H236,1[9C47%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m176 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m
[33m177 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m
[33m178 [m[16Cexit([38;5;130m99[m);[54C[100m [m[20;40H{[58;1H[93m233 [m[4m            printf([m[4m[38;5;130m"Error: Invalid job[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                    [m[4m[100m [m[4m                                [m[59;99H[K[59;99H233,27[8C47%[58;31H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m173 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m
[33m174 [m[79C[100m [m
[33m175 [m[12C[32mint[m status;[56C[100m [m[58;1H[93m230 [m[4m                printf([m[4m[38;5;130m"running[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H230,27[8C46%[58;31H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m170 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].down[READ], STDIN_FILENO);[24C[100m [m
[33m171 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m172 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].up[WRITE], STDOUT_FILENO);[24C[100m [m[58;1H[93m227 [m[4m            } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (WIFSIGNALED(jobs[jobq].status)) {                       [m[4m[100m [m[4m                                [m[59;99H[K[59;99H227,27[8C45%[58;31H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m167 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[WRITE]);[36C[100m [m
[33m168 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[READ]);[39C[100m [m
[33m169 [m[79C[100m [m[58;1H[93m224 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H224,0-1[7C44%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m164 [m[8C[33mif[m (!jobs[[38;5;248m[104mjobid[m].pid) {[48C[100m [m
[33m165 [m[12C[36m// child[m[59C[100m [m
[33m166 [m[79C[100m [m[58;1H[93m221 [m[4m            [m[4m[32mint[m[4m jobq = atoi(args[[m[4m[38;5;130m0[m[4m]);                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H221,27[8C43%[58;31H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m161 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m162 [m[79C[100m [m
[33m163 [m[8Cjobs[[38;5;248m[104mjobid[m].pid = fork();[46C[100m [m[58;1H[93m218 [m[4m    } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (spcs > [m[4m[38;5;130m1[m[4m) {      [m[4m[36m// report on specific job[m[4m                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H218,27[8C43%[58;31H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m158 [m[8C}[70C[100m [m
[33m159 [m[79C[100m [m
[33m160 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, [38;5;248m[104mjobid[m);[28C[100m [m[56;24H[46m{[m

[93m215 [m[4m            [m[4m[46m}[m[4m                                                                  [m[4m[100m [m[4m                                [m[59;99H[K[59;99H215,13[8C42%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m155 [m[8C[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].up) < [38;5;130m0[m) {[40C[100m [m
[33m156 [m[12Cperror([38;5;130m"Creating up pipe"[m);[40C[100m [m
[33m157 [m[12Cexit([38;5;130m1[m);[59C[100m [m[58;1H[93m212 [m[4m                printf([m[4m[38;5;130m"signalled([m[4m[35m%d[m[4m[38;5;130m)[m[4m[35m\n[m[4m[38;5;130m"[m[4m, WTERMSIG(jobs[i].status));           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H212,27[8C41%[58;31H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m152 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m153 [m[8C}[70C[100m [m
[33m154 [m[79C[100m [m[58;1H[93m209 [m[4m            } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (WIFEXITED(jobs[i].status)) {                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H209,27[8C40%[58;31H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m149 [m[79C[100m [m
[33m150 [m[8C[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].down) < [38;5;130m0[m) {[38C[100m [m
[33m151 [m[12Cperror([38;5;130m"Creating down pipe"[m);[38C[100m [m[58;1H[93m206 [m[4m            printf([m[4m[38;5;130m"[[m[4m[35m%d[m[4m[38;5;130m] [m[4m[35m%s[m[4m[38;5;130m:"[m[4m, i, jobs[i].name);                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H206,27[8C39%[58;31H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m146 [m[8Cjobs = realloc(jobs, ([38;5;248m[104mjobid[m + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));[16C[100m [m
[33m147 [m[79C[100m [m
[33m148 [m[8Cstrcpy(jobs[[38;5;248m[104mjobid[m].name, args[[38;5;130m0[m]);[37C[100m [m[58;1H[93m203 [m[4m    [m[4m[36m// check args[m[4m                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H203,17[8C39%[58;21H[?25h[?25l[38;1H[93m183 [m[4m            close(jobs[[m[4m[38;5;248m[104mjobid[m[4m].up[WRITE]);                                      [m[4m[100m [m[4m                                [m[58;1H[33m203 [m    [36m// check args[m                                                              [100m [m[58;85H[K[59;99H183,41[38;45H[?25h[?25l[59;1H1 more line; before #3  23 seconds ago[59;99H[K[38;1H[33m183 [m            close(jobs[[38;5;248m[104mjobid[m].up[WRITE]);                                      [100m [m[38;85H[K[39;1H[93m184 [m[4m                                                                               [m[4m[100m [m[4m                                [m[40;9H    }[41;5H    }[42;5H}[43;5H           [44;5H[36m/* report()[45;8H--------[m                                                                   [46;7H[36m Produces an outline to stdout of current child processes and their statuses[m[47;7H                                                               [48;8H[36margs: arguments provided in command line without first command[49;7H spcs: number of original tokens[50;5H */[m                                 [51;5H[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[52;9Hfflush([38;5;130mstdout[m);[53;9H             [54;9H[36m// Header row[m                [55;9Hprintf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[56;9H                                                    [57;9H[36m// Job status output dependent on arg present status[m[58;9H             [59;99H184,12[8C38%[39;16H[?25h[?25l[59;1H[38;5;130m-- INSERT --[m[59;14H[K[59;99H184,12[8C38%[39;16H[?25h[?25l[59;104H3[39;17H[?25h[?25l[33m184 [m                                                                               [100m [m[39;85H[K[40;1H[93m185 [m[4m                                                                               [m[4m[100m [m[4m                                [m[41;9H    }[42;5H    }[43;5H}[44;5H           [45;5H[36m/* report()[46;8H--------[m                                                                   [47;7H[36m Produces an outline to stdout of current child processes and their statuses[m[48;7H                                                               [49;8H[36margs: arguments provided in command line without first command[50;7H spcs: number of original tokens[51;5H */[m                                 [52;5H[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[53;9Hfflush([38;5;130mstdout[m);[54;9H             [55;9H[36m// Header row[m                [56;9Hprintf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[57;9H                                                    [58;9H[36m// Job status output dependent on arg present status[m[59;101H5[40;17H[?25h[59;1H[K[40;5H[?25l[59;99H185,0-1[7C38%[40;5H[?25h[?25l[4mfdopen(jobs[job].up[READ],[m[1C[4m[38;5;130m"r"[m[4m);[m[41;13H [42;9H    }[43;5H    }[44;5H}[45;5H           [46;5H[36m/* report()[47;8H--------[m                                                                   [48;7H[36m Produces an outline to stdout of current child processes and their statuses[m[49;7H                                                               [50;8H[36margs: arguments provided in command line without first command[51;7H spcs: number of original tokens[52;5H */[m                                 [53;5H[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[54;9Hfflush([38;5;130mstdout[m);[55;9H             [56;9H[36m// Header row[m                [57;9Hprintf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[58;9H                                                    [59;103H1  [40;5H[?25h[?25l[59;1H[38;5;130m-- INSERT --[m[59;99H[K[59;99H185,1[9C38%[40;5H[?25h[?25l[4m    fdopen(jobs[job].up[READ], [m[4m[38;5;130m"r"[m[4m);[m[59;103H5[40;9H[?25h[?25l[4m    fdopen(jobs[job].up[READ], [m[4m[38;5;130m"r"[m[4m);[m[59;103H9[40;13H[?25h[?25l[4m    fdopen(jobs[job].up[READ], [m[4m[38;5;130m"r"[m[4m);[m[59;103H13[40;17H[?25h[?25l[59;103H45[40;49H[?25h[?25l[33m185 [m            fdopen(jobs[job].up[READ], [38;5;130m"r"[m);                                   [100m [m[40;85H[K[41;1H[93m186 [m[4m                                                                               [m[4m[100m [m[4m                                [m[42;13H [43;9H    }[44;5H    }[45;5H}[46;5H           [47;5H[36m/* report()[48;8H--------[m                                                                   [49;7H[36m Produces an outline to stdout of current child processes and their statuses[m[50;7H                                                               [51;8H[36margs: arguments provided in command line without first command[52;7H spcs: number of original tokens[53;5H */[m                                 [54;5H[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[55;9Hfflush([38;5;130mstdout[m);[56;9H             [57;9H[36m// Header row[m                [58;9Hprintf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[59;101H6,13[41;17H[?25h[?25l[4mp[m[59;104H4[41;18H[?25h[?25l[4m [m[59;104H3[41;17H[?25h[59;1H[K[41;16H[?25l[59;99H186,12[8C38%[41;16H[?25h[?25l[1C[4mfdopen(jobs[job].up[READ],[m[1C[4m[38;5;130m"r"[m[4m);[m[43;13H [44;9H    }[45;5H    }[46;5H}[47;5H           [48;5H[36m/* report()[49;8H--------[m                                                                   [50;7H[36m Produces an outline to stdout of current child processes and their statuses[m[51;7H                                                               [52;8H[36margs: arguments provided in command line without first command[53;7H spcs: number of original tokens[54;5H */[m                                 [55;5H[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[56;9Hfflush([38;5;130mstdout[m);[57;9H             [58;9H[36m// Header row[m                [59;104H3[41;17H[?25h[?25l[59;104H4[41;18H[?25h[?25l[59;104H5[41;19H[?25h[?25l[59;104H6[41;20H[?25h[?25l[59;104H7[41;21H[?25h[?25l[59;104H8[41;22H[?25h[?25l[1C[4m[46m([23C)[m[59;104H9[41;23H[?25h[?25l[4m([23C)[m[59;103H20[41;24H[?25h[?25l[59;104H1[41;25H[?25h[?25l[59;104H2[41;26H[?25h[?25l[59;104H3[41;27H[?25h[?25l[1C[4m[46m[[3C][m[59;104H4[41;28H[?25h[?25l[4m[job][m[59;104H5[41;29H[?25h[?25l[59;104H6[41;30H[?25h[?25l[59;104H7[41;31H[?25h[?25l[4m[46m[[3C][m[59;104H8[41;32H[?25h[?25l[4m[job][m[59;104H9[41;33H[?25h[?25l[59;103H30[41;34H[?25h[?25l[59;104H1[41;35H[?25h[?25l[1C[4m[46m[[4C][m[59;104H2[41;36H[?25h[?25l[4m[READ][m[59;104H3[41;37H[?25h[?25l[59;104H4[41;38H[?25h[?25l[59;104H5[41;39H[?25h[?25l[59;104H6[41;40H[?25h[?25l[4m[46m[[4C][m[59;104H7[41;41H[?25h[?25l[4m[READ][m[59;104H8[41;42H[?25h[?25l[59;104H9[41;43H[?25h[?25l[59;103H40[41;44H[?25h[?25l[59;104H1[41;45H[?25h[?25l[59;104H2[41;46H[?25h[?25l[41;23H[4m[46m([23C)[m[59;104H3[41;47H[?25h[?25l[41;23H[4m([23C)[m[59;104H4[41;48H[?25h[?25l[41;17H[4m                                [m[43;13H}[44;9H}    [45;5H}    [46;5H [47;5H[36m/* report()[48;5H * --------[49;8HProduces an outline to stdout of current child processes and their statuses[m[50;7H                                                                            [51;7H[36m args: arguments provided in command line without first command[52;8Hspcs: number of original tokens[m                               [53;7H[36m/[m                               [54;5H[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[55;5H    fflush([38;5;130mstdout[m);                 [56;9H               [57;9H[36m// Header row[m[58;9Hprintf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[59;103H0-1[41;5H[?25h[?25l[59;99H[K[59;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?1000l[?2004l"hq.c" 433L, 10665C written
[?2004l[?1l>[?25h[?1049l[23;0;0ts4698512@moss:~/CSSE2310/Assignments/a3$ make
gcc -g -Wall -pedantic -std=gnu99 -o hq hq.c -I/local/courses/csse2310/include -L/local/courses/csse2310/lib -lcsse2310a3
[01m[Khq.c:[m[K In function â€˜[01m[Kspawn[m[Kâ€™:
[01m[Khq.c:185:25:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Kjob[m[Kâ€™ undeclared (first use in this function); did you mean â€˜[01m[Kjobs[m[Kâ€™?
             fdopen(jobs[[01;31m[Kjob[m[K].up[READ], "r");
                         [01;31m[K^~~[m[K
                         [32m[Kjobs[m[K
[01m[Khq.c:185:25:[m[K [01;36m[Knote: [m[Keach undeclared identifier is reported only once for each function it appears in
make: *** [makefile:10: hq] Error 1
s4698512@moss:~/CSSE2310/Assignments/a3$ makevim hq.c
[?1000h[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;59r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[59;1H"hq.c" 433L, 10665C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[33m158 [m[8C}[70C[100m [m
[33m159 [m[79C[100m [m
[33m160 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, [38;5;248m[104mjobid[m);[28C[100m [m
[33m161 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m162 [m[79C[100m [m
[33m163 [m[8Cjobs[[38;5;248m[104mjobid[m].pid = fork();[46C[100m [m
[33m164 [m[8C[33mif[m (!jobs[[38;5;248m[104mjobid[m].pid) {[48C[100m [m
[33m165 [m[12C[36m// child[m[59C[100m [m
[33m166 [m[79C[100m [m
[33m167 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[WRITE]);[36C[100m [m
[33m168 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[READ]);[39C[100m [m
[33m169 [m[79C[100m [m
[33m170 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].down[READ], STDIN_FILENO);[24C[100m [m
[33m171 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m172 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].up[WRITE], STDOUT_FILENO);[24C[100m [m
[33m173 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m
[33m174 [m[79C[100m [m
[33m175 [m[12C[32mint[m status;[56C[100m [m
[33m176 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m
[33m177 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m
[33m178 [m[16Cexit([38;5;130m99[m);[54C[100m [m
[33m179 [m[12C}[66C[100m [m
[33m180 [m[8C} [33melse[m {[63C[100m [m
[33m181 [m[12C[36m// parent[m[58C[100m [m
[33m182 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m183 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m
[33m184 [m[79C[100m [m
[33m185 [m[12Cfdopen(jobs[job].up[READ], [38;5;130m"r"[m);[35C[100m [m
[93m186 [m[4m                                                                               [m[4m[100m [m[4m                                [m[30;1H[33m187 [m[79C[100m [m
[33m188 [m[8C}[70C[100m [m
[33m189 [m    }[74C[100m [m
[33m190 [m}[78C[100m [m
[33m191 [m[79C[100m [m
[33m192 [m[36m/* report()[m[68C[100m [m
[33m193 [m[36m * --------[m[68C[100m [m
[33m194 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m
[33m195 [m[36m *[m[77C[100m [m
[33m196 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m197 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m198 [m[36m */[m[76C[100m [m
[33m199 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[43C[100m [m
[33m200 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m201 [m[79C[100m [m
[33m202 [m    [36m// Header row[m[62C[100m [m
[33m203 [m    printf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[46C[100m [m
[33m204 [m[79C[100m [m
[33m205 [m    [36m// Job status output dependent on arg present status[m[23C[100m [m
[33m206 [m[79C[100m [m
[33m207 [m    [36m// check args[m[62C[100m [m
[33m208 [m    [33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[37C[100m [m
[33m209 [m[8C[33mfor[m ([32mint[m i = [38;5;130m0[m; i <= [38;5;248m[104mjobid[m; i++) {[37C[100m [m
[33m210 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[31C[100m [m
[33m211 [m[12C[33mif[m (!jobs[i].finished) {[43C[100m [m
[33m212 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m213 [m[12C} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[28C[100m [m
[33m214 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[12C[100m [m
[33m215 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {[26C[100m [m[59;99H186,0-1[7C41%[29;5H[?25h[?12$p[?25l[27;1H[93m184 [m[4m                                                                               [m[4m[100m [m[4m                                [m[29;1H[33m186 [m                                                                               [100m [m[29;85H[K[59;101H4,12 [27;16H[?25h[?25l[33m184 [m                                                                               [100m [m[27;85H[K[28;1H[93m185 [m[4m            fdopen(jobs[job].up[READ], [m[4m[38;5;130m"r"[m[4m);                                   [m[4m[100m [m[4m                                [m[59;101H5,27[28;31H[?25h[?25l[4m[46m[[3C][m[59;104H8[28;32H[?25h[?25l[59;1H[38;5;130m-- INSERT --[m[59;14H[K[59;99H185,28[8C41%[28;32H[?25h[?25l[4m[46mi[m[4m].up[READ], [m[4m[38;5;130m"r"[m[4m);[28;32Hi[m[4m[46m][m[59;104H9[28;33H[?25h[?25l[4m[38;5;248m[104mjobi[m[4m[46md[m[4m].up[READ], [m[4m[38;5;130m"r"[m[4m);[m[28;33H[4m[38;5;248m[104md[m[4m[46m][m[59;103H30[28;34H[?25h[59;1H[K[28;33H[?25l[4m[[5C][m[59;99H185,29[8C41%[28;33H[?25h[?25l[59;99H[K[59;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?1000l[?2004l"hq.c" 433L, 10667C written
[?2004l[?1l>[?25h[?1049l[23;0;0ts4698512@moss:~/CSSE2310/Assignments/a3$ make
gcc -g -Wall -pedantic -std=gnu99 -o hq hq.c -I/local/courses/csse2310/include -L/local/courses/csse2310/lib -lcsse2310a3
s4698512@moss:~/CSSE2310/Assignments/a3$ ./spawn [K[K[K[K[K[Khq
> ps  spawn cat
New Job ID [0] created
> spawn ls
New Job ID [1] created
> spawn ls
^Cs4698512@moss:~/CSSE2310/Assignments/a3$ ./hqmakevim hq.c[4Pmakevim hq.c
[?1000h[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;59r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[59;1H"hq.c" 433L, 10667C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[33m157 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m158 [m[8C}[70C[100m [m
[33m159 [m[79C[100m [m
[33m160 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, [38;5;248m[104mjobid[m);[28C[100m [m
[33m161 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m162 [m[79C[100m [m
[33m163 [m[8Cjobs[[38;5;248m[104mjobid[m].pid = fork();[46C[100m [m
[33m164 [m[8C[33mif[m (!jobs[[38;5;248m[104mjobid[m].pid) {[48C[100m [m
[33m165 [m[12C[36m// child[m[59C[100m [m
[33m166 [m[79C[100m [m
[33m167 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[WRITE]);[36C[100m [m
[33m168 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[READ]);[39C[100m [m
[33m169 [m[79C[100m [m
[33m170 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].down[READ], STDIN_FILENO);[24C[100m [m
[33m171 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m172 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].up[WRITE], STDOUT_FILENO);[24C[100m [m
[33m173 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m
[33m174 [m[79C[100m [m
[33m175 [m[12C[32mint[m status;[56C[100m [m
[33m176 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m
[33m177 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m
[33m178 [m[16Cexit([38;5;130m99[m);[54C[100m [m
[33m179 [m[12C}[66C[100m [m
[33m180 [m[8C} [33melse[m {[63C[100m [m
[33m181 [m[12C[36m// parent[m[58C[100m [m
[33m182 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m183 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m
[33m184 [m[79C[100m [m
[93m185 [m[4m            fdopen(jobs[[m[4m[38;5;248m[104mjobid[m[4m].up[READ], [m[4m[38;5;130m"r"[m[4m);                                 [m[4m[100m [m[4m                                [m[30;1H[33m186 [m[79C[100m [m
[33m187 [m[79C[100m [m
[33m188 [m[8C}[70C[100m [m
[33m189 [m    }[74C[100m [m
[33m190 [m}[78C[100m [m
[33m191 [m[79C[100m [m
[33m192 [m[36m/* report()[m[68C[100m [m
[33m193 [m[36m * --------[m[68C[100m [m
[33m194 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m
[33m195 [m[36m *[m[77C[100m [m
[33m196 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m197 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m198 [m[36m */[m[76C[100m [m
[33m199 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[43C[100m [m
[33m200 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m201 [m[79C[100m [m
[33m202 [m    [36m// Header row[m[62C[100m [m
[33m203 [m    printf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[46C[100m [m
[33m204 [m[79C[100m [m
[33m205 [m    [36m// Job status output dependent on arg present status[m[23C[100m [m
[33m206 [m[79C[100m [m
[33m207 [m    [36m// check args[m[62C[100m [m
[33m208 [m    [33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[37C[100m [m
[33m209 [m[8C[33mfor[m ([32mint[m i = [38;5;130m0[m; i <= [38;5;248m[104mjobid[m; i++) {[37C[100m [m
[33m210 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[31C[100m [m
[33m211 [m[12C[33mif[m (!jobs[i].finished) {[43C[100m [m
[33m212 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m213 [m[12C} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[28C[100m [m
[33m214 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[12C[100m [m[59;99H185,13[8C41%[29;17H[?25h[?12$p[?25l[33m185 [m            fdopen(jobs[[38;5;248m[104mjobid[m].up[READ], [38;5;130m"r"[m);                                 [100m [m[29;85H[K[30;1H[93m186 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;101H6,0-1[30;5H[?25h[?25l[33m186 [m                                                                               [100m [m[30;85H[K[31;1H[93m187 [m[4m            fdopen(jobs[job].up[READ], [m[4m[38;5;130m"r"[m[4m);                                   [m[4m[100m [m[4m                                [m[32;13H [33;9H    }[34;5H    }[35;5H}[36;5H           [37;5H[36m/* report()[38;8H--------[m                                                                   [39;7H[36m Produces an outline to stdout of current child processes and their statuses[m[40;7H                                                               [41;8H[36margs: arguments provided in command line without first command[42;7H spcs: number of original tokens[43;5H */[m                                 [44;5H[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[45;9Hfflush([38;5;130mstdout[m);[46;9H             [47;9H[36m// Header row[m                [48;9Hprintf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[49;9H                                                    [50;9H[36m// Job status output dependent on arg present status[m[51;9H             [52;9H[36m// check args[m                         [53;9H[33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[54;13H[33mfor[m ([32mint[m i = [38;5;130m0[m; i <= [38;5;248m[104mjobid[m; i++) {      [55;17Hprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[56;17H[33mif[m (!jobs[i].finished) {[57;17H    printf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);               [58;17H} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {                [59;101H7,13 [31;17H[?25h[?25l[11C[4m[46m[[3C][m[59;103H28[31;32H[?25h[?25l[59;1H[38;5;130m-- INSERT --[m[59;14H[K[59;99H187,28[8C41%[31;32H[?25h[?25l[4m[46mi[m[4m].up[READ], [m[4m[38;5;130m"r"[m[4m);[31;32Hi[m[4m[46m][m[59;104H9[31;33H[?25h[?25l[4m[38;5;248m[104mjobi[m[4m[46md[m[4m].up[READ], [m[4m[38;5;130m"r"[m[4m);[m[31;33H[4m[38;5;248m[104md[m[4m[46m][m[59;103H30[31;34H[?25h[?25l[59;104H1[31;35H[?25h[?25l[31;28H[4m[[5C][m[59;104H2[31;36H[?25h[?25l[59;104H3[31;37H[?25h[?25l[1C[4m[46m[[4C][m[59;104H4[31;38H[?25;17H[33mif[m (!jobs[i].finished) {[57;17H    printf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);               [58;17H} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {                [59;101H7,13 [31;17H[?25h[?25l[11C[4m[46m[[3C][m[59;103H28[31;32H[?25h[?25l[59;1H[38;5;130m-- INSERT --[m[59;14H[K[59;99H187,28[8C41%[31;32H[?25h[?25l[4m[46mi[m[4m].up[READ], [m[4m[38;5;130m"r"[m[4m);[31;32Hi[m[4m[46m][m[59;104H9[31;33H[?25h[?25l[4m[38;5;248m[104mjobi[m[4m[46md[m[4m].up[READ], [m[4m[38;5;130m"r"[m[4m);[m[31;33H[4m[38;5;248m[104md[m[4m[46m][m[59;103H30[31;34H[?25h[?25l[59;104H1[31;35H[?25h[?25l[31;28H[4m[[5C][m[59;104H2[31;36H[?25h[?25l[59;104H3[31;37H[?25h[?25l[1C[4m[46m[[4C][m[59;104H4[31;38H[?25h[?25l[59;104H5[31;39H[?25h[?25l[4m[READ][m[59;104H6[31;40H[?25h[?25l[59;104H7[31;41H[?25h[?25l[59;104H8[31;42H[?25h[?25l[59;104H7[31;41H[?25h[?25l[59;104H6[31;40H[?25h[?25l[4m[46m[[4C][m[59;104H5[31;39H[?25h[?25l[59;104H4[31;38H[?25h[?25l[4m[[m[4m[46mR[m[4mEAD][m[4m[46m,[m[4m [m[4m[38;5;130m"r"[m[4m); [m[31;37H[4m[46m[[m[4mR[m[3C[4m[46m][m[4m,[m[59;104H3[31;37H[?25h[?25l[4m[[m[4m[46mR[m[4mEAD][m[4m[46m,[m[4m [m[4m[38;5;130m"r"[m[4m); [m[31;36H[4m[46m[[m[4mR[m[3C[4m[46m][m[4m,[m[59;104H2[31;36H[?25h[?25l[4m[46mD[m[4m[REA[m[4m[46mD[m[4m], [m[4m[38;5;130m"r"[m[4m);[31;36HD[m[4m[46m[[m[3C[4mD[m[4m[46m][m[59;104H3[31;37H[?25h[?25l[4m[46mO[m[4m[REA[m[4m[46mD[m[4m], [m[4m[38;5;130m"r"[m[4m);[31;37HO[m[4m[46m[[m[3C[4mD[m[4m[46m][m[59;104H4[31;38H[?25h[?25l[4m[46mW[m[4m[REA[m[4m[46mD[m[4m], [m[4m[38;5;130m"r"[m[4m);[31;38HW[m[4m[46m[[m[3C[4mD[m[4m[46m][m[59;104H5[31;39H[?25h[?25l[4m[46mN[m[4m[REA[m[4m[46mD[m[4m], [m[4m[38;5;130m"r"[m[4m);[31;39HN[m[4m[46m[[m[3C[4mD[m[4m[46m][m[59;104H6[31;40H[?25h[?25l[4m[[m[4m[46mR[m[4mEAD][m[4m[46m,[m[4m [m[4m[38;5;130m"r"[m[4m); [m[31;39H[4m[46m[[m[4mR[m[3C[4m[46m][m[4m,[m[59;104H5[31;39H[?25h[?25l[4m[[m[4m[46mR[m[4mEAD][m[4m[46m,[m[4m [m[4m[38;5;130m"r"[m[4m); [m[31;38H[4m[46m[[m[4mR[m[3C[4m[46m][m[4m,[m[59;104H4[31;38H[?25h[?25l[4m[[m[4m[46mR[m[4mEAD][m[4m[46m,[m[4m [m[4m[38;5;130m"r"[m[4m); [m[31;37H[4m[46m[[m[4mR[m[3C[4m[46m][m[4m,[m[59;104H3[31;37H[?25h[?25l[4m[[m[4m[46mR[m[4mEAD][m[4m[46m,[m[4m [m[4m[38;5;130m"r"[m[4m); [m[31;36H[4m[46m[[m[4mR[m[3C[4m[46m][m[4m,[m[59;104H2[31;36H[?25h[?25l[4m[46md[m[4m[REA[m[4m[46mD[m[4m], [m[4m[38;5;130m"r"[m[4m);[31;36Hd[m[4m[46m[[m[3C[4mD[m[4m[46m][m[59;104H3[31;37H[?25h[?25l[4m[33md[m[4m[33m[46mo[m[4m[REA[m[4m[46mD[m[4m], [m[4m[38;5;130m"r"[m[4m);[m[31;37H[4m[33mo[m[4m[46m[[m[3C[4mD[m[4m[46m][m[59;104H4[31;38H[?25h[?25l[4mdo[m[4m[46mw[m[4m[REA[m[4m[46mD[m[4m], [m[4m[38;5;130m"r"[m[4m);[31;38Hw[m[4m[46m[[m[3C[4mD[m[4m[46m][m[59;104H5[31;39H[?25h[?25l[4m[46mn[m[4m[REA[m[4m[46mD[m[4m], [m[4m[38;5;130m"r"[m[4m);[31;39Hn[m[4m[46m[[m[3C[4mD[m[4m[46m][m[59;104H6[31;40H[?25h[?25l[59;104H7[31;41H[?25h[?25l[4m[READ][m[59;104H8[31;42H[?25h[?25l[59;104H9[31;43H[?25h[?25l[59;103H40[31;44H[?25h[?25l[4m[46m[[4C][m[59;104H1[31;45H[?25h[?25l[4m][m[4m[46m,[m[4m [m[4m[38;5;130m"r"[m[4m); [m[31;44H[4m[46m][m[4m,[m[59;104H0[31;44H[?25h[?25l[4m][m[4m[46m,[m[4m [m[4m[38;5;130m"r"[m[4m); [m[31;43H[4m[46m][m[4m,[m[59;103H39[31;43H[?25h[?25l[4m][m[4m[46m,[m[4m [m[4m[38;5;130m"r"[m[4m); [m[31;42H[4m[46m][m[4m,[m[59;104H8[31;42H[?25h[?25l[4m][m[4m[46m,[m[4m [m[4m[38;5;130m"r"[m[4m); [m[31;41H[4m[46m][m[4m,[m[59;104H7[31;41H[?25h[?25l[4m[46mW[m[4m], [m[4m[38;5;130m"r"[m[4m);[31;41HW[m[4m[46m][m[59;104H8[31;42H[?25h[?25l[4m[46mR[m[4m], [m[4m[38;5;130m"r"[m[4m);[31;42HR[m[4m[46m][m[59;104H9[31;43H[?25h[?25l[4m[46mI[m[4m], [m[4m[38;5;130m"r"[m[4m);[31;43HI[m[4m[46m][m[59;103H40[31;44H[?25h[?25l[4m[46mT[m[4m], [m[4m[38;5;130m"r"[m[4m);[31;44HT[m[4m[46m][m[59;104H1[31;45H[?25h[?25l[4m[46mE[m[4m], [m[4m[38;5;130m"r"[m[4m);[31;45HE[m[4m[46m][m[59;104H2[31;46H[?25h[?25l[59;104H3[31;47H[?25h[?25l[31;40H[4m[WRITE][m[59;104H4[31;48H[?25h[?25l[59;104H5[31;49H[?25h[?25l[59;104H6[31;50H[?25h[?25l[59;104H7[31;51H[?25h[?25l[4m[38;5;130m"[m[4m); [m[59;104H6[31;50H[?25h[?25l[4m[38;5;130mw"[m[4m);[m[59;104H7[31;51H[?25h[59;1H[K[31;50H[?25l[59;99H187,46[8C41%[31;50H[?25h[?25l[59;99H[K[59;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?1000l[?2004l"hq.c" 434L, 10717C written
[?2004l[?1l>[?25h[?1049l[23;0;0ts4698512@moss:~/CSSE2310/Assignments/a3$ make
gcc -g -Wall -pedantic -std=gnu99 -o hq hq.c -I/local/courses/csse2310/include -L/local/courses/csse2310/lib -lcsse2310a3
s4698512@moss:~/CSSE2310/Assignments/a3$ ./[K[K./hq
> spawn cat
New Job ID [0] created
> spawn ls
New Job ID [1] created
> spawn ls
^Cs4698512@moss:~/CSSE2310/Assignments/a3$ ./hqmakevim hq.c[4P./hqmakevim hq.c
[?1000h[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;59r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[59;1H"hq.c" 434L, 10717C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[33m159 [m[79C[100m [m
[33m160 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, [38;5;248m[104mjobid[m);[28C[100m [m
[33m161 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m162 [m[79C[100m [m
[33m163 [m[8Cjobs[[38;5;248m[104mjobid[m].pid = fork();[46C[100m [m
[33m164 [m[8C[33mif[m (!jobs[[38;5;248m[104mjobid[m].pid) {[48C[100m [m
[33m165 [m[12C[36m// child[m[59C[100m [m
[33m166 [m[79C[100m [m
[33m167 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[WRITE]);[36C[100m [m
[33m168 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[READ]);[39C[100m [m
[33m169 [m[79C[100m [m
[33m170 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].down[READ], STDIN_FILENO);[24C[100m [m
[33m171 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m172 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].up[WRITE], STDOUT_FILENO);[24C[100m [m
[33m173 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m
[33m174 [m[79C[100m [m
[33m175 [m[12C[32mint[m status;[56C[100m [m
[33m176 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m
[33m177 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m
[33m178 [m[16Cexit([38;5;130m99[m);[54C[100m [m
[33m179 [m[12C}[66C[100m [m
[33m180 [m[8C} [33melse[m {[63C[100m [m
[33m181 [m[12C[36m// parent[m[58C[100m [m
[33m182 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m183 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m
[33m184 [m[79C[100m [m
[33m185 [m[12Cfdopen(jobs[[38;5;248m[104mjobid[m].up[READ], [38;5;130m"r"[m);[33C[100m [m
[33m186 [m[79C[100m [m
[93m187 [m[4m            fdopen(jobs[[m[4m[38;5;248m[104mjobid[m[4m].down[WRITE], [m[4m[38;5;130m"w"[m[4m);                              [m[4m[100m [m[4m                                [m[30;1H[33m188 [m[79C[100m [m
[33m189 [m[8C}[70C[100m [m
[33m190 [m    }[74C[100m [m
[33m191 [m}[78C[100m [m
[33m192 [m[79C[100m [m
[33m193 [m[36m/* report()[m[68C[100m [m
[33m194 [m[36m * --------[m[68C[100m [m
[33m195 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m
[33m196 [m[36m *[m[77C[100m [m
[33m197 [m[36m * args: arguments provided in command line without first comman = [38;5;130m0[m; i <= [38;5;248m[104mjobid[m; i++) {[37C[100m [m
[33m211 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[31C[100m [m
[33m212 [m[12C[33mif[m (!jobs[i].finished) {[43C[100m [m
[33m213 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m214 [m[12C} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[28C[100m [m
[33m215 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[12C[100m [m
[33m216 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {[26C[100m [m[59;99H187,13[8C42%[29;17H[?25h[?12$p[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m217 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[11C[100m [m
[33m218 [m[12C} [33melse[m {[59C[100m [m
[33m219 [m[16Cprintf([38;5;130m"Error[m[35m\n[m[38;5;130m"[m);[45C[100m [m[59;1H[K[59;99H187,13[8C42%[26;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m220 [m[12C}[66C[100m [m
[33m221 [m[8C}[70C[100m [m
[33m222 [m[79C[100m [m[59;99H[K[59;99H187,13[8C43%[23;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m223 [m    } [33melse[m [33mif[m (spcs > [38;5;130m1[m) {      [36m// report on specific job[m[22C[100m [m
[33m224 [m[8C[36m// check for job tokens[1][m[45C[100m [m
[33m225 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m[59;99H[K[59;99H187,13[8C44%[20;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m226 [m[12C[32mint[m jobq = atoi(args[[38;5;130m0[m]);[42C[100m [m
[33m227 [m[79C[100m [m
[33m228 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, jobq, jobs[jobq].name);[25C[100m [m[59;99H[K[59;99H187,13[8C45%[17;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m229 [m[79C[100m [m
[33m230 [m[12C[33mif[m (WIFEXITED(jobs[jobq].status)) {[32C[100m [m
[33m231 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WEXITSTATUS(jobs[jobq].status));[8C[100m [m[59;99H[K[59;99H187,13[8C46%[14;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m232 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[jobq].status)) {[23C[100m [m
[33m233 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[jobq].status));[8C[100m [m
[33m234 [m[12C} [33melse[m {[59C[100m [m[59;99H[K[59;99H187,13[8C46%[11;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m235 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m236 [m[12C}[66C[100m [m
[33m237 [m[8C} [33melse[m {[63C[100m [m[59;99H[K[59;99H187,13[8C47%[8;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m238 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m239 [m[8C}[70C[100m [m
[33m240 [m    }[74C[100m [m[59;99H[K[59;99H187,13[8C48%[5;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m180 [m[8C} [33melse[m {[63C[100m [m
[33m181 [m[12C[36m// parent[m[58C[100m [m
[33m182 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m[59;99H[K[59;99H187,13[8C47%[8;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m238 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m239 [m[8C}[70C[100m [m
[33m240 [m    }[74C[100m [m[59;99H[K[59;99H187,13[8C48%[5;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m241 [m}[78C[100m [m
[33m242 [m[79C[100m [m
[33m243 [m[36m/* call_signal()[m[63C[100m [m[59;99H[K[59;99H187,13[8C49%[2;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m189 [m[4m        }                                                                      [m[4m[100m [m[4m                                [m[56;1H[33m244 [m[36m * -------------[m[63C[100m [m
[33m245 [m[36m * Sends signal to child process specified[m[37C[100m [m
[33m246 [m[36m *[m[77C[100m [m[59;99H[K[59;99H189,9[9C50%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m192 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m247 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m248 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m249 [m[36m */[m[76C[100m [m[59;99H[K[59;99H192,0-1[7C50%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m195 [m[4m[36m * Produces an outline to stdout of current child processes and their statuses[m[4m [m[4m[100m [m[4m                                [m[56;1H[33m250 [m[32mvoid[m call_signal([32mchar[m** args, [32mint[m spcs) {[38C[100m [m
[33m251 [m    [33mif[m (spcs < [38;5;130m3[m) {[60C[100m [m
[33m252 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m[59;99H[K[59;99H195,13[8C51%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m198 [m[4m[36m * spcs: number of original tokens[m[4m                                             [m[4m[100m [m[4m                                [m[56;1H[33m253 [m    } [33melse[m {[67C[100m [m
[33m254 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m255 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m[59;99H[K[59;99H198,13[8C52%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m201 [m[4m    fflush([m[4m[38;5;130mstdout[m[4m);                                                            [m[4m[100m [m[4m                                [m[56;1H[33m256 [m[12C[33mif[m (is_number(args[[38;5;130m1[m])){[43C[100m [m
[33m257 [m[16C[32mint[m sgnl = atoi(args[[38;5;130m1[m]);[38C[100m [m
[33m258 [m[16C[33mif[m (sgnl >= [38;5;130m1[m && sgnl <= [38;5;130m31[m) {[33C[100m [m[59;99H[K[59;99H201,13[8C53%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m204 [m[4m    printf([m[4m[38;5;130m"[Job] cmd:status[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                              [m[4m[100m [m[4m                                [m[56;1H[33m259 [m[20C[32mint[m pid = jobs[job].pid;[35C[100m [m
[33m260 [m[20Ckill(pid, sgnl);[43C[100m [m
[33m261 [m[16C} [33melse[m {[55C[100m [m[59;99H[K[59;99H204,13[8C53%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m207 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m262 [m[20Cprintf([38;5;130m"Error: Invalid signal[m[35m\n[m[38;5;130m"[m);[25C[100m [m
[33m263 [m[16C}[62C[100m [m
[33m264 [m[12C} [33melse[m {[59C[100m [m[59;99H[K[59;99H207,0-1[7C54%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m210 [m[4m        [m[4m[33mfor[m[4m [m[4m[46m([m[4m[32mint[m[4m i = [m[4m[38;5;130m0[m[4m; i <= [m[4m[38;5;248m[104mjobid[m[4m; i++[m[4m[46m)[m[4m {                                     [m[4m[100m [m[4m                                [m[56;1H[33m265 [m[16Cprintf([38;5;130m"Error: Invalid signal[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m266 [m[12C}[66C[100m [m
[33m267 [m[8C} [33melse[m {[63C[100m [m[59;99H[K[59;99H210,13[8C55%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m213 [m[4m                printf([m[4m[38;5;130m"running[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                           [m[4m[100m [m[4m                                [m[56;1H[33m268 [m[12Cprintf([38;5;130m"Error: invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m269 [m[8C}[70C[100m [m
[33m270 [m    }[74C[100m [m[59;99H[K[59;99H213,13[8C56%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m216 [m[4m            } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (WIFSIGNALED(jobs[i].status)) {                          [m[4m[100m [m[4m                                [m[56;1H[33m271 [m}[78C[100m [m
[33m272 [m[79C[100m [m
[33m273 [m[36m/* hq_wait()[m[67C[100m [m[59;99H[K[59;99H216,13[8C57%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m219 [m[4m                printf([m[4m[38;5;130m"Error[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                             [m[4m[100m [m[4m                                [m[56;1H[33m274 [m[36m * ---------[m[67C[100m [m
[33m275 [m[36m * Causes hq to wait for specified seconds[m[37C[100m [m
[33m276 [m[36m *[m[77C[100m [m[59;99H[K[59;99H219,13[8C57%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m222 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m277 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m278 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m279 [m[36m */[m[76C[100m [m[59;99H[K[59;99H222,0-1[7C58%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m225 [m[4m        [m[4m[33mif[m[4m (is_job(args[[m[4m[38;5;130m0[m[4m])) {                                                 [m[4m[100m [m[4m                                [m[56;1H[33m280 [m[32mvoid[m hq_wait([32mchar[m** args, [32mint[m spcs) {[42C[100m [m
[33m281 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m282 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m[59;99H[K[59;99H225,13[8C59%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m228 [m[4m            printf([m[4m[38;5;130m"[[m[4m[35m%d[m[4m[38;5;130m] [m[4m[35m%s[m[4m[38;5;130m:"[m[4m, jobq, jobs[jobq].name);                         [m[4m[100m [m[4m                                [m[56;1H[33m283 [m    } [33melse[m {[67C[100m [m
[33m284 [m[8C[33mif[m (strcmp(args[[38;5;130m0[m], [38;5;130m""[m) && is_number(args[[38;5;130m0[m])) {[23C[100m [m
[33m285 [m[12Csleep(atoi(args[[38;5;130m0[m]) * [38;5;130m1000000[m);[36C[100m [m[59;99H[K[59;99H228,13[8C60%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m231 [m[4m                printf([m[4m[38;5;130m"exited([m[4m[35m%d[m[4m[38;5;130m)[m[4m[35m\n[m[4m[38;5;130m"[m[4m, WEXITSTATUS(jobs[jobq].status));        [m[4m[100m [m[4m                                [m[56;1H[33m286 [m[8C} [33melse[m {[63C[100m [m
[33m287 [m[12Cprintf([38;5;130m"Error: Invalid sleep time[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m288 [m[8C}[70C[100m [m[59;99H[K[59;99H231,13[8C61%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m234 [m[4m            } [m[4m[33melse[m[4m {                                                           [m[4m[100m [m[4m                                [m[56;1H[33m289 [m    }[74C[100m [m
[33m290 [m}[78C[100m [m
[33m291 [m[79C[100m [m[59;99H[K[59;99H234,13[8C61%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m237 [m[4m        } [m[4m[33melse[m[4m {                                                               [m[4m[100m [m[4m                                [m[56;1H[33m292 [m[36m/* send()[m[70C[100m [m
[33m293 [m[36m * ------[m[70C[100m [m
[33m294 [m[36m * Sends text down the pipe to specified job[m[35C[100m [m[59;99H[K[59;99H237,13[8C62%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m240 [m[4m    }                                                                          [m[4m[100m [m[4m                                [m[56;1H[33m295 [m[36m *[m[77C[100m [m
[33m296 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m297 [m[36m * spcs: number of original tokens[m[45C[100m [m[59;99H[K[59;99H240,5[9C63%[1;9H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m243 [m[4m[36m/* call_signal()[m[4m                                                               [m[4m[100m [m[4m                                [m[56;1H[33m298 [m[36m */[m[76C[100m [m
[33m299 [m[32mvoid[m send([32mchar[m** args, [32mint[m spcs) {[45C[100m [m
[33m300 [m    [33mif[m (spcs < [38;5;130m3[m) {[60C[100m [m[59;99H[K[59;99H243,13[8C64%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m246 [m[4m[36m *[m[4m                                                                             [m[4m[100m [m[4m                                [m[56;1H[33m301 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m302 [m    } [33melse[m {[67C[100m [m
[33m303 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m[59;99H[K[59;99H246,2[9C65%[1;6H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m249 [m[4m[36m */[m[4m                                                                            [m[4m[100m [m[4m                                [m[56;1H[33m304 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m
[33m305 [m[12C[32mFILE[m* writef = fdopen(jobs[job].down[WRITE], [38;5;130m"w"[m);[17C[100m [m
[33m306 [m[12Cfprintf(writef, [38;5;130m"[m[35m%s\n[m[38;5;130m"[m, args[[38;5;130m1[m]);[34C[100m [m[59;99H[K[59;99H249,3[9C65%[1;7H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m252 [m[4m        printf([m[4m[38;5;130m"Error: Insufficient arguments[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                             [m[4m[100m [m[4m                                [m[56;1H[33m307 [m[8C} [33melse[m {[63C[100m [m
[33m308 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m309 [m[8C}[70C[100m [m[59;99H[K[59;99H252,13[8C66%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m255 [m[4m            [m[4m[32mint[m[4m job = atoi(args[[m[4m[38;5;130m0[m[4m]);                                           [m[4m[100m [m[4m                                [m[56;1H[33m310 [m    }[74C[100m [m
[33m311 [m}[78C[100m [m
[33m312 [m[79C[100m [m[59;99H[K[59;99H255,13[8C67%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m258 [m[4m                [m[4m[33mif[m[4m (sgnl >= [m[4m[38;5;130m1[m[4m && sgnl <= [m[4m[38;5;130m31[m[4m) {                                 [m[4m[100m [m[4m                                [m[56;1H[33m313 [m[36m/* rcv()[m[71C[100m [m
[33m314 [m[36m * -----[m[71C[100m [m
[33m315 [m[36m * Receives data through the pipe from the specified child process.[m[12C[100m [m[59;99H[K[59;99H258,13[8C68%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m261 [m[4m                } [m[4m[33melse[m[4m {                                                       [m[4m[100m [m[4m                                [m[56;1H[33m316 [m[36m * Prints this to stdout in the parent, hq.[m[36C[100m [m
[33m317 [m[36m *[m[77C[100m [m
[33m318 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[59;99H[K[59;99H261,13[8C69%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m264 [m[4m            } [m[4m[33melse[m[4m {                                                           [m[4m[100m [m[4m                                [m[56;1H[33m319 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m320 [m[36m */[m[76C[100m [m
[33m321 [m[32mvoid[m rcv([32mchar[m** args, [32mint[m spcs) {[46C[100m [m[59;99H[K[59;99H264,13[8C69%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m267 [m[4m        } [m[4m[33melse[m[4m {                                                               [m[4m[100m [m[4m                                [m[56;1H[33m322 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m323 [m[8Cprintf([38;5;130m"Error: Insufficient arguments.[m[35m\n[m[38;5;130m"[m);[28C[100m [m
[33m324 [m    } [33melse[m {[67C[100m [m[59;99H[K[59;99H267,13[8C70%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m270 [m[4m    }                                                                          [m[4m[100m [m[4m                                [m[56;1H[33m325 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m326 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m
[33m327 [m[12C[32mint[m ready = is_ready(jobs[job].up[READ]);[26C[100m [m[59;99H[K[59;99H270,5[9C71%[1;9H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m273 [m[4m[36m/* hq_wait()[m[4m                                                                   [m[4m[100m [m[4m                                [m[56;1H[33m328 [m[12C[32mFILE[m* readf = fdopen(jobs[job].up[READ], [38;5;130m"r"[m);[21C[100m [m
[33m329 [m[12C[33mif[m (ready) {[55C[100m [m
[33m330 [m[16C[32mchar[m* buffer = read_line(readf);[31C[100m [m[59;99H[K[59;99H273,12[8C72%[1;16H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m276 [m[4m[36m *[m[4m                                                                             [m[4m[100m [m[4m                                [m[56;1H[33m331 [m[16C[33mif[m (buffer == [38;5;130m0[m) {[45C[100m [m
[33m332 [m[20Cprintf([38;5;130m"<no input>[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m333 [m[16C} [33melse[m [33mif[m (buffer == [38;5;130mNULL[m) {[35C[100m [m[59;99H[K[59;99H276,2[9C73%[1;6H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m279 [m[4m[36m */[m[4m                                                                            [m[4m[100m [m[4m                                [m[56;1H[33m334 [m[20Cprintf([38;5;130m"<EOF>[m[35m\n[m[38;5;130m"[m);[41C[100m [m
[33m335 [m[16C} [33melse[m {[55C[100m [m
[33m336 [m[20Cprintf([38;5;130m"[m[35m%s\n[m[38;5;130m"[m, buffer);[36C[100m [m[59;99H[K[59;99H279,3[9C73%[1;7H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m282 [m[4m        printf([m[4m[38;5;130m"Error: Insufficient arguments[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                             [m[4m[100m [m[4m                                [m[56;1H[33m337 [m[16C}[62C[100m [m
[33m338 [m[12C}[66C[100m [m
[33m339 [m[8C} [33melse[m {[63C[100m [m[59;99H[K[59;99H282,13[8C74%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m285 [m[4m            sleep(atoi(args[[m[4m[38;5;130m0[m[4m]) * [m[4m[38;5;130m1000000[m[4m);                                    [m[4m[100m [m[4m                                [m[56;1H[33m340 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m341 [m[8C}[70C[100m [m
[33m342 [m[79C[100m [m[59;99H[K[59;99H285,13[8C75%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m288 [m[4m        }                                                                      [m[4m[100m [m[4m                                [m[56;1H[33m343 [m[79C[100m [m
[33m344 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m345 [m    }[74C[100m [m[59;99H[K[59;99H288,9[9C76%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m291 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m346 [m}[78C[100m [m
[33m347 [m[79C[100m [m
[33m348 [m[36m/* eof()[m[71C[100m [m[59;99H[K[59;99H291,0-1[7C77%[1;5H[?25h[?25l[33m291 [m                                                                               [100m [m[1;85H[K[40;1H[93m330 [m[4m                [m[4m[32mchar[m[4m* buffer = read_line(readf);                               [m[4m[100m [m[4m                                [m[59;99H330,32 [40;36H[?25h[?25l[40;5H                [32mchar[m* buffer = [7m[48;5;242mread_line(readf)[m;                               [100m [m[40;85H[K[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H330,48[8C77%[40;52H[?25h[?25l[40;5H[4m                [m[4m[32mchar[m[4m* buffer = read_line(readf);                               [m[4m[100m [m[4m                                [m[59;1H[K[59;99H330,29[8C77%[40;33H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m288 [m[8C}[70C[100m [m
[33m289 [m    }[74C[100m [m
[33m290 [m}[78C[100m [m[59;99H[K[59;99H330,29[8C76%[43;33H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m285 [m[12Csleep(atoi(args[[38;5;130m0[m]) * [38;5;130m1000000[m);[36C[100m [m
[33m286 [m[8C} [33melse[m {[63C[100m [m
[33m287 [m[12Cprintf([38;5;130m"Error: Invalid sleep time[m[35m\n[m[38;5;130m"[m);[29C[100m [m[59;99H[K[59;99H330,29[8C75%[46;33H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m282 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m283 [m    } [33melse[m {[67C[100m [m
[33m284 [m[8C[33mif[m (strcmp(args[[38;5;130m0[m], [38;5;130m""[m) && is_number(args[[38;5;130m0[m])) {[23C[100m [m[59;99H[K[59;99H330,29[8C74%[49;33H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m279 [m[36m */[m[76C[100m [m
[33m280 [m[32mvoid[m hq_wait([32mchar[m** args, [32mint[m spcs) {[42C[100m [m
[33m281 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m[59;99H[K[59;99H330,29[8C73%[52;33H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m276 [m[36m *[m[77C[100m [m
[33m277 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m278 [m[36m * spcs: number of original tokens[m[45C[100m [m[59;99H[K[59;99H330,29[8C73%[55;33H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m273 [m[36m/* hq_wait()[m[67C[100m [m
[33m274 [m[36m * ---------[m[67C[100m [m
[33m275 [m[36m * Causes hq to wait for specified seconds[m[37C[100m [m[59;99H[K[59;99H330,29[8C72%[58;33H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m270 [m    }[74C[100m [m
[33m271 [m}[78C[100m [m
[33m272 [m[79C[100m [m[58;1H[93m327 [m[4m            [m[4m[32mint[m[4m ready = is_ready(jobs[job].up[READ]);                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H327,29[8C71%[58;33H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m267 [m[8C} [33melse[m {[63C[100m [m
[33m268 [m[12Cprintf([38;5;130m"Error: invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m269 [m[8C}[70C[100m [m[58;1H[93m324 [m[4m    } [m[4m[33melse[m[4m {                                                                   [m[4m[100m [m[4m                                [m[59;99H[K[59;99H324,12[8C70%[58;16H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m264 [m[12C} [33melse[m {[59C[100m [m
[33m265 [m[16Cprintf([38;5;130m"Error: Invalid signal[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m266 [m[12C}[66C[100m [m[58;1H[93m321 [m[4m[32mvoid[m[4m rcv([m[4m[32mchar[m[4m** args, [m[4m[32mint[m[4m spcs) {                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H321,29[8C69%[58;33H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m261 [m[16C} [33melse[m {[55C[100m [m
[33m262 [m[20Cprintf([38;5;130m"Error: Invalid signal[m[35m\n[m[38;5;130m"[m);[25C[100m [m
[33m263 [m[16C}[62C[100m [m[58;1H[93m318 [m[4m[36m * args: arguments provided in command line without first command[m[4m              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H318,29[8C69%[58;33H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m258 [m[16C[33mif[m (sgnl >= [38;5;130m1[m && sgnl <= [38;5;130m31[m) {[33C[100m [m
[33m259 [m[20C[32mint[m pid = jobs[job].pid;[35C[100m [m
[33m260 [m[20Ckill(pid, sgnl);[43C[100m [m[58;1H[93m315 [m[4m[36m * Receives data through the pipe from the specified child process.[m[4m            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H315,29[8C68%[58;33H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m255 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m
[33m256 [m[12C[33mif[m (is_number(args[[38;5;130m1[m])){[43C[100m [m
[33m257 [m[16C[32mint[m sgnl = atoi(args[[38;5;130m1[m]);[38C[100m [m[58;1H[93m312 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H312,0-1[7C67%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m252 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m253 [m    } [33melse[m {[67C[100m [m
[33m254 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m[56;20H[46m{[m

[93m309 [m[4m        [m[4m[46m}[m[4m                                                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H309,9[9C66%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m249 [m[36m */[m[76C[100m [m
[33m250 [m[32mvoid[m call_signal([32mchar[m** args, [32mint[m spcs) {[38C[100m [m
[33m251 [m    [33mif[m (spcs < [38;5;130m3[m) {[60C[100m [m[58;1H[93m306 [m[4m            fprintf(writef, [m[4m[38;5;130m"[m[4m[35m%s\n[m[4m[38;5;130m"[m[4m, args[[m[4m[38;5;130m1[m[4m]);                                  [m[4m[100m [m[4m                                [m[59;99H[K[59;99H306,29[8C65%[58;33H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m246 [m[36m *[m[77C[100m [m
[33m247 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m248 [m[36m * spcs: number of original tokens[m[45C[100m [m[58;1H[93m303 [m[4m        [m[4m[33mif[m[4m (is_job(args[[m[4m[38;5;130m0[m[4m])) {                                                 [m[4m[100m [m[4m                                [m[59;99H[K[59;99H303,29[8C65%[58;33H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m243 [m[36m/* call_signal()[m[63C[100m [m
[33m244 [m[36m * -------------[m[63C[100m [m
[33m245 [m[36m * Sends signal to child process specified[m[37C[100m [m[58;1H[93m300 [m[4m    [m[4m[33mif[m[4m (spcs < [m[4m[38;5;130m3[m[4m) {                                                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H300,19[8C64%[58;23H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m240 [m    }[74C[100m [m
[33m241 [m}[78C[100m [m
[33m242 [m[79C[100m [m[58;1H[93m297 [m[4m[36m * spcs: number of original tokens[m[4m                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H297,29[8C63%[58;33H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m237 [m[8C} [33melse[m {[63C[100m [m
[33m238 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m239 [m[8C}[70C[100m [m[58;1H[93m294 [m[4m[36m * Sends text down the pipe to specified job[m[4m                                   [m[4m[100m [m[4m                                [m[59;99H[K[59;99H294,29[8C62%[58;33H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m234 [m[12C} [33melse[m {[59C[100m [m
[33m235 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m236 [m[12C}[66C[100m [m[58;1H[93m291 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H291,0-1[7C61%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m231 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WEXITSTATUS(jobs[jobq].status));[8C[100m [m
[33m232 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[jobq].status)) {[23C[100m [m
[33m233 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[jobq].status));[8C[100m [m[56;20H[46m{[m

[93m288 [m[4m        [m[4m[46m}[m[4m                                                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H288,9[9C61%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m228 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, jobq, jobs[jobq].name);[25C[100m [m
[33m229 [m[79C[100m [m
[33m230 [m[12C[33mif[m (WIFEXITED(jobs[jobq].status)) {[32C[100m [m[58;1H[93m285 [m[4m            sleep(atoi(args[[m[4m[38;5;130m0[m[4m]) * [m[4m[38;5;130m1000000[m[4m);                                    [m[4m[100m [m[4m                                [m[59;99H[K[59;99H285,29[8C60%[58;33H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m225 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m226 [m[12C[32mint[m jobq = atoi(args[[38;5;130m0[m]);[42C[100m [m
[33m227 [m[79C[100m [m[58;1H[93m282 [m[4m        printf([m[4m[38;5;130m"Error: Insufficient arguments[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H282,29[8C59%[58;33H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m222 [m[79C[100m [m
[33m223 [m    } [33melse[m [33mif[m (spcs > [38;5;130m1[m) {      [36m// report on specific job[m[22C[100m [m
[33m224 [m[8C[36m// check for job tokens[1][m[45C[100m [m[58;1H[93m279 [m[4m[36m */[m[4m                                                                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H279,3[9C58%[58;7H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m219 [m[16Cprintf([38;5;130m"Error[m[35m\n[m[38;5;130m"[m);[45C[100m [m
[33m220 [m[12C}[66C[100m [m
[33m221 [m[8C}[70C[100m [m[58;1H[93m276 [m[4m[36m *[m[4m                                                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H276,2[9C57%[58;6H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m216 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {[26C[100m [m
[33m217 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[11C[100m [m
[33m218 [m[12C} [33melse[m {[59C[100m [m[58;1H[93m273 [m[4m[36m/* hq_wait()[m[4m                                                                   [m[4m[100m [m[4m                                [m[59;99H[K[59;99H273,12[8C57%[58;16H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m213 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m214 [m[12C} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[28C[100m [m
[33m215 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[12C[100m [m[41;16H[46m{[m[58;1H[93m270 [m[4m    [m[4m[46m}[m[4m                                                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H270,5[9C56%[58;9H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m210 [m[8C[33mfor[m ([32mint[m i = [38;5;130m0[m; i <= [38;5;248m[104mjobid[m; i++) {[37C[100m [m
[33m211 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[31C[100m [m
[33m212 [m[12C[33mif[m (!jobs[i].finished) {[43C[100m [m[44;16H{[58;1H[93m267 [m[4m        } [m[4m[33melse[m[4m {                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H267,16[8C55%[58;20H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m207 [m[79C[100m [m
[33m208 [m    [36m// check args[m[62C[100m [m
[33m209 [m    [33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[37C[100m [m[58;1H[93m264 [m[4m            } [m[4m[33melse[m[4m {                                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H264,20[8C54%[58;24H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m204 [m    printf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[46C[100m [m
[33m205 [m[79C[100m [m
[33m206 [m    [36m// Job status output dependent on arg present status[m[23C[100m [m[58;1H[93m261 [m[4m                } [m[4m[33melse[m[4m {                                                       [m[4m[100m [m[4m                                [m[59;99H[K[59;99H261,24[8C53%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m201 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m202 [m[79C[100m [m
[33m203 [m    [36m// Header row[m[62C[100m [m[58;1H[93m258 [m[4m                [m[4m[33mif[m[4m (sgnl >= [m[4m[38;5;130m1[m[4m && sgnl <= [m[4m[38;5;130m31[m[4m) {                                 [m[4m[100m [m[4m                                [m[59;99H[K[59;99H258,29[8C53%[58;33H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m198 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m199 [m[36m */[m[76C[100m [m
[33m200 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[43C[100m [m[58;1H[93m255 [m[4m            [m[4m[32mint[m[4m job = atoi(args[[m[4m[38;5;130m0[m[4m]);                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H255,29[8C52%[58;33H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m195 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m
[33m196 [m[36m *[m[77C[100m [m
[33m197 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[58;1H[93m252 [m[4m        printf([m[4m[38;5;130m"Error: Insufficient arguments[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H252,29[8C51%[58;33H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m192 [m[79C[100m [m
[33m193 [m[36m/* report()[m[68C[100m [m
[33m194 [m[36m * --------[m[68C[100m [m[58;1H[93m249 [m[4m[36m */[m[4m                                                                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H249,3[9C50%[58;7H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m189 [m[8C}[70C[100m [m
[33m190 [m    }[74C[100m [m
[33m191 [m}[78C[100m [m[58;1H[93m246 [m[4m[36m *[m[4m                                                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H246,2[9C50%[58;6H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m186 [m[79C[100m [m
[33m187 [m[12Cfdopen(jobs[[38;5;248m[104mjobid[m].down[WRITE], [38;5;130m"w"[m);[30C[100m [m
[33m188 [m[79C[100m [m[58;1H[93m243 [m[4m[36m/* call_signal()[m[4m                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H243,16[8C49%[58;20H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m183 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m
[33m184 [m[79C[100m [m
[33m185 [m[12Cfdopen(jobs[[38;5;248m[104mjobid[m].up[READ], [38;5;130m"r"[m);[33C[100m [m[41;30H[46m{[m[58;1H[93m240 [m[4m    [m[4m[46m}[m[4m                                                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H240,5[9C48%[58;9H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m180 [m[8C} [33melse[m {[63C[100m [m
[33m181 [m[12C[36m// parent[m[58C[100m [m
[33m182 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m[44;30H{[58;1H[93m237 [m[4m        } [m[4m[33melse[m[4m {                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H237,16[8C47%[58;20H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m177 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m
[33m178 [m[16Cexit([38;5;130m99[m);[54C[100m [m
[33m179 [m[12C}[66C[100m [m[58;1H[93m234 [m[4m            } [m[4m[33melse[m[4m {                                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H234,20[8C46%[58;24H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m174 [m[79C[100m [m
[33m175 [m[12C[32mint[m status;[56C[100m [m
[33m176 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m[58;1H[93m231 [m[4m                printf([m[4m[38;5;130m"exited([m[4m[35m%d[m[4m[38;5;130m)[m[4m[35m\n[m[4m[38;5;130m"[m[4m, WEXITSTATUS(jobs[jobq].status));        [m[4m[100m [m[4m                                [m[59;99H[K[59;99H231,29[8C46%[58;33H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m171 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m172 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].up[WRITE], STDOUT_FILENO);[24C[100m [m
[33m173 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m[58;1H[93m228 [m[4m            printf([m[4m[38;5;130m"[[m[4m[35m%d[m[4m[38;5;130m] [m[4m[35m%s[m[4m[38;5;130m:"[m[4m, jobq, jobs[jobq].name);                         [m[4m[100m [m[4m                                [m[59;99H[K[59;99H228,29[8C45%[58;33H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m168 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[READ]);[39C[100m [m
[33m169 [m[79C[100m [m
[33m170 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].down[READ], STDIN_FILENO);[24C[100m [m[58;1H[93m225 [m[4m        [m[4m[33mif[m[4m (is_job(args[[m[4m[38;5;130m0[m[4m])) {                                                 [m[4m[100m [m[4m                                [m[59;99H[K[59;99H225,29[8C44%[58;33H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m165 [m[12C[36m// child[m[59C[100m [m
[33m166 [m[79C[100m [m
[33m167 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[WRITE]);[36C[100m [m[58;1H[93m222 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H222,0-1[7C43%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m162 [m[79C[100m [m
[33m163 [m[8Cjobs[[38;5;248m[104mjobid[m].pid = fork();[46C[100m [m
[33m164 [m[8C[33mif[m (!jobs[[38;5;248m[104mjobid[m].pid) {[48C[100m [m[58;1H[93m219 [m[4m                printf([m[4m[38;5;130m"Error[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H219,29[8C42%[58;33H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m159 [m[79C[100m [m
[33m160 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, [38;5;248m[104mjobid[m);[28C[100m [m
[33m161 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m[58;1H[93m216 [m[4m            } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (WIFSIGNALED(jobs[i].status)) {                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H216,29[8C42%[58;33H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m156 [m[12Cperror([38;5;130m"Creating up pipe"[m);[40C[100m [m
[33m157 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m158 [m[8C}[70C[100m [m[58;1H[93m213 [m[4m                printf([m[4m[38;5;130m"running[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H213,29[8C41%[58;33H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m153 [m[8C}[70C[100m [m
[33m154 [m[79C[100m [m
[33m155 [m[8C[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].up) < [38;5;130m0[m) {[40C[100m [m[58;1H[93m210 [m[4m        [m[4m[33mfor[m[4m ([m[4m[32mint[m[4m i = [m[4m[38;5;130m0[m[4m; i <= [m[4m[38;5;248m[104mjobid[m[4m; i++) {                                     [m[4m[100m [m[4m                                [m[59;99H[K[59;99H210,29[8C40%[58;33H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m150 [m[8C[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].down) < [38;5;130m0[m) {[38C[100m [m
[33m151 [m[12Cperror([38;5;130m"Creating down pipe"[m);[38C[100m [m
[33m152 [m[12Cexit([38;5;130m1[m);[59C[100m [m[58;1H[93m207 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H207,0-1[7C39%[58;5H[?25h[?25l[39;1H[93m188 [m[4m                                                                               [m[4m[100m [m[4m                                [m[58;1H[33m207 [m                                                                               [100m [m[58;85H[K[59;99H188[39;5H[?25h[?25l[38;1H[93m187 [m[4m            fdopen(jobs[[m[4m[38;5;248m[104mjobid[m[4m].down[WRITE], [m[4m[38;5;130m"w"[m[4m);                              [m[4m[100m [m[4m                                [m[39;1H[33m188 [m                                                                               [100m [m[39;85H[K[59;101H7,49 [38;53H[?25h[?25l[38;17H[4m                                     [m[39;13H}[40;9H}    [41;5H}    [42;5H [43;5H[36m/* report()[44;5H * --------[45;8HProduces an outline to stdout of current child processes and their statuses[m[46;7H                                                                            [47;7H[36m args: arguments provided in command line without first command[48;8Hspcs: number of original tokens[m                               [49;7H[36m/[m                               [50;5H[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[51;5H    fflush([38;5;130mstdout[m);                 [52;9H               [53;9H[36m// Header row[m[54;9Hprintf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[55;9H                             [56;9H[36m// Job status output dependent on arg present status[m[57;9H                                                    [58;9H[36m// check args[m[59;103H0-1[38;5H[?25h[?25l[37;1H[93m186 [m[4m                                                                               [m[4m[100m [m[4m                                [m[38;1H[33m187 [m                                                                               [100m [m[38;85H[K[59;101H6[37;5H[?25h[?25l[59;1H[38;5;130m-- INSERT --[m[59;99H[K[59;99H186,1[9C39%[37;5H[?25h[?25l[59;103H5[37;9H[?25h[?25l[59;103H9[37;13H[?25h[?25l[59;103H13[37;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m208 [m    [33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[37C[100m [m
[33m209 [m[8C[33mfor[m ([32mint[m i = [38;5;130m0[m; i <= [38;5;248m[104mjobid[m; i++) {[37C[100m [m
[33m210 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[31C[100m [m[59;99H[K[59;99H186,13[8C40%[34;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m211 [m[12C[33mif[m (!jobs[i].finished) {[43C[100m [m
[33m212 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m213 [m[12C} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[28C[100m [m[59;99H[K[59;99H186,13[8C41%[31;17H[1;58r[1;1H[3M[1;59r[56;1H[33m214 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[12C[100m [m
[33m215 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {[26C[100m [m
[33m216 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[11C[100m [m[59;99H[K[59;99H186,13[8C42%[28;17H[?25h[?25l[59;99H[K[59;99H186,13[8C42%[28;17H[1;58r[1;1H[3M[1;59r[56;1H[33m217 [m[12C} [33melse[m {[59C[100m [m
[33m218 [m[16Cprintf([38;5;130m"Error[m[35m\n[m[38;5;130m"[m);[45C[100m [m
[33m219 [m[12C}[66C[100m [m[59;99H[K[59;99H186,13[8C42%[25;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m220 [m[8C}[70C[100m [m
[33m221 [m[79C[100m [m
[33m222 [m    } [33melse[m [33mif[m (spcs > [38;5;130m1[m) {      [36m// report on specific job[m[22C[100m [m[59;99H[K[59;99H186,13[8C43%[22;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m223 [m[8C[36m// check for job tokens[1][m[45C[100m [m
[33m224 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m225 [m[12C[32mint[m jobq = atoi(args[[38;5;130m0[m]);[42C[100m [m[59;99H[K[59;99H186,13[8C44%[19;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m226 [m[79C[100m [m
[33m227 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, jobq, jobs[jobq].name);[25C[100m [m
[33m228 [m[79C[100m [m[59;99H[K[59;99H186,13[8C45%[16;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m229 [m[12C[33mif[m (WIFEXITED(jobs[jobq].status)) {[32C[100m [m
[33m230 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WEXITSTATUS(jobs[jobq].status));[8C[100m [m
[33m231 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[jobq].status)) {[23C[100m [m[59;99H[K[59;99H186,13[8C46%[13;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m232 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[jobq].status));[8C[100m [m
[33m233 [m[12C} [33melse[m {[59C[100m [m
[33m234 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m[59;99H[K[59;99H186,13[8C46%[10;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m235 [m[12C}[66C[100m [m
[33m236 [m[8C} [33melse[m {[63C[100m [m
[33m237 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m[59;99H[K[59;99H186,13[8C47%[7;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m238 [m[8C}[70C[100m [m
[33m239 [m    }[74C[100m [m
[33m240 [m}[78C[100m [m[59;99H[K[59;99H186,13[8C48%[4;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m241 [m[79C[100m [m
[33m242 [m[36m/* call_signal()[m[63C[100m [m
[33m243 [m[36m * -------------[m[63C[100m [m[59;99H[K[59;99H186,13[8C49%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m189 [m[4m    }                                                                          [m[4m[100m [m[4m                                [m[56;1H[33m244 [m[36m * Sends signal to child process specified[m[37C[100m [m
[33m245 [m[36m *[m[77C[100m [m
[33m246 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[59;99H[K[59;99H189,6[9C50%[1;10H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m192 [m[4m[36m/* report()[m[4m                                                                    [m[4m[100m [m[4m                                [m[56;1H[33m247 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m248 [m[36m */[m[76C[100m [m
[33m249 [m[32mvoid[m call_signal([32mchar[m** args, [32mint[m spcs) {[38C[100m [m[59;99H[K[59;99H192,12[8C50%[1;16H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m195 [m[4m[36m *[m[4m                                                                             [m[4m[100m [m[4m                                [m[56;1H[33m250 [m    [33mif[m (spcs < [38;5;130m3[m) {[60C[100m [m
[33m251 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m252 [m    } [33melse[m {[67C[100m [m[59;99H[K[59;99H195,3[9C51%[1;7H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m198 [m[4m[36m */[m[4m                                                                            [m[4m[100m [m[4m                                [m[56;1H[33m253 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m254 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m
[33m255 [m[12C[33mif[m (is_number(args[[38;5;130m1[m])){[43C[100m [m[59;99H[K[59;99H198,4[9C52%[1;8H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m201 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m256 [m[16C[32mint[m sgnl = atoi(args[[38;5;130m1[m]);[38C[100m [m
[33m257 [m[16C[33mif[m (sgnl >= [38;5;130m1[m && sgnl <= [38;5;130m31[m) {[33C[100m [m
[33m258 [m[20C[32mint[m pid = jobs[job].pid;[35C[100m [m[59;99H[K[59;99H201,1[9C53%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m204 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m259 [m[20Ckill(pid, sgnl);[43C[100m [m
[33m260 [m[16C} [33melse[m {[55C[100m [m
[33m261 [m[20Cprintf([38;5;130m"Error: Invalid signal[m[35m\n[m[38;5;130m"[m);[25C[100m [m[59;99H[K[59;99H204,1[9C54%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m207 [m[4m    [m[4m[36m// check args[m[4m                                                              [m[4m[100m [m[4m                                [m[56;1H[33m262 [m[16C}[62C[100m [m
[33m263 [m[12C} [33melse[m {[59C[100m [m
[33m264 [m[16Cprintf([38;5;130m"Error: Invalid signal[m[35m\n[m[38;5;130m"[m);[29C[100m [m[59;99H[K[59;99H207,13[8C54%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m210 [m[4m            printf([m[4m[38;5;130m"[[m[4m[35m%d[m[4m[38;5;130m] [m[4m[35m%s[m[4m[38;5;130m:"[m[4m, i, jobs[i].name);                               [m[4m[100m [m[4m                                [m[56;1H[33m265 [m[12C}[66C[100m [m
[33m266 [m[8C} [33melse[m {[63C[100m [m
[33m267 [m[12Cprintf([38;5;130m"Error: invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m[59;99H[K[59;99H210,13[8C55%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m213 [m[4m            } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (WIFEXITED(jobs[i].status)) {                            [m[4m[100m [m[4m                                [m[56;1H[33m268 [m[8C}[70C[100m [m
[33m269 [m    }[74C[100m [m
[33m270 [m}[78C[100m [m[59;99H[K[59;99H213,13[8C56%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m216 [m[4m                printf([m[4m[38;5;130m"signalled([m[4m[35m%d[m[4m[38;5;130m)[m[4m[35m\n[m[4m[38;5;130m"[m[4m, WTERMSIG(jobs[i].status));           [m[4m[100m [m[4m                                [m[56;1H[33m271 [m[79C[100m [m
[33m272 [m[36m/* hq_wait()[m[67C[100m [m
[33m273 [m[36m * ---------[m[67C[100m [m[59;99H[K[59;99H216,13[8C57%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m219 [m[4m            }                                                                  [m[4m[100m [m[4m                                [m[56;1H[33m274 [m[36m * Causes hq to wait for specified seconds[m[37C[100m [m
[33m275 [m[36m *[m[77C[100m [m
[33m276 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[59;99H[K[59;99H219,13[8C58%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m222 [m[4m    } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (spcs > [m[4m[38;5;130m1[m[4m) {      [m[4m[36m// report on specific job[m[4m                      [m[4m[100m [m[4m                                [m[56;1H[33m277 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m278 [m[36m */[m[76C[100m [m
[33m279 [m[32mvoid[m hq_wait([32mchar[m** args, [32mint[m spcs) {[42C[100m [m[59;99H[K[59;99H222,13[8C58%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m225 [m[4m            [m[4m[32mint[m[4m jobq = atoi(args[[m[4m[38;5;130m0[m[4m]);                                          [m[4m[100m [m[4m                                [m[56;1H[33m280 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m281 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m282 [m    } [33melse[m {[67C[100m [m[59;99H[K[59;99H225,13[8C59%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m228 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m283 [m[8C[33mif[m (strcmp(args[[38;5;130m0[m], [38;5;130m""[m) && is_number(args[[38;5;130m0[m])) {[23C[100m [m
[33m284 [m[12Csleep(atoi(args[[38;5;130m0[m]) * [38;5;130m1000000[m);[36C[100m [m
[33m285 [m[8C} [33melse[m {[63C[100m [m[59;99H[K[59;99H228,1[9C60%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m231 [m[4m            } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (WIFSIGNALED(jobs[jobq].status)) {                       [m[4m[100m [m[4m                                [m[56;1H[33m286 [m[12Cprintf([38;5;130m"Error: Invalid sleep time[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m287 [m[8C}[70C[100m [m
[33m288 [m    }[74C[100m [m[59;99H[K[59;99H231,13[8C61%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m234 [m[4m                printf([m[4m[38;5;130m"running[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                           [m[4m[100m [m[4m                                [m[56;1H[33m289 [m}[78C[100m [m
[33m290 [m[79C[100m [m
[33m291 [m[36m/* send()[m[70C[100m [m[59;99H[K[59;99H234,13[8C62%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m237 [m[4m            printf([m[4m[38;5;130m"Error: Invalid job[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                    [m[4m[100m [m[4m                                [m[56;1H[33m292 [m[36m * ------[m[70C[100m [m
[33m293 [m[36m * Sends text down the pipe to specified job[m[35C[100m [m
[33m294 [m[36m *[m[77C[100m [m[59;99H[K[59;99H237,13[8C62%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m240 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[56;1H[33m295 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m296 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m297 [m[36m */[m[76C[100m [m[59;99H[K[59;99H240,2[9C63%[1;6H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m243 [m[4m[36m * -------------[m[4m                                                               [m[4m[100m [m[4m                                [m[56;1H[33m298 [m[32mvoid[m send([32mchar[m** args, [32mint[m spcs) {[45C[100m [m
[33m299 [m    [33mif[m (spcs < [38;5;130m3[m) {[60C[100m [m
[33m300 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m[59;99H[K[59;99H243,13[8C64%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m246 [m[4m[36m * args: arguments provided in command line without first command[m[4m              [m[4m[100m [m[4m                                [m[56;1H[33m301 [m    } [33melse[m {[67C[100m [m
[33m302 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m303 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m[59;99H[K[59;99H246,13[8C65%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m249 [m[4m[32mvoid[m[4m call_signal([m[4m[32mchar[m[4m** args, [m[4m[32mint[m[4m spcs) {                                      [m[4m[100m [m[4m                                [m[56;1H[33m304 [m[12C[32mFILE[m* writef = fdopen(jobs[job].down[WRITE], [38;5;130m"w"[m);[17C[100m [m
[33m305 [m[12Cfprintf(writef, [38;5;130m"[m[35m%s\n[m[38;5;130m"[m, args[[38;5;130m1[m]);[34C[100m [m
[33m306 [m[8C} [33melse[m {[63C[100m [m[59;99H[K[59;99H249,13[8C66%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m252 [m[4m    } [m[4m[33melse[m[4m {                                                                   [m[4m[100m [m[4m                                [m[56;1H[33m307 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m308 [m[8C}[70C[100m [m
[33m309 [m    }[74C[100m [m[59;99H[K[59;99H252,13[8C66%[1;16H[4m[46m{[m[18;9H[46m}[1;17H[1;58r[m[1;1H[3M[1;59r[1;1H[93m255 [m[4m            [m[4m[33mif[m[4m (is_number(args[[m[4m[38;5;130m1[m[4m])){                                           [m[4m[100m [m[4m                                [m[56;1H[33m310 [m}[78C[100m [m
[33m311 [m[79C[100m [m
[33m312 [m[36m/* rcv()[m[71C[100m [m[59;99H[K[59;99H255,13[8C67%[15;9H}[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m258 [m[4m                    [m[4m[32mint[m[4m pid = jobs[job].pid;                                   [m[4m[100m [m[4m                                [m[56;1H[33m313 [m[36m * -----[m[71C[100m [m
[33m314 [m[36m * Receives data through the pipe from the specified child process.[m[12C[100m [m
[33m315 [m[36m * Prints this to stdout in the parent, hq.[m[36C[100m [m[59;99H[K[59;99H258,13[8C68%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m261 [m[4m                    printf([m[4m[38;5;130m"Error: Invalid signal[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                         [m[4m[100m [m[4m                                [m[56;1H[33m316 [m[36m *[m[77C[100m [m
[33m317 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m318 [m[36m * spcs: number of original tokens[m[45C[100m [m[59;99H[K[59;99H261,13[8C69%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m264 [m[4m                printf([m[4m[38;5;130m"Error: Invalid signal[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                             [m[4m[100m [m[4m                                [m[56;1H[33m319 [m[36m */[m[76C[100m [m
[33m320 [m[32mvoid[m rcv([32mchar[m** args, [32mint[m spcs) {[46C[100m [m
[33m321 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m[59;99H[K[59;99H264,13[8C70%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m267 [m[4m            printf([m[4m[38;5;130m"Error: invalid job[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                    [m[4m[100m [m[4m                                [m[56;1H[33m322 [m[8Cprintf([38;5;130m"Error: Insufficient arguments.[m[35m\n[m[38;5;130m"[m);[28C[100m [m
[33m323 [m    } [33melse[m {[67C[100m [m
[33m324 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m[59;99H[K[59;99H267,13[8C70%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m270 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[56;1H[33m325 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m
[33m326 [m[12C[32mint[m ready = is_ready(jobs[job].up[READ]);[26C[100m [m
[33m327 [m[12C[32mFILE[m* readf = fdopen(jobs[job].up[READ], [38;5;130m"r"[m);[21C[100m [m[59;99H[K[59;99H270,2[9C71%[1;6H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m273 [m[4m[36m * ---------[m[4m                                                                   [m[4m[100m [m[4m                                [m[56;1H[33m328 [m[12C[33mif[m (ready) {[55C[100m [m
[33m329 [m[16C[32mchar[m* buffer = read_line(readf);[31C[100m [m
[33m330 [m[16C[33mif[m (buffer == [38;5;130m0[m) {[45C[100m [m[59;99H[K[59;99H273,13[8C72%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m276 [m[4m[36m * args: arguments provided in command line without first command[m[4m              [m[4m[100m [m[4m                                [m[56;1H[33m331 [m[20Cprintf([38;5;130m"<no input>[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m332 [m[16C} [33melse[m [33mif[m (buffer == [38;5;130mNULL[m) {[35C[100m [m
[33m333 [m[20Cprintf([38;5;130m"<EOF>[m[35m\n[m[38;5;130m"[m);[41C[100m [m[59;99H[K[59;99H276,13[8C73%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m279 [m[4m[32mvoid[m[4m hq_wait([m[4m[32mchar[m[4m** args, [m[4m[32mint[m[4m spcs) {                                          [m[4m[100m [m[4m                                [m[56;1H[33m334 [m[16C} [33melse[m {[55C[100m [m
[33m335 [m[20Cprintf([38;5;130m"[m[35m%s\n[m[38;5;130m"[m, buffer);[36C[100m [m
[33m336 [m[16C}[62C[100m [m[59;99H[K[59;99H279,13[8C74%[1;17H[4m[46m([21C)[1;17H[?25h[?25l[1;58r[m[1;1H[3M[1;59r[1;1H[93m282 [m[4m    } [m[4m[33melse[m[4m {                                                                   [m[4m[100m [m[4m                                [m[56;1H[33m337 [m[12C}[66C[100m [m
[33m338 [m[8C} [33melse[m {[63C[100m [m
[33m339 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m[59;99H[K[59;99H282,13[8C74%[1;16H[4m[46m{[m[7;9H[46m}[1;17H[?25h[?25l[1;58r[m[1;1H[3M[1;59r[1;1H[93m285 [m[4m        } [m[4m[33melse[m[4m {                                                               [m[4m[100m [m[4m                                [m[56;1H[33m340 [m[8C}[70C[100m [m
[33m341 [m[79C[100m [m
[33m342 [m[79C[100m [m[59;99H[K[59;99H285,13[8C75%[4;9H}[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m288 [m[4m    }                                                                          [m[4m[100m [m[4m                                [m[56;1H[33m343 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m344 [m    }[74C[100m [m
[33m345 [m}[78C[100m [m[59;99H[K[59;99H288,6[9C76%[1;10H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m291 [m[4m[36m/* send()[m[4m                                                                      [m[4m[100m [m[4m                                [m[56;1H[33m346 [m[79C[100m [m
[33m347 [m[36m/* eof()[m[71C[100m [m
[33m348 [m[36m * -----[m[71C[100m [m[59;99H[K[59;99H291,10[8C77%[1;14H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m294 [m[4m[36m *[m[4m                                                                             [m[4m[100m [m[4m                                [m[56;1H[33m349 [m[36m * Closes the stdin side of the pipe so the child process can no longer read [m  [100m [m
[33m350 [m[36m * as the pipe will be EOF.[m[52C[100m [m
[33m351 [m[36m *[m[77C[100m [m[59;99H[K[59;99H294,3[9C78%[1;7H[?25h[?25l[33m294 [m[36m *[m                                                                             [100m [m[1;85H[K[34;1H[93m327 [m[4m            [m[4m[32mFILE[m[4m* readf = fdopen(jobs[job].up[READ], [m[4m[38;5;130m"r"[m[4m);                     [m[4m[100m [m[4m                                [m[59;99H327,13[34;17H[?25h[?25l[59;4H[38;5;130m(insert) VISUAL --[m[59;99H[K[59;99H329,46[8C78%[34;1H[33m327 [m            [7m[32m[48;5;242mFILE[m[7m[48;5;242m* readf = fdopen(jobs[job].up[READ], [m[7m[38;5;130m[48;5;242m"r"[m[7m[48;5;242m); [m                    [100m [m[34;85H[K[35;5H[7m[48;5;242m            [m[7m[33m[48;5;242mif[m[7m[48;5;242m (ready) { [m
[93m329 [m[7m[48;5;242m                [m[7m[32m[48;5;242mchar[m[7m[48;5;242m* buffer = read_line(read[?25h[?25l[m[34;1H[93m327 [m[4m            [m[4m[32mFILE[m[4m* readf = fdopen(jobs[job].up[READ], [m[4m[38;5;130m"r"[m[4m);                     [m[4m[100m [m[4m                                [m[35;5H            [33mif[m (ready) { 
[33m329 [m                [32mchar[m* buffer = read_line(read[59;13H[38;5;130m--[m[59;15H[K[59;99H327,13[8C78%3 lines yanked[59;99H[K[34;17H[?25h[?25l[59;1H[38;5;130m-- INSERT --[m[59;13H[K[59;99H327,13[8C78%[1;58r[1;1H[3L[1;59r[1;1H[33m291 [m[36m/* send()[m[70C[100m [m
[33m292 [m[36m * ------[m[70C[100m [m
[33m293 [m[36m * Sends text down the pipe to specified job[m[35C[100m [m[59;99H[K[59;99H327,13[8C77%[37;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m288 [m    }[74C[100m [m
[33m289 [m}[78C[100m [m
[33m290 [m[79C[100m [m[59;99H[K[59;99H327,13[8C76%[40;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m285 [m[8C} [33melse[m {[63C[100m [m
[33m286 [m[12Cprintf([38;5;130m"Error: Invalid sleep time[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m287 [m[8C}[70C[100m [m[59;99H[K[59;99H327,13[8C75%[43;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m282 [m    } [33melse[m {[67C[100m [m
[33m283 [m[8C[33mif[m (strcmp(args[[38;5;130m0[m], [38;5;130m""[m) && is_number(args[[38;5;130m0[m])) {[23C[100m [m
[33m284 [m[12Csleep(atoi(args[[38;5;130m0[m]) * [38;5;130m1000000[m);[36C[100m [m[59;99H[K[59;99H327,13[8C74%[46;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m279 [m[32mvoid[m hq_wait([32mchar[m** args, [32mint[m spcs) {[42C[100m [m
[33m280 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m281 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m[59;99H[K[59;99H327,13[8C74%[49;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m276 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m277 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m278 [m[36m */[m[76C[100m [m[59;99H[K[59;99H327,13[8C73%[52;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m273 [m[36m * ---------[m[67C[100m [m
[33m274 [m[36m * Causes hq to wait for specified seconds[m[37C[100m [m
[33m275 [m[36m *[m[77C[100m [m[59;99H[K[59;99H327,13[8C72%[55;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m270 [m}[78C[100m [m
[33m271 [m[79C[100m [m
[33m272 [m[36m/* hq_wait()[m[67C[100m [m[59;99H[K[59;99H327,13[8C71%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m267 [m[12Cprintf([38;5;130m"Error: invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m268 [m[8C}[70C[100m [m
[33m269 [m    }[74C[100m [m[58;1H[93m324 [m[4m        [m[4m[33mif[m[4m (is_job(args[[m[4m[38;5;130m0[m[4m])) {                                                 [m[4m[100m [m[4m                                [m[59;99H[K[59;99H324,13[8C70%[58;16H[4m[46m([15C)[58;17H[?25h[?25l[1;58r[m[1;1H[3L[1;59r[1;1H[33m264 [m[16Cprintf([38;5;130m"Error: Invalid signal[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m265 [m[12C}[66C[100m [m
[33m266 [m[8C} [33melse[m {[63C[100m [m[58;1H[93m321 [m[4m    [m[4m[33mif[m[4m (spcs < [m[4m[38;5;130m2[m[4m) {                                                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H321,13[8C70%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m261 [m[20Cprintf([38;5;130m"Error: Invalid signal[m[35m\n[m[38;5;130m"[m);[25C[100m [m
[33m262 [m[16C}[62C[100m [m
[33m263 [m[12C} [33melse[m {[59C[100m [m[58;1H[93m318 [m[4m[36m * spcs: number of original tokens[m[4m                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H318,13[8C69%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m258 [m[20C[32mint[m pid = jobs[job].pid;[35C[100m [m
[33m259 [m[20Ckill(pid, sgnl);[43C[100m [m
[33m260 [m[16C} [33melse[m {[55C[100m [m[58;1H[93m315 [m[4m[36m * Prints this to stdout in the parent, hq.[m[4m                                    [m[4m[100m [m[4m                                [m[59;99H[K[59;99H315,13[8C68%[58;17H[1;58r[1;1H[3L[1;59r[1;1H[33m255 [m[12C[33mif[m (is_number(args[[38;5;130m1[m])){[43C[100m [m
[33m256 [m[16C[32mint[m sgnl = atoi(args[[38;5;130m1[m]);[38C[100m [m
[33m257 [m[16C[33mif[m (sgnl >= [38;5;130m1[m && sgnl <= [38;5;130m31[m) {[33C[100m [m[58;1H[93m312 [m[4m[36m/* rcv()[m[4m                                                                       [m[4m[100m [m[4m                                [m[59;99H[K[59;99H312,9[9C67%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m252 [m    } [33melse[m {[67C[100m [m
[33m253 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m254 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m[58;1H[93m309 [m[4m    }                                                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H309,6[9C66%[50;16H[46m{[m[58;9H[4m[46m}[?25h[?25l[1;58r[m[1;1H[3L[1;59r[1;1H[33m249 [m[32mvoid[m call_signal([32mchar[m** args, [32mint[m spcs) {[38C[100m [m
[33m250 [m    [33mif[m (spcs < [38;5;130m3[m) {[60C[100m [m
[33m251 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m[58;1H[93m306 [m[4m        } [m[4m[33melse[m[4m {                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H306,13[8C66%[53;16H{[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m246 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m247 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m248 [m[36m */[m[76C[100m [m[58;1H[93m303 [m[4m            [m[4m[32mint[m[4m job = atoi(args[[m[4m[38;5;130m0[m[4m]);                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H303,13[8C65%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m243 [m[36m * -------------[m[63C[100m [m
[33m244 [m[36m * Sends signal to child process specified[m[37C[100m [m
[33m245 [m[36m *[m[77C[100m [m[58;1H[93m300 [m[4m        printf([m[4m[38;5;130m"Error: Insufficient arguments[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H300,13[8C64%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m240 [m}[78C[100m [m
[33m241 [m[79C[100m [m
[33m242 [m[36m/* call_signal()[m[63C[100m [m[58;1H[93m297 [m[4m[36m */[m[4m                                                                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H297,4[9C63%[58;8H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m237 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m238 [m[8C}[70C[100m [m
[33m239 [m    }[74C[100m [m[58;1H[93m294 [m[4m[36m *[m[4m                                                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H294,3[9C62%[58;7H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m234 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m235 [m[12C}[66C[100m [m
[33m236 [m[8C} [33melse[m {[63C[100m [m[58;1H[93m291 [m[4m[36m/* send()[m[4m                                                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H291,10[8C62%[58;14H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m231 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[jobq].status)) {[23C[100m [m
[33m232 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[jobq].status));[8C[100m [m
[33m233 [m[12C} [33melse[m {[59C[100m [m[58;1H[93m288 [m[4m    }                                                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H288,6[9C61%[52;16H[46m{[m[58;9H[4m[46m}[?25h[?25l[1;58r[m[1;1H[3L[1;59r[1;1H[33m228 [m[79C[100m [m
[33m229 [m[12C[33mif[m (WIFEXITED(jobs[jobq].status)) {[32C[100m [m
[33m230 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WEXITSTATUS(jobs[jobq].status));[8C[100m [m[58;1H[93m285 [m[4m        } [m[4m[33melse[m[4m {                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H285,13[8C60%[55;16H{[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m225 [m[12C[32mint[m jobq = atoi(args[[38;5;130m0[m]);[42C[100m [m
[33m226 [m[79C[100m [m
[33m227 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, jobq, jobs[jobq].name);[25C[100m [m[58;1H[93m282 [m[4m    } [m[4m[33melse[m[4m {                                                                   [m[4m[100m [m[4m                                [m[59;99H[K[59;99H282,13[8C59%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m222 [m    } [33melse[m [33mif[m (spcs > [38;5;130m1[m) {      [36m// report on specific job[m[22C[100m [m
[33m223 [m[8C[36m// check for job tokens[1][m[45C[100m [m
[33m224 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m[58;1H[93m279 [m[4m[32mvoid[m[4m hq_wait([m[4m[32mchar[m[4m** args, [m[4m[32mint[m[4m spcs) {                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H279,13[8C58%[58;17H[4m[46m([21C)[58;17H[?25h[?25l[1;58r[m[1;1H[3L[1;59r[1;1H[33m219 [m[12C}[66C[100m [m
[33m220 [m[8C}[70C[100m [m
[33m221 [m[79C[100m [m[58;1H[93m276 [m[4m[36m * args: arguments provided in command line without first command[m[4m              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H276,13[8C58%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m216 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[11C[100m [m
[33m217 [m[12C} [33melse[m {[59C[100m [m
[33m218 [m[16Cprintf([38;5;130m"Error[m[35m\n[m[38;5;130m"[m);[45C[100m [m[58;1H[93m273 [m[4m[36m * ---------[m[4m                                                                   [m[4m[100m [m[4m                                [m[59;99H[K[59;99H273,13[8C57%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m213 [m[12C} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[28C[100m [m
[33m214 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[12C[100m [m
[33m215 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {[26C[100m [m[58;1H[93m270 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H270,2[9C56%[37;45H[46m{[m[58;5H[4m[46m}[?25h[?25l[1;58r[m[1;1H[3L[1;59r[1;1H[33m210 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[31C[100m [m
[33m211 [m[12C[33mif[m (!jobs[i].finished) {[43C[100m [m
[33m212 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m[58;1H[93m267 [m[4m            printf([m[4m[38;5;130m"Error: invalid job[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                    [m[4m[100m [m[4m                                [m[59;99H[K[59;99H267,13[8C55%[40;45H{[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m207 [m    [36m// check args[m[62C[100m [m
[33m208 [m    [33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[37C[100m [m
[33m209 [m[8C[33mfor[m ([32mint[m i = [38;5;130m0[m; i <= [38;5;248m[104mjobid[m; i++) {[37C[100m [m[58;1H[93m264 [m[4m                printf([m[4m[38;5;130m"Error: Invalid signal[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H264,13[8C54%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m204 [m[79C[100m [m
[33m205 [m    [36m// Job status output dependent on arg present status[m[23C[100m [m
[33m206 [m[79C[100m [m[58;1H[93m261 [m[4m                    printf([m[4m[38;5;130m"Error: Invalid signal[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                         [m[4m[100m [m[4m                                [m[59;99H[K[59;99H261,13[8C54%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m201 [m[79C[100m [m
[33m202 [m    [36m// Header row[m[62C[100m [m
[33m203 [m    printf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[46C[100m [m[58;1H[93m258 [m[4m                    [m[4m[32mint[m[4m pid = jobs[job].pid;                                   [m[4m[100m [m[4m                                [m[59;99H[K[59;99H258,13[8C53%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m198 [m[36m */[m[76C[100m [m
[33m199 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[43C[100m [m
[33m200 [m    fflush([38;5;130mstdout[m);[60C[100m [m[58;1H[93m255 [m[4m            [m[4m[33mif[m[4m (is_number(args[[m[4m[38;5;130m1[m[4m])){                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H255,13[8C52%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m195 [m[36m *[m[77C[100m [m
[33m196 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m197 [m[36m * spcs: number of original tokens[m[45C[100m [m[58;1H[93m252 [m[4m    } [m[4m[33melse[m[4m {                                                                   [m[4m[100m [m[4m                                [m[59;99H[K[59;99H252,13[8C51%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m192 [m[36m/* report()[m[68C[100m [m
[33m193 [m[36m * --------[m[68C[100m [m
[33m194 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m[58;1H[93m249 [m[4m[32mvoid[m[4m call_signal([m[4m[32mchar[m[4m** args, [m[4m[32mint[m[4m spcs) {                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H249,13[8C50%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m189 [m    }[74C[100m [m
[33m190 [m}[78C[100m [m
[33m191 [m[79C[100m [m[58;1H[93m246 [m[4m[36m * args: arguments provided in command line without first command[m[4m              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H246,13[8C50%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m186 [m[79C[100m [m
[33m187 [m[79C[100m [m
[33m188 [m[8C}[70C[100m [m[58;1H[93m243 [m[4m[36m * -------------[m[4m                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H243,13[8C49%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m183 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m
[33m184 [m[79C[100m [m
[33m185 [m[12Cfdopen(jobs[[38;5;248m[104mjobid[m].up[READ], [38;5;130m"r"[m);[33C[100m [m[58;1H[93m240 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H240,2[9C48%[17;40H[46m{[m[58;5H[4m[46m}[1;58r[m[1;1H[3L[1;59r[1;1H[33m180 [m[8C} [33melse[m {[63C[100m [m
[33m181 [m[12C[36m// parent[m[58C[100m [m
[33m182 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m[58;1H[93m237 [m[4m            printf([m[4m[38;5;130m"Error: Invalid job[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                    [m[4m[100m [m[4m                                [m[59;99H[K[59;99H237,13[8C47%[20;40H{[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m177 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m
[33m178 [m[16Cexit([38;5;130m99[m);[54C[100m [m
[33m179 [m[12C}[66C[100m [m[58;1H[93m234 [m[4m                printf([m[4m[38;5;130m"running[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H234,13[8C46%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m174 [m[79C[100m [m
[33m175 [m[12C[32mint[m status;[56C[100m [m
[33m176 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m[58;1H[93m231 [m[4m            } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (WIFSIGNALED(jobs[jobq].status)) {                       [m[4m[100m [m[4m                                [m[59;99H[K[59;99H231,13[8C46%[56;51H[46m{[m[58;17H[4m[46m}[?25h[?25l[1;58r[m[1;1H[3L[1;59r[1;1H[33m171 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m172 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].up[WRITE], STDOUT_FILENO);[24C[100m [m
[33m173 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m[58;1H[93m228 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H228,1[9C45%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m168 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[READ]);[39C[100m [m
[33m169 [m[79C[100m [m
[33m170 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].down[READ], STDIN_FILENO);[24C[100m [m[58;1H[93m225 [m[4m            [m[4m[32mint[m[4m jobq = atoi(args[[m[4m[38;5;130m0[m[4m]);                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H225,13[8C44%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m165 [m[12C[36m// child[m[59C[100m [m
[33m166 [m[79C[100m [m
[33m167 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[WRITE]);[36C[100m [m[58;1H[93m222 [m[4m    } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (spcs > [m[4m[38;5;130m1[m[4m) {      [m[4m[36m// report on specific job[m[4m                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H222,13[8C43%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m162 [m[79C[100m [m
[33m163 [m[8Cjobs[[38;5;248m[104mjobid[m].pid = fork();[46C[100m [m
[33m164 [m[8C[33mif[m (!jobs[[38;5;248m[104mjobid[m].pid) {[48C[100m [m[58;1H[93m219 [m[4m            }                                                                  [m[4m[100m [m[4m                                [m[59;99H[K[59;99H219,13[8C42%[56;24H[46m{[m[58;17H[4m[46m}[?25h[?25l[m[26;1H[93m187 [m[4m                                                                               [m[4m[100m [m[4m                                [m[58;1H[33m219 [m            [46m}[m                                                                  [100m [m[58;85H[K[56;24H{[58;17H}[59;99H187,1 [26;5H[?25h[?25l[4mi[m[59;103H2[26;6H[?25h[?25l[59;103H5[26;9H[?25h[?25l[59;103H9[26;13H[?25h[?25l[59;103H13[26;17H[?25h[?25l[59;103H9 [26;13H[?25h[?25l[59;103H5[26;9H[?25h[?25l[59;103H2[26;6H[?25h[?25l[59;103H5[26;9H[?25h[?25l[59;103H2[26;6H[?25h[?25l[4m [m[59;103H1[26;5H[?25h[?25l[59;103H5[26;9H[?25h[?25l[59;103H9[26;13H[?25h[?25l[59;103H13[26;17H[?25h[59;1H[K[26;16H[?25l[59;99H187,12[8C42%[26;16H[?25h[?25l[1C[4m[32mFILE[m[4m* readf = fdopen(jobs[job].up[READ],[m[1C[4m[38;5;130m"r"[m[4m);[m[27;13H    [33mif[m (ready) {[28;9H [11C[32mchar[m* buffer = read_line(readf[29;5H [7C}[30;9H}[31;5H}          [32;5H           [33;5H[36m/* report()[m                                                                   [34;7H[36m --------[35;8HProduces an outline to stdout of current child processes and their statuses[m[36;7H                                [37;7H[36m args: arguments provided in command line without first command[38;5H * spcs: number of original tokens[m  [39;5H[36m */[m                [40;5H[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[41;9Hfflush([38;5;130mstdout[m);[42;9H                             [43;9H[36m// Header row[m[44;9Hprintf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);                       [46;12H[36mJob status output dependent on arg present status[m[47;9H                                      [48;9H[36m// check args[m                         [49;9H[33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m      [50;13H[33mfor[m ([32mint[m i = [38;5;130m0[m; i <= [38;5;248m[104mjobid[m; i++) {[51;17Hprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[52;17H[33mif[m (!jobs[i].finished) {               [53;29H[38;5;130mrunning[m[35m\n[m[38;5;130m"[m);                               [54;31HEXITED(jobs[i].status)) {  [55;29H[38;5;130mexited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status)); [56;24H[33mif[m (WIFSIGNALED(jobs[i].status)) {[57;29H[38;5;130msignalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[58;19H[33melse[m {[59;104H3[26;17H[?25h[?25l[25;1H[93m186 [m[4m                                                                               [m[4m[100m [m[4m                                [m[26;1H[33m187 [m            [32mFILE[m* readf = fdopen(jobs[job].up[READ], [38;5;130m"r"[m);                     [100m [m[26;85H[K[59;101H6,12[25;16H[?25h[?25l[59;1H[38;5;130m-- INSERT --[m[59;99H[K[59;99H186,12[8C42%[25;16H[?25h[?25l[59;104H3[25;17H[?25h[?25l[4mi[m[59;104H4[25;18H[?25h[?25l[4mn[m[59;104H5[25;19H[?25h[?25l[4m[32mint[m[59;104H6[25;20H[?25h[?25l[59;104H7[25;21H[?25h[?25l[4mr[m[59;104H8[25;22H[?25h[?25l[4me[m[59;104H9[25;23H[?25h[?25l[4ma[m[59;103H20[25;24H[?25h[?25l[4md[m[59;104H1[25;25H[?25h[?25l[4my[m[59;104H2[25;26H[?25h[?25l[59;104H3[25;27H[?25h[?25l[4m=[m[59;104H4[25;28H[?25h[?25l[59;104H5[25;29H[?25h[?25l[4m_[m[59;104H6[25;30H[?25h[?25l[4ms[m[59;104H7[25;31H[?25h[?25l[4m [m[59;104H6[25;30H[?25h[?25l[4m [m[59;104H5[25;29H[?25h[?25l[4mu[m[59;104H6[25;30H[?25h[?25l[4ms[m[59;104H7[25;31H[?25h[?25l[4m_[m[59;104H8[25;32H[?25h[?25l[4mr[m[59;104H9[25;33H[?25h[?25l[4me[m[59;103H30[25;34H[?25h[?25l[4ma[m[59;104H1[25;35H[?25h[?25l[4md[m[59;104H2[25;36H[?25h[?25l[4my[m[59;104H3[25;37H[?25h[?25l[4m [m[59;104H2[25;36H[?25h[?25l[4m [m[59;104H1[25;35H[?25h[?25l[4m [m[59;104H0[25;34H[?25h[?25l[4m [m[59;103H29[25;33H[?25h[?25l[4m [m[59;104H8[25;32H[?25h[?25l[4m [m[59;104H7[25;31H[?25h[?25l[4m [m[59;104H6[25;30H[?25h[?25l[4m [m[59;104H5[25;29H[?25h[?25l[4mu[m[59;104H6[25;30H[?25h[?25l[4ms[m[59;104H7[25;31H[?25h[?25l[4m [m[59;104H6[25;30H[?25h[?25l[4m [m[59;104H5[25;29H[?25h[?25l[4mu[m[59;104H6[25;30H[?25h[?25l[4ms[m[59;104H7[25;31H[?25h[?25l[4m_[m[59;104H8[25;32H[?25h[?25l[4m [m[59;104H7[25;31H[?25h[?25l[4m [m[59;104H6[25;30H[?25h[?25l[4m [m[59;104H5[25;29H[?25h[?25l[4mu[m[59;104H6[25;30H[?25h[?25l[4m [m[59;104H5[25;29H[?25h[?25l[4mi[m[59;104H6[25;30H[?25h[?25l[4ms[m[59;104H7[25;31H[?25h[?25l[4m_[m[59;104H8[25;32H[?25h[?25l[4mr[m[59;104H9[25;33H[?25h[?25l[4me[m[59;103H30[25;34H[?25h[?25l[4ma[m[59;104H1[25;35H[?25h[?25l[4md[m[59;104H2[25;36H[?25h[?25l[4my[m[59;104H3[25;37H[?25h[?25l[4m([m[27;28H[1m[37m[41m{[29;13H}[m[59;104H4[25;38H[?25h[?25l[4mj[m[59;104H5[25;39H[?25h[?25l[4mo[m[59;104H6[25;40H[?25h[?25l[4mb[m[59;104H7[25;41H[?25h[?25l[4ms[m[59;104H8[25;42H[?25h[?25l[4m[[m[26;62H[1m[37m[41m;[m[59;104H9[25;43H[?25h[?25l[4mj[m[59;103H40[25;44H[?25h[?25l[4mo[m[59;104H1[25;45H[?25h[?25l[4mb[m[59;104H2[25;46H[?25h[?25l[4mi[m[59;104H3[25;47H[?25h[?25l[4m[38;5;248m[104mjobid[m[59;104H4[25;48H[?25h[?25l[4m][m[26;62H; [59;103H38[25;42H[?25h[?25l[7C[4m.[m[59;103H46[25;50H[?25h[?25l[4mu[m[59;104H7[25;51H[?25h[?25l[4mp[m[59;104H8[25;52H[?25h[?25l[4m[[m[26;62H[1m[37m[41m;[m[59;104H9[25;53H[?25h[?25l[4mR[m[59;103H50[25;54H[?25h[?25l[4mE[m[59;104H1[25;55H[?25h[?25l[4mA[m[59;104H2[25;56H[?25h[?25l[4mD[m[59;104H3[25;57H[?25h[?25l[4m][m[26;62H; [59;103H48[25;52H[?25h[?25l[4m[46m[[4C][m[59;103H54[25;58H[?25h[?25l[4m,[25;52H[READ][m[59;104H5[25;59H[?25h[?25l[59;104H6[25;60H[?25h[?25l[59;104H5[25;59H[?25h[?25l[4m [m[25;52H[4m[46m[[4C][m[59;104H4[25;58H[?25h[?25l[4m)[m[27;28H{ [29;13H} [59;103H33[25;37H[?25h[?25l[22C[4m;[25;52H[READ][m[59;103H56[25;60H[?25h[?25l[33m186 [m            [32mint[m ready = is_ready(jobs[[38;5;248m[104mjobid[m].up[READ]);                        [100m [m[25;85H[K[26;1H[93m187 [m[4m            [m[4m[32mFILE[m[4m* readf = fdopen(jobs[job].up[READ], [m[4m[38;5;130m"r"[m[4m);                     [m[4m[100m [m[4m                                [m[59;101H7,40[26;44H[?25h[?25l[59;104H1[26;45H[?25h[?25l[4m[46m[[3C][m[59;104H2[26;46H[?25h[?25l[4m[46mi[m[4m].up[READ], [m[4m[38;5;130m"r"[m[4m);[26;46Hi[m[4m[46m][m[59;104H3[26;47H[?25h[?25l[4m[38;5;248m[104mjobi[m[4m[46md[m[4m].up[READ], [m[4m[38;5;130m"r"[m[4m);[m[26;47H[4m[38;5;248m[104md[m[4m[46m][m[59;104H4[26;48H[?25h[?25l[33m187 [m            [32mFILE[m* readf = fdopen(jobs[46m[[m[38;5;248m[104mjobid[m[46m][m.up[READ], [38;5;130m"r"[m);                   [100m [m[26;85H[K[28;1H[93m189 [m[4m                [m[4m[32mchar[m[4m* buffer = read_line(readf                                 [m[4m[100m [m[4m                                [m[26;42H[[5C][59;101H9,47[28;51H[?25h[?25l[4m)[m[59;104H1[28;45H[?25h[?25l[7C[4m;[m[59;104H9[28;53H[?25h[?25l[33m189 [m                [32mchar[m* buffer = read_line(readf);                               [100m [m[28;85H[K[29;1H[93m190 [m[4m                                                                               [m[4m[100m [m[4m                                [m[30;9H    }[31;5H    }[32;5H}[33;5H           [34;5H[36m/* report()[35;8H--------[m                                                                   [36;7H[36m Produces an outline to stdout of current child processes and their statuses[m[37;7H                                                               [38;8H[36margs: arguments provided in command line without first command[39;7H spcs: number of original tokens[40;5H */[m                                 [41;5H[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[42;9Hfflush([38;5;130mstdout[m);[43;9H             [44;9H[36m// Header row[m                [45;9Hprintf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[46;9H                                                    [47;9H[36m// Job status output dependent on arg present status[m[48;9H             [49;9H[36m// check args[m                         [50;9H[33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[51;13H[33mfor[m ([32mint[m i = [38;5;130m0[m; i <= [38;5;248m[104mjobid[m; i++) {      [52;17Hprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[53;17H[33mif[m (!jobs[i].finished) {[54;17H    printf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);               [55;17H} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {                [56;17H    printf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[57;17H} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {               [58;17H    printf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[59;100H90,17[29;21H[?25h[?25l[4m}[m[59;100H88,24[27;28H[?25h[?25l[29;17H[4m}    [m[27;28H[46m{[m[29;17H[4m[46m}[m[59;100H90,1[29;18H[?25h[59;1H[K[29;17H[?25l[59;99H190,13[8C42%[29;17H[?25h[?25l[59;99H[K[59;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?1000l[?2004l"hq.c" 436L, 10871C written
[?2004l[?1l>[?25h[?1049l[23;0;0ts4698512@moss:~/CSSE2310/Assignments/a3$ make
gcc -g -Wall -pedantic -std=gnu99 -o hq hq.c -I/local/courses/csse2310/include -L/local/courses/csse2310/lib -lcsse2310a3
[01m[Khq.c:[m[K In function â€˜[01m[Kspawn[m[Kâ€™:
[01m[Khq.c:189:23:[m[K [01;35m[Kwarning: [m[Kunused variable â€˜[01m[Kbuffer[m[Kâ€™ [[01;35m[K-Wunused-variable[m[K]
                 char* [01;35m[Kbuffer[m[K = read_line(readf);
                       [01;35m[K^~~~~~[m[K
s4698512@moss:~/CSSE2310/Assignments/a3$ ./hq
> spawn cat s  
New Job ID [0] created
> spawn ls
New Job ID [1] created
> spawn ls
^Cs4698512@moss:~/CSSE2310/Assignments/a3$ ./hqmakevim hq.c
[?1000h[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;59r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[59;1H"hq.c" 436L, 10871C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[33m162 [m[79C[100m [m
[33m163 [m[8Cjobs[[38;5;248m[104mjobid[m].pid = fork();[46C[100m [m
[33m164 [m[8C[33mif[m (!jobs[[38;5;248m[104mjobid[m].pid) {[48C[100m [m
[33m165 [m[12C[36m// child[m[59C[100m [m
[33m166 [m[79C[100m [m
[33m167 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[WRITE]);[36C[100m [m
[33m168 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[READ]);[39C[100m [m
[33m169 [m[79C[100m [m
[33m170 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].down[READ], STDIN_FILENO);[24C[100m [m
[33m171 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m172 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].up[WRITE], STDOUT_FILENO);[24C[100m [m
[33m173 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m
[33m174 [m[79C[100m [m
[33m175 [m[12C[32mint[m status;[56C[100m [m
[33m176 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m
[33m177 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m
[33m178 [m[16Cexit([38;5;130m99[m);[54C[100m [m
[33m179 [m[12C}[66C[100m [m
[33m180 [m[8C} [33melse[m {[63C[100m [m
[33m181 [m[12C[36m// parent[m[58C[100m [m
[33m182 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m183 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m
[33m184 [m[79C[100m [m
[33m185 [m[12Cfdopen(jobs[[38;5;248m[104mjobid[m].up[READ], [38;5;130m"r"[m);[33C[100m [m
[33m186 [m[12C[32mint[m ready = is_ready(jobs[[38;5;248m[104mjobid[m].up[READ]);[24C[100m [m
[33m187 [m[12C[32mFILE[m* readf = fdopen(jobs[[38;5;248m[104mjobid[m].up[READ], [38;5;130m"r"[m);[19C[100m [m
[33m188 [m[12C[33mif[m (ready) [46m{[m[55C[100m [m
[33m189 [m[16C[32mchar[m* buffer = read_line(readf);[31C[100m [m
[93m190 [m[4m            [m[4m[46m}[m[4m                                                                  [m[4m[100m [m[4m                                [m[30;1H[33m191 [m[8C}[70C[100m [m
[33m192 [m    }[74C[100m [m
[33m193 [m}[78C[100m [m
[33m194 [m[79C[100m [m
[33m195 [m[36m/* report()[m[68C[100m [m
[33m196 [m[36m * --------[m[68C[100m [m
[33m197 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m
[33m198 [m[36m *[m[77C[100m [m
[33m199 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m200 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m201 [m[36m */[m[76C[100m [m
[33m202 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[43C[100m [m
[33m203 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m204 [m[79C[100m [m
[33m205 [m    [36m// Header row[m[62C[100m [m
[33m206 [m    printf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[46C[100m [m
[33m207 [m[79C[100m [m
[33m208 [m    [36m// Job status output dependent on arg present status[m[23C[100m [m
[33m209 [m[79C[100m [m
[33m210 [m    [36m// check args[m[62C[100m [m
[33m211 [m    [33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[37C[100m [m
[33m212 [m[8C[33mfor[m ([32mint[m i = [38;5;130m0[m; i <= [38;5;248m[104mjobid[m; i++) {[37C[100m [m
[33m213 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[31C[100m [m
[33m214 [m[12C[33mif[m (!jobs[i].finished) {[43C[100m [m
[33m215 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m216 [m[12C} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[28C[100m [m
[33m217 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[12C[100m [m
[33m218 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {[26C[100m [m
[33m219 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[11C[100m [m[59;99H190,13[8C42%[29;17H[?25h[?12$p[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m220 [m[12C} [33melse[m {[59C[100m [m
[33m221 [m[16Cprintf([38;5;130m"Error[m[35m\n[m[38;5;130m"[m);[45C[100m [m
[33m222 [m[12C}[66C[100m [m[59;1H[K[59;99H190,13[8C43%[26;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m223 [m[8C}[70C[100m [m
[33m224 [m[79C[100m [m
[33m225 [m    } [33melse[m [33mif[m (spcs > [38;5;130m1[m) {      [36m// report on specific job[m[22C[100m [m[59;99H[K[59;99H190,13[8C44%[23;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m226 [m[8C[36m// check for job tokens[1][m[45C[100m [m
[33m227 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m228 [m[12C[32mint[m jobq = atoi(args[[38;5;130m0[m]);[42C[100m [m[59;99H[K[59;99H190,13[8C44%[20;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m229 [m[79C[100m [m
[33m230 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, jobq, jobs[jobq].name);[25C[100m [m
[33m231 [m[79C[100m [m[59;99H[K[59;99H190,13[8C45%[17;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m232 [m[12C[33mif[m (WIFEXITED(jobs[jobq].status)) {[32C[100m [m
[33m233 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WEXITSTATUS(jobs[jobq].status));[8C[100m [m
[33m234 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[jobq].status)) {[23C[100m [m[59;99H[K[59;99H190,13[8C46%[14;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m235 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[jobq].status));[8C[100m [m
[33m236 [m[12C} [33melse[m {[59C[100m [m
[33m237 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m[59;99H[K[59;99H190,13[8C47%[11;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m238 [m[12C}[66C[100m [m
[33m239 [m[8C} [33melse[m {[63C[100m [m
[33m240 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m[59;99H[K[59;99H190,13[8C48%[8;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m241 [m[8C}[70C[100m [m
[33m242 [m    }[74C[100m [m
[33m243 [m}[78C[100m [m[59;99H[K[59;99H190,13[8C48%[5;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m244 [m[79C[100m [m
[33m245 [m[36m/* call_signal()[m[63C[100m [m
[33m246 [m[36m * -------------[m[63C[100m [m[59;99H[K[59;99H190,13[8C49%[2;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m192 [m[4m    }                                                                          [m[4m[100m [m[4m                                [m[56;1H[33m247 [m[36m * Sends signal to child process specified[m[37C[100m [m
[33m248 [m[36m *[m[77C[100m [m
[33m249 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[59;99H[K[59;99H192,5[9C50%[1;9H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m195 [m[4m[36m/* report()[m[4m                                                                    [m[4m[100m [m[4m                                [m[56;1H[33m250 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m251 [m[36m */[m[76C[100m [m
[33m252 [m[32mvoid[m call_signal([32mchar[m** args, [32mint[m spcs) {[38C[100m [m[59;99H[K[59;99H195,11[8C51%[1;15H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m198 [m[4m[36m *[m[4m                                                                             [m[4m[100m [m[4m                                [m[56;1H[33m253 [m    [33mif[m (spcs < [38;5;130m3[m) {[60C[100m [m
[33m254 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m255 [m    } [33melse[m {[67C[100m [m[59;99H[K[59;99H198,2[9C52%[1;6H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m201 [m[4m[36m */[m[4m                                                                            [m[4m[100m [m[4m                                [m[56;1H[33m256 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m257 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m
[33m258 [m[12C[33mif[m (is_number(args[[38;5;130m1[m])){[43C[100m [m[59;99H[K[59;99H201,3[9C52%[1;7H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m204 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m259 [m[16C[32mint[m sgnl = atoi(args[[38;5;130m1[m]);[38C[100m [m
[33m260 [m[16C[33mif[m (sgnl >= [38;5;130m1[m && sgnl <= [38;5;130m31[m) {[33C[100m [m
[33m261 [m[20C[32mint[m pid = jobs[job].pid;[35C[100m [m[59;99H[K[59;99H204,0-1[7C53%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m207 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m262 [m[20Ckill(pid, sgnl);[43C[100m [m
[33m263 [m[16C} [33melse[m {[55C[100m [m
[33m264 [m[20Cprintf([38;5;130m"Error: Invalid signal[m[35m\n[m[38;5;130m"[m);[25C[100m [m[59;99H[K[59;99H207,0-1[7C54%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m210 [m[4m    [m[4m[36m// check args[m[4m                                                              [m[4m[100m [m[4m                                [m[56;1H[33m265 [m[16C}[62C[100m [m
[33m266 [m[12C} [33melse[m {[59C[100m [m
[33m267 [m[16Cprintf([38;5;130m"Error: Invalid signal[m[35m\n[m[38;5;130m"[m);[29C[100m [m[59;99H[K[59;99H210,13[8C55%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m213 [m[4m            printf([m[4m[38;5;130m"[[m[4m[35m%d[m[4m[38;5;130m] [m[4m[35m%s[m[4m[38;5;130m:"[m[4m, i, jobs[i].name);                               [m[4m[100m [m[4m                                [m[56;1H[33m268 [m[12C}[66C[100m [m
[33m269 [m[8C} [33melse[m {[63C[100m [m
[33m270 [m[12Cprintf([38;5;130m"Error: invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m[59;99H[K[59;99H213,13[8C56%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m216 [m[4m            } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (WIFEXITED(jobs[i].status)) {                            [m[4m[100m [m[4m                                [m[56;1H[33m271 [m[8C}[70C[100m [m
[33m272 [m    }[74C[100m [m
[33m273 [m}[78C[100m [m[59;99H[K[59;99H216,13[8C56%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m219 [m[4m                printf([m[4m[38;5;130m"signalled([m[4m[35m%d[m[4m[38;5;130m)[m[4m[35m\n[m[4m[38;5;130m"[m[4m, WTERMSIG(jobs[i].status));           [m[4m[100m [m[4m                                [m[56;1H[33m274 [m[79C[100m [m
[33m275 [m[36m/* hq_wait()[m[67C[100m [m
[33m276 [m[36m * ---------[m[67C[100m [m[59;99H[K[59;99H219,13[8C57%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m222 [m[4m            }                                                                  [m[4m[100m [m[4m                                [m[56;1H[33m277 [m[36m * Causes hq to wait for specified seconds[m[37C[100m [m
[33m278 [m[36m *[m[77C[100m [m
[33m279 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[59;99H[K[59;99H222,13[8C58%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m225 [m[4m    } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (spcs > [m[4m[38;5;130m1[m[4m) {      [m[4m[36m// report on specific job[m[4m                      [m[4m[100m [m[4m                                [m[56;1H[33m280 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m281 [m[36m */[m[76C[100m [m
[33m282 [m[32mvoid[m hq_wait([32mchar[m** args, [32mint[m spcs) {[42C[100m [m[59;99H[K[59;99H225,13[8C59%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m228 [m[4m            [m[4m[32mint[m[4m jobq = atoi(args[[m[4m[38;5;130m0[m[4m]);                                          [m[4m[100m [m[4m                                [m[56;1H[33m283 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m284 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m285 [m    } [33melse[m {[67C[100m [m[59;99H[K[59;99H228,13[8C60%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m231 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m286 [m[8C[33mif[m (strcmp(args[[38;5;130m0[m], [38;5;130m""[m) && is_number(args[[38;5;130m0[m])) {[23C[100m [m
[33m287 [m[12Csleep(atoi(args[[38;5;130m0[m]) * [38;5;130m1000000[m);[36C[100m [m
[33m288 [m[8C} [33melse[m {[63C[100m [m[59;99H[K[59;99H231,0-1[7C60%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m234 [m[4m            } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (WIFSIGNALED(jobs[jobq].status)) {                       [m[4m[100m [m[4m                                [m[56;1H[33m289 [m[12Cprintf([38;5;130m"Error: Invalid sleep time[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m290 [m[8C}[70C[100m [m
[33m291 [m    }[74C[100m [m[59;99H[K[59;99H234,13[8C61%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m237 [m[4m                printf([m[4m[38;5;130m"running[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                           [m[4m[100m [m[4m                                [m[56;1H[33m292 [m}[78C[100m [m
[33m293 [m[79C[100m [m
[33m294 [m[36m/* send()[m[70C[100m [m[59;99H[K[59;99H237,13[8C62%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m240 [m[4m            printf([m[4m[38;5;130m"Error: Invalid job[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                    [m[4m[100m [m[4m                                [m[56;1H[33m295 [m[36m * ------[m[70C[100m [m
[33m296 [m[36m * Sends text down the pipe to specified job[m[35C[100m [m
[33m297 [m[36m *[m[77C[100m [m[59;99H[K[59;99H240,13[8C63%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m243 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[56;1H[33m298 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m299 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m300 [m[36m */[m[76C[100m [m[59;99H[K[59;99H243,1[9C64%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m246 [m[4m[36m * -------------[m[4m                                                               [m[4m[100m [m[4m                                [m[56;1H[33m301 [m[32mvoid[m send([32mchar[m** args, [32mint[m spcs) {[45C[100m [m
[33m302 [m    [33mif[m (spcs < [38;5;130m3[m) {[60C[100m [m
[33m303 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m[59;99H[K[59;99H246,13[8C64%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m249 [m[4m[36m * args: arguments provided in command line without first command[m[4m              [m[4m[100m [m[4m                                [m[56;1H[33m304 [m    } [33melse[m {[67C[100m [m
[33m305 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m306 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m[59;99H[K[59;99H249,13[8C65%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m252 [m[4m[32mvoid[m[4m call_signal([m[4m[32mchar[m[4m** args, [m[4m[32mint[m[4m spcs) {                                      [m[4m[100m [m[4m                                [m[56;1H[33m307 [m[12C[32mFILE[m* writef = fdopen(jobs[job].down[WRITE], [38;5;130m"w"[m);[17C[100m [m
[33m308 [m[12Cfprintf(writef, [38;5;130m"[m[35m%s\n[m[38;5;130m"[m, args[[38;5;130m1[m]);[34C[100m [m
[33m309 [m[8C} [33melse[m {[63C[100m [m[59;99H[K[59;99H252,13[8C66%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m255 [m[4m    } [m[4m[33melse[m[4m [m[4m[46m{[m[4m                                                                   [m[4m[100m [m[4m                                [m[18;9H[46m}[m[56;1H[33m310 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m311 [m[8C}[70C[100m [m
[33m312 [m    }[74C[100m [m[59;99H[K[59;99H255,12[8C67%[1;16H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m258 [m[4m            [m[4m[33mif[m[4m (is_number(args[[m[4m[38;5;130m1[m[4m])){                                           [m[4m[100m [m[4m                                [m[15;9H}[56;1H[33m313 [m}[78C[100m [m
[33m314 [m[79C[100m [m
[33m315 [m[36m/* rcv()[m[71C[100m [m[59;99H[K[59;99H258,13[8C67%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m261 [m[4m                    [m[4m[32mint[m[4m pid = jobs[job].pid;                                   [m[4m[100m [m[4m                                [m[56;1H[33m316 [m[36m * -----[m[71C[100m [m
[33m317 [m[36m * Receives data through the pipe from the specified child process.[m[12C[100m [m
[33m318 [m[36m * Prints this to stdout in the parent, hq.[m[36C[100m [m[59;99H[K[59;99H261,13[8C68%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m264 [m[4m                    printf([m[4m[38;5;130m"Error: Invalid signal[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                         [m[4m[100m [m[4m                                [m[56;1H[33m319 [m[36m *[m[77C[100m [m
[33m320 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m321 [m[36m * spcs: number of original tokens[m[45C[100m [m[59;99H[K[59;99H264,13[8C69%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m267 [m[4m                printf([m[4m[38;5;130m"Error: Invalid signal[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                             [m[4m[100m [m[4m                                [m[56;1H[33m322 [m[36m */[m[76C[100m [m
[33m323 [m[32mvoid[m rcv([32mchar[m** args, [32mint[m spcs) {[46C[100m [m
[33m324 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m[59;99H[K[59;99H267,13[8C70%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m270 [m[4m            printf([m[4m[38;5;130m"Error: invalid job[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                    [m[4m[100m [m[4m                                [m[56;1H[33m325 [m[8Cprintf([38;5;130m"Error: Insufficient arguments.[m[35m\n[m[38;5;130m"[m);[28C[100m [m
[33m326 [m    } [33melse[m {[67C[100m [m
[33m327 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m[59;99H[K[59;99H270,13[8C71%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m273 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[56;1H[33m328 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m
[33m329 [m[12C[32mint[m ready = is_ready(jobs[job].up[READ]);[26C[100m [m
[33m330 [m[12C[32mFILE[m* readf = fdopen(jobs[job].up[READ], [38;5;130m"r"[m);[21C[100m [m[59;99H[K[59;99H273,1[9C71%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m276 [m[4m[36m * ---------[m[4m                                                                   [m[4m[100m [m[4m                                [m[56;1H[33m331 [m[12C[33mif[m (ready) {[55C[100m [m
[33m332 [m[16C[32mchar[m* buffer = read_line(readf);[31C[100m [m
[33m333 [m[16C[33mif[m (buffer == [38;5;130m0[m) {[45C[100m [m[59;99H[K[59;99H276,12[8C72%[1;16H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m279 [m[4m[36m * args: arguments provided in command line without first command[m[4m              [m[4m[100m [m[4m                                [m[56;1H[33m334 [m[20Cprintf([38;5;130m"<no input>[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m335 [m[16C} [33melse[m [33mif[m (buffer == [38;5;130mNULL[m) {[35C[100m [m
[33m336 [m[20Cprintf([38;5;130m"<EOF>[m[35m\n[m[38;5;130m"[m);[41C[100m [m[59;99H[K[59;99H279,13[8C73%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m282 [m[4m[32mvoid[m[4m hq_wait[m[4m[46m([m[4m[32mchar[m[4m** args, [m[4m[32mint[m[4m spcs[m[4m[46m)[m[4m {                                          [m[4m[100m [m[4m                                [m[56;1H[33m337 [m[16C} [33melse[m {[55C[100m [m
[33m338 [m[20Cprintf([38;5;130m"[m[35m%s\n[m[38;5;130m"[m, buffer);[36C[100m [m
[33m339 [m[16C}[62C[100m [m[59;99H[K[59;99H282,13[8C74%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m285 [m[4m    } [m[4m[33melse[m[4m [m[4m[46m{[m[4m                                                                   [m[4m[100m [m[4m                                [m[7;9H[46m}[m[56;1H[33m340 [m[12C}[66C[100m [m
[33m341 [m[8C} [33melse[m {[63C[100m [m
[33m342 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m[59;99H[K[59;99H285,12[8C75%[1;16H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m288 [m[4m        } [m[4m[33melse[m[4m {                                                               [m[4m[100m [m[4m                                [m[4;9H}[56;1H[33m343 [m[8C}[70C[100m [m
[33m344 [m[79C[100m [m
[33m345 [m[79C[100m [m[59;99H[K[59;99H288,13[8C75%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m291 [m[4m    }                                                                          [m[4m[100m [m[4m                                [m[56;1H[33m346 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m347 [m    }[74C[100m [m
[33m348 [m}[78C[100m [m[59;99H[K[59;99H291,5[9C76%[1;9H[?25h[?25l[33m291 [m    }                                                                          [100m [m[1;85H[K[41;28H[46m{[m[50;1H[93m340 [m[4m            [m[4m[46m}[m[4m                                                                  [m[4m[100m [m[4m                                [m[59;99H340,13[50;17H[?25h[?25l[59;99H[K[59;1H:[?2004h[?25hq[?25l[?25h[?25l[?1000l[?2004l[59;1H[K[59;1H[?2004l[?1l>[?25h[?1049l[23;0;0ts4698512@moss:~/CSSE2310/Assignments/a3$ s[K./q[Khq
> pspawn      spawn cat ./g sigcat.c
New Job ID [0] created
> spawn ls
New Job ID [1] created
> spawn ls
New Job ID [2] created
> spawn cat
New Job ID [3] created
> spawn       en  send 0 "test"
> rv cv 0
// CSSE2310 Assignment 3 a3
> send 3 "tse  est"
> rcv 3
> spawn ls
New Job ID [4] created
> spawn ls
^Cs4698512@moss:~/CSSE2310/Assignments/a3$ ./hqvim hq.c[4P./hqvim hq.c[4P./hqvim hq.c[4P./hqvim hq.c[4P./hq[Ktesta3.sh
Setting up for tests
Time: Mon May 16 21:58:29 AEST 2022
[1mRunning make...(B[m
make: Nothing to be done for 'all'.
[1mRunning tests ... (B[m
----------------------------------------------------------------------
1.1   - sigcat_copies_input01                               [1m[32mPASS(B[m
1.2   - sigcat_copies_input02                               [1m[32mPASS(B[m
1.3   - sigcat_copies_input03                               [1m[31mFAIL(B[m
    Mismatch in file /tmp/1secondsample.out
2.1   - sigcat_signals01                                    [1m[32mPASS(B[m
2.2   - sigcat_signals02                                    [1m[32mPASS(B[m
2.3   - sigcat_signals03                                    [1m[32mPASS(B[m
2.4   - sigcat_signals04                                    [1m[32mPASS(B[m
2.5   - sigcat_signals05                                    [1m[32mPASS(B[m
2.6   - sigcat_signals06                                    [1m[32mPASS(B[m
2.7   - sigcat_signals07                                    [1m[32mPASS(B[m
2.8   - sigcat_signals08                                    [1m[32mPASS(B[m
2.9   - sigcat_signals09                                    [1m[32mPASS(B[m
2.10  - sigcat_signals10                                    [1m[32mPASS(B[m
2.11  - sigcat_signals11                                    [1m[32mPASS(B[m
2.12  - sigcat_signals12                                    [1m[32mPASS(B[m
2.13  - sigcat_signals13                                    [1m[32mPASS(B[m
2.14  - sigcat_signals14                                    [1m[32mPASS(B[m
2.15  - sigcat_signals15                                    [1m[32mPASS(B[m
3.1   - sigcat_sigusr01                                     [1m[32mPASS(B[m
3.2   - sigcat_sigusr02                                     [1m[32mPASS(B[m
4.1   - hq_invalid01                                        [1m[32mPASS(B[m
4.2   - hq_invalid02                                        [1m[32mPASS(B[m
5.1   - hq_spawn_cmd01                                      [1m[32mPASS(B[m
5.2   - hq_spawn_cmd02                                      [1m[32mPASS(B[m
5.3   - hq_spawn_cmd03                                      [1m[32mPASS(B[m
5.4   - hq_spawn_cmd04                                      [1m[32mPASS(B[m
5.5   - hq_spawn_cmd05                                      [1m[31mFAIL(B[m
    Got exitcode 124 (Timeout) - but expected 0
6.1   - hq_report_cmd01                                     [1m[32mPASS(B[m
6.2   - hq_report_cmd02                                     [1m[31mFAIL(B[m
    Mismatch on stdout
6.3   - hq_report_cmd03                                     [1m[31mFAIL(B[m
    Mismatch on stdout
6.4   - hq_report_cmd04                                     [1m[31mFAIL(B[m
    Mismatch on stdout
6.5   - hq_report_cmd05                                     [1m[32mPASS(B[m
6.6   - hq_report_cmd06                                     [1m[31mFAIL(B[m
    Mismatch on stdout
6.7   - hq_report_cmd07                                     [1m[31mFAIL(B[m
    Mismatch on stdout
7.1   - hq_sleep_cmd01                                      [1m[32mPASS(B[m
7.2   - hq_sleep_cmd02                                      [1m[32mPASS(B[m
7.3   - hq_sleep_cmd03                                      [1m[31mFAIL(B[m
    Program 'testfiles/check7.3_out.sh' returned false
8.1   - hq_send_cmd01                                       [1m[32mPASS(B[m
8.2   - hq_send_cmd02                                       [1m[32mPASS(B[m
8.3   - hq_send_cmd03                                       ^CCleaning up ...
Time: Mon May 16 21:59:41 AEST 2022
Done
s4698512@moss:~/CSSE2310/Assignments/a3$ spawn [K[K[K[K[K[Kvim hq.c
[?1000h[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;59r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[59;1H"hq.c" 436L, 10871C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[33m312 [m    }[74C[100m [m
[33m313 [m}[78C[100m [m
[33m314 [m[79C[100m [m
[33m315 [m[36m/* rcv()[m[71C[100m [m
[33m316 [m[36m * -----[m[71C[100m [m
[33m317 [m[36m * Receives data through the pipe from the specified child process.[m[12C[100m [m
[33m318 [m[36m * Prints this to stdout in the parent, hq.[m[36C[100m [m
[33m319 [m[36m *[m[77C[100m [m
[33m320 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m321 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m322 [m[36m */[m[76C[100m [m
[33m323 [m[32mvoid[m rcv([32mchar[m** args, [32mint[m spcs) {[46C[100m [m
[33m324 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m325 [m[8Cprintf([38;5;130m"Error: Insufficient arguments.[m[35m\n[m[38;5;130m"[m);[28C[100m [m
[33m326 [m    } [33melse[m {[67C[100m [m
[33m327 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m328 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m
[33m329 [m[12C[32mint[m ready = is_ready(jobs[job].up[READ]);[26C[100m [m
[33m330 [m[12C[32mFILE[m* readf = fdopen(jobs[job].up[READ], [38;5;130m"r"[m);[21C[100m [m
[33m331 [m[12C[33mif[m (ready) [46m{[m[55C[100m [m
[33m332 [m[16C[32mchar[m* buffer = read_line(readf);[31C[100m [m
[33m333 [m[16C[33mif[m (buffer == [38;5;130m0[m) {[45C[100m [m
[33m334 [m[20Cprintf([38;5;130m"<no input>[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m335 [m[16C} [33melse[m [33mif[m (buffer == [38;5;130mNULL[m) {[35C[100m [m
[33m336 [m[20Cprintf([38;5;130m"<EOF>[m[35m\n[m[38;5;130m"[m);[41C[100m [m
[33m337 [m[16C} [33melse[m {[55C[100m [m
[33m338 [m[20Cprintf([38;5;130m"[m[35m%s\n[m[38;5;130m"[m, buffer);[36C[100m [m
[33m339 [m[16C}[62C[100m [m
[93m340 [m[4m            [m[4m[46m}[m[4m                                                                  [m[4m[100m [m[4m                                [m[30;1H[33m341 [m[8C} [33melse[m {[63C[100m [m
[33m342 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m343 [m[8C}[70C[100m [m
[33m344 [m[79C[100m [m
[33m345 [m[79C[100m [m
[33m346 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m347 [m    }[74C[100m [m
[33m348 [m}[78C[100m [m
[33m349 [m[79C[100m [m
[33m350 [m[36m/* eof()[m[71C[100m [m
[33m351 [m[36m * -----[m[71C[100m [m
[33m352 [m[36m * Closes the stdin side of the pipe so the child process can no longer read [m  [100m [m
[33m353 [m[36m * as the pipe will be EOF.[m[52C[100m [m
[33m354 [m[36m *[m[77C[100m [m
[33m355 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m356 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m357 [m[36m */[m[76C[100m [m
[33m358 [m[32mvoid[m eof([32mchar[m** args, [32mint[m spcs) {[46C[100m [m
[33m359 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m360 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m361 [m    } [33melse[m {[67C[100m [m
[33m362 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m363 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m
[33m364 [m[12Cclose(jobs[job].down[WRITE]);[38C[100m [m
[33m365 [m[8C} [33melse[m {[63C[100m [m
[33m366 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m367 [m[8C}[70C[100m [m
[33m368 [m    }[74C[100m [m
[33m369 [m}[78C[100m [m[59;99H340,13[8C82%[29;17H[?25h[?12$p[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m309 [m[8C} [33melse[m {[63C[100m [m
[33m310 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m311 [m[8C}[70C[100m [m[59;1H[K[59;99H340,13[8C81%[32;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m306 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m
[33m307 [m[12C[32mFILE[m* writef = fdopen(jobs[job].down[WRITE], [38;5;130m"w"[m);[17C[100m [m
[33m308 [m[12Cfprintf(writef, [38;5;130m"[m[35m%s\n[m[38;5;130m"[m, args[[38;5;130m1[m]);[34C[100m [m[59;99H[K[59;99H340,13[8C80%[35;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m303 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m304 [m    } [33melse[m {[67C[100m [m
[33m305 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m[59;99H[K[59;99H340,13[8C79%[38;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m300 [m[36m */[m[76C[100m [m
[33m301 [m[32mvoid[m send([32mchar[m** args, [32mint[m spcs) {[45C[100m [m
[33m302 [m    [33mif[m (spcs < [38;5;130m3[m) {[60C[100m [m[59;99H[K[59;99H340,13[8C79%[41;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m297 [m[36m *[m[77C[100m [m
[33m298 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m299 [m[36m * spcs: number of original tokens[m[45C[100m [m[59;99H[K[59;99H340,13[8C78%[44;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m294 [m[36m/* send()[m[70C[100m [m
[33m295 [m[36m * ------[m[70C[100m [m
[33m296 [m[36m * Sends text down the pipe to specified job[m[35C[100m [m[59;99H[K[59;99H340,13[8C77%[47;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m291 [m    }[74C[100m [m
[33m292 [m}[78C[100m [m
[33m293 [m[79C[100m [m[59;99H[K[59;99H340,13[8C76%[50;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m288 [m[8C} [33melse[m {[63C[100m [m
[33m289 [m[12Cprintf([38;5;130m"Error: Invalid sleep time[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m290 [m[8C}[70C[100m [m[59;99H[K[59;99H340,13[8C75%[53;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m285 [m    } [33melse[m {[67C[100m [m
[33m286 [m[8C[33mif[m (strcmp(args[[38;5;130m0[m], [38;5;130m""[m) && is_number(args[[38;5;130m0[m])) {[23C[100m [m
[33m287 [m[12Csleep(atoi(args[[38;5;130m0[m]) * [38;5;130m1000000[m);[36C[100m [m[59;99H[K[59;99H340,13[8C75%[56;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m282 [m[32mvoid[m hq_wait([32mchar[m** args, [32mint[m spcs) {[42C[100m [m
[33m283 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m284 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m[50;28H{[58;1H[93m339 [m[4m                }                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H339,13[8C74%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m279 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m280 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m281 [m[36m */[m[76C[100m [m[58;1H[93m336 [m[4m                    printf([m[4m[38;5;130m"<EOF>[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                         [m[4m[100m [m[4m                                [m[59;99H[K[59;99H336,13[8C73%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m276 [m[36m * ---------[m[67C[100m [m
[33m277 [m[36m * Causes hq to wait for specified seconds[m[37C[100m [m
[33m278 [m[36m *[m[77C[100m [m[58;1H[93m333 [m[4m                [m[4m[33mif[m[4m (buffer == [m[4m[38;5;130m0[m[4m) {                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H333,13[8C72%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m273 [m}[78C[100m [m
[33m274 [m[79C[100m [m
[33m275 [m[36m/* hq_wait()[m[67C[100m [m[58;1H[93m330 [m[4m            [m[4m[32mFILE[m[4m* readf = fdopen(jobs[job].up[READ], [m[4m[38;5;130m"r"[m[4m);                     [m[4m[100m [m[4m                                [m[59;99H[K[59;99H330,13[8C71%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m270 [m[12Cprintf([38;5;130m"Error: invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m271 [m[8C}[70C[100m [m
[33m272 [m    }[74C[100m [m[58;1H[93m327 [m[4m        [m[4m[33mif[m[4m (is_job(args[[m[4m[38;5;130m0[m[4m])) {                                                 [m[4m[100m [m[4m                                [m[59;99H[K[59;99H327,13[8C71%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m267 [m[16Cprintf([38;5;130m"Error: Invalid signal[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m268 [m[12C}[66C[100m [m
[33m269 [m[8C} [33melse[m {[63C[100m [m[58;1H[93m324 [m[4m    [m[4m[33mif[m[4m (spcs < [m[4m[38;5;130m2[m[4m) {                                                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H324,13[8C70%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m264 [m[20Cprintf([38;5;130m"Error: Invalid signal[m[35m\n[m[38;5;130m"[m);[25C[100m [m
[33m265 [m[16C}[62C[100m [m
[33m266 [m[12C} [33melse[m {[59C[100m [m[58;1H[93m321 [m[4m[36m * spcs: number of original tokens[m[4m                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H321,13[8C69%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m261 [m[20C[32mint[m pid = jobs[job].pid;[35C[100m [m
[33m262 [m[20Ckill(pid, sgnl);[43C[100m [m
[33m263 [m[16C} [33melse[m {[55C[100m [m[58;1H[93m318 [m[4m[36m * Prints this to stdout in the parent, hq.[m[4m                                    [m[4m[100m [m[4m                                [m[59;99H[K[59;99H318,13[8C68%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m258 [m[12C[33mif[m (is_number(args[[38;5;130m1[m])){[43C[100m [m
[33m259 [m[16C[32mint[m sgnl = atoi(args[[38;5;130m1[m]);[38C[100m [m
[33m260 [m[16C[33mif[m (sgnl >= [38;5;130m1[m && sgnl <= [38;5;130m31[m) {[33C[100m [m[58;1H[93m315 [m[4m[36m/* rcv()[m[4m                                                                       [m[4m[100m [m[4m                                [m[59;99H[K[59;99H315,8[9C67%[58;12H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m255 [m    } [33melse[m {[67C[100m [m
[33m256 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m257 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m[50;16H[46m{[m[58;1H[93m312 [m[4m    [m[4m[46m}[m[4m                                                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H312,5[9C67%[58;9H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m252 [m[32mvoid[m call_signal([32mchar[m** args, [32mint[m spcs) {[38C[100m [m
[33m253 [m    [33mif[m (spcs < [38;5;130m3[m) {[60C[100m [m
[33m254 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m[53;16H{[58;1H[93m309 [m[4m        } [m[4m[33melse[m[4m {                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H309,13[8C66%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m249 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m250 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m251 [m[36m */[m[76C[100m [m[58;1H[93m306 [m[4m            [m[4m[32mint[m[4m job = atoi(args[[m[4m[38;5;130m0[m[4m]);                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H306,13[8C65%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m246 [m[36m * -------------[m[63C[100m [m
[33m247 [m[36m * Sends signal to child process specified[m[37C[100m [m
[33m248 [m[36m *[m[77C[100m [m[58;1H[93m303 [m[4m        printf([m[4m[38;5;130m"Error: Insufficient arguments[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H303,13[8C64%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m243 [m}[78C[100m [m
[33m244 [m[79C[100m [m
[33m245 [m[36m/* call_signal()[m[63C[100m [m[58;1H[93m300 [m[4m[36m */[m[4m                                                                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H300,3[9C64%[58;7H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m240 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m241 [m[8C}[70C[100m [m
[33m242 [m    }[74C[100m [m[58;1H[93m297 [m[4m[36m *[m[4m                                                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H297,2[9C63%[58;6H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m237 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m238 [m[12C}[66C[100m [m
[33m239 [m[8C} [33melse[m {[63C[100m [m[58;1H[93m294 [m[4m[36m/* send()[m[4m                                                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H294,9[9C62%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m234 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[jobq].status)) {[23C[100m [m
[33m235 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[jobq].status));[8C[100m [m
[33m236 [m[12C} [33melse[m {[59C[100m [m[52;16H[46m{[m[58;1H[93m291 [m[4m    [m[4m[46m}[m[4m                                                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H291,5[9C61%[58;9H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m231 [m[79C[100m [m
[33m232 [m[12C[33mif[m (WIFEXITED(jobs[jobq].status)) {[32C[100m [m
[33m233 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WEXITSTATUS(jobs[jobq].status));[8C[100m [m[55;16H{


[93m288 [m[4m        } [m[4m[33melse[m[4m {                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H288,13[8C60%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m228 [m[12C[32mint[m jobq = atoi(args[[38;5;130m0[m]);[42C[100m [m
[33m229 [m[79C[100m [m
[33m230 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, jobq, jobs[jobq].name);[25C[100m [m[58;1H[93m285 [m[4m    } [m[4m[33melse[m[4m {                                                                   [m[4m[100m [m[4m                                [m[59;99H[K[59;99H285,12[8C60%[58;16H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m225 [m    } [33melse[m [33mif[m (spcs > [38;5;130m1[m) {      [36m// report on specific job[m[22C[100m [m
[33m226 [m[8C[36m// check for job tokens[1][m[45C[100m [m
[33m227 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m[58;1H[93m282 [m[4m[32mvoid[m[4m hq_wait[m[4m[46m([m[4m[32mchar[m[4m** args, [m[4m[32mint[m[4m spcs[m[4m[46m)[m[4m {                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H282,13[8C59%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m222 [m[12C}[66C[100m [m
[33m223 [m[8C}[70C[100m [m
[33m224 [m[79C[100m [m[58;1H[93m279 [m[4m[36m * args: arguments provided in command line without first command[m[4m              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H279,13[8C58%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m219 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[11C[100m [m
[33m220 [m[12C} [33melse[m {[59C[100m [m
[33m221 [m[16Cprintf([38;5;130m"Error[m[35m\n[m[38;5;130m"[m);[45C[100m [m[58;1H[93m276 [m[4m[36m * ---------[m[4m                                                                   [m[4m[100m [m[4m                                [m[59;99H[K[59;99H276,12[8C57%[58;16H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m216 [m[12C} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[28C[100m [m
[33m217 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[12C[100m [m
[33m218 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {[26C[100m [m[37;45H[46m{[m[58;1H[93m273 [m[4m[46m}[m[4m                                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H273,1[9C56%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m213 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[31C[100m [m
[33m214 [m[12C[33mif[m (!jobs[i].finished) {[43C[100m [m
[33m215 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m[40;45H{[58;1H[93m270 [m[4m            printf([m[4m[38;5;130m"Error: invalid job[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                    [m[4m[100m [m[4m                                [m[59;99H[K[59;99H270,13[8C56%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m210 [m    [36m// check args[m[62C[100m [m
[33m211 [m    [33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[37C[100m [m
[33m212 [m[8C[33mfor[m ([32mint[m i = [38;5;130m0[m; i <= [38;5;248m[104mjobid[m; i++) {[37C[100m [m[58;1H[93m267 [m[4m                printf([m[4m[38;5;130m"Error: Invalid signal[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H267,13[8C55%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m207 [m[79C[100m [m
[33m208 [m    [36m// Job status output dependent on arg present status[m[23C[100m [m
[33m209 [m[79C[100m [m[58;1H[93m264 [m[4m                    printf([m[4m[38;5;130m"Error: Invalid signal[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                         [m[4m[100m [m[4m                                [m[59;99H[K[59;99H264,13[8C54%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m204 [m[79C[100m [m
[33m205 [m    [36m// Header row[m[62C[100m [m
[33m206 [m    printf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[46C[100m [m[58;1H[93m261 [m[4m                    [m[4m[32mint[m[4m pid = jobs[job].pid;                                   [m[4m[100m [m[4m                                [m[59;99H[K[59;99H261,13[8C53%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m201 [m[36m */[m[76C[100m [m
[33m202 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[43C[100m [m
[33m203 [m    fflush([38;5;130mstdout[m);[60C[100m [m[58;1H[93m258 [m[4m            [m[4m[33mif[m[4m (is_number(args[[m[4m[38;5;130m1[m[4m])){                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H258,13[8C52%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m198 [m[36m *[m[77C[100m [m
[33m199 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m200 [m[36m * spcs: number of original tokens[m[45C[100m [m[58;1H[93m255 [m[4m    } [m[4m[33melse[m[4m {                                                                   [m[4m[100m [m[4m                                [m[59;99H[K[59;99H255,12[8C52%[58;16H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m195 [m[36m/* report()[m[68C[100m [m
[33m196 [m[36m * --------[m[68C[100m [m
[33m197 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m[58;1H[93m252 [m[4m[32mvoid[m[4m call_signal([m[4m[32mchar[m[4m** args, [m[4m[32mint[m[4m spcs) {                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H252,13[8C51%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m192 [m    }[74C[100m [m
[33m193 [m}[78C[100m [m
[33m194 [m[79C[100m [m[58;1H[93m249 [m[4m[36m * args: arguments provided in command line without first command[m[4m              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H249,13[8C50%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m189 [m[16C[32mchar[m* buffer = read_line(readf);[31C[100m [m
[33m190 [m[12C}[66C[100m [m
[33m191 [m[8C}[70C[100m [m[58;1H[93m246 [m[4m[36m * -------------[m[4m                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H246,13[8C49%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m186 [m[12C[32mint[m ready = is_ready(jobs[[38;5;248m[104mjobid[m].up[READ]);[24C[100m [m
[33m187 [m[12C[32mFILE[m* readf = fdopen(jobs[[38;5;248m[104mjobid[m].up[READ], [38;5;130m"r"[m);[19C[100m [m
[33m188 [m[12C[33mif[m (ready) {[55C[100m [m[17;40H[46m{[m[58;1H[93m243 [m[4m[46m}[m[4m                                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H243,1[9C48%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m183 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m
[33m184 [m[79C[100m [m
[33m185 [m[12Cfdopen(jobs[[38;5;248m[104mjobid[m].up[READ], [38;5;130m"r"[m);[33C[100m [m[20;40H{[58;1H[93m240 [m[4m            printf([m[4m[38;5;130m"Error: Invalid job[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                    [m[4m[100m [m[4m                                [m[59;99H[K[59;99H240,13[8C48%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m180 [m[8C} [33melse[m {[63C[100m [m
[33m181 [m[12C[36m// parent[m[58C[100m [m
[33m182 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m[58;1H[93m237 [m[4m                printf([m[4m[38;5;130m"running[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H237,13[8C47%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m177 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m
[33m178 [m[16Cexit([38;5;130m99[m);[54C[100m [m
[33m179 [m[12C}[66C[100m [m[56;51H[46m{[m

[93m234 [m[4m            [m[4m[46m}[m[4m [m[4m[33melse[m[4m [m[4m[33mif[m[4m (WIFSIGNALED(jobs[jobq].status)) {                       [m[4m[100m [m[4m                                [m[59;99H[K[59;99H234,13[8C46%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m174 [m[79C[100m [m
[33m175 [m[12C[32mint[m status;[56C[100m [m
[33m176 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m[58;1H[93m231 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H231,0-1[7C45%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m171 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m172 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].up[WRITE], STDOUT_FILENO);[24C[100m [m
[33m173 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m[58;1H[93m228 [m[4m            [m[4m[32mint[m[4m jobq = atoi(args[[m[4m[38;5;130m0[m[4m]);                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H228,13[8C44%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m168 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[READ]);[39C[100m [m
[33m169 [m[79C[100m [m
[33m170 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].down[READ], STDIN_FILENO);[24C[100m [m[58;1H[93m225 [m[4m    } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (spcs > [m[4m[38;5;130m1[m[4m) {      [m[4m[36m// report on specific job[m[4m                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H225,13[8C44%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m165 [m[12C[36m// child[m[59C[100m [m
[33m166 [m[79C[100m [m
[33m167 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[WRITE]);[36C[100m [m[56;24H[46m{[m

[93m222 [m[4m            [m[4m[46m}[m[4m                                                                  [m[4m[100m [m[4m                                [m[59;99H[K[59;99H222,13[8C43%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m162 [m[79C[100m [m
[33m163 [m[8Cjobs[[38;5;248m[104mjobid[m].pid = fork();[46C[100m [m
[33m164 [m[8C[33mif[m (!jobs[[38;5;248m[104mjobid[m].pid) {[48C[100m [m[58;1H[93m219 [m[4m                printf([m[4m[38;5;130m"signalled([m[4m[35m%d[m[4m[38;5;130m)[m[4m[35m\n[m[4m[38;5;130m"[m[4m, WTERMSIG(jobs[i].status));           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H219,13[8C42%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m159 [m[79C[100m [m
[33m160 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, [38;5;248m[104mjobid[m);[28C[100m [m
[33m161 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m[56;40H[46m{[m

[93m216 [m[4m            [m[4m[46m}[m[4m [m[4m[33melse[m[4m [m[4m[33mif[m[4m (WIFEXITED(jobs[i].status)) {                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H216,13[8C41%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m156 [m[12Cperror([38;5;130m"Creating up pipe"[m);[40C[100m [m
[33m157 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m158 [m[8C}[70C[100m [m[58;1H[93m213 [m[4m            printf([m[4m[38;5;130m"[[m[4m[35m%d[m[4m[38;5;130m] [m[4m[35m%s[m[4m[38;5;130m:"[m[4m, i, jobs[i].name);                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H213,13[8C41%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m153 [m[8C}[70C[100m [m
[33m154 [m[79C[100m [m
[33m155 [m[8C[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].up) < [38;5;130m0[m) {[40C[100m [m[58;1H[93m210 [m[4m    [m[4m[36m// check args[m[4m                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H210,13[8C40%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m150 [m[8C[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].down) < [38;5;130m0[m) {[38C[100m [m
[33m151 [m[12Cperror([38;5;130m"Creating down pipe"[m);[38C[100m [m
[33m152 [m[12Cexit([38;5;130m1[m);[59C[100m [m[58;1H[93m207 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H207,0-1[7C39%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m147 [m[79C[100m [m
[33m148 [m[8Cstrcpy(jobs[[38;5;248m[104mjobid[m].name, args[[38;5;130m0[m]);[37C[100m [m
[33m149 [m[79C[100m [m[58;1H[93m204 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H204,0-1[7C38%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m144 [m[8C[38;5;248m[104mjobid[m++;[63C[100m [m
[33m145 [m[79C[100m [m
[33m146 [m[8Cjobs = realloc(jobs, ([38;5;248m[104mjobid[m + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));[16C[100m [m[58;1H[93m201 [m[4m[36m */[m[4m                                                                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H201,3[9C37%[58;7H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m141 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m142 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m143 [m    } [33melse[m {[67C[100m [m[58;1H[93m198 [m[4m[36m *[m[4m                                                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H198,2[9C37%[58;6H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m138 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m139 [m[36m */[m[76C[100m [m
[33m140 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs) {[44C[100m [m[58;1H[93m195 [m[4m[36m/* report()[m[4m                                                                    [m[4m[100m [m[4m                                [m[59;99H[K[59;99H195,11[8C36%[58;15H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m135 [m[36m * of the child process is unchanged[m[43C[100m [m
[33m136 [m[36m *[m[77C[100m [m
[33m137 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[9;16H[46m{[m[58;1H[93m192 [m[4m    [m[4m[46m}[m[4m                                                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H192,5[9C35%[58;9H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m132 [m[36m * -------[m[69C[100m [m
[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m
[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m[12;16H{[58;1H[93m189 [m[4m                [m[4m[32mchar[m[4m* buffer = read_line(readf);                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H189,13[8C34%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m129 [m}[78C[100m [m
[33m130 [m[79C[100m [m
[33m131 [m[36m/* spawn()[m[69C[100m [m[58;1H[93m186 [m[4m            [m[4m[32mint[m[4m ready = is_ready(jobs[[m[4m[38;5;248m[104mjobid[m[4m].up[READ]);                        [m[4m[100m [m[4m                                [m[59;99H[K[59;99H186,13[8C33%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m126 [m[79C[100m [m
[33m127 [m    free(jobs);[64C[100m [m
[33m128 [m    [33mreturn[m [38;5;130m0[m;[66C[100m [m[58;1H[93m183 [m[4m            close(jobs[[m[4m[38;5;248m[104mjobid[m[4m].up[WRITE]);                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H183,13[8C33%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m123 [m[8Cfree(input);[59C[100m [m
[33m124 [m[8Cfree(tokens);[58C[100m [m
[33m125 [m    }[74C[100m [m[58;1H[93m180 [m[4m        } [m[4m[33melse[m[4m {                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H180,13[8C32%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m120 [m[8Cprintf([38;5;130m"> "[m);[58C[100m [m
[33m121 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m122 [m[79C[100m [m[58;1H[93m177 [m[4m            [m[4m[33mif[m[4m (status == -[m[4m[38;5;130m1[m[4m) {                                                [m[4m[100m [m[4m                                [m[59;99H[K[59;99H177,13[8C31%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m117 [m[12Cprintf([38;5;130m"Error: Invalid command[m[35m\n[m[38;5;130m"[m);[32C[100m [m
[33m118 [m[8C}[70C[100m [m
[33m119 [m[79C[100m [m[58;1H[93m174 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H174,12[8C30%[58;16H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m114 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"cleanup"[m)) {[28C[100m [m
[33m115 [m[12Ccleanup();[57C[100m [m
[33m116 [m[8C} [33melse[m {[63C[100m [m[58;1H[93m171 [m[4m            close(jobs[[m[4m[38;5;248m[104mjobid[m[4m].down[READ]);                                     [m[4m[100m [m[4m                                [m[59;99H[K[59;99H171,13[8C29%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m111 [m[12Crcv(args, spcs);[51C[100m [m
[33m112 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"eof"[m)) {[32C[100m [m
[33m113 [m[12Ceof(args, spcs);[51C[100m [m[58;1H[93m168 [m[4m            close(jobs[[m[4m[38;5;248m[104mjobid[m[4m].up[READ]);                                       [m[4m[100m [m[4m                                [m[59;99H[K[59;99H168,13[8C29%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m108 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"send"[m)) {[31C[100m [m
[33m109 [m[12Csend(args, spcs);[50C[100m [m
[33m110 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"rcv"[m)) {[32C[100m [m[58;1H[93m165 [m[4m            [m[4m[36m// child[m[4m                                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H165,13[8C28%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m105 [m[12Ccall_signal(args, spcs);[43C[100m [m
[33m106 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"sleep"[m)) {[30C[100m [m
[33m107 [m[12Chq_wait(args, spcs);[47C[100m [m[58;1H[93m162 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H162,0-1[7C27%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m102 [m[12C[36m// Report[m[58C[100m [m
[33m103 [m[12Creport(args, spcs);[48C[100m [m
[33m104 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"signal"[m)) {[29C[100m [m[58;1H[93m159 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H159,0-1[7C26%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 99 [m[12C[36m// spawn[m[59C[100m [m
[33m100 [m[12Cspawn(args, spcs);[49C[100m [m
[33m101 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"report"[m)) {[29C[100m [m[58;1H[93m156 [m[4m            perror([m[4m[38;5;130m"Creating up pipe"[m[4m);                                        [m[4m[100m [m[4m                                [m[59;99H[K[59;99H156,13[8C25%[58;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m157 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m158 [m[8C}[70C[100m [m
[33m159 [m[79C[100m [m[59;99H[K[59;99H156,13[8C26%[55;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m160 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, [38;5;248m[104mjobid[m);[28C[100m [m
[33m161 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m162 [m[79C[100m [m[59;99H[K[59;99H156,13[8C27%[52;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m163 [m[8Cjobs[[38;5;248m[104mjobid[m].pid = fork();[46C[100m [m
[33m164 [m[8C[33mif[m (!jobs[[38;5;248m[104mjobid[m].pid) {[48C[100m [m
[33m165 [m[12C[36m// child[m[59C[100m [m[59;99H[K[59;99H156,13[8C28%[49;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m166 [m[79C[100m [m
[33m167 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[WRITE]);[36C[100m [m
[33m168 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[READ]);[39C[100m [m[59;99H[K[59;99H156,13[8C29%[46;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m169 [m[79C[100m [m
[33m170 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].down[READ], STDIN_FILENO);[24C[100m [m
[33m171 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m[59;99H[K[59;99H156,13[8C29%[43;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m172 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].up[WRITE], STDOUT_FILENO);[24C[100m [m
[33m173 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m
[33m174 [m[79C[100m [m[59;99H[K[59;99H156,13[8C30%[40;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m175 [m[12C[32mint[m status;[56C[100m [m
[33m176 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m
[33m177 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m[59;99H[K[59;99H156,13[8C31%[37;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m178 [m[16Cexit([38;5;130m99[m);[54C[100m [m
[33m179 [m[12C}[66C[100m [m
[33m180 [m[8C} [33melse[m {[63C[100m [m[59;99H[K[59;99H156,13[8C32%[34;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m181 [m[12C[36m// parent[m[58C[100m [m
[33m182 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m183 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m[59;99H[K[59;99H156,13[8C33%[31;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m184 [m[79C[100m [m
[33m185 [m[12Cfdopen(jobs[[38;5;248m[104mjobid[m].up[READ], [38;5;130m"r"[m);[33C[100m [m
[33m186 [m[12C[32mint[m ready = is_ready(jobs[[38;5;248m[104mjobid[m].up[READ]);[24C[100m [m[59;99H[K[59;99H156,13[8C33%[28;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m187 [m[12C[32mFILE[m* readf = fdopen(jobs[[38;5;248m[104mjobid[m].up[READ], [38;5;130m"r"[m);[19C[100m [m
[33m188 [m[12C[33mif[m (ready) {[55C[100m [m
[33m189 [m[16C[32mchar[m* buffer = read_line(readf);[31C[100m [m[59;99H[K[59;99H156,13[8C34%[25;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m190 [m[12C}[66C[100m [m
[33m191 [m[8C}[70C[100m [m
[33m192 [m    }[74C[100m [m[59;99H[K[59;99H156,13[8C35%[22;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m193 [m}[78C[100m [m
[33m194 [m[79C[100m [m
[33m195 [m[36m/* report()[m[68C[100m [m[59;99H[K[59;99H156,13[8C36%[19;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m196 [m[36m * --------[m[68C[100m [m
[33m197 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m
[33m198 [m[36m *[m[77C[100m [m[59;99H[K[59;99H156,13[8C37%[16;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m199 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m200 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m201 [m[36m */[m[76C[100m [m[59;99H[K[59;99H156,13[8C37%[13;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m202 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[43C[100m [m
[33m203 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m204 [m[79C[100m [m[59;99H[K[59;99H156,13[8C38%[10;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m205 [m    [36m// Header row[m[62C[100m [m
[33m206 [m    printf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[46C[100m [m
[33m207 [m[79C[100m [m[59;99H[K[59;99H156,13[8C39%[7;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m208 [m    [36m// Job status output dependent on arg present status[m[23C[100m [m
[33m209 [m[79C[100m [m
[33m210 [m    [36m// check args[m[62C[100m [m[59;99H[K[59;99H156,13[8C40%[4;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m150 [m[8C[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].down) < [38;5;130m0[m) {[38C[100m [m
[33m151 [m[12Cperror([38;5;130m"Creating down pipe"[m);[38C[100m [m
[33m152 [m[12Cexit([38;5;130m1[m);[59C[100m [m[59;99H[K[59;99H156,13[8C39%[7;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m147 [m[79C[100m [m
[33m148 [m[8Cstrcpy(jobs[[38;5;248m[104mjobid[m].name, args[[38;5;130m0[m]);[37C[100m [m
[33m149 [m[79C[100m [m[59;99H[K[59;99H156,13[8C38%[10;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m144 [m[8C[38;5;248m[104mjobid[m++;[63C[100m [m
[33m145 [m[79C[100m [m
[33m146 [m[8Cjobs = realloc(jobs, ([38;5;248m[104mjobid[m + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));[16C[100m [m[59;99H[K[59;99H156,13[8C37%[13;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m141 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m142 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m143 [m    } [33melse[m {[67C[100m [m[59;99H[K[59;99H156,13[8C37%[16;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m138 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m139 [m[36m */[m[76C[100m [m
[33m140 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs) {[44C[100m [m[59;99H[K[59;99H156,13[8C36%[19;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m135 [m[36m * of the child process is unchanged[m[43C[100m [m
[33m136 [m[36m *[m[77C[100m [m
[33m137 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[59;99H[K[59;99H156,13[8C35%[22;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m132 [m[36m * -------[m[69C[100m [m
[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m
[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m[59;99H[K[59;99H156,13[8C34%[25;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m129 [m}[78C[100m [m
[33m130 [m[79C[100m [m
[33m131 [m[36m/* spawn()[m[69C[100m [m[59;99H[K[59;99H156,13[8C33%[28;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m126 [m[79C[100m [m
[33m127 [m    free(jobs);[64C[100m [m
[33m128 [m    [33mreturn[m [38;5;130m0[m;[66C[100m [m[59;99H[K[59;99H156,13[8C33%[31;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m123 [m[8Cfree(input);[59C[100m [m
[33m124 [m[8Cfree(tokens);[58C[100m [m
[33m125 [m    }[74C[100m [m[59;99H[K[59;99H156,13[8C32%[34;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m120 [m[8Cprintf([38;5;130m"> "[m);[58C[100m [m
[33m121 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m122 [m[79C[100m [m[59;99H[K[59;99H156,13[8C31%[37;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m117 [m[12Cprintf([38;5;130m"Error: Invalid command[m[35m\n[m[38;5;130m"[m);[32C[100m [m
[33m118 [m[8C}[70C[100m [m
[33m119 [m[79C[100m [m[59;99H[K[59;99H156,13[8C30%[40;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m114 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"cleanup"[m)) {[28C[100m [m
[33m115 [m[12Ccleanup();[57C[100m [m
[33m116 [m[8C} [33melse[m {[63C[100m [m[59;99H[K[59;99H156,13[8C29%[43;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m111 [m[12Crcv(args, spcs);[51C[100m [m
[33m112 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"eof"[m)) {[32C[100m [m
[33m113 [m[12Ceof(args, spcs);[51C[100m [m[59;99H[K[59;99H156,13[8C29%[46;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m108 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"send"[m)) {[31C[100m [m
[33m109 [m[12Csend(args, spcs);[50C[100m [m
[33m110 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"rcv"[m)) {[32C[100m [m[59;99H[K[59;99H156,13[8C28%[49;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m105 [m[12Ccall_signal(args, spcs);[43C[100m [m
[33m106 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"sleep"[m)) {[30C[100m [m
[33m107 [m[12Chq_wait(args, spcs);[47C[100m [m[59;99H[K[59;99H156,13[8C27%[52;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m102 [m[12C[36m// Report[m[58C[100m [m
[33m103 [m[12Creport(args, spcs);[48C[100m [m
[33m104 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"signal"[m)) {[29C[100m [m[59;99H[K[59;99H156,13[8C26%[55;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 99 [m[12C[36m// spawn[m[59C[100m [m
[33m100 [m[12Cspawn(args, spcs);[49C[100m [m
[33m101 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"report"[m)) {[29C[100m [m[59;99H[K[59;99H156,13[8C25%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 96 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m 97 [m[79C[100m [m
[33m 98 [m[8C[33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"spawn"[m)) {[37C[100m [m[55;45H[46m{[m


[93m153 [m[4m        [m[4m[46m}[m[4m                                                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H153,9[9C25%[58;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m154 [m[79C[100m [m
[33m155 [m[8C[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].up) < [38;5;130m0[m) {[40C[100m [m
[33m156 [m[12Cperror([38;5;130m"Creating up pipe"[m);[40C[100m [m[59;99H[K[59;99H153,9[9C25%[55;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m157 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m158 [m[8C}[70C[100m [m
[33m159 [m[79C[100m [m[59;99H[K[59;99H153,9[9C26%[52;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m160 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, [38;5;248m[104mjobid[m);[28C[100m [m
[33m161 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m162 [m[79C[100m [m[59;99H[K[59;99H153,9[9C27%[49;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m163 [m[8Cjobs[[38;5;248m[104mjobid[m].pid = fork();[46C[100m [m
[33m164 [m[8C[33mif[m (!jobs[[38;5;248m[104mjobid[m].pid) {[48C[100m [m
[33m165 [m[12C[36m// child[m[59C[100m [m[59;99H[K[59;99H153,9[9C28%[46;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m166 [m[79C[100m [m
[33m167 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[WRITE]);[36C[100m [m
[33m168 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[READ]);[39C[100m [m[59;99H[K[59;99H153,9[9C29%[43;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m169 [m[79C[100m [m
[33m170 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].down[READ], STDIN_FILENO);[24C[100m [m
[33m171 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m[59;99H[K[59;99H153,9[9C29%[40;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m172 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].up[WRITE], STDOUT_FILENO);[24C[100m [m
[33m173 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m
[33m174 [m[79C[100m [m[59;99H[K[59;99H153,9[9C30%[37;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m175 [m[12C[32mint[m status;[56C[100m [m
[33m176 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m
[33m177 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m[59;99H[K[59;99H153,9[9C31%[34;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m178 [m[16Cexit([38;5;130m99[m);[54C[100m [m
[33m179 [m[12C}[66C[100m [m
[33m180 [m[8C} [33melse[m {[63C[100m [m[59;99H[K[59;99H153,9[9C32%[31;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m181 [m[12C[36m// parent[m[58C[100m [m
[33m182 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m183 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m[59;99H[K[59;99H153,9[9C33%[28;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m184 [m[79C[100m [m
[33m185 [m[12Cfdopen(jobs[[38;5;248m[104mjobid[m].up[READ], [38;5;130m"r"[m);[33C[100m [m
[33m186 [m[12C[32mint[m ready = is_ready(jobs[[38;5;248m[104mjobid[m].up[READ]);[24C[100m [m[59;99H[K[59;99H153,9[9C33%[25;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m187 [m[12C[32mFILE[m* readf = fdopen(jobs[[38;5;248m[104mjobid[m].up[READ], [38;5;130m"r"[m);[19C[100m [m
[33m188 [m[12C[33mif[m (ready) {[55C[100m [m
[33m189 [m[16C[32mchar[m* buffer = read_line(readf);[31C[100m [m[59;99H[K[59;99H153,9[9C34%[22;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m190 [m[12C}[66C[100m [m
[33m191 [m[8C}[70C[100m [m
[33m192 [m    }[74C[100m [m[59;99H[K[59;99H153,9[9C35%[19;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m193 [m}[78C[100m [m
[33m194 [m[79C[100m [m
[33m195 [m[36m/* report()[m[68C[100m [m[59;99H[K[59;99H153,9[9C36%[16;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m196 [m[36m * --------[m[68C[100m [m
[33m197 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m
[33m198 [m[36m *[m[77C[100m [m[59;99H[K[59;99H153,9[9C37%[13;13H[?25h[?25l[10;45H{


[33m153 [m        }                                                                      [100m [m[13;85H[K[45;1H[93m185 [m[4m            fdopen(jobs[[m[4m[38;5;248m[104mjobid[m[4m].up[READ], [m[4m[38;5;130m"r"[m[4m);                                 [m[4m[100m [m[4m                                [m[59;100H85,17[45;21H[?25h[?25l[59;104H6[45;20H[?25h[?25l[33m185 [m            fdo[7m[48;5;242mpen(jobs[jobid].up[READ], [m[7m[38;5;130m[48;5;242m"r"[m[7m[48;5;242m); [m                                [100m [m[45;85H[K[46;5H[7m[48;5;242m            [m[7m[32m[48;5;242mint[m[7m[48;5;242m ready = is_ready(jobs[jobid].up[READ]);  [47;5H            [m[7m[32m[48;5;242mFILE[m[7m[48;5;242m* readf = fdopen(jobs[jobid].up[READ], [m[7m[38;5;130m[48;5;242m"r"[m[7m[48;5;242m); [48;5H            [m[7m[33m[48;5;242mif[m[7m[48;5;242m (ready) { [49;5H                [m[7m[32m[48;5;242mchar[m[7m[48;5;242m* buffer = read_line(readf); [m
[93m190 [m[7m[48;5;242m            }[m[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H190,14[8C37%[50;18H[?25h[?25l[59;1H6 fewer lines[59;99H[K[45;1H[93m185 [m[4m            fdo        }                                                       [m[4m[100m [m[4m                                [m[46;5H    }                                                    [47;5H}                                                            [48;5H                         [49;5H[36m/* report()[m                                      
[33m190 [m[36m * --------[m  [51;5H[36m * Produces an outline to stdout of current child processes and their statuses[52;5H *[m   [53;5H[36m * args: arguments provided in command line without first command[54;5H * spcs: number of original tokens[55;5H */[m        [56;5H[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[57;5H    fflush([38;5;130mstdout[m);                                                           [58;5H  [59;1H[K[59;99H185,16[8C37%6 fewer lines[59;99H[K[59;99H185,16[8C37%[45;20H[?25h[?25l[?25h[?25l[40;20H[46m{[m[45;9H[4m[46m}[m[7C[4m   [8C [m[46;5H}    [47;5H [48;5H[36m/* report()[49;5H * --------[50;8HProduces an outline to stdout of current child processes and their statuses[m[51;7H                                                                            [52;7H[36m args: arguments provided in command line without first command[53;8Hspcs: number of original tokens[m                               [54;7H[36m/[m                               [55;5H[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[56;5H    fflush([38;5;130mstdout[m);                 [57;9H               [58;9H[36m// Header row[m[59;103H5 [45;9H[?25h[?25l[44;1H[93m184 [m[4m[46m}[m[4m                                                                              [m[4m[100m [m[4m                                [m[45;1H[33m185 [m                                                                               [100m [m[45;85H[K[46;5H[36m/* report()[47;5H * --------[48;5H * Produces an outline to stdout of current child processes and their statuses[m[49;7H         [50;8H[36margs: arguments provided in command line without first command[m             [51;7H[36m spcs: number of original tokens[52;7H/[m                                                              [53;5H[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[54;5H    fflush([38;5;130mstdout[m);[55;5H                                    [56;9H[36m// Header row[m  [57;9Hprintf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[58;9H             [59;101H4,1[44;5H[?25h[?25l[59;1H[38;5;130m-- INSERT --[m[59;13H[K[59;99H184,1[9C37%[44;5H[?25h[?25l[33m184 [m                                                                               [100m [m[44;85H[K[45;1H[93m185 [m[4m        }                                                                      [m[4m[100m [m[4m                                [m[46;5H           [47;5H[36m/* report()[48;8H--------[m                                                                   [49;7H[36m Produces an outline to stdout of current child processes and their statuses[m[50;7H                                                               [51;8H[36margs: arguments provided in command line without first command[52;7H spcs: number of original tokens[53;5H */[m                                 [54;5H[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[55;9Hfflush([38;5;130mstdout[m);[56;9H             [57;9H[36m// Header row[m                [58;9Hprintf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[45;13H[4m[46m}[m[59;101H5,9[45;13H[?25h[?25l[44;1H[93m184 [m[4m                                                                               [m[4m[100m [m[4m                                [m[45;1H[33m185 [m        [46m}[m                                                                      [100m [m[45;85H[K[40;20H{[45;13H}[59;101H4,1[44;5H[?25h[?25l[33m184 [m                                                                               [100m [m[44;85H[K[45;1H[93m185 [m[4m        }                                                                      [m[4m[100m [m[4m                                [m[40;20H[46m{[m[45;13H[4m[46m}[m[59;101H5,9[45;13H[?25h[?25l[44;1H[93m184 [m[4m                                                                               [m[4m[100m [m[4m                                [m[45;1H[33m185 [m        [46m}[m                                                                      [100m [m[45;85H[K[40;20H{[45;13H}[59;101H4,1[44;5H[?25h[?25l[33m184 [m                                                                               [100m [m[44;85H[K[45;1H[93m185 [m[4m        }                                                                      [m[4m[100m [m[4m                                [m[40;20H[46m{[m[45;13H[4m[46m}[m[59;101H5,9[45;13H[?25h[?25l[59;103H10[45;14H[?25h[?25l[33m185 [m        [46m}[m                                                                      [100m [m[45;85H[K[46;1H[93m186 [m[4m                                                                               [m[4m[100m [m[4m                                [m[47;5H           [48;5H[36m/* r                                                         [100m [m[45;85H[K[40;20H{[45;13H}[59;101H4,1[44;5H[?25h[?25l[33m184 [m                                                                               [100m [m[44;85H[K[45;1H[93m185 [m[4m        }                                                                      [m[4m[100m [m[4m                                [m[40;20H[46m{[m[45;13H[4m[46m}[m[59;101H5,9[45;13H[?25h[?25l[59;103H10[45;14H[?25h[?25l[33m185 [m        [46m}[m                                                                      [100m [m[45;85H[K[46;1H[93m186 [m[4m                                                                               [m[4m[100m [m[4m                                [m[47;5H           [48;5H[36m/* report()[49;8H--------[m                                                                   [50;7H[36m Produces an outline to stdout of current child processes and their statuses[m[51;7H                                                               [52;8H[36margs: arguments provided in command line without first command[53;7H spcs: number of original tokens[54;5H */[m                                 [55;5H[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[56;9Hfflush([38;5;130mstdout[m);[57;9H             [58;9H[36m// Header row[m                [40;20H{[45;13H}[59;101H6,9 [46;13H[?25h[?25l[4m{[m[59;103H10[46;14H[?25h[?25l[4m [m[59;103H9 [46;13H[?25h[?25l[4m}[m[59;100H43,12[3;16H[?25h[?25l[46;1H[33m186 [m    }                                                                          [100m [m[46;85H[K[47;1H[93m187 [m[4m                                                                               [m[4m[100m [m[4m                                [m[48;5H           [49;5H[36m/* report()[50;8H--------[m                                                                   [51;7H[36m Produces an outline to stdout of current child processes and their statuses[m[52;7H                                                               [53;8H[36margs: arguments provided in command line without first command[54;7H spcs: number of original tokens[55;5H */[m                                 [56;5H[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[57;9Hfflush([38;5;130mstdout[m);[58;9H             [59;100H87,5 [47;9H[?25h[?25l[4m}[m[59;103H2[47;6H[?25h[59;1H[K[47;5H[?25l[59;99H187,1[9C37%[47;5H[?25h[?25l[59;99H[K[59;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?1000l[?2004l"hq.c" 430L, 10606C written
[?2004l[?1l>[?25h[?1049l[23;0;0ts4698512@moss:~/CSSE2310/Assignments/a3$ testa3.sh explain 6.2
----------------------------------------------------------------------
[32m[1m=== 6.2 - hq_report_cmd02 ===(B[m
[1mDescription:(B[m
    Run report after spawning job reporting exit status 0
[1mWhat the test runs:(B[m
    slowcat.sh testfiles/6.2.in | ./hq  > 6.2.stdout 2> 6.2.stderr
[1mWhat the test checks:(B[m
    Expect exit code: 0
    Standard output (6.2.stdout) should match testfiles/6.2.stdout
    Standard error (6.2.stderr) should match testfiles/empty

----------------------------------------------------------------------
Cleaning up ...
Time: Mon May 16 22:00:14 AEST 2022
Done
s4698512@moss:~/CSSE2310/Assignments/a3$ slowcat.sh testfiles/6.2.in | ./hq  > 6.2.stdout 2> 6.2.stderr
s4698512@moss:~/CSSE2310/Assignments/a3$ cat te[K[Ktestfa[Kiles/6.2.in
spawn true
report
s4698512@moss:~/CSSE2310/Assignments/a3$ cat 6.2.stdout
> New Job ID [0] created
> [Job] cmd:status
[0] true:running
> s4698512@moss:~/CSSE2310/Assignments/a3$ cat testfiles/6.2.stdout 
> New Job ID [0] created
> [Job] cmd:status
[0] true:exited(0)
> s4698512@moss:~/CSSE2310/Assignments/a3$ true
s4698512@moss:~/CSSE2310/Assignments/a3$ ./hq
> spawn true
New Job ID [0] created
> report
[Job] cmd:status
[0] true:running
> ^Cs4698512@moss:~/CSSE2310/Assignments/a3$ ./hqtruecat testfiles/6.2.stdout [11P6.2.stdouttestfiles/6.2.inslowcat.sh testfiles/6.2.in | ./hq  > 6.2.stdout 2> 6.2.stderr[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[41Ptesta3.sh explain 6.2slowcat.sh testfiles/6.2.in | ./hq  > 6.2.stdout 2> 6.2.stderr[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Ccat testfiles/6.2.in[K[6P6.2.stdouttestfiles/6.2.stdout true[K./hq[Kvim hq.c
[?1000h[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;59r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[59;1H"hq.c" 430L, 10606C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[33m159 [m[79C[100m [m
[33m160 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, [38;5;248m[104mjobid[m);[28C[100m [m
[33m161 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m162 [m[79C[100m [m
[33m163 [m[8Cjobs[[38;5;248m[104mjobid[m].pid = fork();[46C[100m [m
[33m164 [m[8C[33mif[m (!jobs[[38;5;248m[104mjobid[m].pid) {[48C[100m [m
[33m165 [m[12C[36m// child[m[59C[100m [m
[33m166 [m[79C[100m [m
[33m167 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[WRITE]);[36C[100m [m
[33m168 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[READ]);[39C[100m [m
[33m169 [m[79C[100m [m
[33m170 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].down[READ], STDIN_FILENO);[24C[100m [m
[33m171 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m172 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].up[WRITE], STDOUT_FILENO);[24C[100m [m
[33m173 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m
[33m174 [m[79C[100m [m
[33m175 [m[12C[32mint[m status;[56C[100m [m
[33m176 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m
[33m177 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m
[33m178 [m[16Cexit([38;5;130m99[m);[54C[100m [m
[33m179 [m[12C}[66C[100m [m
[33m180 [m[8C} [33melse[m {[63C[100m [m
[33m181 [m[12C[36m// parent[m[58C[100m [m
[33m182 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m183 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m
[33m184 [m[79C[100m [m
[33m185 [m[8C}[70C[100m [m
[33m186 [m    }[74C[100m [m
[93m187 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[30;1H[33m188 [m[79C[100m [m
[33m189 [m[36m/* report()[m[68C[100m [m
[33m190 [m[36m * --------[m[68C[100m [m
[33m191 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m
[33m192 [m[36m *[m[77C[100m [m
[33m193 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m194 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m195 [m[36m */[m[76C[100m [m
[33m196 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[43C[100m [m
[33m197 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m198 [m[79C[100m [m
[33m199 [m    [36m// Header row[m[62C[100m [m
[33m200 [m    printf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[46C[100m [m
[33m201 [m[79C[100m [m
[33m202 [m    [36m// Job status output dependent on arg present status[m[23C[100m [m
[33m203 [m[79C[100m [m
[33m204 [m    [36m// check args[m[62C[100m [m
[33m205 [m    [33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[37C[100m [m
[33m206 [m[8C[33mfor[m ([32mint[m i = [38;5;130m0[m; i <= [38;5;248m[104mjobid[m; i++) {[37C[100m [m
[33m207 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].nam[m[59;99H187,1[9C42%[29;5H[?25h[?12$p[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m217 [m[8C}[70C[100m [m
[33m218 [m[79C[100m [m
[33m219 [m    } [33melse[m [33mif[m (spcs > [38;5;130m1[m) {      [36m// report on specific job[m[22C[100m [m[59;1H[K[59;99H187,1[9C43%[26;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m220 [m[8C[36m// check for job tokens[1][m[45C[100m [m
[33m221 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m222 [m[12C[32mint[m jobq = atoi(args[[38;5;130m0[m]);[42C[100m [m[59;99H[K[59;99H187,1[9C44%[23;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m223 [m[79C[100m [m
[33m224 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, jobq, jobs[jobq].name);[25C[100m [m
[33m225 [m[79C[100m [m[59;99H[K[59;99H187,1[9C44%[20;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m226 [m[12C[33mif[m (WIFEXITED(jobs[jobq].status)) {[32C[100m [m
[33m227 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WEXITSTATUS(jobs[jobq].status));[8C[100m [m
[33m228 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[jobq].status)) {[23C[100m [m[59;99H[K[59;99H187,1[9C45%[17;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m229 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[jobq].status));[8C[100m [m
[33m230 [m[12C} [33melse[m {[59C[100m [m
[33m231 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m[59;99H[K[59;99H187,1[9C46%[14;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m232 [m[12C}[66C[100m [m
[33m233 [m[8C} [33melse[m {[63C[100m [m
[33m234 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m[59;99H[K[59;99H187,1[9C47%[11;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m235 [m[8C}[70C[100m [m
[33m236 [m    }[74C[100m [m
[33m237 [m}[78C[100m [m[59;99H[K[59;99H187,1[9C48%[8;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m238 [m[79C[100m [m
[33m239 [m[36m/* call_signal()[m[63C[100m [m
[33m240 [m[36m * -------------[m[63C[100m [m[59;99H[K[59;99H187,1[9C48%[5;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m241 [m[36m * Sends signal to child process specified[m[37C[100m [m
[33m242 [m[36m *[m[77C[100m [m
[33m243 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[59;99H[K[59;99H187,1[9C49%[2;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m189 [m[4m[36m/* report()[m[4m                                                                    [m[4m[100m [m[4m                                [m[56;1H[33m244 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m245 [m[36m */[m[76C[100m [m
[33m246 [m[32mvoid[m call_signal([32mchar[m** args, [32mint[m spcs) {[38C[100m [m[59;99H[K[59;99H189,1[9C50%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m192 [m[4m[36m *[m[4m                                                                             [m[4m[100m [m[4m                                [m[56;1H[33m247 [m    [33mif[m (spcs < [38;5;130m3[m) {[60C[100m [m
[33m248 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m249 [m    } [33melse[m {[67C[100m [m[59;99H[K[59;99H192,1[9C51%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m195 [m[4m[36m */[m[4m                                                                            [m[4m[100m [m[4m                                [m[56;1H[33m250 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m251 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m
[33m252 [m[12C[33mif[m (is_number(args[[38;5;130m1[m])){[43C[100m [m[59;99H[K[59;99H195,1[9C52%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m198 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m253 [m[16C[32mint[m sgnl = atoi(args[[38;5;130m1[m]);[38C[100m [m
[33m254 [m[16C[33mif[m (sgnl >= [38;5;130m1[m && sgnl <= [38;5;130m31[m) {[33C[100m [m
[33m255 [m[20C[32mint[m pid = jobs[job].pid;[35C[100m [m[59;99H[K[59;99H198,0-1[7C52%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m201 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m256 [m[20Ckill(pid, sgnl);[43C[100m [m
[33m257 [m[16C} [33melse[m {[55C[100m [m
[33m258 [m[20Cprintf([38;5;130m"Error: Invalid signal[m[35m\n[m[38;5;130m"[m);[25C[100m [m[59;99H[K[59;99H201,0-1[7C53%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m204 [m[4m    [m[4m[36m// check args[m[4m                                                              [m[4m[100m [m[4m                                [m[56;1H[33m259 [m[16C}[62C[100m [m
[33m260 [m[12C} [33melse[m {[59C[100m [m
[33m261 [m[16Cprintf([38;5;130m"Error: Invalid signal[m[35m\n[m[38;5;130m"[m);[29C[100m [m[59;99H[K[59;99H204,1[9C54%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m207 [m[4m            printf([m[4m[38;5;130m"[[m[4m[35m%d[m[4m[38;5;130m] [m[4m[35m%s[m[4m[38;5;130m:"[m[4m, i, jobs[i].name);                               [m[4m[100m [m[4m                                [m[56;1H[33m262 [m[12C}[66C[100m [m
[33m263 [m[8C} [33melse[m {[63C[100m [m
[33m264 [m[12Cprintf([38;5;130m"Error: invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m[59;99H[K[59;99H207,1[9C55%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m210 [m[4m            } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (WIFEXITED(jobs[i].status)) {                            [m[4m[100m [m[4m                                [m[56;1H[33m265 [m[8C}[70C[100m [m
[33m266 [m    }[74C[100m [m
[33m267 [m}[78C[100m [m[59;99H[K[59;99H210,1[9C56%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m213 [m[4m                printf([m[4m[38;5;130m"signalled([m[4m[35m%d[m[4m[38;5;130m)[m[4m[35m\n[m[4m[38;5;130m"[m[4m, WTERMSIG(jobs[i].status));           [m[4m[100m [m[4m                                [m[56;1H[33m268 [m[79C[100m [m
[33m269 [m[36m/* hq_wait()[m[67C[100m [m
[33m270 [m[36m * ---------[m[67C[100m [m[59;99H[K[59;99H213,1[9C56%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m216 [m[4m            }                                                                  [m[4m[100m [m[4m                                [m[56;1H[33m271 [m[36m * Causes hq to wait for specified seconds[m[37C[100m [m
[33m272 [m[36m *[m[77C[100m [m
[33m273 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[59;99H[K[59;99H216,1[9C57%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m219 [m[4m    } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (spcs > [m[4m[38;5;130m1[m[4m) {      [m[4m[36m// report on specific job[m[4m                      [m[4m[100m [m[4m                                [m[56;1H[33m274 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m275 [m[36m */[m[76C[100m [m
[33m276 [m[32mvoid[m hq_wait([32mchar[m** args, [32mint[m spcs) {[42C[100m [m[59;99H[K[59;99H219,1[9C58%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m222 [m[4m            [m[4m[32mint[m[4m jobq = atoi(args[[m[4m[38;5;130m0[m[4m]);                                          [m[4m[100m [m[4m                                [m[56;1H[33m277 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m278 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m279 [m    } [33melse[m {[67C[100m [m[59;99H[K[59;99H222,1[9C59%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m225 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m280 [m[8C[33mif[m (strcmp(args[[38;5;130m0[m], [38;5;130m""[m) && is_number(args[[38;5;130m0[m])) {[23C[100m [m
[33m281 [m[12Csleep(atoi(args[[38;5;130m0[m]) * [38;5;130m1000000[m);[36C[100m [m
[33m282 [m[8C} [33melse[m {[63C[100m [m[59;99H[K[59;99H225,0-1[7C60%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m228 [m[4m            } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (WIFSIGNALED(jobs[jobq].status)) {                       [m[4m[100m [m[4m                                [m[56;1H[33m283 [m[12Cprintf([38;5;130m"Error: Invalid sleep time[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m284 [m[8C}[70C[100m [m
[33m285 [m    }[74C[100m [m[59;99H[K[59;99H228,1[9C61%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m231 [m[4m                printf([m[4m[38;5;130m"running[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                           [m[4m[100m [m[4m                                [m[56;1H[33m286 [m}[78C[100m [m
[33m287 [m[79C[100m [m
[33m288 [m[36m/* send()[m[70C[100m [m[59;99H[K[59;99H231,1[9C61%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m234 [m[4m            printf([m[4m[38;5;130m"Error: Invalid job[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                    [m[4m[100m [m[4m                                [m[56;1H[33m289 [m[36m * ------[m[70C[100m [m
[33m290 [m[36m * Sends text down the pipe to specified job[m[35C[100m [m
[33m291 [m[36m *[m[77C[100m [m[59;99H[K[59;99H234,1[9C62%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m237 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[56;1H[33m292 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m293 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m294 [m[36m */[m[76C[100m [m[59;99H[K[59;99H237,1[9C63%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m240 [m[4m[36m * -------------[m[4m                                                               [m[4m[100m [m[4m                                [m[56;1H[33m295 [m[32mvoid[m send([32mchar[m** args, [32mint[m spcs) {[45C[100m [m
[33m296 [m    [33mif[m (spcs < [38;5;130m3[m) {[60C[100m [m
[33m297 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m[59;99H[K[59;99H240,1[9C64%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m243 [m[4m[36m * args: arguments provided in command line without first command[m[4m              [m[4m[100m [m[4m                                [m[56;1H[33m298 [m    } [33melse[m {[67C[100m [m
[33m299 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m300 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m[59;99H[K[59;99H243,1[9C65%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m246 [m[4m[32mvoid[m[4m call_signal([m[4m[32mchar[m[4m** args, [m[4m[32mint[m[4m spcs) {                                      [m[4m[100m [m[4m                                [m[56;1H[33m301 [m[12C[32mFILE[m* writef = fdopen(jobs[job].down[WRITE], [38;5;130m"w"[m);[17C[100m [m
[33m302 [m[12Cfprintf(writef, [38;5;130m"[m[35m%s\n[m[38;5;130m"[m, args[[38;5;130m1[m]);[34C[100m [m
[33m303 [m[8C} [33melse[m {[63C[100m [m[59;99H[K[59;99H246,1[9C65%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m249 [m[4m    } [m[4m[33melse[m[4m {                                                                   [m[4m[100m [m[4m                                [m[56;1H[33m304 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m305 [m[8C}[70C[100m [m
[33m306 [m    }[74C[100m [m[59;99H[K[59;99H249,1[9C66%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m252 [m[4m            [m[4m[33mif[m[4m (is_number(args[[m[4m[38;5;130m1[m[4m])){                                           [m[4m[100m [m[4m                                [m[56;1H[33m307 [m}[78C[100m [m
[33m308 [m[79C[100m [m
[33m309 [m[36m/* rcv()[m[71C[100m [m[59;99H[K[59;99H252,1[9C67%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m255 [m[4m                    [m[4m[32mint[m[4m pid = jobs[job].pid;                                   [m[4m[100m [m[4m                                [m[56;1H[33m310 [m[36m * -----[m[71C[100m [m
[33m311 [m[36m * Receives data through the pipe from the specified child process.[m[12C[100m [m
[33m312 [m[36m * Prints this to stdout in the parent, hq.[m[36C[100m [m[59;99H[K[59;99H255,1[9C68%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m258 [m[4m                    printf([m[4m[38;5;130m"Error: Invalid signal[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                         [m[4m[100m [m[4m                                [m[56;1H[33m313 [m[36m *[m[77C[100m [m
[33m314 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m315 [m[36m * spcs: number of original tokens[m[45C[100m [m[59;99H[K[59;99H258,1[9C69%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m261 [m[4m                printf([m[4m[38;5;130m"Error: Invalid signal[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                             [m[4m[100m [m[4m                                [m[56;1H[33m316 [m[36m */[m[76C[100m [m
[33m317 [m[32mvoid[m rcv([32mchar[m** args, [32mint[m spcs) {[46C[100m [m
[33m318 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m[59;99H[K[59;99H261,1[9C69%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m264 [m[4m            printf([m[4m[38;5;130m"Error: invalid job[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                    [m[4m[100m [m[4m                                [m[56;1H[33m319 [m[8Cprintf([38;5;130m"Error: Insufficient arguments.[m[35m\n[m[38;5;130m"[m);[28C[100m [m
[33m320 [m    } [33melse[m {[67C[100m [m
[33m321 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m[59;99H[K[59;99H264,1[9C70%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m267 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[56;1H[33m322 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m
[33m323 [m[12C[32mint[m ready = is_ready(jobs[job].up[READ]);[26C[100m [m
[33m324 [m[12C[32mFILE[m* readf = fdopen(jobs[job].up[READ], [38;5;130m"r"[m);[21C[100m [m[59;99H[K[59;99H267,1[9C71%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m270 [m[4m[36m * ---------[m[4m                                                                   [m[4m[100m [m[4m                                [m[56;1H[33m325 [m[12C[33mif[m (ready) {[55C[100m [m
[33m326 [m[16C[32mchar[m* buffer = read_line(readf);[31C[100m [m
[33m327 [m[16C[33mif[m (buffer == [38;5;130m0[m) {[45C[100m [m[59;99H[K[59;99H270,1[9C72%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m273 [m[4m[36m * args: arguments provided in command line without first command[m[4m              [m[4m[100m [m[4m                                [m[56;1H[33m328 [m[20Cprintf([38;5;130m"<no input>[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m329 [m[16C} [33melse[m [33mif[m (buffer == [38;5;130mNULL[m) {[35C[100m [m
[33m330 [m[20Cprintf([38;5;130m"<EOF>[m[35m\n[m[38;5;130m"[m);[41C[100m [m[59;99H[K[59;99H273,1[9C73%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m276 [m[4m[32mvoid[m[4m hq_wait([m[4m[32mchar[m[4m** args, [m[4m[32mint[m[4m spcs) {                                          [m[4m[100m [m[4m                                [m[56;1H[33m331 [m[16C} [33melse[m {[55C[100m [m
[33m332 [m[20Cprintf([38;5;130m"[m[35m%s\n[m[38;5;130m"[m, buffer);[36C[100m [m
[33m333 [m[16C}[62C[100m [m[59;99H[K[59;99H276,1[9C73%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m279 [m[4m    } [m[4m[33melse[m[4m {                                                                   [m[4m[100m [m[4m                                [m[56;1H[33m334 [m[12C}[66C[100m [m
[33m335 [m[8C} [33melse[m {[63C[100m [m
[33m336 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m[59;99H[K[59;99H279,1[9C74%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m282 [m[4m        } [m[4m[33melse[m[4m {                                                               [m[4m[100m [m[4m                                [m[56;1H[33m337 [m[8C}[70C[100m [m
[33m338 [m[79C[100m [m
[33m339 [m[79C[100m [m[59;99H[K[59;99H282,1[9C75%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m285 [m[4m    }                                                                          [m[4m[100m [m[4m                                [m[56;1H[33m340 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m341 [m    }[74C[100m [m
[33m342 [m}[78C[100m [m[59;99H[K[59;99H285,1[9C76%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m288 [m[4m[36m/* send()[m[4m                                                                      [m[4m[100m [m[4m                                [m[56;1H[33m343 [m[79C[100m [m
[33m344 [m[36m/* eof()[m[71C[100m [m
[33m345 [m[36m * -----[m[71C[100m [m[59;99H[K[59;99H288,1[9C77%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m291 [m[4m[36m *[m[4m                                                                             [m[4m[100m [m[4m                                [m[56;1H[33m346 [m[36m * Closes the stdin side of the pipe so the child process can no longer read [m  [100m [m
[33m347 [m[36m * as the pipe will be EOF.[m[52C[100m [m
[33m348 [m[36m *[m[77C[100m [m[59;99H[K[59;99H291,1[9C77%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m294 [m[4m[36m */[m[4m                                                                            [m[4m[100m [m[4m                                [m[56;1H[33m349 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m350 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m351 [m[36m */[m[76C[100m [m[59;99H[K[59;99H294,1[9C78%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m297 [m[4m        printf([m[4m[38;5;130m"Error: Insufficient arguments[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                             [m[4m[100m [m[4m                                [m[56;1H[33m352 [m[32mvoid[m eof([32mchar[m** args, [32mint[m spcs) {[46C[100m [m
[33m353 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m354 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m[59;99H[K[59;99H297,1[9C79%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m300 [m[4m            [m[4m[32mint[m[4m job = atoi(args[[m[4m[38;5;130m0[m[4m]);                                           [m[4m[100m [m[4m                                [m[56;1H[33m355 [m    } [33melse[m {[67C[100m [m
[33m356 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m357 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m[59;99H[K[59;99H300,1[9C80%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m303 [m[4m        } [m[4m[33melse[m[4m {                                                               [m[4m[100m [m[4m                                [m[56;1H[33m358 [m[12Cclose(jobs[job].down[WRITE]);[38C[100m [m
[33m359 [m[8C} [33melse[m {[63C[100m [m
[33m360 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m[59;99H[K[59;99H303,1[9C81%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m306 [m[4m    }                                                                          [m[4m[100m [m[4m                                [m[56;1H[33m361 [m[8C}[70C[100m [m
[33m362 [m    }[74C[100m [m
[33m363 [m}[78C[100m [m[59;99H[K[59;99H306,1[9C81%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m309 [m[4m[36m/* rcv()[m[4m                                                                       [m[4m[100m [m[4m                                [m[56;1H[33m364 [m[79C[100m [m
[33m365 [m[36m/* cleanup()[m[67C[100m [m
[33m366 [m[36m * ---------[m[67C[100m [m[59;99H[K[59;99H309,1[9C82%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m312 [m[4m[36m * Prints this to stdout in the parent, hq.[m[4m                                    [m[4m[100m [m[4m                                [m[56;1H[33m367 [m[36m * Terminates all child processes spawned by hq. It does this by sending [m      [100m [m
[33m368 [m[36m * signal 9 (SIGKILL). Reaps all processes.[m[36C[100m [m
[33m369 [m[36m *[m[77C[100m [m[59;99H[K[59;99H312,1[9C83%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m315 [m[4m[36m * spcs: number of original tokens[m[4m                                             [m[4m[100m [m[4m                                [m[56;1H[33m370 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m371 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m372 [m[36m */[m[76C[100m [m[59;99H[K[59;99H315,1[9C84%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m318 [m[4m    [m[4m[33mif[m[4m (spcs < [m[4m[38;5;130m2[m[4m) {                                                            [m[4m[100m [m[4m                                [m[56;1H[33m373 [m[32mvoid[m cleanup([32mvoid[m) {[59C[100m [m
[33m374 [m    [33mfor[m ([32mint[m job = [38;5;130m0[m; job < [38;5;248m[104mjobid[m; job++) {[36C[100m [m
[33m375 [m[8Ckill(jobs[job].pid, [38;5;130mSIGKILL[m);[42C[100m [m[59;99H[K[59;99H318,1[9C85%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m321 [m[4m        [m[4m[33mif[m[4m (is_job(args[[m[4m[38;5;130m0[m[4m])) {                                                 [m[4m[100m [m[4m                                [m[56;1H[33m376 [m    }[74C[100m [m
[33m377 [m[79C[100m [m
[33m378 [m}[78C[100m [m[59;99H[K[59;99H321,1[9C86%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m324 [m[4m            [m[4m[32mFILE[m[4m* readf = fdopen(jobs[job].up[READ], [m[4m[38;5;130m"r"[m[4m);                     [m[4m[100m [m[4m                                [m[56;1H[33m379 [m[79C[100m [m
[33m380 [m[36m/* handle_signal()[m[61C[100m [m
[33m381 [m[36m * ---------------[m[61C[100m [m[59;99H[K[59;99H324,1[9C86%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m327 [m[4m                [m[4m[33mif[m[4m (buffer == [m[4m[38;5;130m0[m[4m) {                                             [m[4m[100m [m[4m                                [m[56;1H[33m382 [m[36m * Signal handler[m[62C[100m [m
[33m383 [m[36m *[m[77C[100m [m
[33m384 [m[36m * s: signal number[m[60C[100m [m[59;99H[K[59;99H327,1[9C87%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m330 [m[4m                    printf([m[4m[38;5;130m"<EOF>[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                         [m[4m[100m [m[4m                                [m[56;1H[33m385 [m[36m */[m[76C[100m [m
[33m386 [m[32mvoid[m handle_signal([32mint[m s) {[52C[100m [m
[33m387 [m    [33mfor[m ([32mint[m i = [38;5;130m0[m; i < [38;5;248m[104mjobid[m; i++) {[42C[100m [m[59;99H[K[59;99H330,1[9C88%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m333 [m[4m                }                                                              [m[4m[100m [m[4m                                [m[56;1H[33m388 [m[8Cjobs[i].finished = [38;5;130m1[m;[50C[100m [m
[33m389 [m[8Cwaitpid(jobs[i].pid, &jobs[i].status, [38;5;130m0[m);[30C[100m [m
[33m390 [m    }[74C[100m [m[59;99H[K[59;99H333,1[9C89%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m336 [m[4m            printf([m[4m[38;5;130m"Error: Invalid job[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                    [m[4m[100m [m[4m                                [m[56;1H[33m391 [m[79C[100m [m
[33m392 [m    signal(s, handle_signal);[50C[100m [m
[33m393 [m    fflush([38;5;130mstdout[m);[60C[100m [m[59;99H[K[59;99H336,1[9C90%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m339 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m394 [m}[78C[100m [m
[33m395 [m[79C[100m [m
[33m396 [m[36m/* is_number()[m[65C[100m [m[59;99H[K[59;99H339,0-1[7C90%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m342 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[56;1H[33m397 [m[36m * -----------[m[65C[100m [m
[33m398 [m[36m * Determines if inputer number[] is a number or not[m[27C[100m [m
[33m399 [m[36m *[m[77C[100m [m[59;99H[K[59;99H342,1[9C91%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m345 [m[4m[36m * -----[m[4m                                                                       [m[4m[100m [m[4m                                [m[56;1H[33m400 [m[36m * number[]: array of characters to be checked[m[33C[100m [m
[33m401 [m[36m * Returns: true if number, false if not[m[39C[100m [m
[33m402 [m[36m */[m[76C[100m [m[59;99H[K[59;99H345,1[9C92%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m348 [m[4m[36m *[m[4m                                                                             [m[4m[100m [m[4m                                [m[56;1H[33m403 [m[32mbool[m is_number([32mchar[m number[]) {[48C[100m [m
[33m404 [m    [33mfor[m([32mint[m i = [38;5;130m0[m; number[i] != [38;5;130m0[m; i++) {[38C[100m [m
[33m405 [m[8C[33mif[m (!isdigit(number[i])) {[45C[100m [m[59;99H[K[59;99H348,1[9C93%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m351 [m[4m[36m */[m[4m                                                                            [m[4m[100m [m[4m                                [m[56;1H[33m406 [m[12C[33mreturn[m [38;5;130mfalse[m;[54C[100m [m
[33m407 [m[8C}[70C[100m [m
[33m408 [m    }[74C[100m [m[59;99H[K[59;99H351,1[9C94%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m354 [m[4m        printf([m[4m[38;5;130m"Error: Insufficient arguments[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                             [m[4m[100m [m[4m                                [m[56;1H[33m409 [m    [33mreturn[m [38;5;130mtrue[m;[63C[100m [m
[33m410 [m}[78C[100m [m
[33m411 [m[79C[100m [m[59;99H[K[59;99H354,1[9C94%[1;5H[?25h[?25l[33m354 [m        printf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);                             [100m [m[1;85H[K[35;1H[93m388 [m[4m        jobs[i].finished = [m[4m[38;5;130m1[m[4m;                                                  [m[4m[100m [m[4m                                [m[59;100H88,9[35;13H[?25h[?25l[35;5H        [7m[48;5;242mjobs[i].finished = [m[7m[38;5;130m[48;5;242m1[m[7m[48;5;242m;[m                                                  [100m [m[35;85H[K[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H388,30[8C94%[35;34H[?25h[?25l[35;5H[4m        jobs[i].finished = [m[4m[38;5;130m1[m[4m;                                                  [m[4m[100m [m[4m                                [m[59;1H[K[59;99H388,29[8C94%[35;33H[?25h[?25l[33m388 [m        jobs[i].finished = [38;5;130m1[m;                                                  [100m [m[35;85H[K[36;1H[93m389 [m[4m        waitpid[m[4m[46m([m[4mjobs[i].pid, &jobs[i].status, [m[4m[38;5;130m0[m[4m[46m)[m[4m;                              [m[4m[100m [m[4m                                [m[59;101H9,48[36;52H[?25h[?25l[59;1H[38;5;130m-- INSERT --[m[59;99H[K[59;99H389,48[8C94%[36;52H[?25h[?25l[4m)[m[4m[46m;[m[4m [m[4m[46m)[m[4m;[m[59;104H7[36;51H[?25h[?25l[4m[46mW[m[4m);W[m[4m[46m)[m[59;104H8[36;52H[?25h[?25l[4m[46mN[m[4m);N[m[4m[46m)[m[59;104H9[36;53H[?25h[?25l[4m[46mO[m[4m);O[m[4m[46m)[m[59;103H50[36;54H[?25h[?25l[4m[46mH[m[4m);H[m[4m[46m)[m[59;104H1[36;55H[?25h[?25l[4m[46mN[m[4m);N[m[4m[46m)[m[59;104H2[36;56H[?25h[?25l[4m[46mA[m[4m);A[m[4m[46m)[m[59;104H3[36;57H[?25h[?25l[4m)[m[4m[46m;[m[4m [m[4m[46m)[m[4m;[m[59;104H2[36;56H[?25h[?25l[4m)[m[4m[46m;[m[4m [m[4m[46m)[m[4m;[m[59;104H1[36;55H[?25h[?25l[4m[46mA[m[4m);A[m[4m[46m)[m[59;104H2[36;56H[?25h[?25l[4m[46mN[m[4m);N[m[4m[46m)[m[59;104H3[36;57H[?25h[?25l[4m[46mG[m[4m);G[m[4m[46m)[m[59;104H4[36;58H[?25h[?25l[36;20H[4m([37C)[m[59;103H8 [36;12H[?25h[?25l[59;103H9[36;13H[?25h[?25l[4mwaitpid(jobs[i].pid, &jobs[i].status, WNOHANG);    [m[59;103H5[36;9H[?25h[?25l[4mwaitpid(jobs[i].pid, &jobs[i].status, WNOHANG);    [m[59;103H1[36;5H[?25h[?25l[35;1H[93m388 [m[4m        jobs[i].finished = [m[4m[38;5;130m1[m[4m;waitpid(jobs[i].pid, &jobs[i].status, WNOHANG);   [m[4m[100m [m[4m                                [m[36;1H[33m389 [m    }                                                                          [100m [m[36;85H[K[37;9H [38;9Hsignal(s, handle_signal);[39;9Hfflush([38;5;130mstdout[m);          [40;5H}                  [41;5H [42;5H[36m/* is_number()[43;5H * -----------[44;8HDetermines if inputer number[] is a number or not[m[45;7H                                                  [46;7H[36m number[]: array of characters to be checked[47;8HReturns: true if number, false if not[m      [48;7H[36m/[m                                     [49;5H[32mbool[m is_number([32mchar[m number[]) {[50;5H    [33mfor[m([32mint[m i = [38;5;130m0[m; number[i] != [38;5;130m0[m; i++) {[51;9H    [33mif[m (!isdigit(number[i])) {       [52;13H    [33mreturn[m [38;5;130mfalse[m;         [53;13H}                [54;9H}    [55;9H[33mreturn[m [38;5;130mtrue[m;[56;5H}               [57;5H [58;5H[36m/* is_job()[m[59;101H8,30[9C5[35;34H[?25h[?25l[4m1waitpid(jobs[i].pid, &jobs[i].status, WNOHANG); [m[59;103H29[35;33H[?25h[?25l[4mwaitpid(jobs[i].pid, &jobs[i].status, WNOHANG); [m[59;104H8[35;32H[?25h[?25l[4mwaitpid(jobs[i].pid, &jobs[i].status, WNOHANG); [m[59;104H7[35;31H[?25h[?25l[4m waitpid(jobs[i].pid, &jobs[i].status, WNOHANG);[m[59;104H8[35;32H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m351 [m[36m */[m[76C[100m [m
[33m352 [m[32mvoid[m eof([32mchar[m** args, [32mint[m spcs) {[46C[100m [m
[33m353 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m[59;99H[K[59;99H388,28[8C94%[38;32H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m348 [m[36m *[m[77C[100m [m
[33m349 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m350 [m[36m * spcs: number of original tokens[m[45C[100m [m[59;99H[K[59;99H388,28[8C93%[41;32H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m345 [m[36m * -----[m[71C[100m [m
[33m346 [m[36m * Closes the stdin side of the pipe so the child process can no longer read [m  [100m [m
[33m347 [m[36m * as the pipe will be EOF.[m[52C[100m [m[59;99H[K[59;99H388,28[8C92%[44;32H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m342 [m}[78C[100m [m
[33m343 [m[79C[100m [m
[33m344 [m[36m/* eof()[m[71C[100m [m[59;99H[K[59;99H388,28[8C91%[47;32H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m339 [m[79C[100m [m
[33m340 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m341 [m    }[74C[100m [m[59;99H[K[59;99H388,28[8C91%[50;32H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m336 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m337 [m[8C}[70C[100m [m
[33m338 [m[79C[100m [m[59;99H[K[59;99H388,28[8C90%[53;32H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m333 [m[16C}[62C[100m [m
[33m334 [m[12C}[66C[100m [m
[33m335 [m[8C} [33melse[m {[63C[100m [m[59;99H[K[59;99H388,28[8C89%[56;32H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m330 [m[20Cprintf([38;5;130m"<EOF>[m[35m\n[m[38;5;130m"[m);[41C[100m [m
[33m331 [m[16C} [33melse[m {[55C[100m [m
[33m332 [m[20Cprintf([38;5;130m"[m[35m%s\n[m[38;5;130m"[m, buffer);[36C[100m [m[58;1H[93m387 [m[4m    [m[4m[33mfor[m[4m ([m[4m[32mint[m[4m i = [m[4m[38;5;130m0[m[4m; i < [m[4m[38;5;248m[104mjobid[m[4m; i++) {                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H387,28[8C88%[58;32H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m327 [m[16C[33mif[m (buffer == [38;5;130m0[m) {[45C[100m [m
[33m328 [m[20Cprintf([38;5;130m"<no input>[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m329 [m[16C} [33melse[m [33mif[m (buffer == [38;5;130mNULL[m) {[35C[100m [m[58;1H[93m384 [m[4m[36m * s: signal number[m[4m                                                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H384,20[8C87%[58;24H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m324 [m[12C[32mFILE[m* readf = fdopen(jobs[job].up[READ], [38;5;130m"r"[m);[21C[100m [m
[33m325 [m[12C[33mif[m (ready) {[55C[100m [m
[33m326 [m[16C[32mchar[m* buffer = read_line(readf);[31C[100m [m[58;1H[93m381 [m[4m[36m * ---------------[m[4m                                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H381,19[8C87%[58;23H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m321 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m322 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m
[33m323 [m[12C[32mint[m ready = is_ready(jobs[job].up[READ]);[26C[100m [m[58;1H[93m378 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H378,2[9C86%[53;24H[46m{[m[58;5H[4m[46m}[?25h[?25l[1;58r[m[1;1H[3L[1;59r[1;1H[33m318 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m319 [m[8Cprintf([38;5;130m"Error: Insufficient arguments.[m[35m\n[m[38;5;130m"[m);[28C[100m [m
[33m320 [m    } [33melse[m {[67C[100m [m[58;1H[93m375 [m[4m        kill(jobs[job].pid, [m[4m[38;5;130mSIGKILL[m[4m);                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H375,28[8C85%[56;24H{[58;32H[?25h[?25l[1;58r[1;1H[6L[1;59r[1;1H[33m312 [m[36m * Prints this to stdout in the parent, hq.[m[36C[100m [m
[33m313 [m[36m *[m[77C[100m [m
[33m314 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m315 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m316 [m[36m */[m[76C[100m [m
[33m317 [m[32mvoid[m rcv([32mchar[m** args, [32mint[m spcs) {[46C[100m [m[58;1H[93m369 [m[4m[36m *[m[4m                                                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H369,3[9C83%[58;7H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m309 [m[36m/* rcv()[m[71C[100m [m
[33m310 [m[36m * -----[m[71C[100m [m
[33m311 [m[36m * Receives data through the pipe from the specified child process.[m[12C[100m [m[58;1H[93m366 [m[4m[36m * ---------[m[4m                                                                   [m[4m[100m [m[4m                                [m[59;99H[K[59;99H366,13[8C83%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m306 [m    }[74C[100m [m
[33m307 [m}[78C[100m [m
[33m308 [m[79C[100m [m[58;1H[93m363 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H363,2[9C82%[47;37H[46m{[m[58;5H[4m[46m}[?25h[?25l[1;58r[m[1;1H[3L[1;59r[1;1H[33m303 [m[8C} [33melse[m {[63C[100m [m
[33m304 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m305 [m[8C}[70C[100m [m[58;1H[93m360 [m[4m            printf([m[4m[38;5;130m"Error: Invalid job[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                    [m[4m[100m [m[4m                                [m[59;99H[K[59;99H360,28[8C81%[50;37H{[58;32H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m300 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m
[33m301 [m[12C[32mFILE[m* writef = fdopen(jobs[job].down[WRITE], [38;5;130m"w"[m);[17C[100m [m
[33m302 [m[12Cfprintf(writef, [38;5;130m"[m[35m%s\n[m[38;5;130m"[m, args[[38;5;130m1[m]);[34C[100m [m[58;1H[93m357 [m[4m            [m[4m[32mint[m[4m job = atoi(args[[m[4m[38;5;130m0[m[4m]);                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H357,28[8C80%[58;31H[4m[46m([7C)[58;32H[1;58r[m[1;1H[3L[1;59r[1;1H[33m297 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m298 [m    } [33melse[m {[67C[100m [m
[33m299 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m[58;1H[93m354 [m[4m        printf([m[4m[38;5;130m"Error: Insufficient arguments[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H354,28[8C79%[58;32H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m294 [m[36m */[m[76C[100m [m
[33m295 [m[32mvoid[m send([32mchar[m** args, [32mint[m spcs) {[45C[100m [m
[33m296 [m    [33mif[m (spcs < [38;5;130m3[m) {[60C[100m [m[58;1H[93m351 [m[4m[36m */[m[4m                                                                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H351,4[9C78%[58;8H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m291 [m[36m *[m[77C[100m [m
[33m292 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m293 [m[36m * spcs: number of original tokens[m[45C[100m [m[58;1H[93m348 [m[4m[36m *[m[4m                                                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H348,3[9C78%[58;7H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m288 [m[36m/* send()[m[70C[100m [m
[33m289 [m[36m * ------[m[70C[100m [m
[33m290 [m[36m * Sends text down the pipe to specified job[m[35C[100m [m[58;1H[93m345 [m[4m[36m * -----[m[4m                                                                       [m[4m[100m [m[4m                                [m[59;99H[K[59;99H345,9[9C77%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m285 [m    }[74C[100m [m
[33m286 [m}[78C[100m [m
[33m287 [m[79C[100m [m[58;1H[93m342 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H342,2[9C76%[33;37H[46m{[m[58;5H[4m[46m}[?25h[?25l[1;58r[m[1;1H[3L[1;59r[1;1H[33m282 [m[8C} [33melse[m {[63C[100m [m
[33m283 [m[12Cprintf([38;5;130m"Error: Invalid sleep time[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m284 [m[8C}[70C[100m [m[58;1H[93m339 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H339,1[9C75%[36;37H{[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m279 [m    } [33melse[m {[67C[100m [m
[33m280 [m[8C[33mif[m (strcmp(args[[38;5;130m0[m], [38;5;130m""[m) && is_number(args[[38;5;130m0[m])) {[23C[100m [m
[33m281 [m[12Csleep(atoi(args[[38;5;130m0[m]) * [38;5;130m1000000[m);[36C[100m [m[58;1H[93m336 [m[4m            printf([m[4m[38;5;130m"Error: Invalid job[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                    [m[4m[100m [m[4m                                [m[59;99H[K[59;99H336,28[8C74%[58;32H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m276 [m[32mvoid[m hq_wait([32mchar[m** args, [32mint[m spcs) {[42C[100m [m
[33m277 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m278 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m[58;1H[93m333 [m[4m                }                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H333,18[8C74%[56;28H[46m{[m[58;21H[4m[46m}[?25h[?25l[1;58r[m[1;1H[3L[1;59r[1;1H[33m273 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m274 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m275 [m[36m */[m[76C[100m [m[58;1H[93m330 [m[4m                    printf([m[4m[38;5;130m"<EOF>[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                         [m[4m[100m [m[4m                                [m[59;99H[K[59;99H330,28[8C73%[58;31H[4m[46m([9C)[58;32H[?25h[?25l[1;58r[m[1;1H[3L[1;59r[1;1H[33m270 [m[36m * ---------[m[67C[100m [m
[33m271 [m[36m * Causes hq to wait for specified seconds[m[37C[100m [m
[33m272 [m[36m *[m[77C[100m [m[58;1H[93m327 [m[4m                [m[4m[33mif[m[4m (buffer == [m[4m[38;5;130m0[m[4m) {                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H327,28[8C72%[58;32H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m267 [m}[78C[100m [m
[33m268 [m[79C[100m [m
[33m269 [m[36m/* hq_wait()[m[67C[100m [m[58;1H[93m324 [m[4m            [m[4m[32mFILE[m[4m* readf = fdopen(jobs[job].up[READ], [m[4m[38;5;130m"r"[m[4m);                     [m[4m[100m [m[4m                                [m[59;99H[K[59;99H324,28[8C71%[58;32H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m264 [m[12Cprintf([38;5;130m"Error: invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m265 [m[8C}[70C[100m [m
[33m266 [m    }[74C[100m [m[58;1H[93m321 [m[4m        [m[4m[33mif[m[4m (is_job(args[[m[4m[38;5;130m0[m[4m])) {                                                 [m[4m[100m [m[4m                                [m[59;99H[K[59;99H321,28[8C70%[58;16H[4m[46m([15C)[?25h[?25l[1;58r[m[1;1H[3L[1;59r[1;1H[33m261 [m[16Cprintf([38;5;130m"Error: Invalid signal[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m262 [m[12C}[66C[100m [m
[33m263 [m[8C} [33melse[m {[63C[100m [m[58;1H[93m318 [m[4m    [m[4m[33mif[m[4m (spcs < [m[4m[38;5;130m2[m[4m) {                                                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H318,20[8C70%[58;24H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m258 [m[20Cprintf([38;5;130m"Error: Invalid signal[m[35m\n[m[38;5;130m"[m);[25C[100m [m
[33m259 [m[16C}[62C[100m [m
[33m260 [m[12C} [33melse[m {[59C[100m [m[58;1H[93m315 [m[4m[36m * spcs: number of original tokens[m[4m                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H315,28[8C69%[58;32H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m255 [m[20C[32mint[m pid = jobs[job].pid;[35C[100m [m
[33m256 [m[20Ckill(pid, sgnl);[43C[100m [m
[33m257 [m[16C} [33melse[m {[55C[100m [m[58;1H[93m312 [m[4m[36m * Prints this to stdout in the parent, hq.[m[4m                                    [m[4m[100m [m[4m                                [m[59;99H[K[59;99H312,28[8C68%[58;32H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m252 [m[12C[33mif[m (is_number(args[[38;5;130m1[m])){[43C[100m [m
[33m253 [m[16C[32mint[m sgnl = atoi(args[[38;5;130m1[m]);[38C[100m [m
[33m254 [m[16C[33mif[m (sgnl >= [38;5;130m1[m && sgnl <= [38;5;130m31[m) {[33C[100m [m[58;1H[93m309 [m[4m[36m/* rcv()[m[4m                                                                       [m[4m[100m [m[4m                                [m[59;99H[K[59;99H309,9[9C67%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m249 [m    } [33melse[m {[67C[100m [m
[33m250 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m251 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m[58;1H[93m306 [m[4m    }                                                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H306,6[9C66%[50;16H[46m{[m[58;9H[4m[46m}[?25h[?25l[1;58r[m[1;1H[3L[1;59r[1;1H[33m246 [m[32mvoid[m call_signal([32mchar[m** args, [32mint[m spcs) {[38C[100m [m
[33m247 [m    [33mif[m (spcs < [38;5;130m3[m) {[60C[100m [m
[33m248 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m[58;1H[93m303 [m[4m        } [m[4m[33melse[m[4m {                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H303,17[8C66%[53;16H{[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m243 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m244 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m245 [m[36m */[m[76C[100m [m[58;1H[93m300 [m[4m            [m[4m[32mint[m[4m job = atoi(args[[m[4m[38;5;130m0[m[4m]);                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H300,28[8C65%[58;31H[4m[46m([7C)[58;32H[?25h[?25l[1;58r[m[1;1H[3L[1;59r[1;1H[33m240 [m[36m * -------------[m[63C[100m [m
[33m241 [m[36m * Sends signal to child process specified[m[37C[100m [m
[33m242 [m[36m *[m[77C[100m [m[58;1H[93m297 [m[4m        printf([m[4m[38;5;130m"Error: Insufficient arguments[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H297,28[8C64%[58;32H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m237 [m}[78C[100m [m
[33m238 [m[79C[100m [m
[33m239 [m[36m/* call_signal()[m[63C[100m [m[58;1H[93m294 [m[4m[36m */[m[4m                                                                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H294,4[9C63%[58;8H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m234 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m235 [m[8C}[70C[100m [m
[33m236 [m    }[74C[100m [m[58;1H[93m291 [m[4m[36m *[m[4m                                                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H291,3[9C62%[58;7H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m231 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m232 [m[12C}[66C[100m [m
[33m233 [m[8C} [33melse[m {[63C[100m [m[58;1H[93m288 [m[4m[36m/* send()[m[4m                                                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H288,10[8C61%[58;14H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m228 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[jobq].status)) {[23C[100m [m
[33m229 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[jobq].status));[8C[100m [m
[33m230 [m[12C} [33melse[m {[59C[100m [m[58;1H[93m285 [m[4m    }                                                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H285,6[9C61%[52;16H[46m{[m[58;9H[4m[46m}[?25h[?25l[1;58r[m[1;1H[3L[1;59r[1;1H[33m225 [m[79C[100m [m
[33m226 [m[12C[33mif[m (WIFEXITED(jobs[jobq].status)) {[32C[100m [m
[33m227 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WEXITSTATUS(jobs[jobq].status));[8C[100m [m[58;1H[93m282 [m[4m        } [m[4m[33melse[m[4m {                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H282,17[8C60%[55;16H{[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m222 [m[12C[32mint[m jobq = atoi(args[[38;5;130m0[m]);[42C[100m [m
[33m223 [m[79C[100m [m
[33m224 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, jobq, jobs[jobq].name);[25C[100m [m[58;1H[93m279 [m[4m    } [m[4m[33melse[m[4m {                                                                   [m[4m[100m [m[4m                                [m[59;99H[K[59;99H279,13[8C59%[58;17H[1;58r[1;1H[3L[1;59r[1;1H[33m219 [m    } [33melse[m [33mif[m (spcs > [38;5;130m1[m) {      [36m// report on specific job[m[22C[100m [m
[33m220 [m[8C[36m// check for job tokens[1][m[45C[100m [m
[33m221 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m[58;1H[93m276 [m[4m[32mvoid[m[4m hq_wait([m[4m[32mchar[m[4m** args, [m[4m[32mint[m[4m spcs) {                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H276,28[8C58%[58;32H[1;58r[1;1H[3L[1;59r[1;1H[33m216 [m[12C}[66C[100m [m
[33m217 [m[8C}[70C[100m [m
[33m218 [m[79C[100m [m[58;1H[93m273 [m[4m[36m * args: arguments provided in command line without first command[m[4m              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H273,28[8C57%[58;32H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m213 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[11C[100m [m
[33m214 [m[12C} [33melse[m {[59C[100m [m
[33m215 [m[16Cprintf([38;5;130m"Error[m[35m\n[m[38;5;130m"[m);[45C[100m [m[58;1H[93m270 [m[4m[36m * ---------[m[4m                                                                   [m[4m[100m [m[4m                                [m[59;99H[K[59;99H270,13[8C57%[58;17H[1;58r[1;1H[3L[1;59r[1;1H[33m210 [m[12C} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[28C[100m [m
[33m211 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[12C[100m [m
[33m212 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {[26C[100m [m[58;1H[93m267 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H267,2[9C56%[37;45H[46m{[m[58;5H[4m[46m}[?25h[?25l[1;58r[m[1;1H[3L[1;59r[1;1H[33m207 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[31C[100m [m
[33m208 [m[12C[33mif[m (!jobs[i].finished) {[43C[100m [m
[33m209 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m[58;1H[93m264 [m[4m            printf([m[4m[38;5;130m"Error: invalid job[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                    [m[4m[100m [m[4m                                [m[59;99H[K[59;99H264,28[8C55%[40;45H{[58;32H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m204 [m    [36m// check args[m[62C[100m [m
[33m205 [m    [33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[37C[100m [m
[33m206 [m[8C[33mfor[m ([32mint[m i = [38;5;130m0[m; i <= [38;5;248m[104mjobid[m; i++) {[37C[100m [m[58;1H[93m261 [m[4m                printf([m[4m[38;5;130m"Error: Invalid signal[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H261,28[8C54%[58;32H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m201 [m[79C[100m [m
[33m202 [m    [36m// Job status output dependent on arg present status[m[23C[100m [m
[33m203 [m[79C[100m [m[58;1H[93m258 [m[4m                    printf([m[4m[38;5;130m"Error: Invalid signal[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                         [m[4m[100m [m[4m                                [m[59;99H[K[59;99H258,28[8C53%[58;31H[4m[46m([25C)[58;32H[?25h[?25l[1;58r[m[1;1H[3L[1;59r[1;1H[33m198 [m[79C[100m [m
[33m199 [m    [36m// Header row[m[62C[100m [m
[33m200 [m    printf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[46C[100m [m[58;1H[93m255 [m[4m                    [m[4m[32mint[m[4m pid = jobs[job].pid;                                   [m[4m[100m [m[4m                                [m[59;99H[K[59;99H255,28[8C53%[58;32H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m195 [m[36m */[m[76C[100m [m
[33m196 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[43C[100m [m
[33m197 [m    fflush([38;5;130mstdout[m);[60C[100m [m[58;1H[93m252 [m[4m            [m[4m[33mif[m[4m (is_number(args[[m[4m[38;5;130m1[m[4m])){                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H252,28[8C52%[58;32H[?25h[?25l[14;1H[93m208 [m[4m            [m[4m[33mif[m[4m (!jobs[i].finished) {                                           [m[4m[100m [m[4m                                [m[58;1H[33m252 [m            [33mif[m (is_number(args[[38;5;130m1[m])){                                           [100m [m[58;85H[K[14;20H[4m[46m([17C)[m[59;100H08,16[14;20H[?25h[?25l[59;4H[38;5;130m(insert) VISUAL --[m[59;99H[K[59;99H208,29[8C52%[14;5H            [33mif[m [7m[48;5;242m(!jobs[i].fin[mished) {                                           [100m [m[14;85H[K[14;33H[?25h[?25l[59;4H[38;5;130mINSERT --[m[59;13H[K[59;99H208,29[8C52%[14;5H[4m            [m[4m[33mif[m[4m (!jobs[i].finished) {                                           [m[4m[100m [m[4m                                [14;33H[?25h[m[59;1H[K[14;32H[?25l[59;99H208,28[8C52%[14;32H[?25h[?25l[59;99H[K[59;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?1000l[?2004l"hq.c" 429L, 10601C written
[?2004l[?1l>[?25h[?1049l[23;0;0ts4698512@moss:~/CSSE2310/Assignments/a3$ make
gcc -g -Wall -pedantic -std=gnu99 -o hq hq.c -I/local/courses/csse2310/include -L/local/courses/csse2310/lib -lcsse2310a3
s4698512@moss:~/CSSE2310/Assignments/a3$ ./s[Khq
> spawn true
New Job ID [0] created
> report
[Job] cmd:status
[0] true:running
> s4698512@moss:~/CSSE2310/Assignments/a3$ ./hqmakevim hq.c[4P./hqvim hq.c
[?1000h[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;59r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[59;1H"hq.c" 429L, 10601C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[33m180 [m[8C} [33melse[m {[63C[100m [m
[33m181 [m[12C[36m// parent[m[58C[100m [m
[33m182 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m183 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[382310/Assignments/a3$ make
gcc -g -Wall -pedantic -std=gnu99 -o hq hq.c -I/local/courses/csse2310/include -L/local/courses/csse2310/lib -lcsse2310a3
s4698512@moss:~/CSSE2310/Assignments/a3$ ./s[Khq
> spawn true
New Job ID [0] created
> report
[Job] cmd:status
[0] true:running
> s4698512@moss:~/CSSE2310/Assignments/a3$ ./hqmakevim hq.c[4P./hqvim hq.c
[?1000h[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;59r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[59;1H"hq.c" 429L, 10601C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[33m180 [m[8C} [33melse[m {[63C[100m [m
[33m181 [m[12C[36m// parent[m[58C[100m [m
[33m182 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m183 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m
[33m184 [m[79C[100m [m
[33m185 [m[8C}[70C[100m [m
[33m186 [m    }[74C[100m [m
[33m187 [m}[78C[100m [m
[33m188 [m[79C[100m [m
[33m189 [m[36m/* report()[m[68C[100m [m
[33m190 [m[36m * --------[m[68C[100m [m
[33m191 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m
[33m192 [m[36m *[m[77C[100m [m
[33m193 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m194 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m195 [m[36m */[m[76C[100m [m
[33m196 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[43C[100m [m
[33m197 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m198 [m[79C[100m [m
[33m199 [m    [36m// Header row[m[62C[100m [m
[33m200 [m    printf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[46C[100m [m
[33m201 [m[79C[100m [m
[33m202 [m    [36m// Job status output dependent on arg present status[m[23C[100m [m
[33m203 [m[79C[100m [m
[33m204 [m    [36m// check args[m[62C[100m [m
[33m205 [m    [33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[37C[100m [m
[33m206 [m[8C[33mfor[m ([32mint[m i = [38;5;130m0[m; i <= [38;5;248m[104mjobid[m; i++) {[37C[100m [m
[33m207 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[31C[100m [m
[93m208 [m[4m            [m[4m[33mif[m[4m (!jobs[i].finished) {                                           [m[4m[100m [m[4m                                [m[30;1H[33m209 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m210 [m[12C} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[28C[100m [m
[33m211 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[12C[100m [m
[33m212 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {[26C[100m [m
[33m213 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[11C[100m [m
[33m214 [m[12C} [33melse[m {[59C[100m [m
[33m215 [m[16Cprintf([38;5;130m"Error[m[35m\n[m[38;5;130m"[m);[45C[100m [m
[33m216 [m[12C}[66C[100m [m
[33m217 [m[8C}[70C[100m [m
[33m218 [m[79C[100m [m
[33m219 [m    } [33melse[m [33mif[m (spcs > [38;5;130m1[m) {      [36m// report on specific job[m[22C[100m [m
[33m220 [m[8C[36m// check for job tokens[1][m[45C[100m [m
[33m221 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m222 [m[12C[32mint[m jobq = atoi(args[[38;5;130m0[m]);[42C[100m [m
[33m223 [m[79C[100m [m
[33m224 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, jobq, jobs[jobq].name);[25C[100m [m
[33m225 [m[79C[100m [m
[33m226 [m[12C[33mif[m (WIFEXITED(jobs[jobq].status)) {[32C[100m [m
[33m227 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WEXITSTATUS(jobs[jobq].status));[8C[100m [m
[33m228 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[jobq].status)) {[23C[100m [m
[33m229 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[jobq].status));[8C[100m [m
[33m230 [m[12C} [33melse[m {[59C[100m [m
[33m231 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m232 [m[12C}[66C[100m [m
[33m233 [m[8C} [33melse[m {[63C[100m [m
[33m234 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m235 [m[8C}[70C[100m [m
[33m236 [m    }[74C[100m [m
[33m237 [m}[78C[100m [m[59;99H208,13[8C48%[29;17H[?25h[?12$p[?25l[59;104H8[29;22H[?25h[?25l[59;1H[38;5;130m-- INSERT --[m[59;14H[K[59;99H208,18[8C48%[29;22H[?25h[?25l[4mjobs[i].finished) { [m[29;20H[4m[46m([16C)[m[59;104H7[29;21H[?25h[59;1H[K[29;20H[?25l[59;99H208,16[8C48%[29;20H[?25h[?25l[59;99H[K[59;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?1000l[?2004l"hq.c" 429L, 10600C written
[?2004l[?1l>[?25h[?1049l[23;0;0ts4698512@moss:~/CSSE2310/Assignments/a3$ make
gcc -g -Wall -pedantic -std=gnu99 -o hq hq.c -I/local/courses/csse2310/include -L/local/courses/csse2310/lib -lcsse2310a3
s4698512@moss:~/CSSE2310/Assignments/a3$ ./spawn[K[K[K[K[Khq
> spawn ca  true
New Job ID [0] created
> report
[Job] cmd:status
[0] true:exited(0)
> spawn cat
New Job ID [1] created
> report
[Job] cmd:status
[0] true:exited(0)
[1] cat:exited(0)
> ^[i Error: Invalid command
> s4698512@moss:~/CSSE2310/Assignments/a3$ vim hq.c
[?1000h[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;59r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[59;1H"hq.c" 429L, 10600C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[33m180 [m[8C} [33melse[m {[63C[100m [m
[33m181 [m[12C[36m// parent[m[58C[100m [m
[33m182 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m183 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m
[33m184 [m[79C[100m [m
[33m185 [m[8C}[70C[100m [m
[33m186 [m    }[74C[100m [m
[33m187 [m}[78C[100m [m
[33m188 [m[79C[100m [m
[33m189 [m[36m/* report()[m[68C[100m [m
[33m190 [m[36m * --------[m[68C[100m [m
[33m191 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m
[33m192 [m[36m *[m[77C[100m [m
[33m193 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m194 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m195 [m[36m */[m[76C[100m [m
[33m196 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[43C[100m [m
[33m197 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m198 [m[79C[100m [m
[33m199 [m    [36m// Header row[m[62C[100m [m
[33m200 [m    printf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[46C[100m [m
[33m201 [m[79C[100m [m
[33m202 [m    [36m// Job status output dependent on arg present status[m[23C[100m [m
[33m203 [m[79C[100m [m
[33m204 [m    [36m// check args[m[62C[100m [m
[33m205 [m    [33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[37C[100m [m
[33m206 [m[8C[33mfor[m ([32mint[m i = [38;5;130m0[m; i <= [38;5;248m[104mjobid[m; i++) {[37C[100m [m
[33m207 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[31C[100m [m
[93m208 [m[4m            [m[4m[33mif[m[4m (jobs[i].finished) {                                            [m[4m[100m [m[4m                                [m[30;1H[33m209 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m210 [m[12C} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[28C[100m [m
[33m211 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[12C[100m [m
[33m212 [m[12C} [33melse[m [33mif[m (WIFSIGNA2Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, jobq, jobs[jobq].name);[25C[100m [m
[33m225 [m[79C[100m [m
[33m226 [m[12C[33mif[m (WIFEXITED(jobs[jobq].status)) {[32C[100m [m
[33m227 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WEXITSTATUS(jobs[jobq].status));[8C[100m [m
[33m228 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[jobq].status)) {[23C[100m [m
[33m229 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[jobq].status));[8C[100m [m
[33m230 [m[12C} [33melse[m {[59C[100m [m
[33m231 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m232 [m[12C}[66C[100m [m
[33m233 [m[8C} [33melse[m {[63C[100m [m
[33m234 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m235 [m[8C}[70C[100m [m
[33m236 [m    }[74C[100m [m
[33m237 [m}[78C[100m [m[59;99H208,13[8C48%[29;17H[?25h[?12$p[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m177 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m
[33m178 [m[16Cexit([38;5;130m99[m);[54C[100m [m
[33m179 [m[12C}[66C[100m [m[59;1H[K[59;99H208,13[8C47%[32;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m174 [m[79C[100m [m
[33m175 [m[12C[32mint[m status;[56C[100m [m
[33m176 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m[59;99H[K[59;99H208,13[8C46%[35;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m171 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m172 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].up[WRITE], STDOUT_FILENO);[24C[100m [m
[33m173 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m[59;99H[K[59;99H208,13[8C45%[38;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m168 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[READ]);[39C[100m [m
[33m169 [m[79C[100m [m
[33m170 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].down[READ], STDIN_FILENO);[24C[100m [m[59;99H[K[59;99H208,13[8C45%[41;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m165 [m[12C[36m// child[m[59C[100m [m
[33m166 [m[79C[100m [m
[33m167 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[WRITE]);[36C[100m [m[59;99H[K[59;99H208,13[8C44%[44;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m162 [m[79C[100m [m
[33m163 [m[8Cjobs[[38;5;248m[104mjobid[m].pid = fork();[46C[100m [m
[33m164 [m[8C[33mif[m (!jobs[[38;5;248m[104mjobid[m].pid) {[48C[100m [m[59;99H[K[59;99H208,13[8C43%[47;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m159 [m[79C[100m [m
[33m160 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, [38;5;248m[104mjobid[m);[28C[100m [m
[33m161 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m[59;99H[K[59;99H208,13[8C42%[50;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m156 [m[12Cperror([38;5;130m"Creating up pipe"[m);[40C[100m [m
[33m157 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m158 [m[8C}[70C[100m [m[59;99H[K[59;99H208,13[8C41%[53;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m153 [m[8C}[70C[100m [m
[33m154 [m[79C[100m [m
[33m155 [m[8C[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].up) < [38;5;130m0[m) {[40C[100m [m[59;99H[K[59;99H208,13[8C40%[56;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m150 [m[8C[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].down) < [38;5;130m0[m) {[38C[100m [m
[33m151 [m[12Cperror([38;5;130m"Creating down pipe"[m);[38C[100m [m
[33m152 [m[12Cexit([38;5;130m1[m);[59C[100m [m[58;1H[93m207 [m[4m            printf([m[4m[38;5;130m"[[m[4m[35m%d[m[4m[38;5;130m] [m[4m[35m%s[m[4m[38;5;130m:"[m[4m, i, jobs[i].name);                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H207,13[8C40%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m147 [m[79C[100m [m
[33m148 [m[8Cstrcpy(jobs[[38;5;248m[104mjobid[m].name, args[[38;5;130m0[m]);[37C[100m [m
[33m149 [m[79C[100m [m[58;1H[93m204 [m[4m    [m[4m[36m// check args[m[4m                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H204,13[8C39%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m144 [m[8C[38;5;248m[104mjobid[m++;[63C[100m [m
[33m145 [m[79C[100m [m
[33m146 [m[8Cjobs = realloc(jobs, ([38;5;248m[104mjobid[m + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));[16C[100m [m[58;1H[93m201 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H201,0-1[7C38%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m141 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m142 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m143 [m    } [33melse[m {[67C[100m [m[58;1H[93m198 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H198,0-1[7C37%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m138 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m139 [m[36m */[m[76C[100m [m
[33m140 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs) {[44C[100m [m[58;1H[93m195 [m[4m[36m */[m[4m                                                                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H195,3[9C36%[58;7H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m135 [m[36m * of the child process is unchanged[m[43C[100m [m
[33m136 [m[36m *[m[77C[100m [m
[33m137 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[58;1H[93m192 [m[4m[36m *[m[4m                                                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H192,2[9C36%[58;6H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m132 [m[36m * -------[m[69C[100m [m
[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m
[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m[58;1H[93m189 [m[4m[36m/* report()[m[4m                                                                    [m[4m[100m [m[4m                                [m[59;99H[K[59;99H189,11[8C35%[58;15H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m129 [m}[78C[100m [m
[33m130 [m[79C[100m [m
[33m131 [m[36m/* spawn()[m[69C[100m [m[15;16H[46m{[m[58;1H[93m186 [m[4m    [m[4m[46m}[m[4m                                                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H186,5[9C34%[58;9H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m126 [m[79C[100m [m
[33m127 [m    free(jobs);[64C[100m [m
[33m128 [m    [33mreturn[m [38;5;130m0[m;[66C[100m [m[18;16H{[58;1H[93m183 [m[4m            close(jobs[[m[4m[38;5;248m[104mjobid[m[4m].up[WRITE]);                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H183,13[8C33%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m123 [m[8Cfree(input);[59C[100m [m
[33m124 [m[8Cfree(tokens);[58C[100m [m
[33m125 [m    }[74C[100m [m[58;1H[93m180 [m[4m        } [m[4m[33melse[m[4m {                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H180,13[8C32%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m120 [m[8Cprintf([38;5;130m"> "[m);[58C[100m [m
[33m121 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m122 [m[79C[100m [m[58;1H[93m177 [m[4m            [m[4m[33mif[m[4m (status == -[m[4m[38;5;130m1[m[4m) {                                                [m[4m[100m [m[4m                                [m[59;99H[K[59;99H177,13[8C32%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m117 [m[12Cprintf([38;5;130m"Error: Invalid command[m[35m\n[m[38;5;130m"[m);[32C[100m [m
[33m118 [m[8C}[70C[100m [m
[33m119 [m[79C[100m [m[58;1H[93m174 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H174,12[8C31%[58;16H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m114 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"cleanup"[m)) {[28C[100m [m
[33m115 [m[12Ccleanup();[57C[100m [m
[33m116 [m[8C} [33melse[m {[63C[100m [m[58;1H[93m171 [m[4m            close(jobs[[m[4m[38;5;248m[104mjobid[m[4m].down[READ]);                                     [m[4m[100m [m[4m                                [m[59;99H[K[59;99H171,13[8C30%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m111 [m[12Crcv(args, spcs);[51C[100m [m
[33m112 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"eof"[m)) {[32C[100m [m
[33m113 [m[12Ceof(args, spcs);[51C[100m [m[58;1H[93m168 [m[4m            close(jobs[[m[4m[38;5;248m[104mjobid[m[4m].up[READ]);                                       [m[4m[100m [m[4m                                [m[59;99H[K[59;99H168,13[8C29%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m108 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"send"[m)) {[31C[100m [m
[33m109 [m[12Csend(args, spcs);[50C[100m [m
[33m110 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"rcv"[m)) {[32C[100m [m[58;1H[93m165 [m[4m            [m[4m[36m// child[m[4m                                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H165,13[8C28%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m105 [m[12Ccall_signal(args, spcs);[43C[100m [m
[33m106 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"sleep"[m)) {[30C[100m [m
[33m107 [m[12Chq_wait(args, spcs);[47C[100m [m[58;1H[93m162 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H162,0-1[7C28%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m102 [m[12C[36m// Report[m[58C[100m [m
[33m103 [m[12Creport(args, spcs);[48C[100m [m
[33m104 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"signal"[m)) {[29C[100m [m[58;1H[93m159 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H159,0-1[7C27%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 99 [m[12C[36m// spawn[m[59C[100m [m
[33m100 [m[12Cspawn(args, spcs);[49C[100m [m
[33m101 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"report"[m)) {[29C[100m [m[58;1H[93m156 [m[4m            perror([m[4m[38;5;130m"Creating up pipe"[m[4m);                                        [m[4m[100m [m[4m                                [m[59;99H[K[59;99H156,13[8C26%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 96 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m 97 [m[79C[100m [m
[33m 98 [m[8C[33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"spawn"[m)) {[37C[100m [m[55;45H[46m{[m


[93m153 [m[4m        [m[4m[46m}[m[4m                                                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H153,9[9C25%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 93 [m[12Cargs[i - [38;5;130m1[m] = tokens[i];[43C[100m [m
[33m 94 [m[8C}[70C[100m [m
[33m 95 [m[8Cargs[spcs - [38;5;130m1[m] = [38;5;130m0[m;[52C[100m [m[58;1H[93m150 [m[4m        [m[4m[33mif[m[4m (pipe(jobs[[m[4m[38;5;248m[104mjobid[m[4m].down) < [m[4m[38;5;130m0[m[4m) {                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H150,13[8C24%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 90 [m[79C[100m [m
[33m 91 [m[8C[32mchar[m* args[spcs];[54C[100m [m
[33m 92 [m[8C[33mfor[m ([32mint[m i = [38;5;130m1[m; i < spcs; i++) {[39C[100m [m[58;1H[93m147 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H147,8[9C23%[58;12H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 87 [m[12C[33mcontinue[m;[58C[100m [m
[33m 88 [m[8C}[70C[100m [m
[33m 89 [m[8Ctokens = split_space_not_quote(input, &spcs);[26C[100m [m[58;1H[93m144 [m[4m        [m[4m[38;5;248m[104mjobid[m[4m++;                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H144,13[8C23%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 84 [m[8C[33mif[m (!strcmp(input, [38;5;130m""[m)) {[46C[100m [m
[33m 85 [m[12Cprintf([38;5;130m"> "[m);[54C[100m [m
[33m 86 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m[58;1H[93m141 [m[4m    [m[4m[33mif[m[4m (spcs < [m[4m[38;5;130m2[m[4m) {                                                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H141,13[8C22%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 81 [m    [33mwhile[m ((input = read_line([38;5;130mstdin[m)) != [38;5;130mNULL[m) {[31C[100m [m
[33m 82 [m[8C[32mint[m spcs = [38;5;130m0[m;[58C[100m [m
[33m 83 [m[79C[100m [m[58;1H[93m138 [m[4m[36m * spcs: number of original tokens[m[4m                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H138,13[8C21%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 78 [m    printf([38;5;130m"> "[m);[62C[100m [m
[33m 79 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m 80 [m    [36m// prompt loop[m[61C[100m [m[58;1H[93m135 [m[4m[36m * of the child process is unchanged[m[4m                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H135,13[8C20%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 75 [m[79C[100m [m
[33m 76 [m    signal([38;5;130mSIGINT[m, handle_signal);[45C[100m [m
[33m 77 [m    signal([38;5;130mSIGCHLD[m, handle_signal);[44C[100m [m[58;1H[93m132 [m[4m[36m * -------[m[4m                                                                     [m[4m[100m [m[4m                                [m[59;99H[K[59;99H132,10[8C19%[58;14H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 72 [m    [32mchar[m** tokens;[61C[100m [m
[33m 73 [m[79C[100m [m
[33m 74 [m    jobs = malloc([38;5;130m0[m * [33msizeof[m([32mstruct[m Job));[37C[100m [m[58;1H[93m129 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H129,1[9C19%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 69 [m[79C[100m [m
[33m 70 [m[32mint[m main([32mint[m argc, [32mchar[m* argv[]) {[45C[100m [m
[33m 71 [m    [32mchar[m* input;[63C[100m [m[58;1H[93m126 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H126,4[9C18%[58;8H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 66 [m[79C[100m [m
[33m 67 [m[79C[100m [m
[33m 68 [m[36m// Program[m[69C[100m [m[58;1H[93m123 [m[4m        free[m[4m[46m([m[4minput[m[4m[46m)[m[4m;                                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H123,13[8C17%[58;17H[?25h[?25l[59;99H[K[59;1H/[?2004h[?25hf[?25l[?25hi[?25l[?25hn[?25l[?25hi[?25l[?25hs[?25l[?25hh[?25l[?25he[?25l[?25hd[?25l[?25h[?25l[27m[23m[29m[m[H[2J[1;1H[33m180 [m[8C} [33melse[m {[63C[100m [m
[33m181 [m[12C[36m// parent[m[58C[100m [m
[33m182 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m
[33m183 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m
[33m184 [m[79C[100m [m
[33m185 [m[8C}[70C[100m [m
[33m186 [m    }[74C[100m [m
[33m187 [m}[78C[100m [m
[33m188 [m[79C[100m [m
[33m189 [m[36m/* report()[m[68C[100m [m
[33m190 [m[36m * --------[m[68C[100m [m
[33m191 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m
[33m192 [m[36m *[m[77C[100m [m
[33m193 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m194 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m195 [m[36m */[m[76C[100m [m
[33m196 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[43C[100m [m
[33m197 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m198 [m[79C[100m [m
[33m199 [m    [36m// Header row[m[62C[100m [m
[33m200 [m    printf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[46C[100m [m
[33m201 [m[79C[100m [m
[33m202 [m    [36m// Job status output dependent on arg present status[m[23C[100m [m
[33m203 [m[79C[100m [m
[33m204 [m    [36m// check args[m[62C[100m [m
[33m205 [m    [33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[37C[100m [m
[33m206 [m[8C[33mfor[m ([32mint[m i = [38;5;130m0[m; i <= jobid; i++) {[37C[100m [m
[33m207 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[31C[100m [m
[93m208 [m[4m            [m[4m[33mif[m[4m (jobs[i].[m[4m[38;5;248m[104mfinished[m[4m) {                                            [m[4m[100m [m[4m                                [m[30;1H[33m209 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m210 [m[12C} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[28C[100m [m
[33m211 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[12C[100m [m
[33m212 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {[26C[100m [m
[33m213 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[11C[100m [m
[33m214 [m[12C} [33melse[m {[59C[100m [m
[33m215 [m[16Cprintf([38;5;130m"Error[m[35m\n[m[38;5;130m"[m);[45C[100m [m
[33m216 [m[12C}[66C[100m [m
[33m217 [m[8C}[70C[100m [m
[33m218 [m[79C[100m [m
[33m219 [m    } [33melse[m [33mif[m (spcs > [38;5;130m1[m) {      [36m// report on specific job[m[22C[100m [m
[33m220 [m[8C[36m// check for job tokens[1][m[45C[100m [m
[33m221 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m222 [m[12C[32mint[m jobq = atoi(args[[38;5;130m0[m]);[42C[100m [m
[33m223 [m[79C[100m [m
[33m224 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, jobq, jobs[jobq].name);[25C[100m [m
[33m225 [m[79C[100m [m
[33m226 [m[12C[33mif[m (WIFEXITED(jobs[jobq].status)) {[32C[100m [m
[33m227 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WEXITSTATUS(jobs[jobq].status));[8C[100m [m
[33m228 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[jobq].status)) {[23C[100m [m
[33m229 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[jobq].status));[8C[100m [m
[33m230 [m[12C} [33melse[m {[59C[100m [m
[33m231 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m232 [m[12C}[66C[100m [m
[33m233 [m[8C} [33melse[m {[63C[100m [m
[33m234 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m235 [m[8C}[70C[100m [m
[33m236 [m    }[74C[100m [m
[33m237 [m}[78C[100m [m[59;99H208,25[8C48%[29;29H[?25h[?25l[59;1H/finished[59;99H[K[59;1H[27m[23m[29m[m[H[2J[1;1H[33m360 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m361 [m[8C}[70C[100m [m
[33m362 [m    }[74C[100m [m
[33m363 [m}[78C[100m [m
[33m364 [m[79C[100m [m
[33m365 [m[36m/* cleanup()[m[67C[100m [m
[33m366 [m[36m * ---------[m[67C[100m [m
[33m367 [m[36m * Terminates all child processes spawned by hq. It does this by sending [m      [100m [m
[33m368 [m[36m * signal 9 (SIGKILL). Reaps all processes.[m[36C[100m [m
[33m369 [m[36m *[m[77C[100m [m
[33m370 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m371 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m372 [m[36m */[m[76C[100m [m
[33m373 [m[32mvoid[m cleanup([32mvoid[m) {[59C[100m [m
[33m374 [m    [33mfor[m ([32mint[m job = [38;5;130m0[m; job < jobid; job++) {[36C[100m [m
[33m375 [m[8Ckill(jobs[job].pid, [38;5;130mSIGKILL[m);[42C[100m [m
[33m376 [m    }[74C[100m [m
[33m377 [m[79C[100m [m
[33m378 [m}[78C[100m [m
[33m379 [m[79C[100m [m
[33m380 [m[36m/* handle_signal()[m[61C[100m [m
[33m381 [m[36m * ---------------[m[61C[100m [m
[33m382 [m[36m * Signal handler[m[62C[100m [m
[33m383 [m[36m *[m[77C[100m [m
[33m384 [m[36m * s: signal number[m[60C[100m [m
[33m385 [m[36m */[m[76C[100m [m
[33m386 [m[32mvoid[m handle_signal([32mint[m s) {[52C[100m [m
[33m387 [m    [33mfor[m ([32mint[m i = [38;5;130m0[m; i < jobid; i++) {[42C[100m [m
[93m388 [m[4m        jobs[i].[m[4m[38;5;248m[104mfinished[m[4m = waitpid(jobs[i].pid, &jobs[i].status, WNOHANG);     [m[4m[100m [m[4m                                [m[30;1H[33m389 [m    }[74C[100m [m
[33m390 [m[79C[100m [m
[33m391 [m    signal(s, handle_signal);[50C[100m [m
[33m392 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m393 [m}[78C[100m [m
[33m394 [m[79C[100m [m
[33m395 [m[36m/* is_number()[m[65C[100m [m
[33m396 [m[36m * -----------[m[65C[100m [m
[33m397 [m[36m * Determines if inputer number[] is a number or not[m[27C[100m [m
[33m398 [m[36m *[m[77C[100m [m
[33m399 [m[36m * number[]: array of characters to be checked[m[33C[100m [m
[33m400 [m[36m * Returns: true if number, false if not[m[39C[100m [m
[33m401 [m[36m */[m[76C[100m [m
[33m402 [m[32mbool[m is_number([32mchar[m number[]) {[48C[100m [m
[33m403 [m    [33mfor[m([32mint[m i = [38;5;130m0[m; number[i] != [38;5;130m0[m; i++) {[38C[100m [m
[33m404 [m[8C[33mif[m (!isdigit(number[i])) {[45C[100m [m
[33m405 [m[12C[33mreturn[m [38;5;130mfalse[m;[54C[100m [m
[33m406 [m[8C}[70C[100m [m
[33m407 [m    }[74C[100m [m
[33m408 [m    [33mreturn[m [38;5;130mtrue[m;[63C[100m [m
[33m409 [m}[78C[100m [m
[33m410 [m[79C[100m [m
[33m411 [m[36m/* is_job()[m[68C[100m [m
[33m412 [m[36m * --------[m[68C[100m [m
[33m413 [m[36m * Checks if job[] is a valid job number.[m[38C[100m [m
[33m414 [m[36m *[m[77C[100m [m
[33m415 [m[36m * job[]: array of characters of job number[m[36C[100m [m
[33m416 [m[36m * Returns: true if valid job, false if not[m[36C[100m [m
[33m417 [m[36m */[m[76C[100m [m[59;99H388,17[8C96%[29;21H[?25h[?25l[59;1H?finished[59;99H[K[59;1H[27m[23m[29m[m[H[2J[1;1H[33m180 [m[8C} [33melse[m {[63C[100m [m
[33m181 [m[12C[36m// parent[m[58C[100m [m
[33m182 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m
[33m183 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m
[33m184 [m[79C[100m [m
[33m185 [m[8C}[70C[100m [m
[33m186 [m    }[74C[100m [m
[33m187 [m}[78C[100m [m
[33m188 [m[79C[100m [m
[33m189 [m[36m/* report()[m[68C[100m [m
[33m190 [m[36m * --------[m[68C[100m [m
[33m191 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m
[33m192 [m[36m *[m[77C[100m [m
[33m193 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m194 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m195 [m[36m */[m[76C[100m [m
[33m196 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[43C[100m [m
[33m197 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m198 [m[79C[100m [m
[33m199 [m    [36m// Header row[m[62C[100m [m
[33m200 [m    printf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[46C[100m [m
[33m201 [m[79C[100m [m
[33m202 [m    [36m// Job status output dependent on arg present status[m[23C[100m [m
[33m203 [m[79C[100m [m
[33m204 [m    [36m// check args[m[62C[100m [m
[33m205 [m    [33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[37C[100m [m
[33m206 [m[8C[33mfor[m ([32mint[m i = [38;5;130m0[m; i <= jobid; i++) {[37C[100m [m
[33m207 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[31C[100m [m
[93m208 [m[4m            [m[4m[33mif[m[4m (jobs[i].[m[4m[38;5;248m[104mfinished[m[4m) {                                            [m[4m[100m [m[4m                                [m[30;1H[33m209 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m210 [m[12C} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[28C[100m [m
[33m211 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[12C[100m [m
[33m212 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {[26C[100m [m
[33m213 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[11C[100m [m
[33m214 [m[12C} [33melse[m {[59C[100m [m
[33m215 [m[16Cprintf([38;5;130m"Error[m[35m\n[m[38;5;130m"[m);[45C[100m [m
[33m216 [m[12C}[66C[100m [m
[33m217 [m[8C}[70C[100m [m
[33m218 [m[79C[100m [m
[33m219 [m    } [33melse[m [33mif[m (spcs > [38;5;130m1[m) {      [36m// report on specific job[m[22C[100m [m
[33m220 [m[8C[36m// check for job tokens[1][m[45C[100m [m
[33m221 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m222 [m[12C[32mint[m jobq = atoi(args[[38;5;130m0[m]);[42C[100m [m
[33m223 [m[79C[100m [m
[33m224 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, jobq, jobs[jobq].name);[25C[100m [m
[33m225 [m[79C[100m [m
[33m226 [m[12C[33mif[m (WIFEXITED(jobs[jobq].status)) {[32C[100m [m
[33m227 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WEXITSTATUS(jobs[jobq].status));[8C[100m [m
[33m228 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[jobq].status)) {[23C[100m [m
[33m229 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[jobq].status));[8C[100m [m
[33m230 [m[12C} [33melse[m {[59C[100m [m
[33m231 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m232 [m[12C}[66C[100m [m
[33m233 [m[8C} [33melse[m {[63C[100m [m
[33m234 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m235 [m[8C}[70C[100m [m
[33m236 [m    }[74C[100m [m
[33m237 [m}[78C[100m [m[59;99H208,25[8C48%[29;29H[?25h[?25l[59;103H13[29;17H[?25h[?25l[33m208 [m            [7m[33m[48;5;242mif[m[7m[48;5;242m (jobs[i].finished) { [m                                           [100m [m[29;85H[K[30;5H[7m[48;5;242m                printf([m[7m[38;5;130m[48;5;242m"running[m[7m[35m[48;5;242m\n[m[7m[38;5;130m[48;5;242m"[m[7m[48;5;242m); [31;5H            } [m[7m[33m[48;5;242melse[m[7m[48;5;242m [m[7m[33m[48;5;242mif[m[7m[48;5;242m (WIFEXITED(jobs[i].status)) { [32;5H                printf([m[7m[38;5;130m[48;5;242m"exited([m[7m[35m[48;5;242m%d[m[7m[38;5;130m[48;5;242m)[m[7m[35m[48;5;242m\n[m[7m[38;5;130m[48;5;242m"[m[7m[48;5;242m,WEXITSTATUS(jobs[i].status)); [33;5H            } [m[7m[33m[48;5;242melse[m[7m[48;5;242m [m[7m[33m[48;5;242mif[m[7m[48;5;242m (WIFSIGNALED(jobs[i].status)) { [34;5H                printf([m[7m[38;5;130m[48;5;242m"signalled([m[7m[35m[48;5;242m%d[m[7m[38;5;130m[48;5;242m)[m[7m[35m[48;5;242m\n[m[7m[38;5;130m[48;5;242m"[m[7m[48;5;242m, WTERMSIG(jobs[i].status)); [35;5H            } [m[7m[33m[48;5;242melse[m[7m[48;5;242m { [36;5H                printf([m[7m[38;5;130m[48;5;242m"Error[m[7m[35m[48;5;242m\n[m[7m[38;5;130m[48;5;242m"[m[7m[48;5;242m); [37;5H            } [m
[93m217 [m[7m[48;5;242m        }[m[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H217,10[8C48%[38;14H[?25h[?25l[29;17H[33mif[m (jobs[i].[38;5;248m[104mfinished[m) { [30;5H                printf([38;5;130m"running[m[35m\n[m[38;5;130m"[m); [31;5H            } [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) { [32;5H                printf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status)); [33;5H            } [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) { [34;5H                printf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status)); [35;5H            } [33melse[m [46m{[m [36;5H                printf([38;5;130m"Error[m[35m\n[m[38;5;130m"[m); 
[93m216 [m[4m            [m[4m[46m}[m[4m                                                                  [m[4m[100m [m[4m                                [m[38;1H[33m217 [m        }[59;1H[K[59;99H216,13[8C48%[37;17H[?25h[?25l[29;1H[93m208 [m[13C[7m[33m[48;5;242mf[m[7m[48;5;242m (jobs[i].finished) { [30;5H                printf([m[7m[38;5;130m[48;5;242m"running[m[7m[35m[48;5;242m\n[m[7m[38;5;130m[48;5;242m"[m[7m[48;5;242m); [31;5H            } [m[7m[33m[48;5;242melse[m[7m[48;5;242m [m[7m[33m[48;5;242mif[m[7m[48;5;242m (WIFEXITED(jobs[i].status)) { [32;5H                printf([m[7m[38;5;130m[48;5;242m"exited([m[7m[35m[48;5;242m%d[m[7m[38;5;130m[48;5;242m)[m[7m[35m[48;5;242m\n[m[7m[38;5;130m[48;5;242m"[m[7m[48;5;242m,WEXITSTATUS(jobs[i].status)); [33;5H            } [m[7m[33m[48;5;242melse[m[7m[48;5;242m [m[7m[33m[48;5;242mif[m[7m[48;5;242m (WIFSIGNALED(jobs[i].status)) { [34;5H                printf([m[7m[38;5;130m[48;5;242m"signalled([m[7m[35m[48;5;242m%d[m[7m[38;5;130m[48;5;242m)[m[7m[35m[48;5;242m\n[m[7m[38;5;130m[48;5;242m"[m[7m[48;5;242m, WTERMSIG(jobs[i].status)); [35;5H            } [m[7m[33m[48;5;242melse[m[7m[48;5;242m { [36;5H                printf([m[7m[38;5;130m[48;5;242m"Error[m[7m[35m[48;5;242m\n[m[7m[38;5;130m[48;5;242m"[m[7m[48;5;242m); [m
[33m216 [m[7m[48;5;242m            }[m                                                                  [100m [m[37;85H[K[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H208,13[8C48%[29;17H[?25h[?25l[7m[33m[48;5;242mi[m[59;104H2[29;16H[?25h[?25l[29;5H[4m            [m[4m[33mif[m[4m (jobs[i].[m[4m[38;5;248m[104mfinished[m[4m) {                                            [m[4m[100m [m[4m                                [m[30;5H                printf([38;5;130m"running[m[35m\n[m[38;5;130m"[m); [31;5H            } [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) { [32;5H                printf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status)); [33;5H            } [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) { [34;5H                printf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status)); [35;5H            } [33melse[m { [36;5H                printf([38;5;130m"Error[m[35m\n[m[38;5;130m"[m); [37;5H            }[59;1H[K[59;99H208,12[8C48%9 lines yanked[59;99H[K[59;99H208,12[8C48%[29;16H[?25h[?25l[33m208 [m            [33mif[m (jobs[i].[38;5;248m[104mfinished[m) {                                            [100m [m[29;85H[K[47;1H[93m226 [m[4m            [m[4m[33mif[m[4m (WIFEXITED(jobs[jobq].status)) {                                [m[4m[100m [m[4m                                [m[59;100H26,13[47;17H[?25h[?25l[59;1H8 more lines[59;13H[K[47;17H[4mi [m[4m[33mif[m[4m (jobs[i].[m[4m[38;5;248m[104mfinished[m[4m) {          [m[48;29H[38;5;130mrunning[m[35m\n[m[38;5;130m"[m);                                   [49;31HEXITED(jobs[i].status)) {     [50;29H[38;5;130mexited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));    [51;24H[33mif[m (WIFSIGNALED(jobs[i].status)) {[52;29H[38;5;130msignalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[53;19H[33melse[m {[54;13H        printf([38;5;130m"Error[m[35m\n[m[38;5;130m"[m);[55;17H}f (WIFEXITED(jobs[jobq].status)) {[56;13H [7Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WEXITSTATUS(jobs[jobq].status));[57;9H [7C} [33melse[m [33mif[m (WIFSIGNALED(jobs[jobq].status)) {[58;5H [15Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[jobq].status));[59;99H226,14[8C47%[59;99H[K[59;99H226,14[8C47%[47;18H[?25h[?25l[59;1H[38;5;130m-- INSERT --[m[59;99H[K[59;99H226,14[8C47%[47;18H[?25h[?25l[4mif (jobs[i].[m[4m[38;5;248m[104mfinished[m[4m) { [47;18H[?25h[?25l[m[4m[33mif[m[4m (jobs[i].[m[4m[38;5;248m[104mfinished[m[4m) { [m[59;104H3[47;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m238 [m[12C} [33melse[m {[59C[100m [m
[33m239 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m240 [m[12C}[66C[100m [m[59;99H[K[59;99H226,13[8C48%[44;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m241 [m[8C} [33melse[m {[63C[100m [m
[33m242 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m243 [m[8C}[70C[100m [m[59;99H[K[59;99H226,13[8C48%[41;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m244 [m    }[74C[100m [m
[33m245 [m}[78C[100m [m
[33m246 [m[79C[100m [m[59;99H[K[59;99H226,13[8C49%[38;17H[?25h[?25l[33m226 [m            [33mif[m (jobs[i].[38;5;248m[104mfinished[m) {                                            [100m [m[38;85H[K[46;1H[93m234 [m[4m            }f (WIFEXITED(jobs[jobq].status)) {                                [m[4m[100m [m[4m                                [m[44;24H[46m{[m[46;17H[4m[46m}[m[59;100H34,14[46;18H[?25h[?25l[59;4H[38;5;130m(insert) VISUAL --[m[59;99H[K[59;99H240,14[8C49%[44;24H{

[33m234 [m            }[7m[48;5;242mf (WIFEXITED(jobs[jobq].status)) { [m                               [100m [m[46;85H[K[47;5H[7m[48;5;242m                printf([m[7m[38;5;130m[48;5;242m"exited([m[7m[35m[48;5;242m%d[m[7m[38;5;130m[48;5;242m)[m[7m[35m[48;5;242m\n[m[7m[38;5;130m[48;5;242m"[m[7m[48;5;242m, WEXITSTATUS(jobs[jobq].status)); [48;5H            } [m[7m[33m[48;5;242melse[m[7m[48;5;242m [m[7m[33m[48;5;242mif[m[7m[48;5;242m (WIFSIGNALED(jobs[jobq].status)) { [49;5H                printf([m[7m[38;5;130m[48;5;242m"signalled([m[7m[35m[48;5;242m%d[m[7m[38;5;130m[48;5;242m)[m[7m[35m[48;5;242m\n[m[7m[38;5;130m[48;5;242m"[m[7m[48;5;242m, WTERMSIG(jobs[jobq].status)); [50;5H            } [m[7m[33m[48;5;242melse[m[7m[48;5;242m { [51;5H                printf([m[7m[38;5;130m[48;5;242m"running[m[7m[35m[48;5;242m\n[m[7m[38;5;130m[48;5;242m"[m[7m[48;5;242m); [m
[93m240 [m[7m[48;5;242m            }[?25h[?25l[m[59;1H7 fewer lines[59;14H[K[46;1H[93m234 [m[4m            }        } [m[4m[33melse[m[4m {                                                  [m[4m[100m [m[4m                                [m[47;5H            printf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);                             [48;5H        }                                                [49;5H    }                                                                   [50;5H}                    [51;5H                                     
[33m240 [m[36m/* call_signal()[53;5H * -------------[54;5H * Sends signal to child process specified[m [55;5H[36m *[m       [56;5H[36m * args: arguments provided in command line without first command[57;5H * spcs: number of original tokens[58;5H */[m
[38;5;130m-- INSERT --[m[59;13H[K[59;99H234,14[8C50%7 fewer lines[59;99H[K[46;18H[?25h[?25l[59;1H[38;5;130m-- INSERT --[m[59;13H[K[59;99H234,14[8C50%[46;18H[4mi[7C } [m[4m[33melse[m[4m {[m[59;104H5[46;19H[?25h[?25l[33m234 [m            }i                                                                 [100m [m[46;85H[K[47;1H[93m235 [m[4m        } [m[4m[33melse[m[4m {                                                               [m[4m[100m [m[4m                                [m[48;13H    printf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[49;9H    }[50;5H    }[51;5H}[52;5H                [53;5H[36m/* call_signal()[54;8H-------------[m                          [55;7H[36m Sends signal to child process specified[m[56;7H                                                               [57;8H[36margs: arguments provided in command line without first command[58;7H spcs: number of original tokens[m[33;34H[46m{[m[47;13H[4m[46m}[m[59;101H5,9 [47;13H[?25h[?25l[4m}[m[1C[4m[33mel[m[4m[33m[46ms[m[4m[33me[m[4m {    [m[47;9H[4m[46m}[m[3C[4m[33ms[m[59;103H5[47;9H[?25h[?25l[4m}[m[1C[4m[33mel[m[4m[33m[46ms[m[4m[33me[m[4m {    [m[47;5H[4m[46m}[m[3C[4m[33ms[m[59;103H1[47;5H[?25h[?25l[46;1H[93m234 [m[4m            }i} [m[4m[33melse[m[4m {                                                         [m[4m[100m [m[4m                                [m[47;1H[33m235 [m[46m [m           printf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);                                    [100m [m[47;85H[K[48;13H}                                  [49;9H}    [50;5H}    [51;5H [52;5H[36m/* call_signal()[53;5H * -------------[54;8HSends signal to child process specified[m[55;7H                                        [56;7H[36m args: arguments provided in command line without first command[57;8Hspcs: number of original tokens[m                               [58;7H[36m/[m                               [46;19H[4m[46m}[m[47;5H [59;101H4,15[46;19H[?25h[?25l[4m}[m[4m[46m [m[4m[33melse[m[4m { [m[46;18H[4m[46m}[m[4m [m[59;104H4[46;18H[?25h[?25l[33m234 [m            }                                                                  [100m [m[46;85H[K[47;1H[93m235 [m[4m        } [m[4m[33melse[m[4m {                                                               [m[4m[100m [m[4m                                [m[48;13H    printf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[49;9H    }[50;5H    }[51;5H}[52;5H                [53;5H[36m/* call_signal()[54;8H-------------[m                          [55;7H[36m Sends signal to child process specified[mokens[m                               [58;7H[36m/[m                               [46;19H[4m[46m}[m[47;5H [59;101H4,15[46;19H[?25h[?25l[4m}[m[4m[46m [m[4m[33melse[m[4m { [m[46;18H[4m[46m}[m[4m [m[59;104H4[46;18H[?25h[?25l[33m234 [m            }                                                                  [100m [m[46;85H[K[47;1H[93m235 [m[4m        } [m[4m[33melse[m[4m {                                                               [m[4m[100m [m[4m                                [m[48;13H    printf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[49;9H    }[50;5H    }[51;5H}[52;5H                [53;5H[36m/* call_signal()[54;8H-------------[m                          [55;7H[36m Sends signal to child process specified[m[56;7H                                                               [57;8H[36margs: arguments provided in command line without first command[58;7H spcs: number of original tokens[m[47;13H[4m[46m}[m[59;101H5,9 [47;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m186 [m    }[74C[100m [m
[33m187 [m}[78C[100m [m
[33m188 [m[79C[100m [m[59;99H[K[59;99H235,9[9C49%[50;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m183 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m
[33m184 [m[79C[100m [m
[33m185 [m[8C}[70C[100m [m[59;99H[K[59;99H235,9[9C48%[53;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m180 [m[8C} [33melse[m {[63C[100m [m
[33m181 [m[12C[36m// parent[m[58C[100m [m
[33m182 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m[59;99H[K[59;99H235,9[9C47%[56;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m177 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m
[33m178 [m[16Cexit([38;5;130m99[m);[54C[100m [m
[33m179 [m[12C}[66C[100m [m[58;1H[93m234 [m[4m            }                                                                  [m[4m[100m [m[4m                                [m[59;99H[K[59;99H234,9[9C47%[45;34H{[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m174 [m[79C[100m [m
[33m175 [m[12C[32mint[m status;[56C[100m [m
[33m176 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m[58;1H[93m231 [m[4m                printf([m[4m[38;5;130m"signalled([m[4m[35m%d[m[4m[38;5;130m)[m[4m[35m\n[m[4m[38;5;130m"[m[4m, WTERMSIG(jobs[i].status));           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H231,9[9C46%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m171 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m
[33m172 [m[12Cdup2(jobs[jobid].up[WRITE], STDOUT_FILENO);[24C[100m [m
[33m173 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m[58;1H[93m228 [m[4m            } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (WIFEXITED(jobs[i].status)) {                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H228,9[9C45%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m168 [m[12Cclose(jobs[jobid].up[READ]);[39C[100m [m
[33m169 [m[79C[100m [m
[33m170 [m[12Cdup2(jobs[jobid].down[READ], STDIN_FILENO);[24C[100m [m[58;1H[93m225 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H225,1[9C44%[58;5H[?25h[59;1H[K[58;5H[?25l[59;99H225,0-1[7C44%[58;5H[?25h[?25l
/finished[59;99H[K[59;1H[1;58r[58;1H
[1;59r[57;1H[33m225 [m                                                                               [100m [m[57;85H[K[58;1H[93m226 [m[4m            [m[4m[33mif[m[4m (jobs[i].[m[4m[38;5;248m[104mfinished[m[4m) {                                            [m[4m[100m [m[4m                                [m[59;1H[K[59;99H226,25[8C45%[58;29H[?25h[?25l
/finished[59;99H[K[59;1H[27m[23m[29m[m[H[2J[1;1H[33m362 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m363 [m[8C}[70C[100m [m
[33m364 [m    }[74C[100m [m
[33m365 [m}[78C[100m [m
[33m366 [m[79C[100m [m
[33m367 [m[36m/* cleanup()[m[67C[100m [m
[33m368 [m[36m * ---------[m[67C[100m [m
[33m369 [m[36m * Terminates all child processes spawned by hq. It does this by sending [m      [100m [m
[33m370 [m[36m * signal 9 (SIGKILL). Reaps all processes.[m[36C[100m [m
[33m371 [m[36m *[m[77C[100m [m
[33m372 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m373 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m374 [m[36m */[m[76C[100m [m
[33m375 [m[32mvoid[m cleanup([32mvoid[m) {[59C[100m [m
[33m376 [m    [33mfor[m ([32mint[m job = [38;5;130m0[m; job < jobid; job++) {[36C[100m [m
[33m377 [m[8Ckill(jobs[job].pid, [38;5;130mSIGKILL[m);[42C[100m [m
[33m378 [m    }[74C[100m [m
[33m379 [m[79C[100m [m
[33m380 [m}[78C[100m [m
[33m381 [m[79C[100m [m
[33m382 [m[36m/* handle_signal()[m[61C[100m [m
[33m383 [m[36m * ---------------[m[61C[100m [m
[33m384 [m[36m * Signal handler[m[62C[100m [m
[33m385 [m[36m *[m[77C[100m [m
[33m386 [m[36m * s: signal number[m[60C[100m [m
[33m387 [m[36m */[m[76C[100m [m
[33m388 [m[32mvoid[m handle_signal([32mint[m s) {[52C[100m [m
[33m389 [m    [33mfor[m ([32mint[m i = [38;5;130m0[m; i < jobid; i++) {[42C[100m [m
[93m390 [m[4m        jobs[i].[m[4m[38;5;248m[104mfinished[m[4m = waitpid(jobs[i].pid, &jobs[i].status, WNOHANG);     [m[4m[100m [m[4m                                [m[30;1H[33m391 [m    }[74C[100m [m
[33m392 [m[79C[100m [m
[33m393 [m    signal(s, handle_signal);[50C[100m [m
[33m394 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m395 [m}[78C[100m [m
[33m396 [m[79C[100m [m
[33m397 [m[36m/* is_number()[m[65C[100m [m
[33m398 [m[36m * -----------[m[65C[100m [m
[33m399 [m[36m * Determines if inputer number[] is a number or not[m[27C[100m [m
[33m400 [m[36m *[m[77C[100m [m
[33m401 [m[36m * number[]: array of characters to be checked[m[33C[100m [m
[33m402 [m[36m * Returns: true if number, false if not[m[39C[100m [m
[33m403 [m[36m */[m[76C[100m [m
[33m404 [m[32mbool[m is_number([32mchar[m number[]) {[48C[100m [m
[33m405 [m    [33mfor[m([32mint[m i = [38;5;130m0[m; number[i] != [38;5;130m0[m; i++) {[38C[100m [m
[33m406 [m[8C[33mif[m (!isdigit(number[i])) {[45C[100m [m
[33m407 [m[12C[33mreturn[m [38;5;130mfalse[m;[54C[100m [m
[33m408 [m[8C}[70C[100m [m
[33m409 [m    }[74C[100m [m
[33m410 [m    [33mreturn[m [38;5;130mtrue[m;[63C[100m [m
[33m411 [m}[78C[100m [m
[33m412 [m[79C[100m [m
[33m413 [m[36m/* is_job()[m[68C[100m [m
[33m414 [m[36m * --------[m[68C[100m [m
[33m415 [m[36m * Checks if job[] is a valid job number.[m[38C[100m [m
[33m416 [m[36m *[m[77C[100m [m
[33m417 [m[36m * job[]: array of characters of job number[m[36C[100m [m
[33m418 [m[36m * Returns: true if valid job, false if not[m[36C[100m [m
[33m419 [m[36m */[m[76C[100m [m[59;99H390,17[8C96%[29;21H[?25h[?25l[59;1H/finished[59;99H[K[59;1H[31msearch hit BOTTOM, continuing at TOP[27m[23m[29m[m[H[2J[1;1H[33m 31 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs);[44C[100m [m
[33m 32 [m[79C[100m [m
[33m 33 [m[32mvoid[m call_signal([32mchar[m** args, [32mint[m spcs);[39C[100m [m
[33m 34 [m[79C[100m [m
[33m 35 [m[32mvoid[m hq_wait([32mchar[m** args, [32mint[m spcs);[43C[100m [m
[33m 36 [m[79C[100m [m
[33m 37 [m[32mvoid[m send([32mchar[m** args, [32mint[m spcs);[46C[100m [m
[33m 38 [m[79C[100m [m
[33m 39 [m[32mvoid[m rcv([32mchar[m** args, [32mint[m spcs);[47C[100m [m
[33m 40 [m[79C[100m [m
[33m 41 [m[32mvoid[m eof([32mchar[m** args, [32mint[m spcs);m
[33m 58 [m    [32mint[m status;[64C[100m [m
[93m 59 [m[4m    [m[4m[32mint[m[4m [m[4m[38;5;248m[104mfinished[m[4m;                                                              [m[4m[100m [m[4m                                [m[30;1H[33m 60 [m};[77C[100m [m
[33m 61 [m[79C[100m [m
[33m 62 [m[36m// Globals[m[69C[100m [m
[33m 63 [m[79C[100m [m
[33m 64 [m[32mint[m jobid = -[38;5;130m1[m;[64C[100m [m
[33m 65 [m[32mstruct[m Job* jobs;[62C[100m [m
[33m 66 [m[79C[100m [m
[33m 67 [m[79C[100m [m
[33m 68 [m[36m// Program[m[69C[100m [m
[33m 69 [m[79C[100m [m
[33m 70 [m[32mint[m main([32mint[m argc, [32mchar[m* argv[]) {[45C[100m [m
[33m 71 [m    [32mchar[m* input;[63C[100m [m
[33m 72 [m    [32mchar[m** tokens;[61C[100m [m
[33m 73 [m[79C[100m [m
[33m 74 [m    jobs = malloc([38;5;130m0[m * [33msizeof[m([32mstruct[m Job));[37C[100m [m
[33m 75 [m[79C[100m [m
[33m 76 [m    signal([38;5;130mSIGINT[m, handle_signal);[45C[100m [m
[33m 77 [m    signal([38;5;130mSIGCHLD[m, handle_signal);[44C[100m [m
[33m 78 [m    printf([38;5;130m"> "[m);[62C[100m [m
[33m 79 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m 80 [m    [36m// prompt loop[m[61C[100m [m
[33m 81 [m    [33mwhile[m ((input = read_line([38;5;130mstdin[m)) != [38;5;130mNULL[m) {[31C[100m [m
[33m 82 [m[8C[32mint[m spcs = [38;5;130m0[m;[58C[100m [m
[33m 83 [m[79C[100m [m
[33m 84 [m[8C[33mif[m (!strcmp(input, [38;5;130m""[m)) {[46C[100m [m
[33m 85 [m[12Cprintf([38;5;130m"> "[m);[54C[100m [m
[33m 86 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m 87 [m[12C[33mcontinue[m;[58C[100m [m
[33m 88 [m[8C}[70C[100m [m[59;99H59,9[11C8%[31msearch hit BOTTOM, continuing at TOP[m[59;99H[K[59;99H59,9[11C8%[29;13H[?25h[?25l[59;1H/finished[59;10H[K[59;1H[27m[23m[29m[m[H[2J[1;1H[33m180 [m[8C} [33melse[m {[63C[100m [m
[33m181 [m[12C[36m// parent[m[58C[100m [m
[33m182 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m
[33m183 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m
[33m184 [m[79C[100m [m
[33m185 [m[8C}[70C[100m [m
[33m186 [m    }[74C[100m [m
[33m187 [m}[78C[100m [m
[33m188 [m[79C[100m [m
[33m189 [m[36m/* report()[m[68C[100m [m
[33m190 [m[36m * --------[m[68C[100m [m
[33m191 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m
[33m192 [m[36m *[m[77C[100m [m
[33m193 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m194 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m195 [m[36m */[m[76C[100m [m
[33m196 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[43C[100m [m
[33m197 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m198 [m[79C[100m [m
[33m199 [m    [36m// Header row[m[62C[100m [m
[33m200 [m    printf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[46C[100m [m
[33m201 [m[79C[100m [m
[33m202 [m    [36m// Job status output dependent on arg present status[m[23C[100m [m
[33m203 [m[79C[100m [m
[33m204 [m    [36m// check args[m[62C[100m [m
[33m205 [m    [33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[37C[100m [m
[33m206 [m[8C[33mfor[m ([32mint[m i = [38;5;130m0[m; i <= jobid; i++) {[37C[100m [m
[33m207 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[31C[100m [m
[93m208 [m[4m            [m[4m[33mif[m[4m (jobs[i].[m[4m[38;5;248m[104mfinished[m[4m) {                                            [m[4m[100m [m[4m                                [m[30;1H[33m209 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m210 [m[12C} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[28C[100m [m
[33m211 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[12C[100m [m
[33m212 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {[26C[100m [m
[33m213 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[11C[100m [m
[33m214 [m[12C} [33melse[m {[59C[100m [m
[33m215 [m[16Cprintf([38;5;130m"Error[m[35m\n[m[38;5;130m"[m);[45C[100m [m
[33m216 [m[12C}[66C[100m [m
[33m217 [m[8C}[70C[100m [m
[33m218 [m[79C[100m [m
[33m219 [m    } [33melse[m [33mif[m (spcs > [38;5;130m1[m) {      [36m// report on specific job[m[22C[100m [m
[33m220 [m[8C[36m// check for job tokens[1][m[45C[100m [m
[33m221 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m222 [m[12C[32mint[m jobq = atoi(args[[38;5;130m0[m]);[42C[100m [m
[33m223 [m[79C[100m [m
[33m224 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, jobq, jobs[jobq].name);[25C[100m [m
[33m225 [m[79C[100m [m
[33m226 [m[12C[33mif[m (jobs[i].[38;5;248m[104mfinished[m) {[44C[100m [m
[33m227 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m228 [m[12C} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[28C[100m [m
[33m229 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[12C[100m [m
[33m230 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {[26C[100m [m
[33m231 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[11C[100m [m
[33m232 [m[12C} [33melse[m {[59C[100m [m
[33m233 [m[16Cprintf([38;5;130m"Error[m[35m\n[m[38;5;130m"[m);[45C[100m [m
[33m234 [m[12C}[66C[100m [m
[33m235 [m[8C} [33melse[m {[63C[100m [m
[33m236 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m237 [m[8C}[70C[100m [m[59;99H208,25[8C47%[29;29H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m238 [m    }[74C[100m [m
[33m239 [m}[78C[100m [m
[33m240 [m[79C[100m [m[59;99H[K[59;99H208,25[8C48%[26;29H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m180 [m[8C} [33melse[m {[63C[100m [m
[33m181 [m[12C[36m// parent[m[58C[100m [m
[33m182 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m[59;99H[K[59;99H208,25[8C47%[29;29H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m177 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m
[33m178 [m[16Cexit([38;5;130m99[m);[54C[100m [m
[33m179 [m[12C}[66C[100m [m[59;99H[K[59;99H208,25[8C47%[32;29H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m174 [m[79C[100m [m
[33m175 [m[12C[32mint[m status;[56C[100m [m
[33m176 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m[59;99H[K[59;99H208,25[8C46%[35;29H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m171 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m
[33m172 [m[12Cdup2(jobs[jobid].up[WRITE], STDOUT_FILENO);[24C[100m [m
[33m173 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m[59;99H[K[59;99H208,25[8C45%[38;29H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m168 [m[12Cclose(jobs[jobid].up[READ]);[39C[100m [m
[33m169 [m[79C[100m [m
[33m170 [m[12Cdup2(jobs[jobid].down[READ], STDIN_FILENO);[24C[100m [m[59;99H[K[59;99H208,25[8C44%[41;29H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m165 [m[12C[36m// child[m[59C[100m [m
[33m166 [m[79C[100m [m
[33m167 [m[12Cclose(jobs[jobid].down[WRITE]);[36C[100m [m[59;99H[K[59;99H208,25[8C43%[44;29H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m162 [m[79C[100m [m
[33m163 [m[8Cjobs[jobid].pid = fork();[46C[100m [m
[33m164 [m[8C[33mif[m (!jobs[jobid].pid) {[48C[100m [m[59;99H[K[59;99H208,25[8C43%[47;29H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m159 [m[79C[100m [m
[33m160 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, jobid);[28C[100m [m
[33m161 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m[59;99H[K[59;99H208,25[8C42%[50;29H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m156 [m[12Cperror([38;5;130m"Creating up pipe"[m);[40C[100m [m
[33m157 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m158 [m[8C}[70C[100m [m[59;99H[K[59;99H208,25[8C41%[53;29H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m153 [m[8C}[70C[100m [m
[33m154 [m[79C[100m [m
[33m155 [m[8C[33mif[m (pipe(jobs[jobid].up) < [38;5;130m0[m) {[40C[100m [m[59;99H[K[59;99H208,25[8C40%[56;29H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m150 [m[8C[33mif[m (pipe(jobs[jobid].down) < [38;5;130m0[m) {[38C[100m [m
[33m151 [m[12Cperror([38;5;130m"Creating down pipe"[m);[38C[100m [m
[33m152 [m[12Cexit([38;5;130m1[m);[59C[100m [m[58;1H[93m207 [m[4m            printf([m[4m[38;5;130m"[[m[4m[35m%d[m[4m[38;5;130m] [m[4m[35m%s[m[4m[38;5;130m:"[m[4m, i, jobs[i].name);                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H207,25[8C39%[58;29H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m147 [m[79C[100m [m
[33m148 [m[8Cstrcpy(jobs[jobid].name, args[[38;5;130m0[m]);[37C[100m [m
[33m149 [m[79C[100m [m[58;1H[93m204 [m[4m    [m[4m[36m// check args[m[4m                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H204,17[8C39%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m144 [m[8Cjobid++;[63C[100m [m
[33m145 [m[79C[100m [m
[33m146 [m[8Cjobs = realloc(jobs, (jobid + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));[16C[100m [m[58;1H[93m201 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H201,0-1[7C38%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m141 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m142 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m143 [m    } [33melse[m {[67C[100m [m[58;1H[93m198 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H198,0-1[7C37%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m138 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m139 [m[36m */[m[76C[100m [m
[33m140 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs) {[44C[100m [m[58;1H[93m195 [m[4m[36m */[m[4m                                                                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H195,3[9C36%[58;7H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m135 [m[36m * of the child process is unchanged[m[43C[100m [m
[33m136 [m[36m *[m[77C[100m [m
[33m137 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[58;1H[93m192 [m[4m[36m *[m[4m                                                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H192,2[9C35%[58;6H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m132 [m[36m * -------[m[69C[100m [m
[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m
[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m[58;1H[93m189 [m[4m[36m/* report()[m[4m                                                                    [m[4m[100m [m[4m                                [m[59;99H[K[59;99H189,11[8C35%[58;15H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m129 [m}[78C[100m [m
[33m130 [m[79C[100m [m
[33m131 [m[36m/* spawn()[m[69C[100m [m[15;16H[46m{[m[58;1H[93m186 [m[4m    [m[4m[46m}[m[4m                                                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H186,5[9C34%[58;9H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m126 [m[79C[100m [m
[33m127 [m    free(jobs);[64C[100m [m
[33m128 [m    [33mreturn[m [38;5;130m0[m;[66C[100m [m[18;16H{[58;1H[93m183 [m[4m            close(jobs[jobid].up[WRITE]);                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H183,25[8C33%[58;29H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m123 [m[8Cfree(input);[59C[100m [m
[33m124 [m[8Cfree(tokens);[58C[100m [m
[33m125 [m    }[74C[100m [m[58;1H[93m180 [m[4m        } [m[4m[33melse[m[4m {                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H180,16[8C32%[58;20H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m120 [m[8Cprintf([38;5;130m"> "[m);[58C[100m [m
[33m121 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m122 [m[79C[100m [m[58;1H[93m177 [m[4m            [m[4m[33mif[m[4m (status == -[m[4m[38;5;130m1[m[4m) {                                                [m[4m[100m [m[4m                                [m[59;99H[K[59;99H177,25[8C31%[58;29H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m117 [m[12Cprintf([38;5;130m"Error: Invalid command[m[35m\n[m[38;5;130m"[m);[32C[100m [m
[33m118 [m[8C}[70C[100m [m
[33m119 [m[79C[100m [m[58;1H[93m174 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H174,12[8C31%[58;16H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m114 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"cleanup"[m)) {[28C[100m [m
[33m115 [m[12Ccleanup();[57C[100m [m
[33m116 [m[8C} [33melse[m {[63C[100m [m[58;1H[93m171 [m[4m            close(jobs[jobid].down[READ]);                                     [m[4m[100m [m[4m                                [m[59;99H[K[59;99H171,25[8C30%[58;29H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m111 [m[12Crcv(args, spcs);[51C[100m [m
[33m112 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"eof"[m)) {[32C[100m [m
[33m113 [m[12Ceof(args, spcs);[51C[100m [m[58;1H[93m168 [m[4m            close(jobs[jobid].up[READ]);                                       [m[4m[100m [m[4m                                [m[59;99H[K[59;99H168,25[8C29%[58;29H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m108 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"send"[m)) {[31C[100m [m
[33m109 [m[12Csend(args, spcs);[50C[100m [m
[33m110 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"rcv"[m)) {[32C[100m [m[58;1H[93m165 [m[4m            [m[4m[36m// child[m[4m                                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H165,20[8C28%[58;24H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m105 [m[12Ccall_signal(args, spcs);[43C[100m [m
[33m106 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"sleep"[m)) {[30C[100m [m
[33m107 [m[12Chq_wait(args, spcs);[47C[100m [m[58;1H[93m162 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H162,0-1[7C27%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m102 [m[12C[36m// Report[m[58C[100m [m
[33m103 [m[12Creport(args, spcs);[48C[100m [m
[33m104 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"signal"[m)) {[29C[100m [m[58;1H[93m159 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H159,0-1[7C27%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 99 [m[12C[36m// spawn[m[59C[100m [m
[33m100 [m[12Cspawn(args, spcs);[49C[100m [m
[33m101 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"report"[m)) {[29C[100m [m[58;1H[93m156 [m[4m            perror([m[4m[38;5;130m"Creating up pipe"[m[4m);                                        [m[4m[100m [m[4m                                [m[59;99H[K[59;99H156,25[8C26%[58;29H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 96 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m 97 [m[79C[100m [m
[33m 98 [m[8C[33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"spawn"[m)) {[37C[100m [m[55;45H[46m{[m


[93m153 [m[4m        [m[4m[46m}[m[4m                                                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H153,9[9C25%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 93 [m[12Cargs[i - [38;5;130m1[m] = tokens[i];[43C[100m [m
[33m 94 [m[8C}[70C[100m [m
[33m 95 [m[8Cargs[spcs - [38;5;130m1[m] = [38;5;130m0[m;[52C[100m [m[58;1H[93m150 [m[4m        [m[4m[33mif[m[4m (pipe(jobs[jobid].down) < [m[4m[38;5;130m0[m[4m) {                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H150,25[8C24%[58;29H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 90 [m[79C[100m [m
[33m 91 [m[8C[32mchar[m* args[spcs];[54C[100m [m
[33m 92 [m[8C[33mfor[m ([32mint[m i = [38;5;130m1[m; i < spcs; i++) {[39C[100m [m[58;1H[93m147 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H147,8[9C23%[58;12H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 87 [m[12C[33mcontinue[m;[58C[100m [m
[33m 88 [m[8C}[70C[100m [m
[33m 89 [m[8Ctokens = split_space_not_quote(input, &spcs);[26C[100m [m[58;1H[93m144 [m[4m        jobid++;                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H144,16[8C23%[58;20H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 84 [m[8C[33mif[m (!strcmp(input, [38;5;130m""[m)) {[46C[100m [m
[33m 85 [m[12Cprintf([38;5;130m"> "[m);[54C[100m [m
[33m 86 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m[58;1H[93m141 [m[4m    [m[4m[33mif[m[4m (spcs < [m[4m[38;5;130m2[m[4m) {                                                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H141,19[8C22%[58;23H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 81 [m    [33mwhile[m ((input = read_line([38;5;130mstdin[m)) != [38;5;130mNULL[m) {[31C[100m [m
[33m 82 [m[8C[32mint[m spcs = [38;5;130m0[m;[58C[100m [m
[33m 83 [m[79C[100m [m[58;1H[93m138 [m[4m[36m * spcs: number of original tokens[m[4m                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H138,25[8C21%[58;29H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 78 [m    printf([38;5;130m"> "[m);[62C[100m [m
[33m 79 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m 80 [m    [36m// prompt loop[m[61C[100m [m[58;1H[93m135 [m[4m[36m * of the child process is unchanged[m[4m                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H135,25[8C20%[58;29H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 75 [m[79C[100m [m
[33m 76 [m    signal([38;5;130mSIGINT[m, handle_signal);[45C[100m [m
[33m 77 [m    signal([38;5;130mSIGCHLD[m, handle_signal);[44C[100m [m[58;1H[93m132 [m[4m[36m * -------[m[4m                                                                     [m[4m[100m [m[4m                                [m[59;99H[K[59;99H132,10[8C19%[58;14H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 72 [m    [32mchar[m** tokens;[61C[100m [m
[33m 73 [m[79C[100m [m
[33m 74 [m    jobs = malloc([38;5;130m0[m * [33msizeof[m([32mstruct[m Job));[37C[100m [m[58;1H[93m129 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H129,1[9C19%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 69 [m[79C[100m [m
[33m 70 [m[32mint[m main([32mint[m argc, [32mchar[m* argv[]) {[45C[100m [m
[33m 71 [m    [32mchar[m* input;[63C[100m [m[58;1H[93m126 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H126,4[9C18%[58;8H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 66 [m[79C[100m [m
[33m 67 [m[79C[100m [m
[33m 68 [m[36m// Program[m[69C[100m [m[58;1H[93m123 [m[4m        free(input);                                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H123,20[8C17%[58;24H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 63 [m[79C[100m [m
[33m 64 [m[32mint[m jobid = -[38;5;130m1[m;[64C[100m [m
[33m 65 [m[32mstruct[m Job* jobs;[62C[100m [m[58;1H[93m120 [m[4m        printf([m[4m[38;5;130m"> "[m[4m);                                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H120,21[8C16%[58;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 60 [m};[77C[100m [m
[33m 61 [m[79C[100m [m
[33m 62 [m[36m// Globals[m[69C[100m [m[58;1H[93m117 [m[4m            printf([m[4m[38;5;130m"Error: Invalid command[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                [m[4m[100m [m[4m                                [m[59;99H[K[59;99H117,25[8C15%[58;29H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 57 [m    [32mint[m up[[38;5;130m2[m];[65C[100m [m
[33m 58 [m    [32mint[m status;[64C[100m [m
[33m 59 [m    [32mint[m [38;5;248m[104mfinished[m;[62C[100m [m[58;1H[93m114 [m[4m        } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (!strcmp(tokens[[m[4m[38;5;130m0[m[4m], [m[4m[38;5;130m"cleanup"[m[4m)) {                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H114,25[8C15%[58;29H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 54 [m    [32mint[m pid;[67C[100m [m
[33m 55 [m    [32mchar[m name[MAX_BUFFER_SIZE];[48C[100m [m
[33m 56 [m    [32mint[m down[[38;5;130m2[m];[63C[100m [m[58;1H[93m111 [m[4m            rcv(args, spcs);                                                   [m[4m[100m [m[4m                                [m[59;99H[K[59;99H111,25[8C14%[58;29H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 51 [m[36m// Structs[m[69C[100m [m
[33m 52 [m[79C[100m [m
[33m 53 [m[32mstruct[m Job {[67C[100m [m[58;1H[93m108 [m[4m        } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (!strcmp(tokens[[m[4m[38;5;130m0[m[4m], [m[4m[38;5;130m"send"[m[4m)) {                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H108,25[8C13%[58;29H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 48 [m[79C[100m [m
[33m 49 [m[32mbool[m is_job([32mchar[m job[]);[55C[100m [m
[33m 50 [m[79C[100m [m[58;1H[93m105 [m[4m            call_signal(args, spcs);                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H105,25[8C12%[58;29H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 45 [m[32mvoid[m handle_signal([32mint[m s);[53C[100m [m
[33m 46 [m[79C[100m [m
[33m 47 [m[32mbool[m is_number([32mchar[m number[]);[49C[100m [m[58;1H[93m102 [m[4m            [m[4m[36m// Report[m[4m                                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H102,21[8C11%[58;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 42 [m[79C[100m [m
[33m 43 [m[32mvoid[m cleanup([32mvoid[m);[60C[100m [m
[33m 44 [m[79C[100m [m[58;1H[93m 99 [m[4m            [m[4m[36m// spawn[m[4m                                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H99,20[9C10%[58;24H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m100 [m[12Cspawn(args, spcs);[49C[100m [m
[33m101 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"report"[m)) {[29C[100m [m
[33m102 [m[12C[36m// Report[m[58C[100m [m[59;99H[K[59;99H99,20[9C11%[55;24H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m103 [m[12Creport(args, spcs);[48C[100m [m
[33m104 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"signal"[m)) {[29C[100m [m
[33m105 [m[12Ccall_signal(args, spcs);[43C[100m [m[59;99H[K[59;99H99,20[9C12%[52;24H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m106 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"sleep"[m)) {[30C[100m [m
[33m107 [m[12Chq_wait(args, spcs);[47C[100m [m
[33m108 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"send"[m)) {[31C[100m [m[59;99H[K[59;99H99,20[9C13%[49;24H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m109 [m[12Csend(args, spcs);[50C[100m [m
[33m110 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"rcv"[m)) {[32C[100m [m
[33m111 [m[12Crcv(args, spcs);[51C[100m [m[59;99H[K[59;99H99,20[9C14%[46;24H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m112 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"eof"[m)) {[32C[100m [m
[33m113 [m[12Ceof(args, spcs);[51C[100m [m
[33m114 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"cleanup"[m)) {[28C[100m [m[59;99H[K[59;99H99,20[9C15%[43;24H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m115 [m[12Ccleanup();[57C[100m [m
[33m116 [m[8C} [33melse[m {[63C[100m [m
[33m117 [m[12Cprintf([38;5;130m"Error: Invalid command[m[35m\n[m[38;5;130m"[m);[32C[100m [m[59;99H[K[59;99H99,20[9C15%[40;24H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m118 [m[8C}[70C[100m [m
[33m119 [m[79C[100m [m
[33m120 [m[8Cprintf([38;5;130m"> "[m);[58C[100m [m[59;99H[K[59;99H99,20[9C16%[37;24H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m121 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m122 [m[79C[100m [m
[33m123 [m[8Cfree(input);[59C[100m [m[59;99H[K[59;99H99,20[9C17%[34;24H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m124 [m[8Cfree(tokens);[58C[100m [m
[33m125 [m    }[74C[100m [m
[33m126 [m[79C[100m [m[59;99H[K[59;99H99,20[9C18%[31;24H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m127 [m    free(jobs);[64C[100m [m
[33m128 [m    [33mreturn[m [38;5;130m0[m;[66C[100m [m
[33m129 [m}[78C[100m [m[59;99H[K[59;99H99,20[9C19%[28;24H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m130 [m[79C[100m [m
[33m131 [m[36m/* spawn()[m[69C[100m [m
[33m132 [m[36m * -------[m[69C[100m [m[59;99H[K[59;99H99,20[9C19%[25;24H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m
[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m
[33m135 [m[36m * of the child process is unchanged[m[43C[100m [m[59;99H[K[59;99H99,20[9C20%[22;24H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m136 [m[36m *[m[77C[100m [m
[33m137 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m138 [m[36m * spcs: number of original tokens[m[45C[100m [m[59;99H[K[59;99H99,20[9C21%[19;24H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m139 [m[36m */[m[76C[100m [m
[33m140 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs) {[44C[100m [m
[33m141 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m[59;99H[K[59;99H99,20[9C22%[16;24H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m142 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m143 [m    } [33melse[m {[67C[100m [m
[33m144 [m[8Cjobid++;[63C[100m [m[59;99H[K[59;99H99,20[9C23%[13;24H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m145 [m[79C[100m [m
[33m146 [m[8Cjobs = realloc(jobs, (jobid + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));[16C[100m [m
[33m147 [m[79C[100m [m[59;99H[K[59;99H99,20[9C23%[10;24H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m148 [m[8Cstrcpy(jobs[jobid].name, args[[38;5;130m0[m]);[37C[100m [m
[33m149 [m[79C[100m [m
[33m150 [m[8C[33mif[m (pipe(jobs[jobid].down) < [38;5;130m0[m) {[38C[100m [m[59;99H[K[59;99H99,20[9C24%[7;24H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m151 [m[12Cperror([38;5;130m"Creating down pipe"[m);[38C[100m [m
[33m152 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m153 [m[8C}[70C[100m [m[59;99H[K[59;99H99,20[9C25%[4;24H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m154 [m[79C[100m [m
[33m155 [m[8C[33mif[m (pipe(jobs[jobid].up) < [38;5;130m0[m) {[40C[100m [m
[33m156 [m[12Cperror([38;5;130m"Creating up pipe"[m);[40C[100m [m[59;99H[K[59;99H99,20[9C26%[1;24H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m102 [m[4m            [m[4m[36m// Report[m[4m                                                          [m[4m[100m [m[4m                                [m[56;1H[33m157 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m158 [m[8C}[70C[100m [m
[33m159 [m[79C[100m [m[59;99H[K[59;99H102,21[8C27%[1;25H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m105 [m[4m            call_signal(args, spcs);                                           [m[4m[100m [m[4m                                [m[56;1H[33m160 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, jobid);[28C[100m [m
[33m161 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m162 [m[79C[100m [m[59;99H[K[59;99H105,25[8C27%[1;29H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m108 [m[4m        } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (!strcmp(tokens[[m[4m[38;5;130m0[m[4m], [m[4m[38;5;130m"send"[m[4m)) {                               [m[4m[100m [m[4m                                [m[56;1H[33m163 [m[8Cjobs[jobid].pid = fork();[46C[100m [m
[33m164 [m[8C[33mif[m (!jobs[jobid].pid) {[48C[100m [m
[33m165 [m[12C[36m// child[m[59C[100m [m[59;99H[K[59;99H108,25[8C28%[1;29H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m111 [m[4m            rcv(args, spcs);                                                   [m[4m[100m [m[4m                                [m[56;1H[33m166 [m[79C[100m [m
[33m167 [m[12Cclose(jobs[jobid].down[WRITE]);[36C[100m [m
[33m168 [m[12Cclose(jobs[jobid].up[READ]);[39C[100m [m[59;99H[K[59;99H111,25[8C29%[1;29H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m114 [m[4m        } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (!strcmp(tokens[[m[4m[38;5;130m0[m[4m], [m[4m[38;5;130m"cleanup"[m[4m)) {                            [m[4m[100m [m[4m                                [m[56;1H[33m169 [m[79C[100m [m
[33m170 [m[12Cdup2(jobs[jobid].down[READ], STDIN_FILENO);[24C[100m [m
[33m171 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m[59;99H[K[59;99H114,25[8C30%[1;29H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m117 [m[4m            printf([m[4m[38;5;130m"Error: Invalid command[m[4m[35m\n[m[4m[38;5;130mm
[33m167 [m[12Cclose(jobs[jobid].down[WRITE]);[36C[100m [m
[33m168 [m[12Cclose(jobs[jobid].up[READ]);[39C[100m [m[59;99H[K[59;99H111,25[8C29%[1;29H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m114 [m[4m        } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (!strcmp(tokens[[m[4m[38;5;130m0[m[4m], [m[4m[38;5;130m"cleanup"[m[4m)) {                            [m[4m[100m [m[4m                                [m[56;1H[33m169 [m[79C[100m [m
[33m170 [m[12Cdup2(jobs[jobid].down[READ], STDIN_FILENO);[24C[100m [m
[33m171 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m[59;99H[K[59;99H114,25[8C30%[1;29H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m117 [m[4m            printf([m[4m[38;5;130m"Error: Invalid command[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                [m[4m[100m [m[4m                                [m[56;1H[33m172 [m[12Cdup2(jobs[jobid].up[WRITE], STDOUT_FILENO);[24C[100m [m
[33m173 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m
[33m174 [m[79C[100m [m[59;99H[K[59;99H117,25[8C31%[1;29H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m120 [m[4m        printf([m[4m[38;5;130m"> "[m[4m);                                                          [m[4m[100m [m[4m                                [m[56;1H[33m175 [m[12C[32mint[m status;[56C[100m [m
[33m176 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m
[33m177 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m[59;99H[K[59;99H120,21[8C31%[1;25H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m123 [m[4m        free(input);                                                           [m[4m[100m [m[4m                                [m[56;1H[33m178 [m[16Cexit([38;5;130m99[m);[54C[100m [m
[33m179 [m[12C}[66C[100m [m
[33m180 [m[8C} [33melse[m {[63C[100m [m[59;99H[K[59;99H123,20[8C32%[1;24H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m126 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m181 [m[12C[36m// parent[m[58C[100m [m
[33m182 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m
[33m183 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m[59;99H[K[59;99H126,4[9C33%[1;8H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m129 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[56;1H[33m184 [m[79C[100m [m
[33m185 [m[8C}[70C[100m [m
[33m186 [m    }[74C[100m [m[59;99H[K[59;99H129,1[9C34%[1;5H[?25h[?25l[33m129 [m}                                                                              [100m [m[1;85H[K[35;1H[93m163 [m[4m        jobs[jobid].pid = fork();                                              [m[4m[100m [m[4m                                [m[59;100H63,33[35;37H[?25h[?25l[59;1H[38;5;130m-- INSERT --[m[59;99H[K[59;99H163,33[8C34%[35;37H[?25h[?25l[59;104H4[35;38H[?25h[?25l[33m163 [m        jobs[jobid].pid = fork();                                              [100m [m[35;85H[K[36;1H[93m164 [m[4m                                                                               [m[4m[100m [m[4m                                [m[37;13H[33mif[m (!jobs[jobid].pid) {[38;17H[36m// child[m[39;17H                               [40;35Hdown[WRITE]);[41;17Hclose(jobs[jobid].up[READ]);[42;17H                                           [43;17Hdup2(jobs[jobid].down[READ], STDIN_FILENO);[44;17Hclose(jobs[jobid].down[READ]);             [45;17Hdup2(jobs[jobid].up[WRITE], STDOUT_FILENO);[46;17Hclose(jobs[jobid].up[WRITE]);[47;17H           [48;17H[32mint[m status;                    [49;17Hstatus = execvp(args[[38;5;130m0[m], args);[50;17H[33mif[m (status == -[38;5;130m1[m) {[51;17H    exit([38;5;130m99[m);[52;13H    }   [53;13H} [33melse[m {     [54;17H[36m// parent[m                     [55;35Hdown[READ]);[56;17Hclose(jobs[jobid].up[WRITE]);[57;13H [58;9H    }[59;101H4,9 [36;13H[?25h[?25l[4mj[m[59;103H10[36;14H[?25h[?25l[4mo[m[59;104H1[36;15H[?25h[?25l[4mb[m[59;104H2[36;16H[?25h[?25l[4ms[m[59;104H3[36;17H[?25h[?25l[4mi[m[59;104H4[36;18H[?25h[?25l[4md[m[59;104H5[36;19H[?25h[?25l[4m [m[59;104H4[36;18H[?25h[?25l[4m[[m[37;35H[1m[37m[41m{[40;47H;[41;44H;[43;59H;[44;46H;[45;59H;[46;45H;[48;27H;[49;47H;[50;35H{[51;29H;[52;17H}[m[59;104H5[36;19H[?25h[?25l[4m [m[37;35H{ [40;47H; [41;44H; [43;59H; [44;46H; [45;59H; [46;45H; [48;27H; [49;47H; [50;35H{ [51;29H; [52;17H} [59;104H4[36;18H[?25h[?25l[4m [m[59;104H3[36;17H[?25h[?25l[4ms[m[59;104H4[36;18H[?25h[?25l[4m[[m[37;35H[1m[37m[41m{[40;47H;[41;44H;[43;59H;[44;46H;[45;59H;[46;45H;[48;27H;[49;47H;[50;35H{[51;29H;[52;17H}[m[59;104H5[36;19H[?25h[?25l[4mj[m[59;104H6[36;20H[?25h[?25l[4mo[m[59;104H7[36;21H[?25h[?25l[4mb[m[59;104H8[36;22H[?25h[?25l[4mi[m[59;104H9[36;23H[?25h[?25l[4md[m[59;103H20[36;24H[?25h[?25l[4m][m[37;35H{ [40;47H; [41;44H; [43;59H; [44;46H; [45;59H; [46;45H; [48;27H; [49;47H; [50;35H{ [51;29H; [52;17H} [59;103H14[36;18H[?25h[?25l[4m[46m[[5C][m[59;103H21[36;25H[?25h[?25l[4m.[36;18H[jobid][m[59;104H2[36;26H[?25h[?25l[4mf[m[59;104H3[36;27H[?25h[?25l[4mi[m[59;104H4[36;28H[?25h[?25l[4mn[m[59;104H5[36;29H[?25h[?25l[4mi[m[59;104H6[36;30H[?25h[?25l[4ms[m[59;104H7[36;31H[?25h[?25l[4mh[m[59;104H8[36;32H[?25h[?25l[4me[m[59;104H9[36;33H[?25h[?25l[36;26H[4m[38;5;248m[104mfinished[m[59;103H30[36;34H[?25h[?25l[59;104H1[36;35H[?25h[?25l[4m=[m[59;104H2[36;36H[?25h[?25l[59;104H3[36;37H[?25h[?25l[4mj[m[59;104H4[36;38H[?25h[?25l[4mo[m[59;104H5[36;39H[?25h[?25l[4mb[m[59;104H6[36;40H[?25h[?25l[4ms[m[59;104H7[36;41H[?25h[?25l[4m[[m[37;35H[1m[37m[41m{[40;47H;[41;44H;[43;59H;[44;46H;[45;59H;[46;45H;[48;27H;[49;47H;[50;35H{[51;29H;[52;17H}[m[59;104H8[36;42H[?25h[?25l[4mj[m[59;104H9[36;43H[?25h[?25l[4mo[m[59;103H40[36;44H[?25h[?25l[4mb[m[59;104H1[36;45H[?25h[?25l[4mi[m[59;104H2[36;46H[?25h[?25l[4md[m[59;104H3[36;47H[?25h[?25l[4m.[m[59;104H4[36;48H[?25h[?25l[4m [m[59;104H3[36;47H[?25h[?25l[4m][m[37;35H{ [40;47H; [41;44H; [43;59H; [44;46H; [45;59H; [46;45H; [48;27H; [49;47H; [50;35H{ [51;29H; [52;17H} [59;103H37[36;41H[?25h[?25l[7C[4m.[m[59;103H45[36;49H[?25h[?25l[4mp[m[59;104H6[36;50H[?25h[?25l[4mi[m[59;104H7[36;51H[?25h[?25l[4md[m[59;104H8[36;52H[?25h[?25l[4m;[m[59;104H9[36;53H[?25h[59;1H[K[36;52H[?25l[59;99H164,48[8C34%[36;52H[?25h[?25l[59;99H[K[59;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?1000l[?2004l"hq.c" 432L, 10714C written
[?2004l[?1l>[?25h[?1049l[23;0;0ts4698512@moss:~/CSSE2310/Assignments/a3$ vim hqc[K.c
[?1000h[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;59r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[59;1H"hq.c" 432L, 10714C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[33m136 [m[36m *[m[77C[100m [m
[33m137 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m138 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m139 [m[36m */[m[76C[100m [m
[33m140 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs) {[44C[100m [m
[33m141 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m142 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m143 [m    } [33melse[m {[67C[100m [m
[33m144 [m[8Cjobid++;[63C[100m [m
[33m145 [m[79C[100m [m
[33m146 [m[8Cjobs = realloc(jobs, (jobid + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));[16C[100m [m
[33m147 [m[79C[100m [m
[33m148 [m[8Cstrcpy(jobs[jobid].name, args[[38;5;130m0[m]);[37C[100m [m
[33m149 [m[79C[100m [m
[33m150 [m[8C[33mif[m (pipe(jobs[jobid].down) < [38;5;130m0[m) {[38C[100m [m
[33m151 [m[12Cperror([38;5;130m"Creating down pipe"[m);[38C[100m [m
[33m152 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m153 [m[8C}[70C[100m [m
[33m154 [m[79C[100m [m
[33m155 [m[8C[33mif[m (pipe(jobs[jobid].up) < [38;5;130m0[m) {[40C[100m [m
[33m156 [m[12Cperror([38;5;130m"Creating up pipe"[m);[40C[100m [m
[33m157 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m158 [m[8C}[70C[100m [m
[33m159 [m[79C[100m [m
[33m160 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, jobid);[28C[100m [m
[33m161 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m162 [m[79C[100m [m
[33m163 [m[8Cjobs[jobid].pid = fork();[46C[100m [m
[93m164 [m[4m        jobss[jobid].[m[4m[38;5;248m[104mfinished[m[4m = jobs[jobid].pid;                               [m[4m[100m [m[4m                                [m[30;1H[33m165 [m[8C[33mif[m (!jobs[jobid].pid) {[48C[100m [m
[33m166 [m[12C[36m// child[m[59C[100m [m
[33m167 [m[79C[100m [m
[33m168 [m[12Cclose(jobs[jobid].down[WRITE]);[36C[100m [m
[33m169 [m[12Cclose(jobs[jobid].up[READ]);[39C[100m [m
[33m170 [m[79C[100m [m
[33m171 [m[12Cdup2(jobs[jobid].down[READ], STDIN_FILENO);[24C[100m [m
[33m172 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m
[33m173 [m[12Cdup2(jobs[jobid].up[WRITE], STDOUT_FILENO);[24C[100m [m
[33m174 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m
[33m175 [m[79C[100m [m
[33m176 [m[12C[32mint[m status;[56C[100m [m
[33m177 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m
[33m178 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m
[33m179 [m[16Cexit([38;5;130m99[m);[54C[100m [m
[33m180 [m[12C}[66C[100m [m
[33m181 [m[8C} [33melse[m {[63C[100m [m
[33m182 [m[12C[36m// parent[m[58C[100m [m
[33m183 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m
[33m184 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m
[33m185 [m[79C[100m [m
[33m186 [m[8C}[70C[100m [m
[33m187 [m    }[74C[100m [m
[33m188 [m}[78C[100m [m
[33m189 [m[79C[100m [m
[33m190 [m[36m/* report()[m[68C[100m [m
[33m191 [m[36m * --------[m[68C[100m [m
[33m192 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m
[33m193 [m[36m *[m[77C[100m [m[59;99H164,9[9C36%[29;13H[?25h[?12$p[?25l[59;103H10[29;14H[?25h[?25l[59;104H1[29;15H[?25h[?25l[59;104H2[29;16H[?25h[?25l[59;104H3[29;17H[?25h[?25l[1C[4m[46m[[5C][m[59;104H4[29;18H[?25h[?25l[59;1H[38;5;130m-- INSERT --[m[59;14H[K[59;99H164,14[8C36%[29;18H[?25h[?25l[4m[[m[4m[46mj[m[4mobid][m[4m[46m.[m[4m[38;5;248m[104mfinished[m[4m = jobs[jobid].pid; [m[29;17H[4m[46m[[m[4mj[m[4C[4m[46m][m[4m.[m[59;104H3[29;17H[?25h[59;1H[K[29;16H[?25l[1C[4m[jobid][m[59;99H164,12[8C36%[29;16H[?25h[?25l[59;99H[K[59;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?1000l[?2004l"hq.c" 432L, 10713C written
[?2004l[?1l>[?25h[?1049l[23;0;0ts4698512@moss:~/CSSE2310/Assignments/a3$ make
gcc -g -Wall -pedantic -std=gnu99 -o hq hq.c -I/local/courses/csse2310/include -L/local/courses/csse2310/lib -lcsse2310a3
[01m[Khq.c:[m[K In function â€˜[01m[Kreport[m[Kâ€™:
[01m[Khq.c:227:22:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Ki[m[Kâ€™ undeclared (first use in this function)
             if (jobs[[01;31m[Ki[m[K].finished) {
                      [01;31m[K^[m[K
[01m[Khq.c:227:22:[m[K [01;36m[Knote: [m[Keach undeclared identifier is reported only once for each function it appears in
make: *** [makefile:10: hq] Error 1
s4698512@moss:~/CSSE2310/Assignments/a3$ makevim hq.c
[?1000h[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;59r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[59;1H"hq.c" 432L, 10713C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[33m136 [m[36m *[m[77C[100m [m
[33m137 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m138 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m139 [m[36m */[m[76C[100m [m
[33m140 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs) {[44C[100m [m
[33m141 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m142 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m143 [m    } [33melse[m {[67C[100m [m
[33m144 [m[8Cjobid++;[63C[100m [m
[33m145 [m[79C[100m [m
[33m146 [m[8Cjobs = realloc(jobs, (jobid + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));[16C[100m [m
[33m147 [m[79C[100m [m
[33m148 [m[8Cstrcpy(jobs[jobid].name, args[[38;5;130m0[m]);[37C[100m [m
[33m149 [m[79C[100m [m
[33m150 [m[8C[33mif[m (pipe(jobs[jobid].down) < [38;5;130m0[m) {[38C[100m [m
[33m151 [m[12Cperror([38;5;130m"Creating down pipe"[m);[38C[100m [m
[33m152 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m153 [m[8C}[70C[100m [m
[33m154 [m[79C[100m [m
[33m155 [m[8C[33mif[m (pipe(jobs[jobid].up) < [38;5;130m0[m) {[40C[100m [m
[33m156 [m[12Cperror([38;5;130m"Creating up pipe"[m);[40C[100m [m
[33m157 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m158 [m[8C}[70C[100m [m
[33m159 [m[79C[100m [m
[33m160 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, jobid);[28C[100m [m
[33m161 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m162 [m[79C[100m [m
[33m163 [m[8Cjobs[jobid].pid = fork();[46C[100m [m
[93m164 [m[4m        jobs[jobid].[m[4m[38;5;248m[104mfinished[m[4m = jobs[jobid].pid;                                [m[4m[100m [m[4m                                [m[30;1H[33m165 [m[8C[33mif[m (!jobs[jobid].pid) {[48C[100m [m
[33m166 [m[12C[36m// child[m[59C[100m [m
[33m167 [m[79C[100m [m
[33m168 [m[12Cclose(jobs[jobid].down[WRITE]);[36C[100m [m
[33m169 [m[12Cclose(jobs[jobid].up[READ]);[39C[100m [m
[33m170 [m[79C[100m [m
[33m171 [m[12Cdup2(jobs[jobid].down[READ], STDIN_FILENO);[24C[100m [m
[33m172 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m
[33m173 [m[12Cdup2(jobs[jobid].up[WRITE], STDOUT_FILENO);[24C[100m [m
[33m174 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m
[33m175 [m[79C[100m [m
[33m176 [m[12C[32mint[m status;[56C[100m [m
[33m177 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m
[33m178 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m
[33m179 [m[16Cexit([38;5;130m99[m);[54C[100m [m
[33m180 [m[12C}[66C[100m [m
[33m181 [m[8C} [33melse[m {[63C[100m [m
[33m182 [m[12C[36m// parent[m[58C[100m [m
[33m183 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m
[33m184 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m
[33m185 [m[79C[100m [m
[33m186 [m[8C}[70C[100m [m
[33m187 [m    }[74C[100m [m
[33m188 [m}[78C[100m [m
[33m189 [m[79C[100m [m
[33m190 [m[36m/* report()[m[68C[100m [m
[33m191 [m[36m * --------[m[68C[100m [m
[33m192 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m
[33m193 [m[36m *[m[77C[100m [m[59;99H164,9[9C36%[29;13H[?25h[?12$p[?25l[59;1H[K[59;1H:[?2004h[?25hq[?25l[?25h[?25l[?1000l[?2004l[59;1H[K[59;1H[?2004l[?1l>[?25h[?1049l[23;0;0ts4698512@moss:~/CSSE2310/Assignments/a3$ vim hq.c[4Pmakevim hq.c
[?1000h[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;59r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[59;1H"hq.c" 432L, 10713C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[33m136 [m[36m *[m[77C[100m [m
[33m137 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[38;5;130m0[m) {[38C[100m [m
[33m151 [m[12Cperror([38;5;130m"Creating down pipe"[m);[38C[100m [m
[33m152 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m153 [m[8C}[70C[100m [m
[33m154 [m[79C[100m [m
[33m155 [m[8C[33mif[m (pipe(jobs[jobid].up) < [38;5;130m0[m) {[40C[100m [m
[33m156 [m[12Cperror([38;5;130m"Creating up pipe"[m);[40C[100m [m
[33m157 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m158 [m[8C}[70C[100m [m
[33m159 [m[79C[100m [m
[33m160 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, jobid);[28C[100m [m
[33m161 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m162 [m[79C[100m [m
[33m163 [m[8Cjobs[jobid].pid = fork();[46C[100m [m
[93m164 [m[4m        jobs[jobid].[m[4m[38;5;248m[104mfinished[m[4m = jobs[jobid].pid;                                [m[4m[100m [m[4m                                [m[30;1H[33m165 [m[8C[33mif[m (!jobs[jobid].pid) {[48C[100m [m
[33m166 [m[12C[36m// child[m[59C[100m [m
[33m167 [m[79C[100m [m
[33m168 [m[12Cclose(jobs[jobid].down[WRITE]);[36C[100m [m
[33m169 [m[12Cclose(jobs[jobid].up[READ]);[39C[100m [m
[33m170 [m[79C[100m [m
[33m171 [m[12Cdup2(jobs[jobid].down[READ], STDIN_FILENO);[24C[100m [m
[33m172 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m
[33m173 [m[12Cdup2(jobs[jobid].up[WRITE], STDOUT_FILENO);[24C[100m [m
[33m174 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m
[33m175 [m[79C[100m [m
[33m176 [m[12C[32mint[m status;[56C[100m [m
[33m177 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m
[33m178 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m
[33m179 [m[16Cexit([38;5;130m99[m);[54C[100m [m
[33m180 [m[12C}[66C[100m [m
[33m181 [m[8C} [33melse[m {[63C[100m [m
[33m182 [m[12C[36m// parent[m[58C[100m [m
[33m183 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m
[33m184 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m
[33m185 [m[79C[100m [m
[33m186 [m[8C}[70C[100m [m
[33m187 [m    }[74C[100m [m
[33m188 [m}[78C[100m [m
[33m189 [m[79C[100m [m
[33m190 [m[36m/* report()[m[68C[100m [m
[33m191 [m[36m * --------[m[68C[100m [m
[33m192 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m
[33m193 [m[36m *[m[77C[100m [m[59;99H164,9[9C36%[29;13H[?25h[?12$p[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m194 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m195 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m196 [m[36m */[m[76C[100m [m[59;1H[K[59;99H164,9[9C36%[26;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m197 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[43C[100m [m
[33m198 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m199 [m[79C[100m [m[59;99H[K[59;99H164,9[9C37%[23;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m200 [m    [36m// Header row[m[62C[100m [m
[33m201 [m    printf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[46C[100m [m
[33m202 [m[79C[100m [m[59;99H[K[59;99H164,9[9C38%[20;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m203 [m    [36m// Job status output dependent on arg present status[m[23C[100m [m
[33m204 [m[79C[100m [m
[33m205 [m    [36m// check args[m[62C[100m [m[59;99H[K[59;99H164,9[9C39%[17;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m206 [m    [33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[37C[100m [m
[33m207 [m[8C[33mfor[m ([32mint[m i = [38;5;130m0[m; i <= jobid; i++) {[37C[100m [m
[33m208 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[31C[100m [m[59;99H[K[59;99H164,9[9C40%[14;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m209 [m[12C[33mif[m (jobs[i].[38;5;248m[104mfinished[m) {[44C[100m [m
[33m210 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m211 [m[12C} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[28C[100m [m[59;99H[K[59;99H164,9[9C40%[11;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m212 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[12C[100m [m
[33m213 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {[26C[100m [m
[33m214 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[11C[100m [m[59;99H[K[59;99H164,9[9C41%[8;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m215 [m[12C} [33melse[m {[59C[100m [m
[33m216 [m[16Cprintf([38;5;130m"Error[m[35m\n[m[38;5;130m"[m);[45C[100m [m
[33m217 [m[12C}[66C[100m [m[59;99H[K[59;99H164,9[9C42%[5;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m218 [m[8C}[70C[100m [m
[33m219 [m[79C[100m [m
[33m220 [m    } [33melse[m [33mif[m (spcs > [38;5;130m1[m) {      [36m// report on specific job[m[22C[100m [m[59;99H[K[59;99H164,9[9C43%[2;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m166 [m[4m            [m[4m[36m// child[m[4m                                                           [m[4m[100m [m[4m                                [m[56;1H[33m221 [m[8C[36m// check for job tokens[1][m[45C[100m [m
[33m222 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m223 [m[12C[32mint[m jobq = atoi(args[[38;5;130m0[m]);[42C[100m [m[59;99H[K[59;99H166,9[9C44%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m169 [m[4m            close(jobs[jobid].up[READ]);                                       [m[4m[100m [m[4m                                [m[56;1H[33m224 [m[79C[100m [m
[33m225 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, jobq, jobs[jobq].name);[25C[100m [m
[33m226 [m[79C[100m [m[59;99H[K[59;99H169,9[9C44%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m172 [m[4m            close(jobs[jobid].down[READ]);                                     [m[4m[100m [m[4m                                [m[56;1H[33m227 [m[12C[33mif[m (jobs[i].[38;5;248m[104mfinished[m) {[44C[100m [m
[33m228 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m229 [m[12C} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[28C[100m [m[59;99H[K[59;99H172,9[9C45%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m175 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m230 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[12C[100m [m
[33m231 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {[26C[100m [m
[33m232 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[11C[100m [m[59;99H[K[59;99H175,9[9C46%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m178 [m[4m            [m[4m[33mif[m[4m (status == -[m[4m[38;5;130m1[m[4m) {                                                [m[4m[100m [m[4m                                [m[56;1H[33m233 [m[12C} [33melse[m {[59C[100m [m
[33m234 [m[16Cprintf([38;5;130m"Error[m[35m\n[m[38;5;130m"[m);[45C[100m [m
[33m235 [m[12C}[66C[100m [m[59;99H[K[59;99H178,9[9C47%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m181 [m[4m        } [m[4m[33melse[m[4m {                                                               [m[4m[100m [m[4m                                [m[56;1H[33m236 [m[8C} [33melse[m {[63C[100m [m
[33m237 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m238 [m[8C}[70C[100m [m[59;99H[K[59;99H181,9[9C48%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m184 [m[4m            close(jobs[jobid].up[WRITE]);                                      [m[4m[100m [m[4m                                [m[56;1H[33m239 [m    }[74C[100m [m
[33m240 [m}[78C[100m [m
[33m241 [m[79C[100m [m[59;99H[K[59;99H184,9[9C48%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m187 [m[4m    }                                                                          [m[4m[100m [m[4m                                [m[56;1H[33m242 [m[36m/* call_signal()[m[63C[100m [m
[33m243 [m[36m * -------------[m[63C[100m [m
[33m244 [m[36m * Sends signal to child process specified[m[37C[100m [m[59;99H[K[59;99H187,5[9C49%[1;9H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m190 [m[4m[36m/* report()[m[4m                                                                    [m[4m[100m [m[4m                                [m[56;1H[33m245 [m[36m *[m[77C[100m [m
[33m246 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m247 [m[36m * spcs: number of original tokens[m[45C[100m [m[59;99H[K[59;99H190,9[9C50%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m193 [m[4m[36m *[m[4m                                                                             [m[4m[100m [m[4m                                [m[56;1H[33m248 [m[36m */[m[76C[100m [m
[33m249 [m[32mvoid[m call_signal([32mchar[m** args, [32mint[m spcs) {[38C[100m [m
[33m250 [m    [33mif[m (spcs < [38;5;130m3[m) {[60C[100m [m[59;99H[K[59;99H193,2[9C51%[1;6H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m196 [m[4m[36m */[m[4m                                                                            [m[4m[100m [m[4m                                [m[56;1H[33m251 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m252 [m    } [33melse[m {[67C[100m [m
[33m253 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m[59;99H[K[59;99H196,3[9C52%[1;7H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m199 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m254 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m
[33m255 [m[12C[33mif[m (is_number(args[[38;5;130m1[m])){[43C[100m [m
[33m256 [m[16C[32mint[m sgnl = atoi(args[[38;5;130m1[m]);[38C[100m [m[59;99H[K[59;99H199,0-1[7C52%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m202 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m257 [m[16C[33mif[m (sgnl >= [38;5;130m1[m && sgnl <= [38;5;130m31[m) {[33C[100m [m
[33m258 [m[20C[32mint[m pid = jobs[job].pid;[35C[100m [m
[33m259 [m[20Ckill(pid, sgnl);[43C[100m [m[59;99H[K[59;99H202,0-1[7C53%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m205 [m[4m    [m[4m[36m// check args[m[4m                                                              [m[4m[100m [m[4m                                [m[56;1H[33m260 [m[16C} [33melse[m {[55C[100m [m
[33m261 [m[20Cprintf([38;5;130m"Error: Invalid signal[m[35m\n[m[38;5;130m"[m);[25C[100m [m
[33m262 [m[16C}[62C[100m [m[59;99H[K[59;99H205,9[9C54%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m208 [m[4m            printf([m[4m[38;5;130m"[[m[4m[35m%d[m[4m[38;5;130m] [m[4m[35m%s[m[4m[38;5;130m:"[m[4m, i, jobs[i].name);                               [m[4m[100m [m[4m                                [m[56;1H[33m263 [m[12C} [33melse[m {[59C[100m [m
[33m264 [m[16Cprintf([38;5;130m"Error: Invalid signal[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m265 [m[12C}[66C[100m [m[59;99H[K[59;99H208,9[9C55%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m211 [m[4m            } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (WIFEXITED(jobs[i].status)) {                            [m[4m[100m [m[4m                                [m[56;1H[33m266 [m[8C} [33melse[m {[63C[100m [m
[33m267 [m[12Cprintf([38;5;130m"Error: invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m268 [m[8C}[70C[100m [m[59;99H[K[59;99H211,9[9C56%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m214 [m[4m                printf([m[4m[38;5;130m"signalled([m[4m[35m%d[m[4m[38;5;130m)[m[4m[35m\n[m[4m[38;5;130m"[m[4m, WTERMSIG(jobs[i].status));           [m[4m[100m [m[4m                                [m[56;1H[33m269 [m    }[74C[100m [m
[33m270 [m}[78C[100m [m
[33m271 [m[79C[100m [m[59;99H[K[59;99H214,9[9C56%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m217 [m[4m            }                                                                  [m[4m[100m [m[4m                                [m[56;1H[33m272 [m[36m/* hq_wait()[m[67C[100m [m
[33m273 [m[36m * ---------[m[67C[100m [m
[33m274 [m[36m * Causes hq to wait for specified seconds[m[37C[100m [m[59;99H[K[59;99H217,9[9C57%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m220 [m[4m    } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (spcs > [m[4m[38;5;130m1[m[4m) {      [m[4m[36m// report on specific job[m[4m                      [m[4m[100m [m[4m                                [m[56;1H[33m275 [m[36m *[m[77C[100m [m
[33m276 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m277 [m[36m * spcs: number of original tokens[m[45C[100m [m[59;99H[K[59;99H220,9[9C58%[1;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m217 [m[12C}[66C[100m [m
[33m218 [m[8C}[70C[100m [m
[33m219 [m[79C[100m [m[59;99H[K[59;99H220,9[9C57%[4;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m214 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[11C[100m [m
[33m215 [m[12C} [33melse[m {[59C[100m [m
[33m216 [m[16Cprintf([38;5;130m"Error[m[35m\n[m[38;5;130m"[m);[45C[100m [m[59;99H[K[59;99H220,9[9C56%[7;13H[?25h[?25l[33m220 [m    } [33melse[m [33mif[m (spcs > [38;5;130m1[m) {      [36m// report on specific job[m                      [100m [m[7;85H[K[14;1H[93m227 [m[4m            [m[4m[33mif[m[4m (jobs[i].[m[4m[38;5;248m[104mfinished[m[4m) {                                            [m[4m[100m [m[4m                                [m[59;101H7,22[14;26H[?25h[?25l[4m[46m[[1C][m[59;104H3[14;27H[?25h[?25l[59;1H[38;5;130m-- INSERT --[m[59;99H[K[59;99H227,23[8C56%[14;27H[?25h[?25l[4m][m[4m[46m.[m[4m[38;5;248m[104mfinished[m[4m) { [m[14;26H[4m[46m][m[4m.[m[59;104H2[14;26H[?25h[?25l[4m[46mj[m[4m].[m[4m[38;5;248m[104mfinished[m[4m) {[14;26Hj[m[4m[46m][m[59;104H3[14;27H[?25h[?25l[4m[46mo[m[4m].[m[4m[38;5;248m[104mfinished[m[4m) {[14;27Ho[m[4m[46m][m[59;104H4[14;28H[?25h[?25l[4m[46mb[m[4m].[m[4m[38;5;248m[104mfinished[m[4m) {[14;28Hb[m[4m[46m][m[59;104H5[14;29H[?25h[?25l[4m[46mq[m[4m].[m[4m[38;5;248m[104mfinished[m[4m) {[14;29Hq[m[4m[46m][m[59;104H6[14;30H[?25h[?25l[33m227 [m            [33mif[m (jobs[46m[[mjobq[46m][m.[38;5;248m[104mfinished[m) {                                         [100m [m[14;85H[K[16;1H[93m229 [m[4m            } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (WIFEXITED(jobs[i].status)) {                            [m[4m[100m [m[4m                                [m[14;25H[jobq][16;42H[4m[46m[[1C][m[59;101H9,40[16;44H[?25h[?25l[4m][m[4m[46m.[m[4mstatus)) { [m[16;43H[4m[46m][m[4m.[m[59;103H39[16;43H[?25h[?25l[4m[46mj[m[4m].status)) {[16;43Hj[m[4m[46m][m[59;103H40[16;44H[?25h[?25l[4m[46104mfinished[m[4m) {[14;28Hb[m[4m[46m][m[59;104H5[14;29H[?25h[?25l[4m[46mq[m[4m].[m[4m[38;5;248m[104mfinished[m[4m) {[14;29Hq[m[4m[46m][m[59;104H6[14;30H[?25h[?25l[33m227 [m            [33mif[m (jobs[46m[[mjobq[46m][m.[38;5;248m[104mfinished[m) {                                         [100m [m[14;85H[K[16;1H[93m229 [m[4m            } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (WIFEXITED(jobs[i].status)) {                            [m[4m[100m [m[4m                                [m[14;25H[jobq][16;42H[4m[46m[[1C][m[59;101H9,40[16;44H[?25h[?25l[4m][m[4m[46m.[m[4mstatus)) { [m[16;43H[4m[46m][m[4m.[m[59;103H39[16;43H[?25h[?25l[4m[46mj[m[4m].status)) {[16;43Hj[m[4m[46m][m[59;103H40[16;44H[?25h[?25l[4m[46mj[m[4m].status)) {[16;44Hj[m[4m[46m][m[59;104H1[16;45H[?25h[?25l[4m[46mo[m[4m].status)) {[16;45Ho[m[4m[46m][m[59;104H2[16;46H[?25h[?25l[4m][m[4m[46m.[m[4mstatus)) { [m[16;45H[4m[46m][m[4m.[m[59;104H1[16;45H[?25h[?25l[4m[46mo[m[4m].status)) {[16;45Ho[m[4m[46m][m[59;104H2[16;46H[?25h[?25l[4m][m[4m[46m.[m[4mstatus)) { [m[16;45H[4m[46m][m[4m.[m[59;104H1[16;45H[?25h[?25l[4m][m[4m[46m.[m[4mstatus)) { [m[16;44H[4m[46m][m[4m.[m[59;104H0[16;44H[?25h[?25l[4m[46mo[m[4m].status)) {[16;44Ho[m[4m[46m][m[59;104H1[16;45H[?25h[?25l[4m[46mb[m[4m].status)) {[16;45Hb[m[4m[46m][m[59;104H2[16;46H[?25h[?25l[4m[46mq[m[4m].status)) {[16;46Hq[m[4m[46m][m[59;104H3[16;47H[?25h[?25l[33m229 [m            } [33melse[m [33mif[m (WIFEXITED(jobs[46m[[mjobq[46m][m.status)) {                         [100m [m[16;85H[K[17;1H[93m230 [m[4m                printf([m[4m[38;5;130m"exited([m[4m[35m%d[m[4m[38;5;130m)[m[4m[35m\n[m[4m[38;5;130m"[m[4m,WEXITSTATUS(jobs[i].status));            [m[4m[100m [m[4m                                [m[16;42H[jobq][17;59H[4m[46m[[1C][m[59;100H30,57[17;61H[?25h[?25l[4m][m[4m[46m.[m[4mstatus)); [m[17;60H[4m[46m][m[4m.[m[59;104H6[17;60H[?25h[?25l[4m[46mj[m[4m].status));[17;60Hj[m[4m[46m][m[59;104H7[17;61H[?25h[?25l[4m[46mo[m[4m].status));[17;61Ho[m[4m[46m][m[59;104H8[17;62H[?25h[?25l[4m[46mb[m[4m].status));[17;62Hb[m[4m[46m][m[59;104H9[17;63H[?25h[?25l[4m[46mq[m[4m].status));[17;63Hq[m[4m[46m][m[59;103H60[17;64H[?25h[?25l[33m230 [m                printf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[46m[[mjobq[46m][m.status));         [100m [m[17;85H[K[19;1H[93m232 [m[4m                printf([m[4m[38;5;130m"signalled([m[4m[35m%d[m[4m[38;5;130m)[m[4m[35m\n[m[4m[38;5;130m"[m[4m, WTERMSIG(jobs[i].status));           [m[4m[100m [m[4m                                [m[17;59H[jobq][19;60H[4m[46m[[1C][m[59;101H2,58[19;62H[?25h[?25l[4m][m[4m[46m.[m[4mstatus)); [m[19;61H[4m[46m][m[4m.[m[59;104H7[19;61H[?25h[?25l[4m[46mi[m[4m].status));[19;61Hi[m[4m[46m][m[59;104H8[19;62H[?25h[?25l[4m][m[4m[46m.[m[4mstatus)); [m[19;61H[4m[46m][m[4m.[m[59;104H7[19;61H[?25h[?25l[4m[46mj[m[4m].status));[19;61Hj[m[4m[46m][m[59;104H8[19;62H[?25h[?25l[4m[46mo[m[4m].status));[19;62Ho[m[4m[46m][m[59;104H9[19;63H[?25h[?25l[4m[46mb[m[4m].status));[19;63Hb[m[4m[46m][m[59;103H60[19;64H[?25h[?25l[4m[46mq[m[4m].status));[19;64Hq[m[4m[46m][m[59;104H1[19;65H[?25h[?25l[18;1H[93m231 [m[4m            } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (WIFSIGNALED(jobs[i].status)) {                          [m[4m[100m [m[4m                                [m[19;1H[33m232 [m                printf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[46m[[mjobq[46m][m.status));        [100m [m[19;85H[K[18;44H[4m[46m[[1C][m[19;60H[jobq][59;101H1,4[18;45H[?25h[?25l[59;104H2[18;46H[?25h[?25l[4m][m[4m[46m.[m[4mstatus)) { [m[18;45H[4m[46m][m[4m.[m[59;104H1[18;45H[?25h[?25l[4m[46mj[m[4m].status)) {[18;45Hj[m[4m[46m][m[59;104H2[18;46H[?25h[?25l[4m[46mo[m[4m].status)) {[18;46Ho[m[4m[46m][m[59;104H3[18;47H[?25h[?25l[4m[46mb[m[4m].status)) {[18;47Hb[m[4m[46m][m[59;104H4[18;48H[?25h[?25l[4m[46mq[m[4m].status)) {[18;48Hq[m[4m[46m][m[59;104H5[18;49H[?25h[59;1H[K[18;48H[?25l[4m[jobq][m[59;99H231,44[8C56%[18;48H[?25h[?25l[59;99H[K[59;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?1000l[?2004l"hq.c" 432L, 10728C written
[?2004l[?1l>[?25h[?1049l[23;0;0ts4698512@moss:~/CSSE2310/Assignments/a3$ make
gcc -g -Wall -pedantic -std=gnu99 -o hq hq.c -I/local/courses/csse2310/include -L/local/courses/csse2310/lib -lcsse2310a3
s4698512@moss:~/CSSE2310/Assignments/a3$ ./hq
> spawn cat
New Job ID [0] created
> reprot
Error: Invalid command
> report
[Job] cmd:status
[0] cat:running
> spawn true
New Job ID [1] created
> report
[Job] cmd:status
[0] cat:exited(0)
[1] true:running
> s4698512@moss:~/CSSE2310/Assignments/a3$ ./hq
> s spawn r true
New Job ID [0] created
> p spawn       report
[Job] cmd:status
[0] true:running
> s4698512@moss:~/CSSE2310/Assignments/a3$ ./hqmakevim hq.c
[?1000h[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;59r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[59;1H"hq.c" 432L, 10728C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[33m203 [m    [36m// Job status output dependent on arg present status[m[23C[100m [m
[33m204 [m[79C[100m [m
[33m205 [m    [36m// check args[m[62C[100m [m
[33m206 [m    [33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[37C[100m [m
[33m207 [m[8C[33mfor[m ([32mint[m i = [38;5;130m0[m; i <= jobid; i++) {[37C[100m [m
[33m208 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[31C[100m [m
[33m209 [m[12C[33mif[m (jobs[i].[38;5;248m[104mfinished[m) {[44C[100m [m
[33m210 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m211 [m[12C} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[28C[100m [m
[33m212 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[12C[100m [m
[33m213 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {[26C[100m [m
[33m214 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[11C[100m [m
[33m215 [m[12C} [33melse[m {[59C[100m [m
[33m216 [m[16Cprintf([38;5;130m"Error[m[35m\n[m[38;5;130m"[m);[45C[100m [m
[33m217 [m[12C}[66C[100m [m
[33m218 [m[8C}[70C[100m [m
[33m219 [m[79C[100m [m
[33m220 [m    } [33melse[m [33mif[m (spcs > [38;5;130m1[m) {      [36m// report on specific job[m[22C[100m [m
[33m221 [m[8C[36m// check for job tokens[1][m[45C[100m [m
[33m222 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m223 [m[12C[32mint[m jobq = atoi(args[[38;5;130m0[m]);[42C[100m [m
[33m224 [m[79C[100m [m
[33m225 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, jobq, jobs[jobq].name);[25C[100m [m
[33m226 [m[79C[100m [m
[33m227 [m[12C[33mif[m (jobs[jobq].[38;5;248m[104mfinished[m) {[41C[100m [m
[33m228 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m229 [m[12C} [33melse[m [33mif[m (WIFEXITED(jobs[jobq].status)) [46m{[m[25C[100m [m
[33m230 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[jobq].status));[9C[100m [m
[93m231 [m[4m            [m[4m[46m}[m[4m [m[4m[33melse[m[4m [m[4m[33mif[m[4m (WIFSIGNALED(jobs[jobq].status)) {                       [m[4m[100m [m[4m                                [m[30;1H[33m232 [m[16Cp[m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m247 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m248 [m[36m */[m[76C[100m [m
[33m249 [m[32mvoid[m call_signal([32mchar[m** args, [32mint[m spcs) {[38C[100m [m
[33m250 [m    [33mif[m (spcs < [38;5;130m3[m) {[60C[100m [m
[33m251 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m252 [m    } [33melse[m {[67C[100m [m
[33m253 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m254 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m
[33m255 [m[12C[33mif[m (is_number(args[[38;5;130m1[m])){[43C[100m [m
[33m256 [m[16C[32mint[m sgnl = atoi(args[[38;5;130m1[m]);[38C[100m [m
[33m257 [m[16C[33mif[m (sgnl >= [38;5;130m1[m && sgnl <= [38;5;130m31[m) {[33C[100m [m
[33m258 [m[20C[32mint[m pid = jobs[job].pid;[35C[100m [m
[33m259 [m[20Ckill(pid, sgnl);[43C[100m [m
[33m260 [m[16C} [33melse[m {[55C[100m [m[59;99H231,13[8C54%[29;17H[?25h[?12$p[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m200 [m    [36m// Header row[m[62C[100m [m
[33m201 [m    printf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[46C[100m [m
[33m202 [m[79C[100m [m[59;1H[K[59;99H231,13[8C53%[32;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m197 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[43C[100m [m
[33m198 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m199 [m[79C[100m [m[59;99H[K[59;99H231,13[8C52%[35;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m194 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m195 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m196 [m[36m */[m[76C[100m [m[59;99H[K[59;99H231,13[8C51%[38;17H[?25h[?25l[16;1H[93m209 [m[4m            [m[4m[33mif[m[4m [m[4m[46m([m[4mjobs[i].[m[4m[38;5;248m[104mfinished[m[4m[46m)[m[4m {                                            [m[4m[100m [m[4m                                [m[36;58H{

[33m231 [m            } [33melse[m [33mif[m (WIFSIGNALED(jobs[jobq].status)) {                       [100m [m[38;85H[K[59;100H09,3[16;37H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m191 [m[36m * --------[m[68C[100m [m
[33m192 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m
[33m193 [m[36m *[m[77C[100m [m[59;99H[K[59;99H209,33[8C50%[19;37H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m188 [m}[78C[100m [m
[33m189 [m[79C[100m [m
[33m190 [m[36m/* report()[m[68C[100m [m[59;99H[K[59;99H209,33[8C50%[22;37H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m185 [m[79C[100m [m
[33m186 [m[8C}[70C[100m [m
[33m187 [m    }[74C[100m [m[59;99H[K[59;99H209,33[8C49%[25;37H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m182 [m[12C[36m// parent[m[58C[100m [m
[33m183 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m
[33m184 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m[59;99H[K[59;99H209,33[8C48%[28;37H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m179 [m[16Cexit([38;5;130m99[m);[54C[100m [m
[33m180 [m[12C}[66C[100m [m
[33m181 [m[8C} [33melse[m {[63C[100m [m[59;99H[K[59;99H209,33[8C47%[31;37H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m176 [m[12C[32mint[m status;[56C[100m [m
[33m177 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m
[33m178 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m[59;99H[K[59;99H209,33[8C46%[34;37H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m173 [m[12Cdup2(jobs[jobid].up[WRITE], STDOUT_FILENO);[24C[100m [m
[33m174 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m
[33m175 [m[79C[100m [m[59;99H[K[59;99H209,33[8C45%[37;37H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m170 [m[79C[100m [m
[33m171 [m[12Cdup2(jobs[jobid].down[READ], STDIN_FILENO);[24C[100m [m
[33m172 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m[59;99H[K[59;99H209,33[8C45%[40;37H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m167 [m[79C[100m [m
[33m168 [m[12Cclose(jobs[jobid].down[WRITE]);[36C[100m [m
[33m169 [m[12Cclose(jobs[jobid].up[READ]);[39C[100m [m[59;99H[K[59;99H209,33[8C44%[43;37H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m164 [m[8Cjobs[jobid].[38;5;248m[104mfinished[m = jobs[jobid].pid;[32C[100m [m
[33m165 [m[8C[33mif[m (!jobs[jobid].pid) {[48C[100m [m
[33m166 [m[12C[36m// child[m[59C[100m [m[59;99H[K[59;99H209,33[8C43%[46;37H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m161 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m162 [m[79C[100m [m
[33m163 [m[8Cjobs[jobid].pid = fork();[46C[100m [m[59;99H[K[59;99H209,33[8C42%[49;37H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m158 [m[8C}[70C[100m [m
[33m159 [m[79C[100m [m
[33m160 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, jobid);[28C[100m [m[59;99H[K[59;99H209,33[8C41%[52;37H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m155 [m[8C[33mif[m (pipe(jobs[jobid].up) < [38;5;130m0[m) {[40C[100m [m
[33m156 [m[12Cperror([38;5;130m"Creating up pipe"[m);[40C[100m [m
[33m157 [m[12Cexit([38;5;130m1[m);[59C[100m [m[59;99H[K[59;99H209,33[8C41%[55;37H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m152 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m153 [m[8C}[70C[100m [m
[33m154 [m[79C[100m [m[59;99H[K[59;99H209,33[8C40%[58;37H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m149 [m[79C[100m [m
[33m150 [m[8C[33mif[m (pipe(jobs[jobid].down) < [38;5;130m0[m) {[38C[100m [m
[33m151 [m[12Cperror([38;5;130m"Creating down pipe"[m);[38C[100m [m[58;1H[93m206 [m[4m    [m[4m[33mif[m[4m (spcs == [m[4m[38;5;130m1[m[4m) {    [m[4m[36m// report all jobs[m[4m                                     [m[4m[100m [m[4m                                [m[59;99H[K[59;99H206,33[8C39%[58;37H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m146 [m[8Cjobs = realloc(jobs, (jobid + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));[16C[100m [m
[33m147 [m[79C[100m [m
[33m148 [m[8Cstrcpy(jobs[jobid].name, args[[38;5;130m0[m]);[37C[100m [m[58;1H[93m203 [m[4m    [m[4m[36m// Job status output dependent on arg present status[m[4m                       [m[4m[100m [m[4m                                [m[59;99H[K[59;99H203,33[8C38%[58;37H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m143 [m    } [33melse[m {[67C[100m [m
[33m144 [m[8Cjobid++;[63C[100m [m
[33m145 [m[79C[100m [m[58;1H[93m200 [m[4m    [m[4m[36m// Header row[m[4m                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H200,17[8C37%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m140 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs) {[44C[100m [m
[33m141 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m142 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m[58;1H[93m197 [m[4m[32mvoid[m[4m report([m[4m[32mchar[m[4m** args, [m[4m[32mint[m[4m spcs) {                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H197,33[8C37%[58;37H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m137 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m138 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m139 [m[36m */[m[76C[100m [m[58;1H[93m194 [m[4m[36m * args: arguments provided in command line without first command[m[4m              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H194,33[8C36%[58;37H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m
[33m135 [m[36m * of the child process is unchanged[m[43C[100m [m
[33m136 [m[36m *[m[77C[100m [m[58;1H[93m191 [m[4m[36m * --------[m[4m                                                                    [m[4m[100m [m[4m                                [m[59;99H[K[59;99H191,11[8C35%[58;15H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m131 [m[36m/* spawn()[m[69C[100m [m
[33m132 [m[36m * -------[m[69C[100m [m
[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m[10;39H[46m{[m[58;1H[93m188 [m[4m[46m}[m[4m                                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H188,1[9C34%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m128 [m    [33mreturn[m [38;5;130m0[m;[66C[100m [m
[33m129 [m}[78C[100m [m
[33m130 [m[79C[100m [m[13;39H{[58;1H[93m185 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H185,0-1[7C33%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m125 [m    }[74C[100m [m
[33m126 [m[79C[100m [m
[33m127 [m    free(jobs);[64C[100m [m[58;1H[93m182 [m[4m            [m[4m[36m// parent[m[4m                                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H182,21[8C33%[58;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m122 [m[79C[100m [m
[33m123 [m[8Cfree(input);[59C[100m [m
[33m124 [m[8Cfree(tokens);[58C[100m [m[58;1H[93m179 [m[4m                exit([m[4m[38;5;130m99[m[4m);                                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H179,25[8C32%[58;29H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m180 [m[12C}[66C[100m [m
[33m181 [m[8C} [33melse[m {[63C[100m [m
[33m182 [m[12C[36m// parent[m[58C[100m [m[59;99H[K[59;99H179,25[8C33%[55;29H[?25h[?25l[40;1H[93m164 [m[4m        jobs[jobid].[m[4m[38;5;248m[104mfinished[m[4m = jobs[jobid].pid;                                [m[4m[100m [m[4m                                [m[55;1H[33m179 [m                exit([38;5;130m99[m);                                                      [100m [m[55;85H[K[59;100H64,10[40;14H[?25h[?25l[4m[33mif[m[4m (!jobs[jobid].pid) {                [m[41;13H    [36m// child[m           [42;17H        [43;17Hclose(jobs[jobid].down[WRITE]);[44;35Hup[READ]);   [45;17H                            [46;17Hdup2(jobs[jobid].down[READ], STDIN_FILENO);[47;17Hclose(jobs[jobid].down[READ]);             [48;17Hdup2(jobs[jobid].up[WRITE], STDOUT_FILENO);[49;17Hclose(jobs[jobid].up[WRITE]);              [50;17H                             [51;17H[32mint[m status;[52;17Hstatus = execvp(args[[38;5;130m0[m], args);[53;17H[33mif[m (status == -[38;5;130m1[m) {            [54;17H    exit([38;5;130m99[m);      [55;17H}            [56;13H} [33melse[m {[57;13H    [36m// parent[m[58;17Hclose(jobs[jobid].down[READ]);[59;103H9 [40;13H[?25h[?25l[59;99H[K[59;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?1000l[?2004l"hq.c" 431L, 10680C written
[?2004l[?1l>[?25h[?1049l[23;0;0ts4698512@moss:~/CSSE2310/Assignments/a3$ make
gcc -g -Wall -pedantic -std=gnu99 -o hq hq.c -I/local/courses/csse2310/include -L/local/courses/csse2310/lib -lcsse2310a3
s4698512@moss:~/CSSE2310/Assignments/a3$ ./hq
> spawn ca at
New Job ID [0] created
> prepor      report
[Job] cmd:status
[0] cat:exited(0)
> ^Cs4698512@moss:~/CSSE2310/Assignments/a3$ ./hqmake./hqmakevim hq.c
[?1000h[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;59r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[59;1H"hq.c" 431L, 10680C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[33m136 [m[36m *[m[77C[100m [m
[33m137 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m138 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m139 [m[36m */[m[76C[100m [m
[33m140 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs) {[44C[100m [m
[33m141 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m142 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m143 [m    } [33melse[m {[67C[100m [m
[33m144 [m[8Cjobid++;[63C[100m [m
[33m145 [m[79C[100m [m
[33m146 [m[8Cjobs = realloc(jobs, (jobid + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));[16C[100m [m
[33m147 [m[79C[100m [m
[33m148 [m[8Cstrcpy(jobs[jobid].name, args[[38;5;130m0[m]);[37C[100m [m
[33m149 [m[79C[100m [m
[33m150 [m[8C[33mif[m (pipe(jobs[jobid].down) < [38;5;130m0[m) {[38C[100m [m
[33m151 [m[12Cperror([38;5;130m"Creating down pipe"[m);[38C[100m [m
[33m152 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m153 [m[8C}[70C[100m [m
[33m154 [m[79C[100m [m
[33m155 [m[8C[33mif[m (pipe(jobs[jobid].up) < [38;5;130m0[m) {[40C[100m [m
[33m156 [m[12Cperror([38;5;130m"Creating up pipe"[m);[40C[100m [m
[33m157 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m158 [m[8C}[70C[100m [m
[33m159 [m[79C[100m [m
[33m160 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, jobid);[28C[100m [m
[33m161 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m162 [m[79C[100m [m
[33m163 [m[8Cjobs[jobid].pid = fork();[46C[100m [m
[93m164 [m[4m        [m[4m[33mif[m[4m (!jobs[jobid].pid) {                                                [m[4m[100m [m[4m                                [m[30;1H[33m165 [m[12C[36m// child[m[59C[100m [m
[33m166 [m[79C[100m [m
[33m167 [m[12Cclose(jobs[jobid].down[WRITE]);[36C[100m [m
[33m168 [m[12Cclose(jobs[jobid].up[READ]);[39C[100m [m
[33m169 [m[79C[100m [m
[33m170 [m[12Cdup2(jobs[jobid].down[READ], STDIN_FILENO);[24C[100m [m
[33m171 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m
[33m172 [m[12Cdup2(jobs[jobid].up[WRITE], STDOUT_FILENO);[24C[100m [m
[33m173 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m
[33m174 [m[79C[100m [m
[33m175 [m[12C[32mint[m status;[56C[100m [m
[33m176 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m
[33m177 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m
[33m178 [m[16Cexit([38;5;130m99[m);[54C[100m [m
[33m179 [m[12C}[66C[100m [m
[33m180 [m[8C} [33melse[m {[63C[100m [m
[33m181 [m[12C[36m// parent[m[58C[100m [m
[33m182 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m
[33m183 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m
[33m184 [m[79C[100m [m
[33m185 [m[8C}[70C[100m [m
[33m186 [m    }[74C[100m [m
[33m187 [m}[78C[100m [m
[33m188 [m[79C[100m [m
[33m189 [m[36m/* report()[m[68C[100m [m
[33m190 [m[36m * --------[m[68C[100m [m
[33m191 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m
[33m192 [m[36m *[m[77C[100m [m
[33m193 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[59;99H164,9[9C36%[29;13H[?25h[?12$p[?25l[28;1H[93m163 [m[4m        jobs[jobid].pid = fork();                                              [m[4m[100m [m[4m                                [m[29;1H[33m164 [m        [33mif[m (!jobs[jobid].pid) {                                                [100m [m[29;85H[K[59;101H3,33[28;37H[?25h[?25l[59;1H[38;5;130m-- INSERT --[m[59;14H[K[59;99H163,33[8C36%[28;37H[?25h[?25l[59;104H4[28;38H[?25h[?25l[33m163 [m        jobs[jobid].pid = fork();                                              [100m [m[28;85H[K[29;1H[93m164 [m[4m                                                                               [m[4m[100m [m[4m                                [m[30;13H[33mif[m (!jobs[jobid].pid) {[31;17H[36m// child[m[32;17H                               [33;35Hdown[WRITE]);[34;17Hclose(jobs[jobid].up[READ]);[35;17H                                           [36;17Hdup2(jobs[jobid].down[READ], STDIN_FILENO);[37;17Hclose(jobs[jobid].down[READ]);             [38;17Hdup2(jobs[jobid].up[WRITE], STDOUT_FILENO);[39;17Hclose(jobs[jobid].up[WRITE]);[40;17H           [41;17H[32mint[m status;                    [42;17Hstatus = execvp(args[[38;5;130m0[m], args);[43;17H[33mif[m (status == -[38;5;130m1[m) {[44;17H    exit([38;5;130m99[m);[45;13H    }   [46;13H} [33melse[m {     [47;17H[36m// parent[m                     [48;35Hdown[READ]);[49;17Hclose(jobs[jobid].up[WRITE]);[50;13H [51;9H    }[52;5H    }[53;5H}[54;5H           [55;5H[36m/* report()[56;8H--------[m                                                                   [57;7H[36m Produces an outline to stdout of current child processes and their statuses[m[58;7H                                                               [59;101H4,9 [29;13H[?25h[?25l[4mj[m[59;103H10[29;14H[?25h[?25l[4mo[m[59;104H1[29;15H[?25h[?25l[4mb[m[59;104H2[29;16H[?25h[?25l[4ms[m[59;104H3[29;17H[?25h[?25l[4m[[m[30;35H[1m[37m[41m{[33;47H;[34;44H;[36;59H;[37;46H;[38;59H;[39;45H;[41;27H;[42;47H;[43;35H{[44;29H;[45;17H}[m[59;104H4[29;18H[?25h[?25l[4mi[m[59;104H5[29;19H[?25h[?25l[4mj[m[59;104H6[29;20H[?25h[?25l[4mo[m[59;104H7[29;21H[?25h[?25l[4mb[m[59;104H8[29;22H[?25h[?25l[4mi[m[59;104H9[29;23H[?25h[?25l[4md[m[59;103H20[29;24H[?25h[?25l[4m [m[59;103H19[29;23H[?25h[?25l[4m [m[59;104H8[29;22H[?25h[?25l[4m [m[59;104H7[29;21H[?25h[?25l[4m [m[59;104H6[29;20H[?25h[?25l[4m [m[59;104H5[29;19H[?25h[?25l[4m [m[59;104H4[29;18H[?25h[?25l[4mj[m[59;104H5[29;19H[?25h[?25l[4mo[m[59;104H6[29;20H[?25h[?25l[4mb[m[59;104H7[29;21H[?25h[?25l[4mi[m[59;104H8[29;22H[?25h[?25l[4md[m[59;104H9[29;23H[?25h[?25l[4m][m[30;35H{ [33;47H; [34;44H; [36;59H; [37;46H; [38;59H; [39;45H; [41;27H; [42;47H; [43;35H{ [44;29H; [45;17H} [59;104H3[29;17H[?25h[?25l[7C[4m.[m[59;103H21[29;25H[?25h[?25l[4mf[m[59;104H2[29;26H[?25h[?25l[4mi[m[59;104H3[29;27H[?25h[?25l[4mn[m[59;104H4[29;28H[?25h[?25l[4mi[m[59;104H5[29;29H[?25h[?25l[4ms[m[59;104H6[29;30H[?25h[?25l[4mh[m[59;104H7[29;31H[?25h[?25l[4me[m[59;104H8[29;32H[?25h[?25l[29;25H[4m[38;5;248m[104mfinished[m[59;104H9[29;33H[?25h[?25l[59;103H30[29;34H[?25h[?25l[59;104H1[29;35H[?25h[?25l[59;104H0[29;34H[?25h[?25l[4m=[m[59;104H1[29;35H[?25h[?25l[59;104H2[29;36H[?25h[?25l[4m[38;5;130m1[m[59;104H3[29;37H[?25h[?25l[4m;[m[59;104H4[29;38H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m194 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m195 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m196 [m[36m */[m[76C[100m [m[59;99H[K[59;99H164,34[8C36%[26;38H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m197 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[43C[100m [m
[33m198 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m199 [m[79C[100m [m[59;99H[K[59;99H164,34[8C37%[23;38H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m200 [m    [36m// Header row[m[62C[100m [m
[33m201 [m    printf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[46C[100m [m
[33m202 [m[79C[100m [m[59;99H[K[59;99H164,34[8C38%[20;38H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m203 [m    [36m// Job status output dependent on arg present status[m[23C[100m [m
[33m204 [m[79C[100m [m
[33m205 [m    [36m// check args[m[62C[100m [m[59;99H[K[59;99H164,34[8C39%[17;38H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m206 [m    [33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[37C[100m [m
[33m207 [m[8C[33mfor[m ([32mint[m i = [38;5;130m0[m; i <= jobid; i++) {[37C[100m [m
[33m208 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[31C[100m [m[59;99H[K[59;99H164,34[8C40%[14;38H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m209 [m[12C[33mif[m (jobs[i].[38;5;248m[104mfinished[m) {[44C[100m [m
[33m210 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m211 [m[12C} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[28C[100m [m[59;99H[K[59;99H164,34[8C40%[11;38H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m212 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[12C[100m [m
[33m213 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {[26C[100m [m
[33m214 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[11C[100m [m[59;99H[K[59;99H164,34[8C41%[8;38H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m215 [m[12C} [33melse[m {[59C[100m [m
[33m216 [m[16Cprintf([38;5;130m"Error[m[35m\n[m[38;5;130m"[m);[45C[100m [m
[33m217 [m[12C}[66C[100m [m[59;99H[K[59;99H164,34[8C42%[5;38H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m218 [m[8C}[70C[100m [m
[33m219 [m[79C[100m [m
[33m220 [m    } [33melse[m [33mif[m (spcs > [38;5;130m1[m) {      [36m// report on specific job[m[22C[100m [m[59;99H[K[59;99H164,34[8C43%[2;38H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m166 [m[4m            [m[4m[36m// child[m[4m                                                           [m[4m[100m [m[4m                                [m[56;1H[33m221 [m[8C[36m// check for job tokens[1][m[45C[100m [m
[33m222 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m223 [m[12C[32mint[m jobq = atoi(args[[38;5;130m0[m]);[42C[100m [m[59;99H[K[59;99H166,21[8C44%[1;25H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m169 [m[4m            close(jobs[jobid].up[READ]);                                       [m[4m[100m [m[4m                                [m[56;1H[33m224 [m[79C[100m [m
[33m225 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, jobq, jobs[jobq].name);[25C[100m [m
[33m226 [m[79C[100m [m[59;99H[K[59;99H169,34[8C44%[1;37H[4m[46m[[4C][1;58r[m[1;1H[3M[1;59r[1;1H[93m172 [m[4m            close(jobs[jobid].down[READ]);                                     [m[4m[100m [m[4m                                [m[56;1H[33m227 [m[12C[33mif[m (jobs[jobq].[38;5;248m[104mfinished[m) {[41C[100m [m
[33m228 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m229 [m[12C} [33melse[m [33mif[m (WIFEXITED(jobs[jobq].status)) {[25C[100m [m[59;99H[K[59;99H172,34[8C45%[1;38H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m175 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m230 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[jobq].status));[9C[100m [m
[33m231 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[jobq].status)) {[23C[100m [m
[33m232 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[jobq].status));[8C[100m [m[59;99H[K[59;99H175,13[8C46%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m178 [m[4m            [m[4m[33mif[m[4m (status == -[m[4m[38;5;130m1[m[4m) {                                                [m[4m[100m [m[4m                                [m[56;1H[33m233 [m[12C} [33melse[m {[59C                                            [m[4m[100m [m[4m                                [m[56;1H[33m230 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[jobq].status));[9C[100m [m
[33m231 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[jobq].status)) {[23C[100m [m
[33m232 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[jobq].status));[8C[100m [m[59;99H[K[59;99H175,13[8C46%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m178 [m[4m            [m[4m[33mif[m[4m (status == -[m[4m[38;5;130m1[m[4m) {                                                [m[4m[100m [m[4m                                [m[56;1H[33m233 [m[12C} [33melse[m {[59C[100m [m
[33m234 [m[16Cprintf([38;5;130m"Error[m[35m\n[m[38;5;130m"[m);[45C[100m [m
[33m235 [m[12C}[66C[100m [m[59;99H[K[59;99H178,32[8C47%[1;35H[4m[46m{[m[3;17H[46m}[1;36H[?25h[?25l[1;58r[m[1;1H[3M[1;59r[1;1H[93m181 [m[4m        } [m[4m[33melse[m[4m {                                                               [m[4m[100m [m[4m                                [m[56;1H[33m236 [m[8C} [33melse[m {[63C[100m [m
[33m237 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m238 [m[8C}[70C[100m [m[59;99H[K[59;99H181,17[8C48%[1;20H[4m[46m{[m[6;13H[46m}[1;21H[?25h[?25l[1;58r[m[1;1H[3M[1;59r[1;1H[93m184 [m[4m            close(jobs[jobid].up[WRITE]);                                      [m[4m[100m [m[4m                                [m[56;1H[33m239 [m    }[74C[100m [m
[33m240 [m}[78C[100m [m
[33m241 [m[79C[100m [m[59;99H[K[59;99H184,34[8C48%[1;37H[4m[46m[[5C][m[3;13H}[1;38H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m187 [m[4m    }                                                                          [m[4m[100m [m[4m                                [m[56;1H[33m242 [m[36m/* call_signal()[m[63C[100m [m
[33m243 [m[36m * -------------[m[63C[100m [m
[33m244 [m[36m * Sends signal to child process specified[m[37C[100m [m[59;99H[K[59;99H187,6[9C49%[1;10H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m190 [m[4m[36m/* report()[m[4m                                                                    [m[4m[100m [m[4m                                [m[56;1H[33m245 [m[36m *[m[77C[100m [m
[33m246 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m247 [m[36m * spcs: number of original tokens[m[45C[100m [m[59;99H[K[59;99H190,12[8C50%[1;16H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m193 [m[4m[36m *[m[4m                                                                             [m[4m[100m [m[4m                                [m[56;1H[33m248 [m[36m */[m[76C[100m [m
[33m249 [m[32mvoid[m call_signal([32mchar[m** args, [32mint[m spcs) {[38C[100m [m
[33m250 [m    [33mif[m (spcs < [38;5;130m3[m) {[60C[100m [m[59;99H[K[59;99H193,3[9C51%[1;7H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m196 [m[4m[36m */[m[4m                                                                            [m[4m[100m [m[4m                                [m[56;1H[33m251 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m252 [m    } [33melse[m {[67C[100m [m
[33m253 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m[59;99H[K[59;99H196,4[9C52%[1;8H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m199 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m254 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m
[33m255 [m[12C[33mif[m (is_number(args[[38;5;130m1[m])){[43C[100m [m
[33m256 [m[16C[32mint[m sgnl = atoi(args[[38;5;130m1[m]);[38C[100m [m[59;99H[K[59;99H199,1[9C52%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m202 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m257 [m[16C[33mif[m (sgnl >= [38;5;130m1[m && sgnl <= [38;5;130m31[m) {[33C[100m [m
[33m258 [m[20C[32mint[m pid = jobs[job].pid;[35C[100m [m
[33m259 [m[20Ckill(pid, sgnl);[43C[100m [m[59;99H[K[59;99H202,1[9C53%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m205 [m[4m    [m[4m[36m// check args[m[4m                                                              [m[4m[100m [m[4m                                [m[56;1H[33m260 [m[16C} [33melse[m {[55C[100m [m
[33m261 [m[20Cprintf([38;5;130m"Error: Invalid signal[m[35m\n[m[38;5;130m"[m);[25C[100m [m
[33m262 [m[16C}[62C[100m [m[59;99H[K[59;99H205,18[8C54%[1;22H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m202 [m[79C[100m [m
[33m203 [m    [36m// Job status output dependent on arg present status[m[23C[100m [m
[33m204 [m[79C[100m [m[59;99H[K[59;99H205,18[8C53%[4;22H[?25h[?25l[33m205 [m    [36m// check args[m                                                              [100m [m[4;85H[K[8;1H[93m209 [m[4m            [m[4m[33mif[m[4m (jobs[i].[m[4m[38;5;248m[104mfinished[m[4m) {                                            [m[4m[100m [m[4m                                [m[8;20H[4m[46m([16C)[m[59;101H9,17[8;21H[?25h[?25l[4mijobs[i].[m[4m[38;5;248m[104mfinishe[m[4m[46md[m[4m) {[8;20H([m[16C[4m[38;5;248m[104md[m[59;104H8[8;22H[?25h[?25l[4m!jobs[i].[m[4m[38;5;248m[104mfinished[m[4m) {[m[59;104H9[8;23H[?25h[?25l[4mjobs[i].[m[4m[38;5;248m[104mfinished[m[4m) { [m[59;104H8[8;22H[?25h[?25l[4mjobs[i].[m[4m[38;5;248m[104mfinished[m[4m) { [m[8;20H[4m[46m([16C)[m[59;104H7[8;21H[?25h[?25l[4m!jobs[i].[m[4m[38;5;248m[104mfinishe[m[4m[46md[m[4m) {[8;20H([m[16C[4m[38;5;248m[104md[m[59;104H8[8;22H[?25h[?25l[33m209 [m            [33mif[m (!jobs[i].[38;5;248m[104mfinished[m) {                                           [100m [m[8;85H[K[26;1H[93m227 [m[4m            [m[4m[33mif[m[4m (jobs[jobq].[m[4m[38;5;248m[104mfinished[m[4m) {                                         [m[4m[100m [m[4m                                [m[26;20H[4m[46m([19C)[m[59;100H27,17[26;21H[?25h[?25l[4m!jobs[jobq].[m[4m[38;5;248m[104mfinishe[m[4m[46md[m[4m) {[26;20H([m[19C[4m[38;5;248m[104md[m[59;104H8[26;22H[?25h[59;1H[K[26;21H[?25l[59;99H227,17[8C53%[26;21H[?25h[?25l[59;99H[K[59;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?1000l[?2004l"hq.c" 432L, 10716C written
[?2004l[?1l>[?25h[?1049l[23;0;0ts4698512@moss:~/CSSE2310/Assignments/a3$ make
gcc -g -Wall -pedantic -std=gnu99 -o hq hq.c -I/local/courses/csse2310/include -L/local/courses/csse2310/lib -lcsse2310a3
s4698512@moss:~/CSSE2310/Assignments/a3$ ./hq
> spawn cat
New Job ID [0] created
> report
[Job] cmd:status
[0] cat:exited(0)
> ^[[A^[[A^[[A^CError: Invalid command
> s4698512@moss:~/CSSE2310/Assignments/a3$ ./hqmakevim hq.c
[?1000h[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;59r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[59;1H"hq.c" 432L, 10716C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[33m199 [m[79C[100m [m
[33m200 [m    [36m// Header row[m[62C[100m [m
[33m201 [m    printf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[46C[100m [m
[33m202 [m[79C[100m [m
[33m203 [m    [36m// Job status output dependent on arg present status[m[23C[100m [m
[33m204 [m[79C[100m [m
[33m205 [m    [36m// check args[m[62C[100m [m
[33m206 [m    [33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[37C[100m [m
[33m207 [m[8C[33mfor[m ([32mint[m i = [38;5;130m0[m; i <= jobid; i++) {[37C[100m [m
[33m208 [m[12Cprintf(Cprintf([38;5;130m"Error[m[35m\n[m[38;5;130m"[m);[45C[100m [m
[33m217 [m[12C}[66C[100m [m
[33m218 [m[8C}[70C[100m [m
[33m219 [m[79C[100m [m
[33m220 [m    } [33melse[m [33mif[m (spcs > [38;5;130m1[m) {      [36m// report on specific job[m[22C[100m [m
[33m221 [m[8C[36m// check for job tokens[1][m[45C[100m [m
[33m222 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m223 [m[12C[32mint[m jobq = atoi(args[[38;5;130m0[m]);[42C[100m [m
[33m224 [m[79C[100m [m
[33m225 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, jobq, jobs[jobq].name);[25C[100m [m
[33m226 [m[79C[100m [m
[93m227 [m[4m            [m[4m[33mif[m[4m (!jobs[jobq].[m[4m[38;5;248m[104mfinished[m[4m) {                                        [m[4m[100m [m[4m                                [m[30;1H[33m228 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m229 [m[12C} [33melse[m [33mif[m (WIFEXITED(jobs[jobq].status)) {[25C[100m [m
[33m230 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[jobq].status));[9C[100m [m
[33m231 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[jobq].status)) {[23C[100m [m
[33m232 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[jobq].status));[8C[100m [m
[33m233 [m[12C} [33melse[m {[59C[100m [m
[33m234 [m[16Cprintf([38;5;130m"Error[m[35m\n[m[38;5;130m"[m);[45C[100m [m
[33m235 [m[12C}[66C[100m [m
[33m236 [m[8C} [33melse[m {[63C[100m [m
[33m237 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m238 [m[8C}[70C[100m [m
[33m239 [m    }[74C[100m [m
[33m240 [m}[78C[100m [m
[33m241 [m[79C[100m [m
[33m242 [m[36m/* call_signal()[m[63C[100m [m
[33m243 [m[36m * -------------[m[63C[100m [m
[33m244 [m[36m * Sends signal to child process specified[m[37C[100m [m
[33m245 [m[36m *[m[77C[100m [m
[33m246 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m247 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m248 [m[36m */[m[76C[100m [m
[33m249 [m[32mvoid[m call_signal([32mchar[m** args, [32mint[m spcs) {[38C[100m [m
[33m250 [m    [33mif[m (spcs < [38;5;130m3[m) {[60C[100m [m
[33m251 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m252 [m    } [33melse[m {[67C[100m [m
[33m253 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m254 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m
[33m255 [m[12C[33mif[m (is_number(args[[38;5;130m1[m])){[43C[100m [m
[33m256 [m[16C[32mint[m sgnl = atoi(args[[38;5;130m1[m]);[38C[100m [m[59;99H227,13[8C52%[29;17H[?25h[?12$p[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m257 [m[16C[33mif[m (sgnl >= [38;5;130m1[m && sgnl <= [38;5;130m31[m) {[33C[100m [m
[33m258 [m[20C[32mint[m pid = jobs[job].pid;[35C[100m [m
[33m259 [m[20Ckill(pid, sgnl);[43C[100m [m[59;1H[K[59;99H227,13[8C53%[26;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m260 [m[16C} [33melse[m {[55C[100m [m
[33m261 [m[20Cprintf([38;5;130m"Error: Invalid signal[m[35m\n[m[38;5;130m"[m);[25C[100m [m
[33m262 [m[16C}[62C[100m [m[59;99H[K[59;99H227,13[8C54%[23;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m263 [m[12C} [33melse[m {[59C[100m [m
[33m264 [m[16Cprintf([38;5;130m"Error: Invalid signal[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m265 [m[12C}[66C[100m [m[59;99H[K[59;99H227,13[8C55%[20;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m266 [m[8C} [33melse[m {[63C[100m [m
[33m267 [m[12Cprintf([38;5;130m"Error: invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m268 [m[8C}[70C[100m [m[59;99H[K[59;99H227,13[8C56%[17;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m269 [m    }[74C[100m [m
[33m270 [m}[78C[100m [m
[33m271 [m[79C[100m [m[59;99H[K[59;99H227,13[8C56%[14;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m272 [m[36m/* hq_wait()[m[67C[100m [m
[33m273 [m[36m * ---------[m[67C[100m [m
[33m274 [m[36m * Causes hq to wait for specified seconds[m[37C[100m [m[59;99H[K[59;99H227,13[8C57%[11;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m275 [m[36m *[m[77C[100m [m
[33m276 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m277 [m[36m * spcs: number of original tokens[m[45C[100m [m[59;99H[K[59;99H227,13[8C58%[8;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m278 [m[36m */[m[76C[100m [m
[33m279 [m[32mvoid[m hq_wait([32mchar[m** args, [32mint[m spcs) {[42C[100m [m
[33m280 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m[59;99H[K[59;99H227,13[8C59%[5;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m281 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m282 [m    } [33melse[m {[67C[100m [m
[33m283 [m[8C[33mif[m (strcmp(args[[38;5;130m0[m], [38;5;130m""[m) && is_number(args[[38;5;130m0[m])) {[23C[100m [m[59;99H[K[59;99H227,13[8C60%[2;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m229 [m[4m            } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (WIFEXITED(jobs[jobq].status)) {                         [m[4m[100m [m[4m                                [m[56;1H[33m284 [m[12Csleep(atoi(args[[38;5;130m0[m]) * [38;5;130m1000000[m);[36C[100m [m
[33m285 [m[8C} [33melse[m {[63C[100m [m
[33m286 [m[12Cprintf([38;5;130m"Error: Invalid sleep time[m[35m\n[m[38;5;130m"[m);[29C[100m [m[59;99H[K[59;99H229,13[8C60%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m232 [m[4m                printf([m[4m[38;5;130m"signalled([m[4m[35m%d[m[4m[38;5;130m)[m[4m[35m\n[m[4m[38;5;130m"[m[4m, WTERMSIG(jobs[jobq].status));        [m[4m[100m [m[4m                                [m[56;1H[33m287 [m[8C}[70C[100m [m
[33m288 [m    }[74C[100m [m
[33m289 [m}[78C[100m [m[59;99H[K[59;99H232,13[8C61%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m235 [m[4m            }                                                                  [m[4m[100m [m[4m                                [m[56;1H[33m290 [m[79C[100m [m
[33m291 [m[36m/* send()[m[70C[100m [m
[33m292 [m[36m * ------[m[70C[100m [m[59;99H[K[59;99H235,13[8C62%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m238 [m[4m        }                                                                      [m[4m[100m [m[4m                                [m[56;1H[33m293 [m[36m * Sends text down the pipe to specified job[m[35C[100m [m
[33m294 [m[36m *[m[77C[100m [m
[33m295 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[59;99H[K[59;99H238,9[9C63%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m241 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m296 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m297 [m[36m */[m[76C[100m [m
[33m298 [m[32mvoid[m send([32mchar[m** args, [32mint[m spcs) {[45C[100m [m[59;99H[K[59;99H241,0-1[7C64%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m244 [m[4m[36m * Sends signal to child process specified[m[4m                                     [m[4m[100m [m[4m                                [m[56;1H[33m299 [m    [33mif[m (spcs < [38;5;130m3[m) {[60C[100m [m
[33m300 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m301 [m    } [33melse[m {[67C[100m [m[59;99H[K[59;99H244,13[8C64%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m247 [m[4m[36m * spcs: number of original tokens[m[4m                                             [m[4m[100m [m[4m                                [m[56;1H[33m302 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m303 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m
[33m304 [m[12C[32mFILE[m* writef = fdopen(jobs[job].down[WRITE], [38;5;130m"w"[m);[17C[100m [m[59;99H[K[59;99H247,13[8C65%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m250 [m[4m    [m[4m[33mif[m[4m (spcs < [m[4m[38;5;130m3[m[4m) {                                                            [m[4m[100m [m[4m                                [m[56;1H[33m305 [m[12Cfprintf(writef, [38;5;130m"[m[35m%s\n[m[38;5;130m"[m, args[[38;5;130m1[m]);[34C[100m [m
[33m306 [m[8C} [33melse[m {[63C[100m [m
[33m307 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m[59;99H[K[59;99H250,13[8C66%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m253 [m[4m        [m[4m[33mif[m[4m (is_job(args[[m[4m[38;5;130m0[m[4m])) {                                                 [m[4m[100m [m[4m                                [m[56;1H[33m308 [m[8C}[70C[100m [m
[33m309 [m    }[74C[100m [m
[33m310 [m}[78C[100m [m[59;99H[K[59;99H253,13[8C67%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m256 [m[4m                [m[4m[32mint[m[4m sgnl = atoi(args[[m[4m[38;5;130m1[m[4m]);                                      [m[4m[100m [m[4m                                [m[56;1H[33m311 [m[79C[100m [m
[33m312 [m[36m/* rcv()[m[71C[100m [m
[33m313 [m[36m * -----[m[71C[100m [m[59;99H[K[59;99H256,13[8C68%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m259 [m[4m                    kill(pid, sgnl);                                           [m[4m[100m [m[4m                                [m[56;1H[33m314 [m[36m * Receives data through the pipe from the specified child process.[m[12C[100m [m
[33m315 [m[36m * Prints this to stdout in the parent, hq.[m[36C[100m [m
[33m316 [m[36m *[m[77C[100m [m[59;99H[K[59;99H259,13[8C68%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m262 [m[4m                }                                                              [m[4m[100m [m[4m                                [m[56;1H[33m317 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m318 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m319 [m[36m */[m[76C[100m [m[59;99H[K[59;99H262,13[8C69%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m265 [m[4m            }                                                                  [m[4m[100m [m[4m                                [m[56;1H[33m320 [m[32mvoid[m rcv([32mchar[m** args, [32mint[m spcs) {[46C[100m [m
[33m321 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m322 [m[8Cprintf([38;5;130m"Error: Insufficient arguments.[m[35m\n[m[38;5;130m"[m);[28C[100m [m[59;99H[K[59;99H265,13[8C70%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m268 [m[4m        }                                                                      [m[4m[100m [m[4m                                [m[56;1H[33m323 [m    } [33melse[m {[67C[100m [m
[33m324 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m325 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m[59;99H[K[59;99H268,9[9C71%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m271 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m326 [m[12C[32mint[m ready = is_ready(jobs[job].up[READ]);[26C[100m [m
[33m327 [m[12C[32mFILE[m* readf = fdopen(jobs[job].up[READ], [38;5;130m"r"[m);[21C[100m [m
[33m328 [m[12C[33mif[m (ready) {[55C[100m [m[59;99H[K[59;99H271,0-1[7C72%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m274 [m[4m[36m * Causes hq to wait for specified seconds[m[4m                                     [m[4m[100m [m[4m                                [m[56;1H[33m329 [m[16C[32mchar[m* buffer = read_line(readf);[31C[100m [m
[33m330 [m[16C[33mif[m (buffer == [38;5;130m0[m) {[45C[100m [m
[33m331 [m[20Cprintf([38;5;130m"<no input>[m[35m\n[m[38;5;130m"[m);[36C[100m [m[59;99H[K[59;99H274,13[8C72%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m277 [m[4m[36m * spcs: number of original tokens[m[4m                                             [m[4m[100m [m[4m                                [m[56;1H[33m332 [m[16C} [33melse[m [33mif[m (buffer == [38;5;130mNULL[m) {[35C[100m [m
[33m333 [m[20Cprintf([38;5;130m"<EOF>[m[35m\n[m[38;5;130m"[m);[41C[100m [m
[33m334 [m[16C} [33melse[m {[55C[100m [m[59;99H[K[59;99H277,13[8C73%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m280 [m[4m    [m[4m[33mif[m[4m (spcs < [m[4m[38;5;130m2[m[4m) {                                                            [m[4m[100m [m[4m                                [m[56;1H[33m335 [m[20Cprintf([38;5;130m"[m[35m%s\n[m[38;5;130m"[m, buffer);[36C[100m [m
[33m336 [m[16C}[62C[100m [m
[33m337 [m[12C}[66C[100m [m[59;99H[K[59;99H280,13[8C74%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m283 [m[4m        [m[4m[33mif[m[4m (strcmp(args[[m[4m[38;5;130m0[m[4m], [m[4m[38;5;130m""[m[4m) && is_number(args[[m[4m[38;5;130m0[m[4m])) {                       [m[4m[100m [m[4m                                [m[56;1H[33m338 [m[8C} [33melse[m {[63C[100m [m
[33m339 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m340 [m[8C}[70C[100m [m[59;99H[K[59;99H283,13[8C75%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m286 [m[4m            printf([m[4m[38;5;130m"Error: Invalid sleep time[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                             [m[4m[100m [m[4m                                [m[56;1H[33m341 [m[79C[100m [m
[33m342 [m[79C[100m [m
[33m343 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m[59;99H[K[59;99H286,13[8C76%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m289 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[56;1H[33m344 [m    }[74C[100m [m
[33m345 [m}[78C[100m [m
[33m346 [m[79C[100m [m[59;99H[K[59;99H289,1[9C77%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m292 [m[4m[36m * ------[m[4m                                                                      [m[4m[100m [m[4m                                [m[56;1H[33m347 [m[36m/* eof()[m[71C[100m [m
[33m348 [m[36m * -----[m[71C[100m [m
[33m349 [m[36m * Closes the stdin side of the pipe so the child process can no longer read [m  [100m [m[59;99H[K[59;99H292,9[9C77%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m295 [m[4m[36m * args: arguments provided in command line without first command[m[4m              [m[4m[100m [m[4m                                [m[56;1H[33m350 [m[36m * as the pipe will be EOF.[m[52C[100m [m
[33m351 [m[36m *[m[77C[100m [m
[33m352 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[59;99H[K[59;99H295,13[8C78%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m298 [m[4m[32mvoid[m[4m send([m[4m[32mchar[m[4m** args, [m[4m[32mint[m[4m spcs) {                                             [m[4m[100m [m[4m                                [m[56;1H[33m353 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m354 [m[36m */[m[76C[100m [m
[33m355 [m[32mvoid[m eof([32mchar[m** args, [32mint[m spcs) {[46C[100m [m[59;99H[K[59;99H298,13[8C79%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m301 [m[4m    } [m[4m[33melse[m[4m [m[4m[46m{[m[4m                                                                   [m[4m[100m [m[4m                                [m[9;9H[46m}[m[56;1H[33m356 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m357 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m358 [m    } [33melse[m {[67C[100m [m[59;99H[K[59;99H301,12[8C80%[1;16H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m304 [m[4m            [m[4m[32mFILE[m[4m* writef = fdopen(jobs[job].down[WRITE], [m[4m[38;5;130m"w"[m[4m);                 [m[4m[100m [m[4m                                [m[6;9H}[56;1H[33m359 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m360 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m
[33m361 [m[12Cclose(jobs[job].down[WRITE]);[38C[100m [m[59;99H[K[59;99H304,13[8C81%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m307 [m[4m            printf([m[4m[38;5;130m"Error: Invalid job[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                    [m[4m[100m [m[4m                                [m[56;1H[33m362 [m[8C} [33melse[m {[63C[100m [m
[33m363 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m364 [m[8C}[70C[100m [m[59;99H[K[59;99H307,13[8C81%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m310 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[56;1H[33m365 [m    }[74C[100m [m
[33m366 [m}[78C[100m [m
[33m367 [m[79C[100m [m[59;99H[K[59;99H310,1[9C82%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m313 [m[4m[36m * -----[m[4m                                                                       [m[4m[100m [m[4m                                [m[56;1H[33m368 [m[36m/* cleanup()[m[67C[100m [m
[33m369 [m[36m * ---------[m[67C[100m [m
[33m370 [m[36m * Terminates all child processes spawned by hq. It does this by sending [m      [100m [m[59;99H[K[59;99H313,8[9C83%[1;12H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m316 [m[4m[36m *[m[4m                                                                             [m[4m[100m [m[4m                                [m[56;1H[33m371 [m[36m * signal 9 (SIGKILL). Reaps all processes.[m[36C[100m [m
[33m372 [m[36m *[m[77C[100m [m
[33m373 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[59;99H[K[59;99H316,2[9C84%[1;6H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m319 [m[4m[36m */[m[4m                                                                            [m[4m[100m [m[4m                                [m[56;1H[33m374 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m375 [m[36m */[m[76C[100m [m
[33m376 [m[32mvoid[m cleanup([32mvoid[m) {[59C[100m [m[59;99H[K[59;99H319,3[9C85%[1;7H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m322 [m[4m        printf([m[4m[38;5;130m"Error: Insufficient arguments.[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                            [m[4m[100m [m[4m                                [m[56;1H[33m377 [m    [33mfor[m ([32mint[m job = [38;5;130m0[m; job < jobid; job++) {[36C[100m [m
[33m378 [m[8Ckill(jobs[job].pid, [38;5;130mSIGKILL[m);[42C[100m [m
[33m379 [m    }[74C[100m [m[59;99H[K[59;99H322,13[8C85%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m325 [m[4m            [m[4m[32mint[m[4m job = atoi(args[[m[4m[38;5;130m0[m[4m]);                                           [m[4m[100m [m[4m                                [m[56;1H[33m380 [m[79C[100m [m
[33m381 [m}[78C[100m [m
[33m382 [m[79C[100m [m[59;99H[K[59;99H325,13[8C86%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m328 [m[4m            [m[4m[33mif[m[4m (ready) {                                                       [m[4m[100m [m[4m                                [m[56;1H[33m383 [m[36m/* handle_signal()[m[61C[100m [m
[33m384 [m[36m * ---------------[m[61C[100m [m
[33m385 [m[36m * Signal handler[m[62C[100m [m[59;99H[K[59;99H328,13[8C87%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m331 [m[4m                    printf([m[4m[38;5;130m"<no input>[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                    [m[4m[100m [m[4m                                [m[56;1H[33m386 [m[36m *[m[77C[100m [m
[33m387 [m[36m * s: signal number[m[60C[100m [m
[33m388 [m[36m */[m[76C[100m [m[59;99H[K[59;99H331,13[8C88%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m334 [m[4m                } [m[4m[33melse[m[4m {                                                       [m[4m[100m [m[4m                                [m[56;1H[33m389 [m[32mvoid[m handle_signal([32mint[m s) {[52C[100m [m
[33m390 [m    [33mfor[m ([32mint[m i = [38;5;130m0[m; i < jobid; i++) {[42C[100m [m
[33m391 [m[8Cjobs[i].[38;5;248m[104mfinished[m = waitpid(jobs[i].pid, &jobs[i].status, WNOHANG);     [100m [m[59;99H[K[59;99H334,13[8C89%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m337 [m[4m            }                                                                  [m[4m[100m [m[4m                                [m[56;1H[33m392 [m    }[74C[100m [m
[33m393 [m[79C[100m [m
[33m394 [m    signal(s, handle_signal);[50C[100m [m[59;99H[K[59;99H337,13[8C89%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m340 [m[4m        }                                                                      [m[4m[100m [m[4m                                [m[56;1H[33m395 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m396 [m}[78C[100m [m
[33m397 [m[79C[100m [m[59;99H[K[59;99H340,9[9C90%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m343 [m[4m        fflush([m[4m[38;5;130mstdout[m[4m);                                                        [m[4m[100m [m[4m                                [m[56;1H[33m398 [m[36m/* is_number()[m[65C[100m [m
[33m399 [m[36m * -----------[m[65C[100m [m
[33m400 [m[36m * Determines if inputer number[] is a number or not[m[27C[100m [m[59;99H[K[59;99H343,13[8C91%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m346 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m401 [m[36m *[m[77C[100m [m
[33m402 [m[36m * number[]: array of characters to be checked[m[33C[100m [m
[33m403 [m[36m * Returns: true if number, false if not[m[39C[100m [m[59;99H[K[59;99H346,0-1[7C92%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m349 [m[4m[36m * Closes the stdin side of the pipe so the child process can no longer read [m[4m  [m[4m[100m [m[4m                                [m[56;1H[33m404 [m[36m */[m[76C[100m [m
[33m405 [m[32mbool[m is_number([32mchar[m number[]) {[48C[100m [m
[33m406 [m    [33mfor[m([32mint[m i = [38;5;130m0[m; number[i] != [38;5;130m0[m; i++) {[38C[100m [m[59;99H[K[59;99H349,13[8C93%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m352 [m[4m[36m * args: arguments provided in command line without first command[m[4m              [m[4m[100m [m[4m                                [m[56;1H[33m407 [m[8C[33mif[m (!isdigit(number[i])) {[45C[100m [m
[33m408 [m[12C[33mreturn[m [38;5;130mfalse[m;[54C[100m [m
[33m409 [m[8C}[70C[100m [m[59;99H[K[59;99H352,13[8C93%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m355 [m[4m[32mvoid[m[4m eof([m[4m[32mchar[m[4m** args, [m[4m[32mint[m[4m spcs) {                                              [m[4m[100m [m[4m                                [m[56;1H[33m410 [m    }[74C[100m [m
[33m411 [m    [33mreturn[m [38;5;130mtrue[m;[63C[100m [m
[33m412 [m}[78C[100m [m[59;99H[K[59;99H355,13[8C94%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m358 [m[4m    } [m[4m[33melse[m[4m [m[4m[46m{[m[4m                                                                   [m[4m[100m [m[4m                                [m[8;9H[46m}[m[56;1H[33m413 [m[79C[100m [m
[33m414 [m[36m/* is_job()[m[68C[100m [m
[33m415 [m[36m * --------[m[68C[100m [m[59;99H[K[59;99H358,12[8C95%[1;16H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m361 [m[4m            close(jobs[job].down[WRITE]);                                      [m[4m[100m [m[4m                                [m[5;9H}[56;1H[33m416 [m[36m * Checks if job[] is a valid job number.[m[38C[100m [m
[33m417 [m[36m *[m[77C[100m [m
[33m418 [m[36m * job[]: array of characters of job number[m[36C[100m [m[59;99H[K[59;99H361,13[8C96%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m364 [m[4m        }                                                                      [m[4m[100m [m[4m                                [m[56;1H[33m419 [m[36m * Returns: true if valid job, false if not[m[36C[100m [m
[33m420 [m[36m */[m[76C[100m [m
[33m421 [m[32mbool[m is_job([32mchar[m job[]) {[54C[100m [m[59;99H[K[59;99H364,9[9C97%[1;13H[?25h[?25l[33m364 [m        }                                                                      [100m [m[1;85H[K[28;1H[93m391 [m[4m        jobs[i].[m[4m[38;5;248m[104mfinished[m[4m = waitpid(jobs[i].pid, &jobs[i].status, WNOHANG);     [m[4m[100m [m[4m                                [m[59;100H91,74[28;78H[?25h[?25l[59;1H[38;5;130m-- INSERT --[m[59;99H[K[59;99H391,74[8C97%[28;78H[?25h[?25l[59;104H5[28;79H[?25h[?25l[33m391 [m        jobs[i].[38;5;248m[104mfinished[m = waitpid(jobs[i].pid, &jobs[i].status, WNOHANG);     [100m [m[28;85H[K[29;1H[93m392 [m[4m                                                                               [m[4m[100m [m[4m                                [m[30;9H}[31;9H                         [32;9Hsignal(s, handle_signal);[33;5H    fflush([38;5;130mstdout[m);[34;5H}[35;5H              [36;5H[36m/* is_number()[37;8H-----------[m                                      [38;7H[36m Determines if inputer number[] is a number or not[m[39;7H                                            [40;8H[36mnumber[]: array of characters to be checked[41;7H Returns: true if number, false if not[42;5H */[m                            [43;5H[32mbool[m is_number([32mchar[m number[]) {          [44;9H[33mfor[m([32mint[m i = [38;5;130m0[m; number[i] != [38;5;130m0[m; i++) {[45;13H[33mif[m (!isdigit(number[i])) {[46;13H    [33mreturn[m [38;5;130mfalse[m;[47;9H    }[48;9H}           [49;5H    [33mreturn[m [38;5;130mtrue[m;[50;5H}[51;5H           [52;5H[36m/* is_job()[53;8H--------[m                              [54;7H[36m Checks if job[] is a valid job number.[m[55;7H                                         [56;8H[36mjob[]: array of characters of job number[57;7H Returns: true if valid job, false if not[58;5H */[m                      [59;101H2,9 [9C6[29;13H[?25h[?25l[4mp[m[59;103H10[29;14H[?25h[?25l[4mr[m[59;104H1[29;15H[?25h[?25l[4mi[m[59;104H2[29;16H[?25h[?25l[4mn[m[59;104H3[29;17H[?25h[?25l[4mt[m[59;104H4[29;18H[?25h[?25l[4mf[m[59;104H5[29;19H[?25h[?25l[4m([m[59;104H6[29;20H[?25h[?25l[4m[38;5;130m"[m[30;5H[38;5;130m    }[32;5H    signal(s, handle_signal);[33;5H    fflush(stdout); [34;5H}[36;5H/* is_number()[37;5H * -----------[38;5H * Determines if inputer number[] is a number or not[39;5H *[40;5H * number[]: array of characters to be checked[41;5H * Returns: true if number, false if not[42;5H */[43;5Hbool is_number(char number[]) {[44;5H    for(int i = 0; number[i] != 0; i++) {[45;5H        if (!isdigit(number[i])) {[46;5H            return false;[47;5H        }[48;5H    }[49;5H    return true;[50;5H}[52;5H/* is_job()[53;5H * --------[54;5H * Checks if job[] is a valid job number.[55;5H *[56;5H * job[]: array of characters of job number[57;5H * Returns: true if valid job, false if not[58;5H */[m[59;104H7[29;21H[?25h[?25l[4m[38;5;130m%[m[59;104H8[29;22H[?25h[?25l[4m[35m%d[m[59;104H9[29;23H[?25h[?25l[4m[38;5;130mn[m[59;103H20[29;24H[?25h[?25l[4m [m[59;103H19[29;23H[?25h[?25l[4m[38;5;130mn[m[59;103H20[29;24H[?25h[?25l[4m [m[59;103H19[29;23H[?25h[?25l[4m[38;5;130m'[m[59;103H20[29;24H[?25h[?25l[4m[38;5;130mn[m[59;104H1[29;25H[?25h[?25l[4m[38;5;130m)[m[59;103H15[29;19H[?25h[?25l[6C[4m [m[59;103H21[29;25H[?25h[?25l[4m [m[59;104H0[29;24H[?25h[?25l[4m [m[59;103H19[29;23H[?25h[?25l[4m[35m\[m[59;103H20[29;24H[?25h[?25l[4m[35mn[m[59;104H1[29;25H[?25h[?25l[4m[38;5;130m"[m[30;5H    }[32;5H    signal(s, handle_signal);[33;5H    fflush([6C); [34;5H}[36;5H[36m/* is_number()[37;5H * -----------[38;5H * Determines if inputer number[] is a number or not[39;5H *[40;5H * number[]: array of characters to be checked[41;5H * Returns: true if number, false if not[42;5H */[m[43;5H[32mbool[m is_number([32mchar[m number[]) {[44;5H    [33mfor[m([32mint[m i = [1C; number[i] != [1C; i++) {[45;5H        [33mif[m (!isdigit(number[i])) {[46;5H            [33mreturn[m [5C;[47;5H        }[48;5H    }[49;5H    [33mreturn[m [4C;[50;5H}[52;5H[36m/* is_job()[53;5H * --------[54;5H * Checks if job[] is a valid job number.[55;5H *[56;5H * job[]: array of characters of job number[57;5H * Returns: true if valid job, false if not[58;5H */[m[59;104H2[29;26H[?25h[?25l[4m,[m[59;104H3[29;27H[?25h[?25l[59;104H4[29;28H[?25h[?25l[4mj[m[59;104H5[29;29H[?25h[?25l[4mo[m[59;104H6[29;30H[?25h[?25l[4mb[m[59;104H7[29;31H[?25h[?25l[4mi[m[59;104H8[29;32H[?25h[?25l[4ms[m[59;104H9[29;33H[?25h[?25l[4m [m[59;104H8[29;32H[?25h[?25l[4m [m[59;104H7[29;31H[?25h[?25l[4ms[m[59;104H8[29;32H[?25h[?25l[4m[[m[59;104H9[29;33H[?25h[?25l[4m][m[59;104H8[29;32H[?25h[?25l[1C[4m [m[59;104H9[29;33H[?25h[?25l[4mi[m[59;103H30[29;34H[?25h[?25l[4m][m[59;103H28[29;32H[?25h[?25l[4m[46m[[1C][m[59;103H31[29;35H[?25h[?25l[4m.[i][m[59;104H2[29;36H[?25h[?25l[4mf[m[59;104H3[29;37H[?25h[?25l[4mi[m[59;104H4[29;38H[?25h[?25l[4mn[m[59;104H5[29;39H[?25h[?25l[4mi[m[59;104H6[29;40H[?25h[?25l[4ms[m[59;104H7[29;41H[?25h[?25l[4mh[m[59;104H8[29;42H[?25h[?25l[4me[m[59;104H9[29;43H[?25h[?25l[29;36H[4m[38;5;248m[104mfinished[m[59;103H40[29;44H[?25h[?25l[4m)[m[59;103H15[29;19H[?25h[?25l[26C[4m;[m[59;103H42[29;46H[?25h[59;1H[K[29;45H[?25l[59;99H392,41[8C96%[29;45H[?25h[?25l[59;99H[K[59;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?1000l[?2004l"hq.c" 433L, 10758C written
[?2004l[?1l>[?25h[?1049l[23;0;0ts4698512@moss:~/CSSE2310/Assignments/a3$ make
gcc -g -Wall -pedantic -std=gnu99 -o hq hq.c -I/local/courses/csse2310/include -L/local/courses/csse2310/lib -lcsse2310a3
s4698512@moss:~/CSSE2310/Assignments/a3$ ./hq
> spawn cat
New Job ID [0] created
> rer epo   port
[Job] cmd:status
[0] cat:exited(0)
> s4698512@moss:~/CSSE2310/Assignments/a3$ ./hqmakevim hq.c
[?1000h[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;59r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[59;1H"hq.c" 433L, 10758C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[33m364 [m[8C}[70C[100m [m
[33m365 [m    }[74C[100m [m
[33m366 [m}[78C[100m [m
[33m367 [m[79C[100m [m
[33m368 [m[36m/* cleanup()[m[67C[100m [m
[33m369 [m[36m * ---------[m[67C[100m [m
[33m370 [m[36m * Terminates all child processes spawned by hq. It does this by sending [m      [100m [m
[33m371 [m[36m * signal 9 (SIGKILL). Reaps all processes.[m[36C[100m [m
[33m372 [m[36m *[m[77C[100m [m
[33m373 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m374 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m375 [m[36m */[m[76C[100m [m
[33m376 [m[32mvoid[m cleanup([32mvoid[m) {[59C[100m [m
[33m377 [m    [33mfor[m ([32mint[m job = [38;5;130m0[m; job < jobid; job++) {[36C[100m [m
[33m378 [m[8Ckill(jobs[job].pid, [38;5;130mSIGKILL[m);[42C[100m [m
[33m379 [m    }[74C[100m [m
[33m380 [m[79C[100m [m
[33m381 [m}[78C[100m [m
[33m382 [m[79C[100m [m
[33m383 [m[36m/* handle_signal()[m[61C[100m [m
[33m384 [m[36m * ---------------[m[61C[100m [m
[33m385 [m[36m * Signal handler[m[62C[100m [m
[33m386 [m[36m *[m[77C[100m [m
[33m387 [m[36m * s: signal number[m[60C[100m [m
[33m388 [m[36m */[m[76C[100m [m
[33m389 [m[32mvoid[m handle_signal([32mint[m s) {[52C[100m [m
[33m390 [m    [33mfor[m ([32mint[m i = [38;5;130m0[m; i < jobid; i++) {[42C[100m [m
[33m391 [m[8Cjobs[i].[38;5;248m[104mfinished[m = waitpid(jobs[i].pid, &jobs[i].status, WNOHANG);     [100m [m
[93m392 [m[4m        printf([m[4m[38;5;130m"[m[4m[35m%d\n[m[4m[38;5;130m"[m[4m, jobs[i].[m[4m[38;5;248m[104mfinished[m[4m);                                      [m[4m[100m [m[4m                                [m[30;1H[33m393 [m    }[74C[100m [m
[33m394 [m[79C[100m [m
[33m395 [m    signal(s, handle_signal);[50C[100m [m
[33m396 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m397 [m}[78C[100m [m
[33m398 [m[79C[100m [m
[33m399 [m[36m/* is_number()[m[65C[100m [m
[33m400 [m[36m * -----------[m[65C[100m [m
[33m401 [m[36m * Determines if inputer number[] is a number or not[m[27C[100m [m
[33m402 [m[36m *[m[77C[100m [m
[33m403 [m[36m * number[]: array of characters to be checked[m[33C[100m [m
[33m404 [m[36m * Returns: true if number, false if not[m[39C[100m [m
[33m405 [m[36m */[m[76C[100m [m
[33m406 [m[32mbool[m is_number([32mchar[m number[]) {[48C[100m [m
[33m407 [m    [33mfor[m([32mint[m i = [38;5;130m0[m; number[i] != [38;5;130m0[m; i++) {[38C[100m [m
[33m408 [m[8C[33mif[m (!isdigit(number[i])) {[45C[100m [m
[33m409 [m[12C[33mreturn[m [38;5;130mfalse[m;[54C[100m [m
[33m410 [m[8C}[70C[100m [m
[33m411 [m    }[74C[100m [m
[33m412 [m    [33mreturn[m [38;5;130mtrue[m;[63C[100m [m
[33m413 [m}[78C[100m [m
[33m414 [m[79C[100m [m
[33m415 [m[36m/* is_job()[m[68C[100m [m
[33m416 [m[36m * --------[m[68C[100m [m
[33m417 [m[36m * Checks if job[] is a valid job number.[m[38C[100m [m
[33m418 [m[36m *[m[77C[100m [m
[33m419 [m[36m * job[]: array of characters of job number[m[36C[100m [m
[33m420 [m[36m * Returns: true if valid job, false if not[m[36C[100m [m
[33m421 [m[36m */[m[76C[100m [m[59;99H392,9[9C96%[29;13H[?25h[?12$p[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m422 [m[32mbool[m is_job([32mchar[m job[]) {[54C[100m [m
[33m423 [m    [33mif[m (strcmp(job, [38;5;130m""[m) && is_number(job)) {[35C[100m [m
[33m424 [m[8C[32mint[m jobNum = atoi(job);[48C[100m [m[59;1H[K[59;99H392,9[9C97%[26;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m425 [m[8C[33mif[m (jobNum <= jobid) {[49C[100m [m
[33m426 [m[12C[33mreturn[m [38;5;130mtrue[m;[55C[100m [m
[33m427 [m[8C} [33melse[m {[63C[100m [m[59;99H[K[59;99H392,9[9C98%[23;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m428 [m[12C[33mreturn[m [38;5;130mfalse[m;[54C[100m [m
[33m429 [m[8C}[70C[100m [m
[33m430 [m    } [33melse[m {[67C[100m [m[59;99H[K[59;99H392,9[9C99%[20;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m431 [m[8C[33mreturn[m [38;5;130mfalse[m;[58C[100m [m
[33m432 [m    }[74C[100m [m
[33m433 [m}[78C[100m [m[59;99H[K[59;99H392,9[9CBot[17;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[1m[34m~                                                                                                                   [57;1H~                                                                                                                   [58;1H~                                                                                                                   [m[59;99H[K[59;99H392,9[9CBot[14;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[1m[34m~                                                                                                                   [57;1H~                                                                                                                   [58;1H~                                                                                                                   [m[59;99H[K[59;99H392,9[9CBot[11;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[1m[34m~                                                                                                                   [57;1H~                                                                                                                   [58;1H~                                                                                                                   [m[59;99H[K[59;99H392,9[9CBot[8;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[1m[34m~                                                                                                                   [57;1H~                                                                                                                   [58;1H~                                                                                                                   [m[59;99H[K[59;99H392,9[9CBot[5;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[1m[34m~                                                                                                                   [57;1H~                                                                                                                   [58;1H~                                                                                                                   [m[59;99H[K[59;99H392,9[9CBot[2;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m394 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[1m[34m~                                                                                                                   [57;1H~                                                                                                                   [58;1H~                                                                                                                   [m[59;99H[K[59;99H394,0-1[7CBot[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m397 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[56;1H[1m[34m~                                                                                                                   [57;1H~                                                                                                                   [58;1H~                                                                                                                   [m[59;99H[K[59;99H397,1[9CBot[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m400 [m[4m[36m * -----------[m[4m                                                                 [m[4m[100m [m[4m                                [m[56;1H[1m[34m~                                                                                                                   [57;1H~                                                                                                                   [58;1H~                                                                                                                   [m[59;99H[K[59;99H400,9[9CBot[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m403 [m[4m[36m * number[]: array of characters to be checked[m[4m                                 [m[4m[100m [m[4m                                [m[56;1H[1m[34m~                                                                                                                   [57;1H~                                                                                                                   [58;1H~                                                                                                                   [m[59;99H[K[59;99H403,9[9CBot[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m406 [m[4m[32mbool[m[4m is_number([m[4m[32mchar[m[4m number[]) {                                                [m[4m[100m [m[4m                                [m[56;1H[1m[34m~                                                                                                                   [57;1H~                                                                                                                   [58;1H~                                                                                                                   [m[59;99H[K[59;99H406,9[9CBot[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m409 [m[4m            [m[4m[33mreturn[m[4m [m[4m[38;5;130mfalse[m[4m;                                                      [m[4m[100m [m[4m                                [m[56;1H[1m[34m~                                                                                                                   [57;1H~                                                                                                                   [58;1H~                                                                                                                   [m[59;99H[K[59;99H409,9[9CBot[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m412 [m[4m    [m[4m[33mreturn[m[4m [m[4m[38;5;130mtrue[m[4m;                                                               [m[4m[100m [m[4m                                [m[56;1H[1m[34m~                                                                                                                   [57;1H~                                                                                                                   [58;1H~                                                                                                                   [m[59;99H[K[59;99H412,9[9CBot[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m415 [m[4m[36m/* is_job()[m[4m                                                                    [m[4m[100m [m[4m                                [m[56;1H[1m[34m~                                                                                                                   [57;1H~                                                                                                                   [58;1H~                                                                                                                   [m[59;99H[K[59;99H415,9[9CBot[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m418 [m[4m[36m *[m[4m                                                                             [m[4m[100m [m[4m                                [m[56;1H[1m[34m~                                                                                                                   [57;1H~                                                                                                                   [58;1H~                                                                                                                   [m[59;99H[K[59;99H418,2[9CBot[1;6H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m415 [m[36m/* is_job()[m[68C[100m [m
[33m416 [m[36m * --------[m[68C[100m [m
[33m417 [m[36m * Checks if job[] is a valid job number.[m[38C[100m [m[59;99H[K[59;99H418,2[9CBot[4;6H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m412 [m    [33mreturn[m [38;5;130mtrue[m;[63C[100m [m
[33m413 [m}[78C[100m [m
[33m414 [m[79C[100m [m[59;99H[K[59;99H418,2[9CBot[7;6H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m409 [m[12C[33mreturn[m [38;5;130mfalse[m;[54C[100m [m
[33m410 [m[8C}[70C[100m [m
[33m411 [m    }[74C[100m [m[59;99H[K[59;99H418,2[9CBot[10;6H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m406 [m[32mbool[m is_number([32mchar[m number[]) {[48C[100m [m
[33m407 [m    [33mfor[m([32mint[m i = [38;5;130m0[m; number[i] != [38;5;130m0[m; i++) {[38C[100m [m
[33m408 [m[8C[33mif[m (!isdigit(number[i])) {[45C[100m [m[59;99H[K[59;99H418,2[9CBot[13;6H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m403 [m[36m * number[]: array of characters to be checked[m[33C[100m [m
[33m404 [m[36m * Returns: true if number, false if not[m[39C[100m [m
[33m405 [m[36m */[m[76C[100m [m[59;99H[K[59;99H418,2[9CBot[16;6H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m400 [m[36m * -----------[m[65C[100m [m
[33m401 [m[36m * Determines if inputer number[] is a number or not[m[27C[100m [m
[33m402 [m[36m *[m[77C[100m [m[59;99H[K[59;99H418,2[9CBot[19;6H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m397 [m}[78C[100m [m
[33m398 [m[79C[100m [m
[33m399 [m[36m/* is_number()[m[65C[100m [m[59;99H[K[59;99H418,2[9CBot[22;6H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m394 [m[79C[100m [m
[33m395 [m    signal(s, handle_signal);[50C[100m [m
[33m396 [m    fflush([38;5;130mstdout[m);[60C[100m [m[59;99H[K[59;99H418,2[9CBot[25;6H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m391 [m[8Cjobs[i].[38;5;248m[104mfinished[m = waitpid(jobs[i].pid, &jobs[i].status, WNOHANG);     [100m [m
[33m392 [m[8Cprintf([38;5;130m"[m[35m%d\n[m[38;5;130m"[m, jobs[i].[38;5;248m[104mfinished[m);[38C[100m [m
[33m393 [m    }[74C[100m [m[59;99H[K[59;99H418,2[9CBot[28;6H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m388 [m[36m */[m[76C[100m [m
[33m389 [m[32mvoid[m handle_signal([32mint[m s) {[52C[100m [m
[33m390 [m    [33mfor[m ([32mint[m i = [38;5;130m0[m; i < jobid; i++) {[42C[100m [m[59;99H[K[59;99H418,2[9CBot[31;6H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m385 [m[36m * Signal handler[m[62C[100m [m
[33m386 [m[36m *[m[77C[100m [m
[33m387 [m[36m * s: signal number[m[60C[100m [m[59;99H[K[59;99H418,2[9CBot[34;6H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m382 [m[79C[100m [m
[33m383 [m[36m/* handle_signal()[m[61C[100m [m
[33m384 [m[36m * ---------------[m[61C[100m [m[59;99H[K[59;99H418,2[9CBot[37;6H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m379 [m    }[74C[100m [m
[33m380 [m[79C[100m [m
[33m381 [m}[78C[100m [m[59;99H[K[59;99H418,2[9CBot[40;6H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m376 [m[32mvoid[m cleanup([32mvoid[m) {[59C[100m [m
[33m377 [m    [33mfor[m ([32mint[m job = [38;5;130m0[m; job < jobid; job++) {[36C[100m [m
[33m378 [m[8Ckill(jobs[job].pid, [38;5;130mSIGKILL[m);[42C[100m [m[59;99H[K[59;99H418,2[9CBot[43;6H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m373 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m374 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m375 [m[36m */[m[76C[100m [m[59;99H[K[59;99H418,2[9C99%[46;6H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m370 [m[36m * Terminates all child processes spawned by hq. It does this by sending [m      [100m [m
[33m371 [m[36m * signal 9 (SIGKILL). Reaps all processes.[m[36C[100m [m
[33m372 [m[36m *[m[77C[100m [m[59;99H[K[59;99H418,2[9C98%[49;6H[?25h[?25l[23;1H[93m392 [m[4m        printf([m[4m[38;5;130m"[m[4m[35m%d\n[m[4m[38;5;130m"[m[4m, jobs[i].[m[4m[38;5;248m[104mfinished[m[4m);                                      [m[4m[100m [m[4m                                [m[49;1H[33m418 [m[36m *[m                                                                             [100m [m[49;85H[K[59;99H392,13[23;17H[?25h[?25l[21;41H[46m{[m[23;9H[4m[46m}[m[3C[4m                                 [m[24;9H [25;9Hsignal(s, handle_signal);[26;9Hfflush([38;5;130mstdout[m);          [27;5H}                  [28;5H [29;5H[36m/* is_number()[30;5H * -----------[31;8HDetermines if inputer number[] is a number or not[m[32;7H                                                  [33;7H[36m number[]: array of characters to be checked[34;8HReturns: true if number, false if not[m      [35;7H[36m/[m                                     [36;5H[32mbool[m is_number([32mchar[m number[]) {[37;5H    [33mfor[m([32mint[m i = [38;5;130m0[m; number[i] != [38;5;130m0[m; i++) {[38;9H    [33mif[m (!isdigit(number[i])) {       [39;13H    [33mreturn[m [38;5;130mfalse[m;         [40;13H}                [41;9H}    [42;9H[33mreturn[m [38;5;130mtrue[m;[43;5H}               [44;5H [45;5H[36m/* is_job()[46;5H * --------[47;8HChecks if job[] is a valid job number.[m[48;7H                                       [49;7H[36m job[]: array of characters of job number[50;8HReturns: true if valid job, false if not[51;7H/[m                                        [52;5H[32mbool[m is_job([32mchar[m job[]) {[53;5H    [33mif[m (strcmp(job, [38;5;130m""[m) && is_number(job)) {[54;9H    [32mint[m jobNum = atoi(job);             [55;13H[33mif[m ([7C<= jobid) { [56;13H    [33mreturn[m [38;5;130mtrue[m;      [57;13H} [33mels[m[1C {        [58;13H    [33mreturn[m [38;5;130mfalse[m;[59;103H5 [23;9H[?25h[?25l[21;1H[93m390 [m[4m    [m[4m[33mfor[m[4m ([m[4m[32mint[m[4m i = [m[4m[38;5;130m0[m[4m; i < jobid; i++) {                                          [m[4m[100m [m[4m                                [m[23;1H[33m392 [m    }                                                                          [100m [m[23;85H[K[59;101H0[21;9H[?25h[?25l[59;1H[38;5;130m-- INSERT --[m[59;99H[K[59;99H390,5[9C98%[21;9H[?25h[?25l[4m/[m[4m[33mfor[m[4m ([m[4m[32mint[m[4m i = [m[4m[38;5;130m0[m[4m; i < jobid; i++) {[m[59;103H6[21;10H[?25h[?25l[4m[36m//for (int i = 0; i < jobid; i++) {[m[59;103H7[21;11H[?25h[?25l[4m/[m[4m[33mfor[m[4m ([m[4m[32mint[m[4m i = [m[4m[38;5;130m0[m[4m; i < jobid; i++) { [m[59;103H6[21;10H[?25h[?25l[4m[36m/*for (int i = 0; i < jobid; i++) {[m[22;5H[36m        jobs[i].[8C = waitpid(jobs[i].pid, &jobs[i].status, WNOHANG);[23;5H    }[25;5H    signal(s, handle_signal);[26;5H    fflush(stdout); [27;5H}[m[29;5H[1m[37m[41m/[m[59;103H7[21;11H[?25h[?25l[33m390 [m    [36m/*for (int i = 0; i < jobid; i++) {[m                                        [100m [m[21;85H[K[22;1H[93m391 [m[4m[36m        jobs[i].[m[4m[38;5;248m[104mfinished[m[4m[36m = waitpid(jobs[i].pid, &jobs[i].status, WNOHANG);[m[4m     [m[4m[100m [m[4m                                [m[59;101H1[22;11H[?25h[?25l[33m391 [m[36m        jobs[i].[m[38;5;248m[104mfinished[m[36m = waitpid(jobs[i].pid, &jobs[i].status, WNOHANG);[m     [100m [m[22;85H[K[23;1H[93m392 [m[4m[36m    }[m[4m                                                                          [m[4m[100m [m[4m                                [m[59;101H2,6[23;10H[?25h[?25l[33m392 [m[36m    }[m                                                                          [100m [m[23;85H[K[24;1H[93m393 [m[4m[36m [m[4m                                                                              [m[4m[100m [m[4m                                [m[59;101H3,1[24;5H[?25h[?25l[23;1H[93m392 [m[4m[36m    }[m[4m                                                                          [m[4m[100m [m[4m                                [m[24;1H[33m393 [m                                                                               [100m [m[24;85H[K[59;101H2,6[23;10H[?25h[?25l[4m[36m*[m[59;103H7[23;11H[?25h[?25l[4m[36m.[m[59;103H8[23;12H[?25h[?25l[4m[36m/[m[59;103H9[23;13H[?25h[?25l[4m [m[59;103H8[23;12H[?25h[?25l[4m [m[59;103H7[23;11H[?25h[?25l[4m[36m/[m[25;5H    signal(s, handle_signal);[26;5H    fflush([38;5;130mstdout[m); [27;5H}[29;5H[36m/*[m[59;103H8[23;12H[?25h[?25l[22;1H[93m391 [m[4m[36m        jobs[i].[m[4m[38;5;248m[104mfinished[m[4m[36m = waitpid(jobs[i].pid, &jobs[i].status, WNOHANG);[m[4m     [m[4m[100m [m[4m                                [m[23;1H[33m392 [m[36m    }*/[m                                                                        [100m [m[23;85H[K[59;101H1,22[22;26H[?25h[59;1H[K[22;25H[?25l[59;99H391,21[8C98%[22;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m367 [m[79C[100m [m
[33m368 [m[36m/* cleanup()[m[67C[100m [m
[33m369 [m[36m * ---------[m[67C[100m [m[59;99H[K[59;99H391,21[8C97%[25;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m364 [m[8C}[70C[100m [m
[33m365 [m    }[74C[100m [m
[33m366 [m}[78C[100m [m[59;99H[K[59;99H391,21[8C97%[28;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m361 [m[12Cclose(jobs[job].down[WRITE]);[38C[100m [m
[33m362 [m[8C} [33melse[m {[63C[100m [m
[33m363 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m[59;99H[K[59;99H391,21[8C96%[31;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m358 [m    } [33melse[m {[67C[100m [m
[33m359 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m360 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m[59;99H[K[59;99H391,21[8C95%[34;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m355 [m[32mvoid[m eof([32mchar[m** args, [32mint[m spcs) {[46C[100m [m
[33m356 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m357 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m[59;99H[K[59;99H391,21[8C94%[37;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m352 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m353 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m354 [m[36m */[m[76C[100m [m[59;99H[K[59;99H391,21[8C93%[40;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m349 [m[36m * Closes the stdin side of the pipe so the child process can no longer read [m  [100m [m
[33m350 [m[36m * as the pipe will be EOF.[m[52C[100m [m
[33m351 [m[36m *[m[77C[100m [m[59;99H[K[59;99H391,21[8C93%[43;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m346 [m[79C[100m [m
[33m347 [m[36m/* eof()[m[71C[100m [m
[33m348 [m[36m * -----[m[71C[100m [m[59;99H[K[59;99H391,21[8C92%[46;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m343 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m344 [m    }[74C[100m [m
[33m345 [m}[78C[100m [m[59;99H[K[59;99H391,21[8C91%[49;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m340 [m[8C}[70C[100m [m
[33m341 [m[79C[100m [m
[33m342 [m[79C[100m [m[59;99H[K[59;99H391,21[8C90%[52;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m337 [m[12C}[66C[100m [m
[33m338 [m[8C} [33melse[m {[63C[100m [m
[33m339 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m[59;99H[K[59;99H391,21[8C89%[55;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m334 [m[16C} [33melse[m {[55C[100m [m
[33m335 [m[20Cprintf([38;5;130m"[m[35m%s\n[m[38;5;130m"[m, buffer);[36C[100m [m
[33m336 [m[16C}[62C[100m [m[59;99H[K[59;99H391,21[8C89%[58;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m331 [m[20Cprintf([38;5;130m"<no input>[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m332 [m[16C} [33melse[m [33mif[m (buffer == [38;5;130mNULL[m) {[35C[100m [m
[33m333 [m[20Cprintf([38;5;130m"<EOF>[m[35m\n[m[38;5;130m"[m);[41C[100m [m[58;1H[93m388 [m[4m[36m */[m[4m                                                                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H388,3[9C88%[58;7H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m328 [m[12C[33mif[m (ready) {[55C[100m [m
[33m329 [m[16C[32mchar[m* buffer = read_line(readf);[31C[100m [m
[33m330 [m[16C[33mif[m (buffer == [38;5;130m0[m) {[45C[100m [m[58;1H[93m385 [m[4m[36m * Signal handler[m[4m                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H385,17[8C87%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m325 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m
[33m326 [m[12C[32mint[m ready = is_ready(jobs[job].up[READ]);[26C[100m [m
[33m327 [m[12C[32mFILE[m* readf = fdopen(jobs[job].up[READ], [38;5;130m"r"[m);[21C[100m [m[58;1H[93m382 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H382,0-1[7C86%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m322 [m[8Cprintf([38;5;130m"Error: Insufficient arguments.[m[35m\n[m[38;5;130m"[m);[28C[100m [m
[33m323 [m    } [33melse[m {[67C[100m [m
[33m324 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m[56;47H[46m{[m

[93m379 [m[4m    [m[4m[46m}[m[4m                                                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H379,5[9C85%[58;9H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m319 [m[36m */[m[76C[100m [m
[33m320 [m[32mvoid[m rcv([32mchar[m** args, [32mint[m spcs) {[46C[100m [m
[33m321 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m[58;1H[93m376 [m[4m[32mvoid[m[4m cleanup([m[4m[32mvoid[m[4m) {                                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H376,20[8C85%[58;24H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m316 [m[36m *[m[77C[100m [m
[33m317 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m318 [m[36m * spcs: number of original tokens[m[45C[100m [m[58;1H[93m373 [m[4m[36m * args: arguments provided in command line without first command[m[4m              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H373,21[8C84%[58;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m313 [m[36m * -----[m[71C[100m [m
[33m314 [m[36m * Receives data through the pipe from the specified child process.[m[12C[100m [m
[33m315 [m[36m * Prints this to stdout in the parent, hq.[m[36C[100m [m[58;1H[93m370 [m[4m[36m * Terminates all child processes spawned by hq. It does this by sending [m[4m      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H370,21[8C83%[58;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m310 [m}[78C[100m [m
[33m311 [m[79C[100m [m
[33m312 [m[36m/* rcv()[m[71C[100m [m[58;1H[93m367 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H367,0-1[7C82%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m307 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m308 [m[8C}[70C[100m [m
[33m309 [m    }[74C[100m [m[56;20H[46m{[m

[93m364 [m[4m        [m[4m[46m}[m[4m                                                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H364,9[9C81%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m304 [m[12C[32mFILE[m* writef = fdopen(jobs[job].down[WRITE], [38;5;130m"w"[m);[17C[100m [m
[33m305 [m[12Cfprintf(writef, [38;5;130m"[m[35m%s\n[m[38;5;130m"[m, args[[38;5;130m1[m]);[34C[100m [m
[33m306 [m[8C} [33melse[m {[63C[100m [m[58;1H[93m361 [m[4m            close(jobs[job].down[WRITE]);                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H361,21[8C81%[58;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m301 [m    } [33melse[m {[67C[100m [m
[33m302 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m303 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m[58;1H[93m358 [m[4m    } [m[4m[33melse[m[4m {                                                                   [m[4m[100m [m[4m                                [m[59;99H[K[59;99H358,12[8C80%[58;16H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m298 [m[32mvoid[m send([32mchar[m** args, [32mint[m spcs) {[45C[100m [m
[33m299 [m    [33mif[m (spcs < [38;5;130m3[m) {[60C[100m [m
[33m300 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m[58;1H[93m355 [m[4m[32mvoid[m[4m eof([m[4m[32mchar[m[4m** args, [m[4m[32mint[m[4m spcs) {                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H355,21[8C79%[58;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m295 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m296 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m297 [m[36m */[m[76C[100m [m[58;1H[93m352 [m[4m[36m * args: arguments provided in command line without first command[m[4m              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H352,21[8C78%[58;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m292 [m[36m * ------[m[70C[100m [m
[33m293 [m[36m * Sends text down the pipe to specified job[m[35C[100m [m
[33m294 [m[36m *[m[77C[100m [m[58;1H[93m349 [m[4m[36m * Closes the stdin side of the pipe so the child process can no longer read [m[4m  [m[4m[100m [m[4m                                [m[59;99H[K[59;99H349,21[8C77%[58;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m289 [m}[78C[100m [m
[33m290 [m[79C[100m [m
[33m291 [m[36m/* send()[m[70C[100m [m[58;1H[93m346 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H346,0-1[7C77%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m286 [m[12Cprintf([38;5;130m"Error: Invalid sleep time[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m287 [m[8C}[70C[100m [m
[33m288 [m    }[74C[100m [m[58;1H[93m343 [m[4m        fflush([m[4m[38;5;130mstdout[m[4m);                                                        [m[4m[100m [m[4m                                [m[59;99H[K[59;99H343,21[8C76%[58;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m283 [m[8C[33mif[m (strcmp(args[[38;5;130m0[m], [38;5;130m""[m) && is_number(args[[38;5;130m0[m])) {[23C[100m [m
[33m284 [m[12Csleep(atoi(args[[38;5;130m0[m]) * [38;5;130m1000000[m);[36C[100m [m
[33m285 [m[8C} [33melse[m {[63C[100m [m[56;20H[46m{[m

[93m340 [m[4m        [m[4m[46m}[m[4m                                                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H340,9[9C75%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m280 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m281 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m282 [m    } [33melse[m {[67C[100m [m[49;28H[46m{[m[58;1H[93m337 [m[4m            [m[4m[46m}[m[4m                                                                  [m[4m[100m [m[4m                                [m[59;99H[K[59;99H337,13[8C74%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m277 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m278 [m[36m */[m[76C[100m [m
[33m279 [m[32mvoid[m hq_wait([32mchar[m** args, [32mint[m spcs) {[42C[100m [m[52;28H{[58;1H[93m334 [m[4m                } [m[4m[33melse[m[4m {                                                       [m[4m[100m [m[4m                                [m[59;99H[K[59;99H334,21[8C73%[58;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m274 [m[36m * Causes hq to wait for specified seconds[m[37C[100m [m
[33m275 [m[36m *[m[77C[100m [m
[33m276 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[58;1H[93m331 [m[4m                    printf([m[4m[38;5;130m"<no input>[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                    [m[4m[100m [m[4m                                [m[59;99H[K[59;99H331,21[8C72%[58;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m271 [m[79C[100m [m
[33m272 [m[36m/* hq_wait()[m[67C[100m [m
[33m273 [m[36m * ---------[m[67C[100m [m[58;1H[93m328 [m[4m            [m[4m[33mif[m[4m (ready) {                                                       [m[4m[100m [m[4m                                [m[59;99H[K[59;99H328,21[8C72%[58;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m268 [m[8C}[70C[100m [m
[33m269 [m    }[74C[100m [m
[33m270 [m}[78C[100m [m[58;1H[93m325 [m[4m            [m[4m[32mint[m[4m job = atoi(args[[m[4m[38;5;130m0[m[4m]);                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H325,21[8C71%[58;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m265 [m[12C}[66C[100m [m
[33m266 [m[8C} [33melse[m {[63C[100m [m
[33m267 [m[12Cprintf([38;5;130m"Error: invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m[58;1H[93m322 [m[4m        printf([m[4m[38;5;130m"Error: Insufficient arguments.[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H322,21[8C70%[58;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m262 [m[16C}[62C[100m [m
[33m263 [m[12C} [33melse[m {[59C[100m [m
[33m264 [m[16Cprintf([38;5;130m"Error: Invalid signal[m[35m\n[m[38;5;130m"[m);[29C[100m [m[58;1H[93m319 [m[4m[36m */[m[4m                                                                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H319,3[9C69%[58;7H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m259 [m[20Ckill(pid, sgnl);[43C[100m [m
[33m260 [m[16C} [33melse[m {[55C[100m [m
[33m261 [m[20Cprintf([38;5;130m"Error: Invalid signal[m[35m\n[m[38;5;130m"[m);[25C[100m [m[58;1H[93m316 [m[4m[36m *[m[4m                                                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H316,2[9C68%[58;6H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m256 [m[16C[32mint[m sgnl = atoi(args[[38;5;130m1[m]);[38C[100m [m
[33m257 [m[16C[33mif[m (sgnl >= [38;5;130m1[m && sgnl <= [38;5;130m31[m) {[33C[100m [m
[33m258 [m[20C[32mint[m pid = jobs[job].pid;[35C[100m [m[58;1H[93m313 [m[4m[36m * -----[m[4m                                                                       [m[4m[100m [m[4m                                [m[59;99H[K[59;99H313,8[9C68%[58;12H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m253 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m254 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m
[33m255 [m[12C[33mif[m (is_number(args[[38;5;130m1[m])){[43C[100m [m[46;38H[46m{[m[58;1H[93m310 [m[4m[46m}[m[4m                                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H310,1[9C67%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m250 [m    [33mif[m (spcs < [38;5;130m3[m) {[60C[100m [m
[33m251 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m252 [m    } [33melse[m {[67C[100m [m[49;38H{[58;1H[93m307 [m[4m            printf([m[4m[38;5;130m"Error: Invalid job[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                    [m[4m[100m [m[4m                                [m[59;99H[K[59;99H307,21[8C66%[58;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m247 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m248 [m[36m */[m[76C[100m [m
[33m249 [m[32mvoid[m call_signal([32mchar[m** args, [32mint[m spcs) {[38C[100m [m[58;1H[93m304 [m[4m            [m[4m[32mFILE[m[4m* writef = fdopen(jobs[job].down[WRITE], [m[4m[38;5;130m"w"[m[4m);                 [m[4m[100m [m[4m                                [m[59;99H[K[59;99H304,21[8C65%[58;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m244 [m[36m * Sends signal to child process specified[m[37C[100m [m
[33m245 [m[36m *[m[77C[100m [m
[33m246 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[58;1H[93m301 [m[4m    } [m[4m[33melse[m[4m {                                                                   [m[4m[100m [m[4m                                [m[59;99H[K[59;99H301,12[8C64%[58;16H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m241 [m[79C[100m [m
[33m242 [m[36m/* call_signal()[m[63C[100m [m
[33m243 [m[36m * -------------[m[63C[100m [m[58;1H[93m298 [m[4m[32mvoid[m[4m send([m[4m[32mchar[m[4m** args, [m[4m[32mint[m[4m spcs) {                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H298,21[8C64%[58;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m238 [m[8C}[70C[100m [m
[33m239 [m    }[74C[100m [m
[33m240 [m}[78C[100m [m[58;1H[93m295 [m[4m[36m * args: arguments provided in command line without first command[m[4m              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H295,21[8C63%[58;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m235 [m[12C}[66C[100m [m
[33m236 [m[8C} [33melse[m {[63C[100m [m
[33m237 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m[58;1H[93m292 [m[4m[36m * ------[m[4m                                                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H292,9[9C62%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m232 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[jobq].status));[8C[100m [m
[33m233 [m[12C} [33melse[m {[59C[100m [m
[33m234 [m[16Cprintf([38;5;130m"Error[m[35m\n[m[38;5;130m"[m);[45C[100m [m[48;41H[46m{[m[58;1H[93m289 [m[4m[46m}[m[4m                                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H289,1[9C61%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m229 [m[12C} [33melse[m [33mif[m (WIFEXITED(jobs[jobq].status)) {[25C[100m [m
[33m230 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[jobq].status));[9C[100m [m
[33m231 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[jobq].status)) {[23C[100m [m[51;41H{[58;1H[93m286 [m[4m            printf([m[4m[38;5;130m"Error: Invalid sleep time[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H286,21[8C60%[58;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m226 [m[79C[100m [m
[33m227 [m[12C[33mif[m (!jobs[jobq].[38;5;248m[104mfinished[m) {[40C[100m [m
[33m228 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m[58;1H[93m283 [m[4m        [m[4m[33mif[m[4m (strcmp(args[[m[4m[38;5;130m0[m[4m], [m[4m[38;5;130m""[m[4m) && is_number(args[[m[4m[38;5;130m0[m[4m])) {                       [m[4m[100m [m[4m                                [m[59;99H[K[59;99H283,21[8C60%[58;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m223 [m[12C[32mint[m jobq = atoi(args[[38;5;130m0[m]);[42C[100m [m
[33m224 [m[79C[100m [m
[33m225 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, jobq, jobs[jobq].name);[25C[100m [m[58;1H[93m280 [m[4m    [m[4m[33mif[m[4m (spcs < [m[4m[38;5;130m2[m[4m) {                                                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H280,19[8C59%[58;23H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m220 [m    } [33melse[m [33mif[m (spcs > [38;5;130m1[m) {      [36m// report on specific job[m[22C[100m [m
[33m221 [m[8C[36m// check for job tokens[1][m[45C[100m [m
[33m222 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m[58;1H[93m277 [m[4m[36m * spcs: number of original tokens[m[4m                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H277,21[8C58%[58;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m217 [m[12C}[66C[100m [m
[33m218 [m[8C}[70C[100m [m
[33m219 [m[79C[100m [m[58;1H[93m274 [m[4m[36m * Causes hq to wait for specified seconds[m[4m                                     [m[4m[100m [m[4m                                [m[59;99H[K[59;99H274,21[8C57%[58;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m214 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[11C[100m [m
[33m215 [m[12C} [33melse[m {[59C[100m [m
[33m216 [m[16Cprintf([38;5;130m"Error[m[35m\n[m[38;5;130m"[m);[45C[100m [m[58;1H[93m271 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H271,0-1[7C56%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m211 [m[12C} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[28C[100m [m
[33m212 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[12C[100m [m
[33m213 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {[26C[100m [m[56;20H[46m{[m

[93m268 [m[4m        [m[4m[46m}[m[4m                                                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H268,9[9C56%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m208 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[31C[100m [m
[33m209 [m[12C[33mif[m (!jobs[i].[38;5;248m[104mfinished[m) {[43C[100m [m
[33m210 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m[56;24H[46m{[m

[93m265 [m[4m            [m[4m[46m}[m[4m                                                                  [m[4m[100m [m[4m                                [m[59;99H[K[59;99H265,13[8C55%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m205 [m    [36m// check args[m[62C[100m [m
[33m206 [m    [33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[37C[100m [m
[33m207 [m[8C[33mfor[m ([32mint[m i = [38;5;130m0[m; i <= jobid; i++) {[37C[100m [m[56;28H[46m{[m

[93m262 [m[4m                [m[4m[46m}[m[4m                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H262,17[8C54%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m202 [m[79C[100m [m
[33m203 [m    [36m// Job status output dependent on arg present status[m[23C[100m [m
[33m204 [m[79C[100m [m[58;1H[93m259 [m[4m                    kill(pid, sgnl);                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H259,21[8C53%[58;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m199 [m[79C[100m [m
[33m200 [m    [36m// Header row[m[62C[100m [m
[33m201 [m    printf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[46C[100m [m[58;1H[93m256 [m[4m                [m[4m[32mint[m[4m sgnl = atoi(args[[m[4m[38;5;130m1[m[4m]);                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H256,21[8C52%[58;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m196 [m[36m */[m[76C[100m [m
[33m197 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[43C[100m [m
[33m198 [m    fflush([38;5;130mstdout[m);[60C[100m [m[58;1H[93m253 [m[4m        [m[4m[33mif[m[4m (is_job(args[[m[4m[38;5;130m0[m[4m])) {                                                 [m[4m[100m [m[4m                                [m[59;99H[K[59;99H253,21[8C52%[58;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m193 [m[36m *[m[77C[100m [m
[33m194 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m195 [m[36m * spcs: number of original tokens[m[45C[100m [m[58;1H[93m250 [m[4m    [m[4m[33mif[m[4m (spcs < [m[4m[38;5;130m3[m[4m) {                                                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H250,19[8C51%[58;23H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m190 [m[36m/* report()[m[68C[100m [m
[33m191 [m[36m * --------[m[68C[100m [m
[33m192 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m[58;1H[93m247 [m[4m[36m * spcs: number of original tokens[m[4m                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H247,21[8C50%[58;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m187 [m    }[74C[100m [m
[33m188 [m}[78C[100m [m
[33m189 [m[79C[100m [m[58;1H[93m244 [m[4m[36m * Sends signal to child process specified[m[4m                                     [m[4m[100m [m[4m                                [m[59;99H[K[59;99H244,21[8C49%[58;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m184 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m
[33m185 [m[79C[100m [m
[33m186 [m[8C}[70C[100m [m[58;1H[93m241 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H241,0-1[7C48%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m181 [m[8C} [33melse[m {[63C[100m [m
[33m182 [m[12C[36m// parent[m[58C[100m [m
[33m183 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m[56;20H[46m{[m

[93m238 [m[4m        [m[4m[46m}[m[4m                                                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H238,9[9C48%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m178 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m
[33m179 [m[16Cexit([38;5;130m99[m);[54C[100m [m
[33m180 [m[12C}[66C[100m [m[56;24H[46m{[m

[93m235 [m[4m            [m[4m[46m}[m[4m                                                                  [m[4m[100m [m[4m                                [m[59;99H[K[59;99H235,13[8C47%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m175 [m[79C[100m [m
[33m176 [m[12C[32mint[m status;[56C[100m [m
[33m177 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m[58;1H[93m232 [m[4m                printf([m[4m[38;5;130m"signalled([m[4m[35m%d[m[4m[38;5;130m)[m[4m[35m\n[m[4m[38;5;130m"[m[4m, WTERMSIG(jobs[jobq].status));        [m[4m[100m [m[4m                                [m[59;99H[K[59;99H232,21[8C46%[58;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m172 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m
[33m173 [m[12Cdup2(jobs[jobid].up[WRITE], STDOUT_FILENO);[24C[100m [m
[33m174 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m[58;1H[93m229 [m[4m            } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (WIFEXITED(jobs[jobq].status)) {                         [m[4m[100m [m[4m                                [m[59;99H[K[59;99H229,21[8C45%[58;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m169 [m[12Cclose(jobs[jobid].up[READ]);[39C[100m [m
[33m170 [m[79C[100m [m
[33m171 [m[12Cdup2(jobs[jobid].down[READ], STDIN_FILENO);[24C[100m [m[58;1H[93m226 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H226,0-1[7C44%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m166 [m[12C[36m// child[m[59C[100m [m
[33m167 [m[79C[100m [m
[33m168 [m[12Cclose(jobs[jobid].down[WRITE]);[36C[100m [m[58;1H[93m223 [m[4m            [m[4m[32mint[m[4m jobq = atoi(args[[m[4m[38;5;130m0[m[4m]);                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H223,21[8C44%[58;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m163 [m[8Cjobs[jobid].pid = fork();[46C[100m [m
[33m164 [m[8Cjobs[jobid].[38;5;248m[104mfinished[m = [38;5;130m1[m;[46C[100m [m
[33m165 [m[8C[33mif[m (!jobs[jobid].pid) {[48C[100m [m[58;1H[93m220 [m[4m    } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (spcs > [m[4m[38;5;130m1[m[4m) {      [m[4m[36m// report on specific job[m[4m                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H220,21[8C43%[58;25H[?25h[?25l[22;1H[93m184 [m[4m            close(jobs[jobid].up[WRITE]);                                      [m[4m[100m [m[4m                                [m[58;1H[33m220 [m    } [33melse[m [33mif[m (spcs > [38;5;130m1[m) {      [36m// report on specific job[m                      [100m [m[58;85H[K[59;99H184,4[22;45H[?25h[?25l[59;1H[38;5;130m-- INSERT --[m[59;99H[K[59;99H184,41[8C43%[22;45H[?25h[?25l[33m184 [m            close(jobs[jobid].up[WRITE]);                                      [100m [m[22;85H[K[23;1H[93m185 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;101H5,1 [23;5H[?25h[?25l[33m185 [m                                                                               [100m [m[23;85H[K[24;1H[93m186 [m[4m                                                                               [m[4m[100m [m[4m                                [m[25;9H    }[26;5H    }[27;5H}[28;5H           [29;5H[36m/* report()[30;8H--------[m                                                                   [31;7H[36m Produces an outline to stdout of current child processes and their statuses[m[32;7H                                                               [33;8H[36margs: arguments provided in command line without first command[34;7H spcs: number of original tokens[35;5H */[m                                 [36;5H[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[37;9Hfflush([38;5;130mstdout[m);[38;9H             [39;9H[36m// Header row[m                [40;9Hprintf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[41;9H                                                    [42;9H[36m// Job status output dependent on arg present status[m[43;9H             [44;9H[36m// check args[m                         [45;9H[33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[46;13H[33mfor[m ([32mint[m i = [38;5;130m0[m; i <= jobid; i++) {      [47;17Hprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[48;17H[33mif[m (!jobs[i].[38;5;248m[104mfinished[m) {[49;17H    printf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);               [50;17H} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {                [51;17H    printf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[52;17H} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {               [53;17H    printf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[54;17H} [33melse[m {              [55;17H    printf([38;5;130m"Error[m[35m\n[m[38;5;130m"[m);[56;13H    }[57;13H}[58;9H                                                     [59;101H6,13[24;17H[?25h[59;1H[K[24;5H[?25l[59;99H186,0-1[7C43%[24;5H[?25h[?25l[33m186 [m                                                                               [100m [m[24;85H[K[25;1H[93m187 [m[4m        jobs[i].[m[4m[38;5;248m[104mfinished[m[4m = waitpid(jobs[i].pid, &jobs[i].status, WNOHANG);     [m[4m[100m [m[4m                                [m[26;9H    }[27;5H    }[28;5H}[29;5H           [30;5H[36m/* report()[31;8H--------[m                                                                   [32;7H[36m Produces an outline to stdout of current child processes and their statuses[m[33;7H                                                               [34;8H[36margs: arguments provided in command line without first command[35;7H spcs: number of original tokens[36;5H */[m                                 [37;5H[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[38;9Hfflush([38;5;130mstdout[m);[39;9H             [40;9H[36m// Header row[m                [41;9Hprintf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[42;9H                                                    [43;9H[36m// Job status output dependent on arg present status[m[44;9H             [45;9H[36m// check args[m                         [46;9H[33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[47;13H[33mfor[m ([32mint[m i = [38;5;130m0[m; i <= jobid; i++) {      [48;17Hprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[49;17H[33mif[m (!jobs[i].[38;5;248m[104mfinished[m) {[50;17H    printf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);               [51;17H} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {                [52;17H    printf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[53;17H} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {               [54;17H    printf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[55;17H} [33melse[m {              [56;17H    printf([38;5;130m"Error[m[35m\n[m[38;5;130m"[m);[57;13H    }[58;13H}[59;101H7,9  [25;13H[?25h[?25l[59;1H[38;5;130m-- INSERT --[m[59;99H[K[59;99H187,9[9C43%[25;13H[?25h[?25l[4m    jobs[i].[m[4m[38;5;248m[104mfinished[m[4m = waitpid(jobs[i].pid, &jobs[i].status, WNOHANG);[m[59;103H13[25;17H[?25h[?25l[24;1H[93m186 [m[4m                                                                               [m[4m[100m [m[4m                                [m[25;1H[33m187 [m            jobs[i].[38;5;248m[104mfinished[m = waitpid(jobs[i].pid, &jobs[i].status, WNOHANG); [100m [m[25;85H[K[59;101H6,1 [24;5H[?25h[?25l[23;1H[93m185 [m[4m                                                                               [m[4m[100m [m[4m                                [m[24;1H[33m186 [m            jobs[i].[38;5;248m[104mfinished[m = waitpid(jobs[i].pid, &jobs[i].status, WNOHANG); [100m [m[24;85H[K[25;13H}                                                                     [26;9H}    [27;5H}    [28;5H [29;5H[36m/* report()[30;5H * --------[31;8HProduces an outline to stdout of current child processes                                                                          [m[4m[100m [m[4m                                [m[25;1H[33m187 [m            jobs[i].[38;5;248m[104mfinished[m = waitpid(jobs[i].pid, &jobs[i].status, WNOHANG); [100m [m[25;85H[K[59;101H6,1 [24;5H[?25h[?25l[23;1H[93m185 [m[4m                                                                               [m[4m[100m [m[4m                                [m[24;1H[33m186 [m            jobs[i].[38;5;248m[104mfinished[m = waitpid(jobs[i].pid, &jobs[i].status, WNOHANG); [100m [m[24;85H[K[25;13H}                                                                     [26;9H}    [27;5H}    [28;5H [29;5H[36m/* report()[30;5H * --------[31;8HProduces an outline to stdout of current child processes and their statuses[m[32;7H                                                                            [33;7H[36m args: arguments provided in command line without first command[34;8Hspcs: number of original tokens[m                               [35;7H[36m/[m                               [36;5H[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[37;5H    fflush([38;5;130mstdout[m);                 [38;9H               [39;9H[36m// Header row[m[40;9Hprintf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[41;9H                             [42;9H[36m// Job status output dependent on arg present status[m[43;9H                                                    [44;9H[36m// check args[m[45;9H[33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[46;9H    [33mfor[m ([32mint[m i = [38;5;130m0[m; i <= jobid; i++) {[47;13H    printf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[48;17H[33mif[m (!jobs[i].[38;5;248m[104mfinished[m) {            [49;17H    printf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[50;17H} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[51;17H    printf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[52;17H} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {              [53;17H    printf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[54;17H} [33melse[m {                                                [55;17H    printf([38;5;130m"Error[m[35m\n[m[38;5;130m"[m);[56;17H}                     [57;13H}    [58;13H [59;101H5[23;5H[?25h[?25l[59;103H5[23;9H[?25h[?25l[59;103H9[23;13H[?25h[?25l[59;103H13[23;17H[?25h[?25l[33m185 [m                                                                               [100m [m[23;85H[K[24;1H[93m186 [m[4m            jobs[i].[m[4m[38;5;248m[104mfinished[m[4m = waitpid(jobs[i].pid, &jobs[i].status, WNOHANG); [m[4m[100m [m[4m                                [m[24;62H[4m[46m[[1C][m[59;101H6,60[24;64H[?25h[?25l[4m][m[4m[46m.[m[4mstatus, WNOHANG); [m[24;63H[4m[46m][m[4m.[m[59;103H59[24;63H[?25h[?25l[4m[46mj[m[4m].status, WNOHANG);[24;63Hj[m[4m[46m][m[59;103H60[24;64H[?25h[?25l[4m[46mo[m[4m].status, WNOHANG);[24;64Ho[m[4m[46m][m[59;104H1[24;65H[?25h[?25l[4m[46mb[m[4m].status, WNOHANG)[m[4m[100m;[m[24;65H[4mb[m[4m[46m][m[59;104H2[24;66H[?25h[?25l[4m[46mq[m[4m].status, WNOHANG[m[4m[100m)[m[4m;[24;66Hq[m[4m[46m][m[59;104H3[24;67H[?25h[?25l[24;48H[4m[46m[[1C][m[11C[4m[jobq][m[59;103H45[24;49H[?25h[?25l[59;104H6[24;50H[?25h[?25l[4m][m[4m[46m.[m[4mpid, &jobs[jobq].status, WNOHANG)[m[4m[100m;[m[4m [m[24;49H[4m[46m][m[4m.[m[59;104H5[24;49H[?25h[?25l[4m[46mj[m[4m].pid, &jobs[jobq].status, WNOHANG[m[4m[100m)[m[4m;[24;49Hj[m[4m[46m][m[59;104H6[24;50H[?25h[?25l[4m[46mo[m[4m].pid, &jobs[jobq].status, WNOHAN[m[4m[100mG[m[4m);[24;50Ho[m[4m[46m][m[59;104H7[24;51H[?25h[?25l[4m[46mb[m[4m].pid, &jobs[jobq].status, WNOHA[m[4m[100mN[m[4mG);[24;51Hb[m[4m[46m][m[59;104H8[24;52H[?25h[?25l[4m[46mq[m[4m].pid, &jobs[jobq].status, WNOH[m[4m[100mA[m[4mNG);[24;52Hq[m[4m[46m][m[59;104H9[24;53H[?25h[?25l[24;21H[4m[46m[[1C][m[24C[4m[jobq][m[59;103H18[24;22H[?25h[?25l[59;104H9[24;23H[?25h[?25l[4m][m[4m[46m.[m[4m[38;5;248m[104mfinished[m[4m = waitpid(jobs[jobq].pid, &jobs[jobq].status, WNOHA[m[4m[100mN[m[4mG); [m[24;22H[4m[46m][m[4m.[m[59;104H8[24;22H[?25h[?25l[4m[46mj[m[4m].[m[4m[38;5;248m[104mfinished[m[4m = waitpid(jobs[jobq].pid, &jobs[jobq].status, WNOH[m[4m[100mA[m[4mNG);[24;22Hj[m[4m[46m][m[59;104H9[24;23H[?25h[?25l[4m[46mo[m[4m].[m[4m[38;5;248m[104mfinished[m[4m = waitpid(jobs[jobq].pid, &jobs[jobq].status, WNO[m[4m[100mH[m[4mANG);[24;23Ho[m[4m[46m][m[59;103H20[24;24H[?25h[?25l[4m[46mb[m[4m].[m[4m[38;5;248m[104mfinished[m[4m = waitpid(jobs[jobq].pid, &jobs[jobq].status, WN[m[4m[100mO[m[4mHANG);[24;24Hb[m[4m[46m][m[59;104H1[24;25H[?25h[?25l[4m[46mq[m[4m].[m[4m[38;5;248m[104mfinished[m[4m = waitpid(jobs[jobq].pid, &jobs[jobq].status, W[m[4m[100mN[m[4mOHANG);[24;25Hq[m[4m[46m][m[59;104H2[24;26H[?25h[59;1H[K[24;25H[?25l[4m[jobq][m[59;99H186,21[8C43%[24;25H[?25h[?25l[59;99H[K[59;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?1000l[?2004l"hq.c" 433L, 10820C written
[?2004l[?1l>[?25h[?1049l[23;0;0ts4698512@moss:~/CSSE2310/Assignments/a3$ make
gcc -g -Wall -pedantic -std=gnu99 -o hq hq.c -I/local/courses/csse2310/include -L/local/courses/csse2310/lib -lcsse2310a3
[01m[Khq.c:[m[K In function â€˜[01m[Kspawn[m[Kâ€™:
[01m[Khq.c:186:18:[m[K [01;31m[Kerror: [m[Kâ€˜[01m[Kjobq[m[Kâ€™ undeclared (first use in this function); did you mean â€˜[01m[Kjobs[m[Kâ€™?
             jobs[[01;31m[Kjobq[m[K].finished = waitpid(jobs[jobq].pid, &jobs[jobq].status, WNOHANG);
                  [01;31m[K^~~~[m[K
                  [32m[Kjobs[m[K
[01m[Khq.c:186:18:[m[K [01;36m[Knote: [m[Keach undeclared identifier is reported only once for each function it appears in
make: *** [makefile:10: hq] Error 1
s4698512@moss:~/CSSE2310/Assignments/a3$ makevim hq.c[4P./hqvim hq.c
[?1000h[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;59r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[59;1H"hq.c" 433L, 10820C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[33m158 [m[8C}[70C[100m [m
[33m159 [m[79C[100m [m
[33m160 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, jobid);[28C[100m [m
[33m161 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m162 [m[79C[100m [m
[33m163 [m[8Cjobs[jobid].pid = fork();[46C[100m [m
[33m164 [m[8Cjobs[jobid].[38;5;248m[104mfinished[m = [38;5;130m1[m;[46C[100m [m
[33m165 [m[8C[33mif[m (!jobs[jobid].pid) {[48C[100m [m
[33m166 [m[12C[36m// child[m[59C[100m [m
[33m167 [m[79C[100m [m
[33m168 [m[12Cclose(jobs[jobid].down[WRITE]);[36C[100m [m
[33m169 [m[12Cclose(jobs[jobid].up[READ]);[39C[100m [m
[33m170 [m[79C[100m [m
[33m171 [m[12Cdup2(jobs[jobid].down[READ], STDIN_FILENO);[24C[100m [m
[33m172 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m
[33m173 [m[12Cdup2(jobs[jobid].up[WRITE], STDOUT_FILENO);[24C[100m [m
[33m174 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m
[33m175 [m[79C[100m [m
[33m176 [m[12C[32mint[m status;[56C[100m [m
[33m177 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m
[33m178 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m
[33m179 [m[16Cexit([38;5;130m99[m);[54C[100m [m
[33m180 [m[12C}[66C[100m [m
[33m181 [m[8C} [33melse[m {[63C[100m [m
[33m182 [m[12C[36m// parent[m[58C[100m [m
[33m183 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m
[33m184 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m
[33m185 [m[79C[100m [m
[93m186 [m[4m            jobs[jobq].[m[4m[38;5;248m[104mfinished[m[4m = waitpid(jobs[jobq].pid, &jobs[jobq].status, W[m[4m[100mN[m[4mOHANG);                         [m[30;1H[33m187 [m[8C}[70C[100m [m
[33m188 [m    }[74C[100m [m
[33m189 [m}[78C[100m [m
[33m190 [m[79C[100m [m
[33m191 [m[36m/* report()[m[68C[100m [m
[33m192 [m[36m * --------[m[68C[100m [m
[33m193 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m
[33m194 [m[36m *[m[77C[100m [m
[33m195 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m196 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m197 [m[36m */[m[76C[100m [m
[33m198 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[43C[100m [m
[33m199 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m200 [m[79C[100m [m
[33m201 [m    [36m// Header row[m[62C[100m [m
[33m202 [m    printf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[46C[100m [m
[33m203 [m[79C[100m [m
[33m204 [m    [36m// Job status output dependent on arg present status[m[23C[100m [m
[33m205 [m[79C[100m [m
[33m206 [m    [36m// check args[m[62C[100m [m
[33m207 [m    [33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[37C[100m [m
[33m208 [m[8C[33mfor[m ([32mint[m i = [38;5;130m0[m; i <= jobid; i++) {[37C[100m [m
[33m209 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[31C[100m [m
[33m210 [m[12C[33mif[m (!jobs[i].[38;5;248m[104mfinished[m) {[43C[100m [m
[33m211 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m212 [m[12C} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[28C[100m [m
[33m213 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[12C[100m [m
[33m214 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {[26C[100m [m
[33m215 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[11C[100m [m[59;99H186,13[8C41%[29;17H[?25h[?12$p[?25l[59;103H21[29;25H[?25h[?25l[4m[46m[[4C][m[59;104H2[29;26H[?25h[?25l[59;1H[38;5;130m-- INSERT --[m[59;14H[K[59;99H186,22[8C41%[29;26H[?25h[?25l[4m][m[4m[46m.[m[4m[38;5;248m[104mfinished[m[4m = waitpid(jobs[jobq].pid, &jobs[jobq].status, WN[m[4m[100mO[m[4mHANG); [m[29;25H[4m[46m][m[4m.[m[59;104H1[29;25H[?25h[?25l[4m[46mi[m[4m].[m[4m[38;5;248m[104mfinished[m[4m = waitpid(jobs[jobq].pid, &jobs[jobq].status, W[m[4m[100mN[m[4mOHANG);[29;25Hi[m[4m[46m][m[59;104H2[29;26H[?25h[?25l[4m[46md[m[4m].[m[4m[38;5;248m[104mfinished[m[4m = waitpid(jobs[jobq].pid, &jobs[jobq].status, [m[4m[100mW[m[4mNOHANG);[29;26Hd[m[4m[46m][m[59;104H3[29;27H[?25h[?25l[4m[jobid][m[59;103H52[29;56H[?25h[?25l[4m[46m[[4C][m[59;104H3[29;57H[?25h[?25l[4m[46mi[m[4m].pid, &jobs[jobq].status,[m[4m[100m [m[4mWNOHANG);[29;57Hi[m[4m[46m][m[59;104H4[29;58H[?25h[?25l[4m][m[4m[46m.[m[4mpid, &jobs[jobq].status, [m[4m[100mW[m[4mNOHANG); [m[29;57H[4m[46m][m[4m.[m[59;104H3[29;57H[?25h[?25l[4m][m[4m[46m.[m[4mpid, &jobs[jobq].status, W[m[4m[100mN[m[4mOHANG); [m[29;56H[4m[46m][m[4m.[m[59;104H2[29;56H[?25h[?25l[4m[46mi[m[4m].pid, &jobs[jobq].status, [m[4m[100mW[m[4mNOHANG);[29;56Hi[m[4m[46m][m[59;104H3[29;57H[?25h[?25l[4m[46md[m[4m].pid, &jobs[jobq].status,[m[4m[100m [m[4mWNOHANG);[29;57Hd[m[4m[46m][m[59;104H4[29;58H[?25h[?25l[4m[jobid][m[59;103H70[29;74H[?25h[?25l[4m[46m[[4C][m[59;104H1[29;75H[?25h[?25l[4m][m[4m[46m.[m[4mstatus, [m[4m[100mW[m[4mNOHANG); [m[29;74H[4m[46m][m[4m.[m[59;104H0[29;74H[?25h[?25l[4m[46mi[m[4m].status,[m[4m[100m [m[4mWNOHANG);[29;74Hi[m[4m[46m][m[59;104H1[29;75H[?25h[?25l[4m[46md[m[4m].status[m[4m[100m,[m[4m WNOHANG);[29;75Hd[m[4m[46m][m[59;104H2[29;76H[?25h[59;1H[K[29;75H[?25l[4m[jobid][m[59;99H186,71[8C41%[29;75H[?25h[?25l[59;99H[K[59;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?1000l[?2004l"hq.c" 433L, 10823C written
[?2004l[?1l>[?25h[?1049l[23;0;0ts4698512@moss:~/CSSE2310/Assignments/a3$ make
gcc -g -Wall -pedantic -std=gnu99 -o hq hq.c -I/local/courses/csse2310/include -L/local/courses/csse2310/lib -lcsse2310a3
s4698512@moss:~/CSSE2310/Assignments/a3$ ./sp[K[Khq
> spawn cat
New Job ID [0] created
> report
[Job] cmd:status
[0] cat:running
> spawn ls
New Job ID [1] created
> spawn cat
New Job ID [2] created
> report        s4698512@moss:~/CSSE2310/Assignments/a3$ exit
Script done, file is typescript
s4698512@moss:~/CSSE2310/Assignments/a3$ script[4Plsscript[Ktesta3.sh
Setting up for tests
Time: Mon May 16 22:13:20 AEST 2022
[1mRunning make...(B[m
make: Nothing to be done for 'all'.
[1mRunning tests ... (B[m
----------------------------------------------------------------------
1.1   - sigcat_copies_input01                               [1m[32mPASS(B[m
1.2   - sigcat_copies_input02                               [1m[32mPASS(B[m
1.3   - sigcat_copies_input03                               [1m[31mFAIL(B[m
    Mismatch in file /tmp/1secondsample.out
2.1   - sigcat_signals01                                    [1m[32mPASS(B[m
2.2   - sigcat_signals02                                    [1m[32mPASS(B[m
2.3   - sigcat_signals03                                    [1m[32mPASS(B[m
2.4   - sigcat_signals04                                    [1m[32mPASS(B[m
2.5   - sigcat_signals05                                    [1m[32mPASS(B[m
2.6   - sigcat_signals06                                    [1m[32mPASS(B[m
2.7   - sigcat_signals07                                    [1m[32mPASS(B[m
2.8   - sigcat_signals08                                    [1m[32mPASS(B[m
2.9   - sigcat_signals09                                    [1m[32mPASS(B[m
2.10  - sigcat_signals10                                    [1m[32mPASS(B[m
2.11  - sigcat_signals11                                    [1m[32mPASS(B[m
2.12  - sigcat_signals12                                    [1m[32mPASS(B[m
2.13  - sigcat_signals13                                    [1m[32mPASS(B[m
2.14  - sigcat_signals14                                    [1m[32mPASS(B[m
2.15  - sigcat_signals15                                    [1m[32mPASS(B[m
3.1   - sigcat_sigusr01                                     [1m[32mPASS(B[m
3.2   - sigcat_sigusr02                                     [1m[32mPASS(B[m
4.1   - hq_invalid01                                        [1m[32mPASS(B[m
4.2   - hq_invalid02                                        [1m[32mPASS(B[m
5.1   - hq_spawn_cmd01                                      [1m[32mPASS(B[m
5.2   - hq_spawn_cmd02                                      [1m[32mPASS(B[m
5.3   - hq_spawn_cmd03                                      [1m[32mPASS(B[m
5.4   - hq_spawn_cmd04                                      [1m[32mPASS(B[m
5.5   - hq_spawn_cmd05                                      [1m[32mPASS(B[m
6.1   - hq_report_cmd01                                     [1m[32mPASS(B[m
6.2   - hq_report_cmd02                                     [1m[31mFAIL(B[m
    Mismatch on stdout
6.3   - hq_report_cmd03                                     [1m[31mFAIL(B[m
    Mismatch on stdout
6.4   - hq_report_cmd04                                     [1m[31mFAIL(B[m
    Mismatch on stdout
6.5   - hq_report_cmd05                                     [1m[32mPASS(B[m
6.6   - hq_report_cmd06                                     [1m[31mFAIL(B[m
    Mismatch on stdout
6.7   - hq_report_cmd07                                     [1m[31mFAIL(B[m