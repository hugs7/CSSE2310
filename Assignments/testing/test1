Script started on 2022-05-16 21:18:26+10:00
s4698512@moss:~/CSSE2310/Assignments/a3$ ls
'\'	       13.1.stderr   3.2.stdout   6.5.stderr   8.2.stdout   hq	    lol2       test	   typescript
 10.3.stderr   13.1.stdout   5.1.stderr   6.5.stdout   9.2.stderr   hq2.c   lol3       test1
 10.3.stdout   14.1.stderr   5.1.stdout   7.2.stderr   9.2.stdout   hq3.c   lol4       test2
 12.2.stderr   14.1.stdout   5.5.stderr   7.2.stdout   9.3.stderr   hq.c    ls	       test4
 12.2.stdout   3.1.stderr    5.5.stdout   7.3.stderr   9.3.stdout   job     makefile   test5
 1.2.stderr    3.1.stdout    6.2.stderr   7.3.stdout   9.4.stderr   job.c   sigcat     testfiles
 1.2.stdout    3.2.stderr    6.2.stdout   8.2.stderr   9.4.stdout   lol     sigcat.c   text.txt
s4698512@moss:~/CSSE2310/Assignments/a3$ v[Kcat test1
s4698512@moss:~/CSSE2310/Assignments/a3$ ^C
s4698512@moss:~/CSSE2310/Assignments/a3$ cat test1ls[Kcat test1
s4698512@moss:~/CSSE2310/Assignments/a3$ ./hw[Kq
> spawn script test123
New Job ID [0] created
> report
[Job] cmd:status
[0] script:running
> s s4698512@moss:~/CSSE2310/Assignments/a3$ ./hq
> spawn cat
New Job ID [0] created
> report
[Job] cmd:status
[0] cat:running
> spawn ls
New Job ID [1] created
> spawn ls
s ^Cree port
[Job] cmd:status
[0] cat:signalled(2)
[1] ls:exited(0)
> spawn ls
New Job ID [2] created
> report
[Job] cmd:status
[0] cat:signalled(2)
[1] ls:exited(0)
[2] ls:exited(0)
> spawn ls
New Job ID [3] created
> s4698512@moss:~/CSSE2310/Assignments/a3$ ./hq[Kvim hq.c
[?1000h[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;59r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[59;1H"hq.c" 433L, 10698C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[33m147 [m[79C[100m [m
[33m148 [m[8C[33mif[m (pipe(jobs[jobid].down) < [38;5;130m0[m) {[38C[100m [m
[33m149 [m[12Cperror([38;5;130m"Creating down pipe"[m);[38C[100m [m
[33m150 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m151 [m[8C}[70C[100m [m
[33m152 [m[79C[100m [m
[33m153 [m[8C[33mif[m (pipe(jobs[jobid].up) < [38;5;130m0[m) {[40C[100m [m
[33m154 [m[12Cperror([38;5;130m"Creating up pipe"[m);[40C[100m [m
[33m155 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m156 [m[8C}[70C[100m [m
[33m157 [m[79C[100m [m
[33m158 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, jobid);[28C[100m [m
[33m159 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m160 [m[79C[100m [m
[33m161 [m[8Cjobs[jobid].pid = fork();[46C[100m [m
[33m162 [m[8C[33mif[m (!jobs[jobid].pid) {[48C[100m [m
[33m163 [m[12C[36m// child[m[59C[100m [m
[33m164 [m[79C[100m [m
[33m165 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m166 [m[12Cclose(jobs[jobid].down[WRITE]);[36C[100m [m
[33m167 [m[12Cclose(jobs[jobid].up[READ]);[39C[100m [m
[33m168 [m[79C[100m [m
[33m169 [m[12Cdup2(jobs[jobid].down[READ], STDIN_FILENO);[24C[100m [m
[33m170 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m
[33m171 [m[12Cdup2(jobs[jobid].up[WRITE], STDOUT_FILENO);[24C[100m [m
[33m172 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m
[33m173 [m[79C[100m [m
[33m174 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[93m175 [m[4m            fflush([m[4m[38;5;130mstderr[m[4m);                                                    [m[4m[100m [m[4m                                [m[30;1H[33m176 [m[79C[100m [m
[33m177 [m[12C[32mint[m status;[56C[100m [m
[33m178 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m
[33m179 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m
[33m180 [m[16Cexit([38;5;130m99[m);[54C[100m [m
[33m181 [m[12C}[66C[100m [m
[33m182 [m[8C} [33melse[m {[63C[100m [m
[33m183 [m[12C[36m// parent[m[58C[100m [m
[33m184 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m
[33m185 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m
[33m186 [m[79C[100m [m
[33m187 [m[12Cjobid++;[59C[100m [m
[33m188 [m[8C}[70C[100m [m
[33m189 [m    }[74C[100m [m
[33m190 [m}[78C[100m [m
[33m191 [m[79C[100m [m
[33m192 [m[36m/* report()[m[68C[100m [m
[33m193 [m[36m * --------[m[68C[100m [m
[33m194 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m
[33m195 [m[36m *[m[77C[100m [m
[33m196 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m197 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m198 [m[36m */[m[76C[100m [m
[33m199 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[43C[100m [m
[33m200 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m201 [m[79C[100m [m
[33m202 [m    [36m// Header row[m[62C[100m [m
[33m203 [m    printf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[46C[100m [m
[33m204 [m[79C[100m [m[59;99H175,13[8C38%[29;17H[?25h[?12$p[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m144 [m[8Cjobs = rea[38;5;248m[104mlloc[m(jobs, (jobid + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));[16C[100m [m
[33m145 [m[79C[100m [m
[33m146 [m[8Cstrcpy(jobs[jobid].name, args[[38;5;130m0[m]);[37C[100m [m[59;1H[K[59;99H175,13[8C38%[32;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m141 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m142 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m143 [m    } [33melse[m {[67C[100m [m[59;99H[K[59;99H175,13[8C37%[35;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m138 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m139 [m[36m */[m[76C[100m [m
[33m140 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs) {[44C[100m [m[59;99H[K[59;99H175,13[8C36%[38;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m135 [m[36m * of the child process is unchanged[m[43C[100m [m
[33m136 [m[36m *[m[77C[100m [m
[33m137 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[59;99H[K[59;99H175,13[8C35%[41;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m132 [m[36m * -------[m[69C[100m [m
[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m
[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m[59;99H[K[59;99H175,13[8C34%[44;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m129 [m}[78C[100m [m
[33m130 [m[79C[100m [m
[33m131 [m[36m/* spawn()[m[69C[100m [m[59;99H[K[59;99H175,13[8C34%[47;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m126 [m[79C[100m [m
[33m127 [m    free(jobs);[64C[100m [m
[33m128 [m    [33mreturn[m [38;5;130m0[m;[66C[100m [m[59;99H[K[59;99H175,13[8C33%[50;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m123 [m[8Cfree(input);[59C[100m [m
[33m124 [m[8Cfree(tokens);[58C[100m [m
[33m125 [m    }[74C[100m [m[59;99H[K[59;99H175,13[8C32%[53;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m120 [m[8Cprintf([38;5;130m"> "[m);[58C[100m [m
[33m121 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m122 [m[79C[100m [m[59;99H[K[59;99H175,13[8C31%[56;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m117 [m[12Cprintf([38;5;130m"Error: Invalid command[m[35m\n[m[38;5;130m"[m);[32C[100m [m
[33m118 [m[8C}[70C[100m [m
[33m119 [m[79C[100m [m[58;1H[93m174 [m[4m            fflush([m[4m[38;5;130mstdout[m[4m);                                                    [m[4m[100m [m[4m                                [m[59;99H[K[59;99H174,13[8C30%[58;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m175 [m[12Cfflush([38;5;130mstderr[m);[52C[100m [m
[33m176 [m[79C[100m [m
[33m177 [m[12C[32mint[m status;[56C[100m [m[59;99H[K[59;99H174,13[8C31%[55;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m178 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m
[33m179 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m
[33m180 [m[16Cexit([38;5;130m99[m);[54C[100m [m[59;99H[K[59;99H174,13[8C32%[52;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m181 [m[12C}[66C[100m [m
[33m182 [m[8C} [33melse[m {[63C[100m [m
[33m183 [m[12C[36m// parent[m[58C[100m [m[59;99H[K[59;99H174,13[8C33%[49;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m123 [m[8Cfree(input);[59C[100m [m
[33m124 [m[8Cfree(tokens);[58C[100m [m
[33m125 [m    }[74C[100m [m[59;99H[K[59;99H174,13[8C32%[52;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m120 [m[8Cprintf([38;5;130m"> "[m);[58C[100m [m
[33m121 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m122 [m[79C[100m [m[59;99H[K[59;99H174,13[8C31%[55;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m117 [m[12Cprintf([38;5;130m"Error: Invalid command[m[35m\n[m[38;5;130m"[m);[32C[100m [m
[33m118 [m[8C}[70C[100m [m
[33m119 [m[79C[100m [m[59;99H[K[59;99H174,13[8C30%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m114 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"cleanup"[m)) {[28C[100m [m
[33m115 [m[12Ccleanup();[57C[100m [m
[33m116 [m[8C} [33melse[m {[63C[100m [m[58;1H[93m171 [m[4m            dup2(jobs[jobid].up[WRITE], STDOUT_FILENO);                        [m[4m[100m [m[4m                                [m[59;99H[K[59;99H171,13[8C30%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m111 [m[12Crcv(args, spcs);[51C[100m [m
[33m112 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"eof"[m)) {[32C[100m [m
[33m113 [m[12Ceof(args, spcs);[51C[100m [m[58;1H[93m168 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H168,12[8C29%[58;16H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m108 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"send"[m)) {[31C[100m [m
[33m109 [m[12Csend(args, spcs);[50C[100m [m
[33m110 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"rcv"[m)) {[32C[100m [m[58;1H[93m165 [m[4m            fflush([m[4m[38;5;130mstdout[m[4m);                                                    [m[4m[100m [m[4m                                [m[59;99H[K[59;99H165,13[8C28%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m105 [m[12Ccall_signal(args, spcs);[43C[100m [m
[33m106 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"sleep"[m)) {[30C[100m [m
[33m107 [m[12Chq_wait(args, spcs);[47C[100m [m[58;1H[93m162 [m[4m        [m[4m[33mif[m[4m (!jobs[jobid].pid) {                                                [m[4m[100m [m[4m                                [m[59;99H[K[59;99H162,13[8C27%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m102 [m[12C[36m// Report[m[58C[100m [m
[33m103 [m[12Creport(args, spcs);[48C[100m [m
[33m104 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"signal"[m)) {[29C[100m [m[58;1H[93m159 [m[4m        fflush([m[4m[38;5;130mstdout[m[4m);                                                        [m[4m[100m [m[4m                                [m[59;99H[K[59;99H159,13[8C26%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 99 [m[12C[36m// spawn[m[59C[100m [m
[33m100 [m[12Cspawn(args, spcs);[49C[100m [m
[33m101 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"report"[m)) {[29C[100m [m[55;43H[46m{[m


[93m156 [m[4m        [m[4m[46m}[m[4m                                                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H156,9[9C26%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 96 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m 97 [m[79C[100m [m
[33m 98 [m[8C[33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"spawn"[m)) {[37C[100m [m[58;1H[93m153 [m[4m        [m[4m[33mif[m[4m (pipe(jobs[jobid].up) < [m[4m[38;5;130m0[m[4m) {                                        [m[4m[100m [m[4m                                [m[59;99H[K[59;99H153,13[8C25%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 93 [m[12Cargs[i - [38;5;130m1[m] = tokens[i];[43C[100m [m
[33m 94 [m[8C}[70C[100m [m
[33m 95 [m[8Cargs[spcs - [38;5;130m1[m] = [38;5;130m0[m;[52C[100m [m[58;1H[93m150 [m[4m            exit([m[4m[38;5;130m1[m[4m);                                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H150,13[8C24%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 90 [m[79C[100m [m
[33m 91 [m[8C[32mchar[m* args[spcs];[54C[100m [m
[33m 92 [m[8C[33mfor[m ([32mint[m i = [38;5;130m1[m; i < spcs; i++) {[39C[100m [m[58;1H[93m147 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H147,8[9C23%[58;12H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 87 [m[12C[33mcontinue[m;[58C[100m [m
[33m 88 [m[8C}[70C[100m [m
[33m 89 [m[8Ctokens = split_space_not_quote(input, &spcs);[26C[100m [m[58;1H[93m144 [m[4m        jobs = rea[m[4m[38;5;248m[104mlloc[m[4m(jobs, (jobid + [m[4m[38;5;130m1[m[4m) * [m[4m[33msizeof[m[4m([m[4m[32mstruct[m[4m Job));                [m[4m[100m [m[4m                                [m[59;99H[K[59;99H144,13[8C22%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 84 [m[8C[33mif[m (!strcmp(input, [38;5;130m""[m)) {[46C[100m [m
[33m 85 [m[12Cprintf([38;5;130m"> "[m);[54C[100m [m
[33m 86 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m[58;1H[93m141 [m[4m    [m[4m[33mif[m[4m (spcs < [m[4m[38;5;130m2[m[4m) {                                                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H141,13[8C22%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 81 [m    [33mwhile[m ((input = read_line([38;5;130mstdin[m)) != [38;5;130mNULL[m) {[31C[100m [m
[33m 82 [m[8C[32mint[m spcs = [38;5;130m0[m;[58C[100m [m
[33m 83 [m[79C[100m [m[58;1H[93m138 [m[4m[36m * spcs: number of original tokens[m[4m                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H138,13[8C21%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 78 [m    printf([38;5;130m"> "[m);[62C[100m [m
[33m 79 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m 80 [m    [36m// prompt loop[m[61C[100m [m[58;1H[93m135 [m[4m[36m * of the child process is unchanged[m[4m                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H135,13[8C20%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 75 [m[79C[100m [m
[33m 76 [m    signal([38;5;130mSIGINT[m, handle_signal);[45C[100m [m
[33m 77 [m    signal([38;5;130mSIGCHLD[m, handle_signal);[44C[100m [m[58;1H[93m132 [m[4m[36m * -------[m[4m                                                                     [m[4m[100m [m[4m                                [m[59;99H[K[59;99H132,10[8C19%[58;14H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 72 [m    [32mchar[m** tokens;[61C[100m [m
[33m 73 [m[79C[100m [m
[33m 74 [m    jobs = ma[38;5;248m[104mlloc[m([38;5;130m0[m * [33msizeof[m([32mstruct[m Job));[37C[100m [m[58;1H[93m129 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H129,1[9C18%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 69 [m[79C[100m [m
[33m 70 [m[32mint[m main([32mint[m argc, [32mchar[m* argv[]) {[45C[100m [m
[33m 71 [m    [32mchar[m* input;[63C[100m [m[58;1H[93m126 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H126,4[9C18%[58;8H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 66 [m[79C[100m [m
[33m 67 [m[79C[100m [m
[33m 68 [m[36m// Program[m[69C[100m [m[58;1H[93m123 [m[4m        free[m[4m[46m([m[4minput[m[4m[46m)[m[4m;                                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H123,13[8C17%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 63 [m[79C[100m [m
[33m 64 [m[32mint[m jobid = [38;5;130m0[m;[65C[100m [m
[33m 65 [m[32mstruct[m Job* jobs;[62C[100m [m[58;1H[93m120 [m[4m        printf([m[4m[38;5;130m"> "[m[4m);                                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H120,13[8C16%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 60 [m};[77C[100m [m
[33m 61 [m[79C[100m [m
[33m 62 [m[36m// Globals[m[69C[100m [m[58;1H[93m117 [m[4m            printf([m[4m[38;5;130m"Error: Invalid command[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                [m[4m[100m [m[4m                                [m[59;99H[K[59;99H117,13[8C15%[58;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m118 [m[8C}[70C[100m [m
[33m119 [m[79C[100m [m
[33m120 [m[8Cprintf([38;5;130m"> "[m);[58C[100m [m[59;99H[K[59;99H117,13[8C16%[55;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m121 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m122 [m[79C[100m [m
[33m123 [m[8Cfree(input);[59C[100m [m[59;99H[K[59;99H117,13[8C17%[52;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m124 [m[8Cfree(tokens);[58C[100m [m
[33m125 [m    }[74C[100m [m
[33m126 [m[79C[100m [m[59;99H[K[59;99H117,13[8C18%[49;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m127 [m    free(jobs);[64C[100m [m
[33m128 [m    [33mreturn[m [38;5;130m0[m;[66C[100m [m
[33m129 [m}[78C[100m [m[59;99H[K[59;99H117,13[8C18%[46;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m130 [m[79C[100m [m
[33m131 [m[36m/* spawn()[m[69C[100m [m
[33m132 [m[36m * -------[m[69C[100m [m[59;99H[K[59;99H117,13[8C19%[43;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m
[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m
[33m135 [m[36m * of the child process is unchanged[m[43C[100m [m[59;99H[K[59;99H117,13[8C20%[40;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m136 [m[36m *[m[77C[100m [m
[33m137 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m138 [m[36m * spcs: number of original tokens[m[45C[100m [m[59;99H[K[59;99H117,13[8C21%[37;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m139 [m[36m */[m[76C[100m [m
[33m140 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs) {[44C[100m [m
[33m141 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m[59;99H[K[59;99H117,13[8C22%[34;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m142 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m143 [m    } [33melse[m {[67C[100m [m
[33m144 [m[8Cjobs = rea[38;5;248m[104mlloc[m(jobs, (jobid + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));[16C[100m [m[59;99H[K[59;99H117,13[8C22%[31;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m145 [m[79C[100m [m
[33m146 [m[8Cstrcpy(jobs[jobid].name, args[[38;5;130m0[m]);[37C[100m [m
[33m147 [m[79C[100m [m[59;99H[K[59;99H117,13[8C23%[28;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m148 [m[8C[33mif[m (pipe(jobs[jobid].down) < [38;5;130m0[m) {[38C[100m [m
[33m149 [m[12Cperror([38;5;130m"Creating down pipe"[m);[38C[100m [m
[33m150 [m[12Cexit([38;5;130m1[m);[59C[100m [m[59;99H[K[59;99H117,13[8C24%[25;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m151 [m[8C}[70C[100m [m
[33m152 [m[79C[100m [m
[33m153 [m[8C[33mif[m (pipe(jobs[jobid].up) < [38;5;130m0[m) {[40C[100m [m[59;99H[K[59;99H117,13[8C25%[22;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m154 [m[12Cperror([38;5;130m"Creating up pipe"[m);[40C[100m [m
[33m155 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m156 [m[8C}[70C[100m [m[59;99H[K[59;99H117,13[8C26%[19;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m157 [m[79C[100m [m
[33m158 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, jobid);[28C[100m [m
[33m159 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m[59;99H[K[59;99H117,13[8C26%[16;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m160 [m[79C[100m [m
[33m161 [m[8Cjobs[jobid].pid = fork();[46C[100m [m
[33m162 [m[8C[33mif[m (!jobs[jobid].pid) {[48C[100m [m[59;99H[K[59;99H117,13[8C27%[13;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m163 [m[12C[36m// child[m[59C[100m [m
[33m164 [m[79C[100m [m
[33m165 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m[59;99H[K[59;99H117,13[8C28%[10;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m166 [m[12Cclose(jobs[jobid].down[WRITE]);[36C[100m [m
[33m167 [m[12Cclose(jobs[jobid].up[READ]);[39C[100m [m
[33m168 [m[79C[100m [m[59;99H[K[59;99H117,13[8C29%[7;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m169 [m[12Cdup2(jobs[jobid].down[READ], STDIN_FILENO);[24C[100m [m
[33m170 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m
[33m171 [m[12Cdup2(jobs[jobid].up[WRITE], STDOUT_FILENO);[24C[100m [m[59;99H[K[59;99H117,13[8C30%[4;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m172 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m
[33m173 [m[79C[100m [m
[33m174 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m[59;99H[K[59;99H117,13[8C30%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m120 [m[4m        printf([m[4m[38;5;130m"> "[m[4m);                                                          [m[4m[100m [m[4m                                [m[56;1H[33m175 [m[12Cfflush([38;5;130mstderr[m);[52C[100m [m
[33m176 [m[79C[100m [m
[33m177 [m[12C[32mint[m status;[56C[100m [m[59;99H[K[59;99H120,13[8C31%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m123 [m[4m        free[m[4m[46m([m[4minput[m[4m[46m)[m[4m;                                                           [m[4m[100m [m[4m                                [m[56;1H[33m178 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m
[33m179 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m
[33m180 [m[16Cexit([38;5;130m99[m);[54C[100m [m[59;99H[K[59;99H123,13[8C32%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m126 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m181 [m[12C}[66C[100m [m
[33m182 [m[8C} [33melse[m {[63C[100m [m
[33m183 [m[12C[36m// parent[m[58C[100m [m[59;99H[K[59;99H126,4[9C33%[1;8H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m129 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[56;1H[33m184 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m
[33m185 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m
[33m186 [m[79C[100m [m[59;99H[K[59;99H129,1[9C34%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m132 [m[4m[36m * -------[m[4m                                                                     [m[4m[100m [m[4m                                [m[56;1H[33m187 [m[12Cjobid++;[59C[100m [m
[33m188 [m[8C}[70C[100m [m
[33m189 [m    }[74C[100m [m[59;99H[K[59;99H132,10[8C34%[1;14H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m135 [m[4m[36m * of the child process is unchanged[m[4m                                           [m[4m[100m [m[4m                                [m[56;1H[33m190 [m}[78C[100m [m
[33m191 [m[79C[100m [m
[33m192 [m[36m/* report()[m[68C[100m [m[59;99H[K[59;99H135,13[8C35%[1;17H[?25h[?25l[33m135 [m[36m * of the child process is unchanged[m                                           [100m [m[1;85H[K[27;1H[93m161 [m[4m        jobs[jobid].pid = fork();                                              [m[4m[100m [m[4m                                [m[59;100H61,25[27;29H[?25h[?25l[33m161 [m        jobs[jobid].pid [7m[48;5;242m= fork(); [m                                             [100m [m[27;85H[K[28;1H[93m162 [m[7m[48;5;242m        [m[7m[33m[48;5;242mif[m[7m[48;5;242m (!jobs[jobid].pi[m[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H162,28[8C35%[28;32H[?25h[?25l[27;29H= fork(); 
[33m162 [m        [33mif[m (!jobs[jobid].pi


[93m165 [m[4m            fflush([m[4m[38;5;130mstdout[m[4m);                                                    [m[4m[100m [m[4m                                [m[59;1H[K[59;99H165,20[8C35%[31;24H[?25h[?25l[33m165 [m            fflush([7m[38;5;130m[48;5;242mstdout[m[7m[48;5;242m); [m                                                   [100m [m[31;85H[K[32;5H[7m[48;5;242m            close(jobs[jobid].down[WRITE]); [33;5H            close(jobs[jobid].up[READ]); [34;5H             [35;5H            dup2(jobs[jobid].down[READ], STDIN_FILENO); [36;5H            close(jobs[jobid].down[READ]); [37;5H            dup2(jobs[jobid].up[WRITE], STDOUT_FILENO); [m
[93m172 [m[7m[48;5;242m            close(jobs[j[m[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H172,25[8C35%[38;29H[?25h[?25l[31;24H[38;5;130mstdout[m); [32;5H            close(jobs[jobid].down[WRITE]); [33;5H            close(jobs[jobid].up[READ]); [34;5H             [35;5H            dup2(jobs[jobid].down[READ], STDIN_FILENO); [36;5H            close(jobs[jobid].down[READ]); [37;5H            dup2(jobs[jobid].up[WRITE], STDOUT_FILENO); 
[33m172 [m            close(jobs[j
[93m173 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;1H[K[59;99H173,12[8C35%[39;16H[?25h[?25l[33m173 [m                                                                               [100m [m[39;85H[K[44;1H[93m178 [m[4m            status = execvp(args[[m[4m[38;5;130m0[m[4m], args);                                    [m[4m[100m [m[4m                                [m[59;101H8,23[44;27H[?25h[?25l[33m178 [m            status = execvp(args[[38;5;130m0[m], args);                                    [100m [m[44;85H[K[50;1H[93m184 [m[4m            close[m[4m[46m([m[4mjobs[jobid].down[READ][m[4m[46m)[m[4m;                                     [m[4m[100m [m[4m                                [m[59;100H84,18[50;22H[?25h[?25l[33m184 [m            close[7m[48;5;242m(jobs[jobid].down[READ]); [m                                    [100m [m[50;85H[K[51;5H[7m[48;5;242m            close(jobs[jobid].up[WRITE]); [52;5H [m
[93m187 [m[7m[48;5;242m            jobid+[m[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H187,19[8C35%[53;23H[?25h[?25l[50;22H(jobs[jobid].down[READ]); [51;5H            close(jobs[jobid].up[WRITE]); [52;5H [53;5H[4m            jobid++;                                                           [m[4m[100m [m[4m                                [m[59;1H[K[59;99H187,19[8C35%[53;23H[?25h[?25l[35;1H[93m169 [m[4m            dup2(jobs[jobid].down[READ], STDIN_FILENO);                        [m[4m[100m [m[4m                                [m[53;1H[33m187 [m            jobid++;                                                           [100m [m[53;85H[K[59;100H69,18[35;22H[?25h[?25l[35;5H            dup2([7m[48;5;242mjobs[jobid].do[mwn[READ], STDIN_FILENO);                        [100m [m[35;85H[K[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H169,32[8C35%[35;36H[?25h[?25l[33m169 [m[17Cjobs[jobid].do
[93m170 [m[4m            close(jobs[jobid].down[READ]);                                     [m[4m[100m [m[4m                                [m[59;1H[K[59;99H170,17[8C35%[36;21H[?25h[?25l[36;5H            clos[7m[48;5;242me(jobs[jobid].down[m[46m[[mREAD[46m][m);                                     [100m [m[36;85H[K[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H170,35[8C35%[36;39H[?25h[?25l[35;1H[93m169 [m[4m            dup2(jobs[jobid].down[READ], STDIN_FILENO);                        [m[4m[100m [m[4m                                [m[36;1H[33m170 [m[16Ce(jobs[jobid].down[READ][59;1H[K[59;99H169,44[8C35%[35;48H[?25h[?25l[33m169 [m            dup2(jobs[jobid].down[READ], ST[7m[48;5;242mDIN_FILENO); [m                       [100m [m[35;85H[K[36;1H[93m170 [m[7m[48;5;242m            close(jobs[jobid].down[READ]);[m[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H170,43[8C35%[36;47H[?25h[?25l[35;1H[93m169 [m[4m            dup2(jobs[jobid].down[READ], STDIN_FILENO);                        [m[4m[100m [m[4m                                [m[36;1H[33m170 [m            close(jobs[jobid].down[READ]);[59;1H[K[59;99H169,52[8C35%[35;56H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m132 [m[36m * -------[m[69C[100m [m
[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m
[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m[59;99H[K[59;99H169,52[8C34%[38;56H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m129 [m}[78C[100m [m
[33m130 [m[79C[100m [m
[33m131 [m[36m/* spawn()[m[69C[100m [m[59;99H[K[59;99H169,52[8C34%[41;56H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m126 [m[79C[100m [m
[33m127 [m    free(jobs);[64C[100m [m
[33m128 [m    [33mreturn[m [38;5;130m0[m;[66C[100m [m[59;99H[K[59;99H169,52[8C33%[44;56H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m123 [m[8Cfree(input);[59C[100m [m
[33m124 [m[8Cfree(tokens);[58C[100m [m
[33m125 [m    }[74C[100m [m[59;99H[K[59;99H169,52[8C32%[47;56H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m120 [m[8Cprintf([38;5;130m"> "[m);[58C[100m [m
[33m121 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m122 [m[79C[100m [m[59;99H[K[59;99H169,52[8C31%[50;56H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m117 [m[12Cprintf([38;5;130m"Error: Invalid command[m[35m\n[m[38;5;130m"[m);[32C[100m [m
[33m118 [m[8C}[70C[100m [m
[33m119 [m[79C[100m [m[59;99H[K[59;99H169,52[8C30%[53;56H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m114 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"cleanup"[m)) {[28C[100m [m
[33m115 [m[12Ccleanup();[57C[100m [m
[33m116 [m[8C} [33melse[m {[63C[100m [m[59;99H[K[59;99H169,52[8C30%[56;56H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m111 [m[12Crcv(args, spcs);[51C[100m [m
[33m112 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"eof"[m)) {[32C[100m [m
[33m113 [m[12Ceof(args, spcs);[51C[100m [m[58;1H[93m168 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H168,12[8C29%[58;16H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m108 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"send"[m)) {[31C[100m [m
[33m109 [m[12Csend(args, spcs);[50C[100m [m
[33m110 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"rcv"[m)) {[32C[100m [m[58;1H[93m165 [m[4m            fflush([m[4m[38;5;130mstdout[m[4m);                                                    [m[4m[100m [m[4m                                [m[59;99H[K[59;99H165,27[8C28%[58;31H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m105 [m[12Ccall_signal(args, spcs);[43C[100m [m
[33m106 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"sleep"[m)) {[30C[100m [m
[33m107 [m[12Chq_wait(args, spcs);[47C[100m [m[58;1H[93m162 [m[4m        [m[4m[33mif[m[4m (!jobs[jobid].pid) {                                                [m[4m[100m [m[4m                                [m[59;99H[K[59;99H162,31[8C27%[58;35H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m102 [m[12C[36m// Report[m[58C[100m [m
[33m103 [m[12Creport(args, spcs);[48C[100m [m
[33m104 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"signal"[m)) {[29C[100m [m[58;1H[93m159 [m[4m        fflush([m[4m[38;5;130mstdout[m[4m);                                                        [m[4m[100m [m[4m                                [m[59;99H[K[59;99H159,23[8C26%[58;27H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 99 [m[12C[36m// spawn[m[59C[100m [m
[33m100 [m[12Cspawn(args, spcs);[49C[100m [m
[33m101 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"report"[m)) {[29C[100m [m[55;43H[46m{[m


[93m156 [m[4m        [m[4m[46m}[m[4m                                                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H156,9[9C26%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 96 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m 97 [m[79C[100m [m
[33m 98 [m[8C[33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"spawn"[m)) {[37C[100m [m[58;1H[93m153 [m[4m        [m[4m[33mif[m[4m (pipe(jobs[jobid].up) < [m[4m[38;5;130m0[m[4m) {                                        [m[4m[100m [m[4m                                [m[59;99H[K[59;99H153,39[8C25%[58;43H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 93 [m[12Cargs[i - [38;5;130m1[m] = tokens[i];[43C[100m [m
[33m 94 [m[8C}[70C[100m [m
[33m 95 [m[8Cargs[spcs - [38;5;130m1[m] = [38;5;130m0[m;[52C[100m [m[58;1H[93m150 [m[4m            exit([m[4m[38;5;130m1[m[4m);                                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H150,20[8C24%[58;24H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 90 [m[79C[100m [m
[33m 91 [m[8C[32mchar[m* args[spcs];[54C[100m [m
[33m 92 [m[8C[33mfor[m ([32mint[m i = [38;5;130m1[m; i < spcs; i++) {[39C[100m [m[58;1H[93m147 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H147,8[9C23%[58;12H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 87 [m[12C[33mcontinue[m;[58C[100m [m
[33m 88 [m[8C}[70C[100m [m
[33m 89 [m[8Ctokens = split_space_not_quote(input, &spcs);[26C[100m [m[58;1H[93m144 [m[4m        jobs = rea[m[4m[38;5;248m[104mlloc[m[4m(jobs, (jobid + [m[4m[38;5;130m1[m[4m) * [m[4m[33msizeof[m[4m([m[4m[32mstruct[m[4m Job));                [m[4m[100m [m[4m                                [m[59;99H[K[59;99H144,52[8C22%[58;56H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 84 [m[8C[33mif[m (!strcmp(input, [38;5;130m""[m)) {[46C[100m [m
[33m 85 [m[12Cprintf([38;5;130m"> "[m);[54C[100m [m
[33m 86 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m[58;1H[93m141 [m[4m    [m[4m[33mif[m[4m (spcs < [m[4m[38;5;130m2[m[4m) {                                                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H141,19[8C22%[58;23H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 81 [m    [33mwhile[m ((input = read_line([38;5;130mstdin[m)) != [38;5;130mNULL[m) {[31C[100m [m
[33m 82 [m[8C[32mint[m spcs = [38;5;130m0[m;[58C[100m [m
[33m 83 [m[79C[100m [m[58;1H[93m138 [m[4m[36m * spcs: number of original tokens[m[4m                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H138,34[8C21%[58;38H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 78 [m    printf([38;5;130m"> "[m);[62C[100m [m
[33m 79 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m 80 [m    [36m// prompt loop[m[61C[100m [m[58;1H[93m135 [m[4m[36m * of the child process is unchanged[m[4m                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H135,36[8C20%[58;40H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 75 [m[79C[100m [m
[33m 76 [m    signal([38;5;130mSIGINT[m, handle_signal);[45C[100m [m
[33m 77 [m    signal([38;5;130mSIGCHLD[m, handle_signal);[44C[100m [m[58;1H[93m132 [m[4m[36m * -------[m[4m                                                                     [m[4m[100m [m[4m                                [m[59;99H[K[59;99H132,10[8C19%[58;14H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 72 [m    [32mchar[m** tokens;[61C[100m [m
[33m 73 [m[79C[100m [m
[33m 74 [m    jobs = ma[38;5;248m[104mlloc[m([38;5;130m0[m * [33msizeof[m([32mstruct[m Job));[37C[100m [m[58;1H[93m129 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H129,1[9C18%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 69 [m[79C[100m [m
[33m 70 [m[32mint[m main([32mint[m argc, [32mchar[m* argv[]) {[45C[100m [m
[33m 71 [m    [32mchar[m* input;[63C[100m [m[58;1H[93m126 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H126,4[9C18%[58;8H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m127 [m    free(jobs);[64C[100m [m
[33m128 [m    [33mreturn[m [38;5;130m0[m;[66C[100m [m
[33m129 [m}[78C[100m [m[59;99H[K[59;99H126,4[9C18%[55;8H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m130 [m[79C[100m [m
[33m131 [m[36m/* spawn()[m[69C[100m [m
[33m132 [m[36m * -------[m[69C[100m [m[59;99H[K[59;99H126,4[9C19%[52;8H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m
[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m
[33m135 [m[36m * of the child process is unchanged[m[43C[100m [m[59;99H[K[59;99H126,4[9C20%[49;8H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m136 [m[36m *[m[77C[100m [m
[33m137 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m138 [m[36m * spcs: number of original tokens[m[45C[100m [m[59;99H[K[59;99H126,4[9C21%[46;8H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m139 [m[36m */[m[76C[100m [m
[33m140 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs) {[44C[100m [m
[33m141 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m[59;99H[K[59;99H126,4[9C22%[43;8H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m142 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m143 [m    } [33melse[m {[67C[100m [m
[33m144 [m[8Cjobs = rea[38;5;248m[104mlloc[m(jobs, (jobid + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));[16C[100m [m[59;99H[K[59;99H126,4[9C22%[40;8H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m145 [m[79C[100m [m
[33m146 [m[8Cstrcpy(jobs[jobid].name, args[[38;5;130m0[m]);[37C[100m [m
[33m147 [m[79C[100m [m[59;99H[K[59;99H126,4[9C23%[37;8H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m148 [m[8C[33mif[m (pipe(jobs[jobid].down) < [38;5;130m0[m) {[38C[100m [m
[33m149 [m[12Cperror([38;5;130m"Creating down pipe"[m);[38C[100m [m
[33m150 [m[12Cexit([38;5;130m1[m);[59C[100m [m[59;99H[K[59;99H126,4[9C24%[34;8H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m151 [m[8C}[70C[100m [m
[33m152 [m[79C[100m [m
[33m153 [m[8C[33mif[m (pipe(jobs[jobid].up) < [38;5;130m0[m) {[40C[100m [m[59;99H[K[59;99H126,4[9C25%[31;8H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m154 [m[12Cperror([38;5;130m"Creating up pipe"[m);[40C[100m [m
[33m155 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m156 [m[8C}[70C[100m [m[59;99H[K[59;99H126,4[9C26%[28;8H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m157 [m[79C[100m [m
[33m158 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, jobid);[28C[100m [m
[33m159 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m[59;99H[K[59;99H126,4[9C26%[25;8H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m160 [m[79C[100m [m
[33m161 [m[8Cjobs[jobid].pid = fork();[46C[100m [m
[33m162 [m[8C[33mif[m (!jobs[jobid].pid) {[48C[100m [m[59;99H[K[59;99H126,4[9C27%[22;8H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m163 [m[12C[36m// child[m[59C[100m [m
[33m164 [m[79C[100m [m
[33m165 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m[59;99H[K[59;99H126,4[9C28%[19;8H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m166 [m[12Cclose(jobs[jobid].down[WRITE]);[36C[100m [m
[33m167 [m[12Cclose(jobs[jobid].up[READ]);[39C[100m [m
[33m168 [m[79C[100m [m[59;99H[K[59;99H126,4[9C29%[16;8H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m169 [m[12Cdup2(jobs[jobid].down[READ], STDIN_FILENO);[24C[100m [m
[33m170 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m
[33m171 [m[12Cdup2(jobs[jobid].up[WRITE], STDOUT_FILENO);[24C[100m [m[59;99H[K[59;99H126,4[9C30%[13;8H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m172 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m
[33m173 [m[79C[100m [m
[33m174 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m[59;99H[K[59;99H126,4[9C30%[10;8H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m175 [m[12Cfflush([38;5;130mstderr[m);[52C[100m [m
[33m176 [m[79C[100m [m
[33m177 [m[12C[32mint[m status;[56C[100m [m[59;99H[K[59;99H126,4[9C31%[7;8H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m178 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m
[33m179 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m
[33m180 [m[16Cexit([38;5;130m99[m);[54C[100m [m[59;99H[K[59;99H126,4[9C32%[4;8H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m181 [m[12C}[66C[100m [m
[33m182 [m[8C} [33melse[m {[63C[100m [m
[33m183 [m[12C[36m// parent[m[58C[100m [m[59;99H[K[59;99H126,4[9C33%[1;8H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m129 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[56;1H[33m184 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m
[33m185 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m
[33m186 [m[79C[100m [m[59;99H[K[59;99H129,1[9C34%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m132 [m[4m[36m * -------[m[4m                                                                     [m[4m[100m [m[4m                                [m[56;1H[33m187 [m[12Cjobid++;[59C[100m [m
[33m188 [m[8C}[70C[100m [m
[33m189 [m    }[74C[100m [m[59;99H[K[59;99H132,10[8C34%[1;14H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m135 [m[4m[36m * of the child process is unchanged[m[4m                                           [m[4m[100m [m[4m                                [m[56;1H[33m190 [m}[78C[100m [m
[33m191 [m[79C[100m [m
[33m192 [m[36m/* report()[m[68C[100m [m[59;99H[K[59;99H135,36[8C35%[1;40H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m138 [m[4m[36m * spcs: number of original tokens[m[4m                                             [m[4m[100m [m[4m                                [m[56;1H[33m193 [m[36m * --------[m[68C[100m [m
[33m194 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m
[33m195 [m[36m *[m[77C[100m [m[59;99H[K[59;99H138,34[8C36%[1;38H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m141 [m[4m    [m[4m[33mif[m[4m (spcs < [m[4m[38;5;130m2[m[4m) [m[4m[46m{[m[4m                                                            [m[4m[100m [m[4m                                [m[3;9H[46m}[m[56;1H[33m196 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m197 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m198 [m[36m */[m[76C[100m [m[59;99H[K[59;99H141,19[8C37%[1;23H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m144 [m[4m        jobs = rea[m[4m[38;5;248m[104mlloc[m[4m(jobs, (jobid + [m[4m[38;5;130m1[m[4m) * [m[4m[33msizeof[m[4m([m[4m[32mstruct[m[4m Job));                [m[4m[100m [m[4m                                [m[56;1H[33m199 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[43C[100m [m
[33m200 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m201 [m[79C[100m [m[59;99H[K[59;99H144,52[8C38%[1;56H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m147 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m202 [m    [36m// Header row[m[62C[100m [m
[33m203 [m    printf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[46C[100m [m
[33m204 [m[79C[100m [m[59;99H[K[59;99H147,8[9C38%[1;12H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m150 [m[4m            exit([m[4m[38;5;130m1[m[4m);                                                           [m[4m[100m [m[4m                                [m[56;1H[33m205 [m    [36m// Job status output dependent on arg present status[m[23C[100m [m
[33m206 [m[79C[100m [m
[33m207 [m    [36m// check args[m[62C[100m [m[59;99H[K[59;99H150,20[8C39%[1;24H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m153 [m[4m        [m[4m[33mif[m[4m (pipe(jobs[jobid].up) < [m[4m[38;5;130m0[m[4m) [m[4m[46m{[m[4m                                        [m[4m[100m [m[4m                                [m[4;13H[46m}[m[56;1H[33m208 [m    [33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[37C[100m [m
[33m209 [m[8C[33mfor[m ([32mint[m i = [38;5;130m0[m; i < jobid; i++) {[38C[100m [m
[33m210 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[31C[100m [m[59;99H[K[59;99H153,39[8C40%[1;43H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m156 [m[4m        }                                                                      [m[4m[100m [m[4m                                [m[56;1H[33m211 [m[12C[33mif[m (!jobs[i].finished) {[43C[100m [m
[33m212 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m213 [m[12C} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[28C[100m [m[59;99H[K[59;99H156,9[9C41%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m159 [m[4m        fflush([m[4m[38;5;130mstdout[m[4m);                                                        [m[4m[100m [m[4m                                [m[56;1H[33m214 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[12C[100m [m
[33m215 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {[26C[100m [m
[33m216 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[11C[100m [m[59;99H[K[59;99H159,23[8C42%[1;27H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m162 [m[4m        [m[4m[33mif[m[4m (!jobs[jobid].pid) [m[4m[46m{[m[4m                                                [m[4m[100m [m[4m                                [m[21;13H[46m}[m[56;1H[33m217 [m[12C} [33melse[m {[59C[100m [m
[33m218 [m[16Cprintf([38;5;130m"Error[m[35m\n[m[38;5;130m"[m);[45C[100m [m
[33m219 [m[12C}[66C[100m [m[59;99H[K[59;99H162,31[8C42%[1;35H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m165 [m[4m            fflush([m[4m[38;5;130mstdout[m[4m);                                                    [m[4m[100m [m[4m                                [m[18;13H}[56;1H[33m220 [m[8C}[70C[100m [m
[33m221 [m[79C[100m [m
[33m222 [m    } [33melse[m [33mif[m (spcs > [38;5;130m1[m) {      [36m// report on specific job[m[22C[100m [m[59;99H[K[59;99H165,27[8C43%[1;31H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m168 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m223 [m[8C[36m// check for job tokens[1][m[45C[100m [m
[33m224 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m225 [m[12C[32mint[m jobq = atoi(args[[38;5;130m0[m]);[42C[100m [m[59;99H[K[59;99H168,12[8C44%[1;16H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m171 [m[4m            dup2(jobs[jobid].up[WRITE], STDOUT_FILENO);                        [m[4m[100m [m[4m                                [m[56;1H[33m226 [m[79C[100m [m
[33m227 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, jobq, jobs[jobq].name);[25C[100m [m
[33m228 [m[79C[100m [m[59;99H[K[59;99H171,52[8C45%[1;56H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m174 [m[4m            fflush([m[4m[38;5;130mstdout[m[4m);                                                    [m[4m[100m [m[4m                                [m[56;1H[33m229 [m[12C[33mif[m (WIFEXITED(jobs[jobq].status)) {[32C[100m [m
[33m230 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WEXITSTATUS(jobs[jobq].status));[8C[100m [m
[33m231 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[jobq].status)) {[23C[100m [m[59;99H[K[59;99H174,27[8C46%[1;31H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m177 [m[4m            [m[4m[32mint[m[4m status;                                                        [m[4m[100m [m[4m                                [m[56;1H[33m232 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[jobq].status));[8C[100m [m
[33m233 [m[12C} [33melse[m {[59C[100m [m
[33m234 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m[59;99H[K[59;99H177,23[8C46%[1;27H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m180 [m[4m                exit([m[4m[38;5;130m99[m[4m);                                                      [m[4m[100m [m[4m                                [m[56;1H[33m235 [m[12C}[66C[100m [m
[33m236 [m[8C} [33melse[m {[63C[100m [m
[33m237 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m[59;99H[K[59;99H180,25[8C47%[1;29H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m183 [m[4m            [m[4m[36m// parent[m[4m                                                          [m[4m[100m [m[4m                                [m[56;1H[33m238 [m[8C}[70C[100m [m
[33m239 [m    }[74C[100m [m
[33m240 [m}[78C[100m [m[59;99H[K[59;99H183,21[8C48%[1;25H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m186 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m241 [m[79C[100m [m
[33m242 [m[36m/* call_signal()[m[63C[100m [m
[33m243 [m[36m * -------------[m[63C[100m [m[59;99H[K[59;99H186,0-1[7C49%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m189 [m[4m    }                                                                          [m[4m[100m [m[4m                                [m[56;1H[33m244 [m[36m * Sends signal to child process specified[m[37C[100m [m
[33m245 [m[36m *[m[77C[100m [m
[33m246 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[59;99H[K[59;99H189,5[9C50%[1;9H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m186 [m[79C[100m [m
[33m187 [m[12Cjobid++;[59C[100m [m
[33m188 [m[8C}[70C[100m [m[59;99H[K[59;99H189,5[9C49%[4;9H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m183 [m[12C[36m// parent[m[58C[100m [m
[33m184 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m
[33m185 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m[59;99H[K[59;99H189,5[9C48%[7;9H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m180 [m[16Cexit([38;5;130m99[m);[54C[100m [m
[33m181 [m[12C}[66C[100m [m
[33m182 [m[8C} [33melse[m {[63C[100m [m[59;99H[K[59;99H189,5[9C47%[10;9H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m177 [m[12C[32mint[m status;[56C[100m [m
[33m178 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m
[33m179 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m[59;99H[K[59;99H189,5[9C46%[13;9H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m174 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m175 [m[12Cfflush([38;5;130mstderr[m);[52C[100m [m
[33m176 [m[79C[100m [m[59;99H[K[59;99H189,5[9C46%[16;9H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m171 [m[12Cdup2(jobs[jobid].up[WRITE], STDOUT_FILENO);[24C[100m [m
[33m172 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m
[33m173 [m[79C[100m [m[59;99H[K[59;99H189,5[9C45%[19;9H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m168 [m[79C[100m [m
[33m169 [m[12Cdup2(jobs[jobid].down[READ], STDIN_FILENO);[24C[100m [m
[33m170 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m[59;99H[K[59;99H189,5[9C44%[22;9H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m165 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m166 [m[12Cclose(jobs[jobid].down[WRITE]);[36C[100m [m
[33m167 [m[12Cclose(jobs[jobid].up[READ]);[39C[100m [m[59;99H[K[59;99H189,5[9C43%[25;9H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m162 [m[8C[33mif[m (!jobs[jobid].pid) {[48C[100m [m
[33m163 [m[12C[36m// child[m[59C[100m [m
[33m164 [m[79C[100m [m[59;99H[K[59;99H189,5[9C42%[28;9H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m159 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m160 [m[79C[100m [m
[33m161 [m[8Cjobs[jobid].pid = fork();[46C[100m [m[59;99H[K[59;99H189,5[9C42%[31;9H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m156 [m[8C}[70C[100m [m
[33m157 [m[79C[100m [m
[33m158 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, jobid);[28C[100m [m[59;99H[K[59;99H189,5[9C41%[34;9H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m153 [m[8C[33mif[m (pipe(jobs[jobid].up) < [38;5;130m0[m) {[40C[100m [m
[33m154 [m[12Cperror([38;5;130m"Creating up pipe"[m);[40C[100m [m
[33m155 [m[12Cexit([38;5;130m1[m);[59C[100m [m[59;99H[K[59;99H189,5[9C40%[37;9H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m150 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m151 [m[8C}[70C[100m [m
[33m152 [m[79C[100m [m[59;99H[K[59;99H189,5[9C39%[40;9H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m147 [m[79C[100m [m
[33m148 [m[8C[33mif[m (pipe(jobs[jobid].down) < [38;5;130m0[m) {[38C[100m [m
[33m149 [m[12Cperror([38;5;130m"Creating down pipe"[m);[38C[100m [m[59;99H[K[59;99H189,5[9C38%[43;9H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m144 [m[8Cjobs = rea[38;5;248m[104mlloc[m(jobs, (jobid + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));[16C[100m [m
[33m145 [m[79C[100m [m
[33m146 [m[8Cstrcpy(jobs[jobid].name, args[[38;5;130m0[m]);[37C[100m [m[59;99H[K[59;99H189,5[9C38%[46;9H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m141 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m142 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m143 [m    } [33melse[m {[67C[100m [m[59;99H[K[59;99H189,5[9C37%[49;9H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m138 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m139 [m[36m */[m[76C[100m [m
[33m140 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs) {[44C[100m [m[59;99H[K[59;99H189,5[9C36%[52;9H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m196 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m197 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m198 [m[36m */[m[76C[100m [m[59;99H[K[59;99H189,5[9C37%[49;9H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m199 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[43C[100m [m
[33m200 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m201 [m[79C[100m [m[59;99H[K[59;99H189,5[9C38%[46;9H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m202 [m    [36m// Header row[m[62C[100m [m
[33m203 [m    printf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[46C[100m [m
[33m204 [m[79C[100m [m[59;99H[K[59;99H189,5[9C38%[43;9H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m205 [m    [36m// Job status output dependent on arg present status[m[23C[100m [m
[33m206 [m[79C[100m [m
[33m207 [m    [36m// check args[m[62C[100m [m[59;99H[K[59;99H189,5[9C39%[40;9H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m208 [m    [33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[37C[100m [m
[33m209 [m[8C[33mfor[m ([32mint[m i = [38;5;130m0[m; i < jobid; i++) {[38C[100m [m
[33m210 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[31C[100m [m[59;99H[K[59;99H189,5[9C40%[37;9H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m211 [m[12C[33mif[m (!jobs[i].finished) {[43C[100m [m
[33m212 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m213 [m[12C} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[28C[100m [m[59;99H[K[59;99H189,5[9C41%[34;9H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m214 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[12C[100m [m
[33m215 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {[26C[100m [m
[33m216 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[11C[100m [m[59;99H[K[59;99H189,5[9C42%[31;9H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m217 [m[12C} [33melse[m {[59C[100m [m
[33m218 [m[16Cprintf([38;5;130m"Error[m[35m\n[m[38;5;130m"[m);[45C[100m [m
[33m219 [m[12C}[66C[100m [m[59;99H[K[59;99H189,5[9C42%[28;9H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m220 [m[8C}[70C[100m [m
[33m221 [m[79C[100m [m
[33m222 [m    } [33melse[m [33mif[m (spcs > [38;5;130m1[m) {      [36m// report on specific job[m[22C[100m [m[59;99H[K[59;99H189,5[9C43%[25;9H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m223 [m[8C[36m// check for job tokens[1][m[45C[100m [m
[33m224 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m225 [m[12C[32mint[m jobq = atoi(args[[38;5;130m0[m]);[42C[100m [m[59;99H[K[59;99H189,5[9C44%[22;9H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m226 [m[79C[100m [m
[33m227 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, jobq, jobs[jobq].name);[25C[100m [m
[33m228 [m[79C[100m [m[59;99H[K[59;99H189,5[9C45%[19;9H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m229 [m[12C[33mif[m (WIFEXITED(jobs[jobq].status)) {[32C[100m [m
[33m230 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WEXITSTATUS(jobs[jobq].status));[8C[100m [m
[33m231 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[jobq].status)) {[23C[100m [m[59;99H[K[59;99H189,5[9C46%[16;9H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m232 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[jobq].status));[8C[100m [m
[33m233 [m[12C} [33melse[m {[59C[100m [m
[33m234 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m[59;99H[K[59;99H189,5[9C46%[13;9H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m235 [m[12C}[66C[100m [m
[33m236 [m[8C} [33melse[m {[63C[100m [m
[33m237 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m[59;99H[K[59;99H189,5[9C47%[10;9H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m238 [m[8C}[70C[100m [m
[33m239 [m    }[74C[100m [m
[33m240 [m}[78C[100m [m[59;99H[K[59;99H189,5[9C48%[7;9H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m241 [m[79C[100m [m
[33m242 [m[36m/* call_signal()[m[63C[100m [m
[33m243 [m[36m * -------------[m[63C[100m [m[59;99H[K[59;99H189,5[9C49%[4;9H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m244 [m[36m * Sends signal to child process specified[m[37C[100m [m
[33m245 [m[36m *[m[77C[100m [m
[33m246 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[59;99H[K[59;99H189,5[9C50%[1;9H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m192 [m[4m[36m/* report()[m[4m                                                                    [m[4m[100m [m[4m                                [m[56;1H[33m247 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m248 [m[36m */[m[76C[100m [m
[33m249 [m[32mvoid[m call_signal([32mchar[m** args, [32mint[m spcs) {[38C[100m [m[59;99H[K[59;99H192,11[8C50%[1;15H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m195 [m[4m[36m *[m[4m                                                                             [m[4m[100m [m[4m                                [m[56;1H[33m250 [m    [33mif[m (spcs < [38;5;130m3[m) {[60C[100m [m
[33m251 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m252 [m    } [33melse[m {[67C[100m [m[59;99H[K[59;99H195,2[9C51%[1;6H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m198 [m[4m[36m */[m[4m                                                                            [m[4m[100m [m[4m                                [m[56;1H[33m253 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m254 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m
[33m255 [m[12C[33mif[m (is_number(args[[38;5;130m1[m])){[43C[100m [m[59;99H[K[59;99H198,3[9C52%[1;7H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m201 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m256 [m[16C[32mint[m sgnl = atoi(args[[38;5;130m1[m]);[38C[100m [m
[33m257 [m[16C[33mif[m (sgnl >= [38;5;130m1[m && sgnl <= [38;5;130m31[m) {[33C[100m [m
[33m258 [m[20C[32mint[m pid = jobs[job].pid;[35C[100m [m[59;99H[K[59;99H201,0-1[7C53%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m204 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m259 [m[20Ckill(pid, sgnl);[43C[100m [m
[33m260 [m[16C} [33melse[m {[55C[100m [m
[33m261 [m[20Cprintf([38;5;130m"Error: Invalid signal[m[35m\n[m[38;5;130m"[m);[25C[100m [m[59;99H[K[59;99H204,0-1[7C54%[1;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m201 [m[79C[100m [m
[33m202 [m    [36m// Header row[m[62C[100m [m
[33m203 [m    printf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[46C[100m [m[59;99H[K[59;99H204,0-1[7C53%[4;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m198 [m[36m */[m[76C[100m [m
[33m199 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[43C[100m [m
[33m200 [m    fflush([38;5;130mstdout[m);[60C[100m [m[59;99H[K[59;99H204,0-1[7C52%[7;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m195 [m[36m *[m[77C[100m [m
[33m196 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m197 [m[36m * spcs: number of original tokens[m[45C[100m [m[59;99H[K[59;99H204,0-1[7C51%[10;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m253 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m254 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m
[33m255 [m[12C[33mif[m (is_number(args[[38;5;130m1[m])){[43C[100m [m[59;99H[K[59;99H204,0-1[7C52%[7;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m256 [m[16C[32mint[m sgnl = atoi(args[[38;5;130m1[m]);[38C[100m [m
[33m257 [m[16C[33mif[m (sgnl >= [38;5;130m1[m && sgnl <= [38;5;130m31[m) {[33C[100m [m
[33m258 [m[20C[32mint[m pid = jobs[job].pid;[35C[100m [m[59;99H[K[59;99H204,0-1[7C53%[4;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m259 [m[20Ckill(pid, sgnl);[43C[100m [m
[33m260 [m[16C} [33melse[m {[55C[100m [m
[33m261 [m[20Cprintf([38;5;130m"Error: Invalid signal[m[35m\n[m[38;5;130m"[m);[25C[100m [m[59;99H[K[59;99H204,0-1[7C54%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m207 [m[4m    [m[4m[36m// check args[m[4m                                                              [m[4m[100m [m[4m                                [m[56;1H[33m262 [m[16C}[62C[100m [m
[33m263 [m[12C} [33melse[m {[59C[100m [m
[33m264 [m[16Cprintf([38;5;130m"Error: Invalid signal[m[35m\n[m[38;5;130m"[m);[29C[100m [m[59;99H[K[59;99H207,17[8C54%[1;21H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m210 [m[4m            printf([m[4m[38;5;130m"[[m[4m[35m%d[m[4m[38;5;130m] [m[4m[35m%s[m[4m[38;5;130m:"[m[4m, i, jobs[i].name);                               [m[4m[100m [m[4m                                [m[56;1H[33m265 [m[12C}[66C[100m [m
[33m266 [m[8C} [33melse[m {[63C[100m [m
[33m267 [m[12Cprintf([38;5;130m"Error: invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m[59;99H[K[59;99H210,48[8C55%[1;52H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m213 [m[4m            } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (WIFEXITED(jobs[i].status)) [m[4m[46m{[m[4m                            [m[4m[100m [m[4m                                [m[3;17H[46m}[m[56;1H[33m268 [m[8C}[70C[100m [m
[33m269 [m    }[74C[100m [m
[33m270 [m}[78C[100m [m[59;99H[K[59;99H213,51[8C56%[1;55H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m216 [m[4m                printf([m[4m[38;5;130m"signalled([m[4m[35m%d[m[4m[38;5;130m)[m[4m[35m\n[m[4m[38;5;130m"[m[4m, WTERMSIG(jobs[i].status));           [m[4m[100m [m[4m                                [m[56;1H[33m271 [m[79C[100m [m
[33m272 [m[36m/* hq_wait()[m[67C[100m [m
[33m273 [m[36m * ---------[m[67C[100m [m[59;99H[K[59;99H216,52[8C57%[1;56H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m219 [m[4m            }                                                                  [m[4m[100m [m[4m                                [m[56;1H[33m274 [m[36m * Causes hq to wait for specified seconds[m[37C[100m [m
[33m275 [m[36m *[m[77C[100m [m
[33m276 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[59;99H[K[59;99H219,13[8C58%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m222 [m[4m    } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (spcs > [m[4m[38;5;130m1[m[4m) {      [m[4m[36m// report on specific job[m[4m                      [m[4m[100m [m[4m                                [m[56;1H[33m277 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m278 [m[36m */[m[76C[100m [m
[33m279 [m[32mvoid[m hq_wait([32mchar[m** args, [32mint[m spcs) {[42C[100m [m[59;99H[K[59;99H222,52[8C58%[1;56H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m225 [m[4m            [m[4m[32mint[m[4m jobq = atoi(args[[m[4m[38;5;130m0[m[4m]);                                          [m[4m[100m [m[4m                                [m[56;1H[33m280 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m281 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m282 [m    } [33melse[m {[67C[100m [m[59;99H[K[59;99H225,37[8C59%[1;41H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m228 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m283 [m[8C[33mif[m (strcmp(args[[38;5;130m0[m], [38;5;130m""[m) && is_number(args[[38;5;130m0[m])) {[23C[100m [m
[33m284 [m[12Csleep(atoi(args[[38;5;130m0[m]) * [38;5;130m1000000[m);[36C[100m [m
[33m285 [m[8C} [33melse[m {[63C[100m [m[59;99H[K[59;99H228,0-1[7C60%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m231 [m[4m            } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (WIFSIGNALED(jobs[jobq].status)) {                       [m[4m[100m [m[4m                                [m[56;1H[33m286 [m[12Cprintf([38;5;130m"Error: Invalid sleep time[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m287 [m[8C}[70C[100m [m
[33m288 [m    }[74C[100m [m[59;99H[K[59;99H231,52[8C61%[1;56H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m234 [m[4m                printf([m[4m[38;5;130m"running[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                           [m[4m[100m [m[4m                                [m[56;1H[33m289 [m}[78C[100m [m
[33m290 [m[79C[100m [m
[33m291 [m[36m/* send()[m[70C[100m [m[59;99H[K[59;99H234,36[8C62%[1;40H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m237 [m[4m            printf([m[4m[38;5;130m"Error: Invalid job[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                    [m[4m[100m [m[4m                                [m[56;1H[33m292 [m[36m * ------[m[70C[100m [m
[33m293 [m[36m * Sends text down the pipe to specified job[m[35C[100m [m
[33m294 [m[36m *[m[77C[100m [m[59;99H[K[59;99H237,43[8C62%[1;47H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m240 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[56;1H[33m295 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m296 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m297 [m[36m */[m[76C[100m [m[59;99H[K[59;99H240,1[9C63%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m243 [m[4m[36m * -------------[m[4m                                                               [m[4m[100m [m[4m                                [m[56;1H[33m298 [m[32mvoid[m send([32mchar[m** args, [32mint[m spcs) {[45C[100m [m
[33m299 [m    [33mif[m (spcs < [38;5;130m3[m) {[60C[100m [m
[33m300 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m[59;99H[K[59;99H243,16[8C64%[1;20H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m246 [m[4m[36m * args: arguments provided in command line without first command[m[4m              [m[4m[100m [m[4m                                [m[56;1H[33m301 [m    } [33melse[m {[67C[100m [m
[33m302 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m303 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m[59;99H[K[59;99H246,52[8C65%[1;56H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m249 [m[4m[32mvoid[m[4m call_signal([m[4m[32mchar[m[4m** args, [m[4m[32mint[m[4m spcs) [m[4m[46m{[m[4m                                      [m[4m[100m [m[4m                                [m[22;5H[46m}[m[56;1H[33m304 [m[12C[32mFILE[m* writef = fdopen(jobs[job].down[WRITE], [38;5;130m"w"[m);[17C[100m [m
[33m305 [m[12Cfprintf(writef, [38;5;130m"[m[35m%s\n[m[38;5;130m"[m, args[[38;5;130m1[m]);[34C[100m [m
[33m306 [m[8C} [33melse[m {[63C[100m [m[59;99H[K[59;99H249,41[8C66%[1;45H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m252 [m[4m    } [m[4m[33melse[m[4m [m[4m[46m{[m[4m                                                                   [m[4m[100m [m[4m                                [m[18;9H[46m}[m[19;5H}[56;1H[33m307 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m308 [m[8C}[70C[100m [m
[33m309 [m    }[74C[100m [m[59;99H[K[59;99H252,12[8C66%[1;16H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m255 [m[4m            [m[4m[33mif[m[4m (is_number(args[[m[4m[38;5;130m1[m[4m]))[m[4m[46m{[m[4m                                           [m[4m[100m [m[4m                                [m[9;17H[46m}[m[15;9H}[56;1H[33m310 [m}[78C[100m [m
[33m311 [m[79C[100m [m
[33m312 [m[36m/* rcv()[m[71C[100m [m[59;99H[K[59;99H255,36[8C67%[1;40H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m258 [m[4m                    [m[4m[32mint[m[4m pid = jobs[job].pid;                                   [m[4m[100m [m[4m                                [m[6;17H}[56;1H[33m313 [m[36m * -----[m[71C[100m [m
[33m314 [m[36m * Receives data through the pipe from the specified child process.[m[12C[100m [m
[33m315 [m[36m * Prints this to stdout in the parent, hq.[m[36C[100m [m[59;99H[K[59;99H258,44[8C68%[1;48H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m261 [m[4m                    printf([m[4m[38;5;130m"Error: Invalid signal[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                         [m[4m[100m [m[4m                                [m[56;1H[33m316 [m[36m *[m[77C[100m [m
[33m317 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m318 [m[36m * spcs: number of original tokens[m[45C[100m [m[59;99H[K[59;99H261,52[8C69%[1;56H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m264 [m[4m                printf([m[4m[38;5;130m"Error: Invalid signal[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                             [m[4m[100m [m[4m                                [m[56;1H[33m319 [m[36m */[m[76C[100m [m
[33m320 [m[32mvoid[m rcv([32mchar[m** args, [32mint[m spcs) {[46C[100m [m
[33m321 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m[59;99H[K[59;99H264,50[8C70%[1;54H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m267 [m[4m            printf([m[4m[38;5;130m"Error: invalid job[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                    [m[4m[100m [m[4m                                [m[56;1H[33m322 [m[8Cprintf([38;5;130m"Error: Insufficient arguments.[m[35m\n[m[38;5;130m"[m);[28C[100m [m
[33m323 [m    } [33melse[m {[67C[100m [m
[33m324 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m[59;99H[K[59;99H267,43[8C70%[1;47H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m270 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[56;1H[33m325 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m
[33m326 [m[12C[32mint[m ready = is_ready(jobs[job].up[READ]);[26C[100m [m
[33m327 [m[12C[32mFILE[m* readf = fdopen(jobs[job].up[READ], [38;5;130m"r"[m);[21C[100m [m[59;99H[K[59;99H270,1[9C71%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m273 [m[4m[36m * ---------[m[4m                                                                   [m[4m[100m [m[4m                                [m[56;1H[33m328 [m[12C[33mif[m (ready) {[55C[100m [m
[33m329 [m[16C[32mchar[m* buffer = read_line(readf);[31C[100m [m
[33m330 [m[16C[33mif[m (buffer == [38;5;130m0[m) {[45C[100m [m[59;99H[K[59;99H273,12[8C72%[1;16H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m276 [m[4m[36m * args: arguments provided in command line without first command[m[4m              [m[4m[100m [m[4m                                [m[56;1H[33m331 [m[20Cprintf([38;5;130m"<no input>[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m332 [m[16C} [33melse[m [33mif[m (buffer == [38;5;130mNULL[m) {[35C[100m [m
[33m333 [m[20Cprintf([38;5;130m"<EOF>[m[35m\n[m[38;5;130m"[m);[41C[100m [m[59;99H[K[59;99H276,52[8C73%[1;56H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m279 [m[4m[32mvoid[m[4m hq_wait([m[4m[32mchar[m[4m** args, [m[4m[32mint[m[4m spcs) [m[4m[46m{[m[4m                                          [m[4m[100m [m[4m                                [m[11;5H[46m}[m[56;1H[33m334 [m[16C} [33melse[m {[55C[100m [m
[33m335 [m[20Cprintf([38;5;130m"[m[35m%s\n[m[38;5;130m"[m, buffer);[36C[100m [m
[33m336 [m[16C}[62C[100m [m[59;99H[K[59;99H279,37[8C74%[1;41H[?25h[?25l[33m279 [m[32mvoid[m hq_wait([32mchar[m** args, [32mint[m spcs) {                                          [100m [m[1;85H[K[11;5H}[22;1H[93m300 [m[4m        printf([m[4m[38;5;130m"Error: Insufficient arguments[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                             [m[4m[100m [m[4m                                [m[59;99H300,9 [22;13H[?25h[?25l[33m300 [m        [7m[48;5;242mprintf([m[7m[38;5;130m[48;5;242m"Error: Insufficient arguments[m[7m[35m[48;5;242m\n[m[7m[38;5;130m[48;5;242m"[m[7m[48;5;242m); [m                            [100m [m[22;85H[K[23;5H[7m[48;5;242m    } [m[7m[33m[48;5;242melse[m[7m[48;5;242m { [24;5H        [m[7m[33m[48;5;242mif[m[7m[48;5;242m (is_job(args[[m[7m[38;5;130m[48;5;242m0[m[7m[48;5;242m])) { [25;5H            [m[7m[32m[48;5;242mint[m[7m[48;5;242m job = atoi(args[[m[7m[38;5;130m[48;5;242m0[m[7m[48;5;242m]); [m
[93m304 [m[7m[48;5;242m            [m[7m[32m[48;5;242mFILE[m[7m[48;5;242m* writef[m[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H304,25[8C74%[26;29H[?25h[?25l[22;13Hprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m); [23;5H    } [33melse[m { [24;5H        [33mif[m (is_job(args[[38;5;130m0[m])) { [25;5H            [32mint[m job = atoi(args[[38;5;130m0[m]); 
[33m304 [m            [32mFILE[m* writef


[93m307 [m[4m            printf([m[4m[38;5;130m"Error: Invalid job[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                    [m[4m[100m [m[4m                                [m[59;1H[K[59;99H307,24[8C74%[29;28H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m337 [m[12C}[66C[100m [m
[33m338 [m[8C} [33melse[m {[63C[100m [m
[33m339 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m[59;99H[K[59;99H307,24[8C74%[26;28H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m340 [m[8C}[70C[100m [m
[33m341 [m[79C[100m [m
[33m342 [m[79C[100m [m[59;99H[K[59;99H307,24[8C75%[23;28H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m343 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m344 [m    }[74C[100m [m
[33m345 [m}[78C[100m [m[59;99H[K[59;99H307,24[8C76%[20;28H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m346 [m[79C[100m [m
[33m347 [m[36m/* eof()[m[71C[100m [m
[33m348 [m[36m * -----[m[71C[100m [m[59;99H[K[59;99H307,24[8C77%[17;28H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m349 [m[36m * Closes the stdin side of the pipe so the child process can no longer read [m  [100m [m
[33m350 [m[36m * as the pipe will be EOF.[m[52C[100m [m
[33m351 [m[36m *[m[77C[100m [m[59;99H[K[59;99H307,24[8C78%[14;28H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m352 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m353 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m354 [m[36m */[m[76C[100m [m[59;99H[K[59;99H307,24[8C78%[11;28H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m355 [m[32mvoid[m eof([32mchar[m** args, [32mint[m spcs) {[46C[100m [m
[33m356 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m357 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m[59;99H[K[59;99H307,24[8C79%[8;28H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m358 [m    } [33melse[m {[67C[100m [m
[33m359 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m360 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m[59;99H[K[59;99H307,24[8C80%[5;28H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m361 [m[12Cclose(jobs[job].down[WRITE]);[38C[100m [m
[33m362 [m[8C} [33melse[m {[63C[100m [m
[33m363 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m[59;99H[K[59;99H307,24[8C81%[2;28H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m309 [m[4m    }                                                                          [m[4m[100m [m[4m                                [m[56;1H[33m364 [m[8C}[70C[100m [m
[33m365 [m    }[74C[100m [m
[33m366 [m}[78C[100m [m[59;99H[K[59;99H309,5[9C82%[1;9H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m312 [m[4m[36m/* rcv()[m[4m                                                                       [m[4m[100m [m[4m                                [m[56;1H[33m367 [m[79C[100m [m
[33m368 [m[36m/* cleanup()[m[67C[100m [m
[33m369 [m[36m * ---------[m[67C[100m [m[59;99H[K[59;99H312,8[9C82%[1;12H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m315 [m[4m[36m * Prints this to stdout in the parent, hq.[m[4m                                    [m[4m[100m [m[4m                                [m[56;1H[33m370 [m[36m * Terminates all child processes spawned by hq. It does this by sending [m      [100m [m
[33m371 [m[36m * signal 9 (SIGKILL). Reaps all processes.[m[36C[100m [m
[33m372 [m[36m *[m[77C[100m [m[59;99H[K[59;99H315,24[8C83%[1;28H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m318 [m[4m[36m * spcs: number of original tokens[m[4m                                             [m[4m[100m [m[4m                                [m[56;1H[33m373 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m374 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m375 [m[36m */[m[76C[100m [m[59;99H[K[59;99H318,24[8C84%[1;28H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m321 [m[4m    [m[4m[33mif[m[4m (spcs < [m[4m[38;5;130m2[m[4m) [m[4m[46m{[m[4m                                                            [m[4m[100m [m[4m                                [m[3;9H[46m}[m[56;1H[33m376 [m[32mvoid[m cleanup([32mvoid[m) {[59C[100m [m
[33m377 [m    [33mfor[m ([32mint[m job = [38;5;130m0[m; job < jobid; job++) {[36C[100m [m
[33m378 [m[8Ckill(jobs[job].pid, [38;5;130mSIGKILL[m);[42C[100m [m[59;99H[K[59;99H321,19[8C85%[1;23H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m324 [m[4m        [m[4m[33mif[m[4m (is_job(args[m[4m[46m[[m[4m[38;5;130m0[m[4m[46m][m[4m)) {                                                 [m[4m[100m [m[4m                                [m[56;1H[33m379 [m    }[74C[100m [m
[33m380 [m[79C[100m [m
[33m381 [m}[78C[100m [m[59;99H[K[59;99H324,24[8C86%[1;28H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m327 [m[4m            [m[4m[32mFILE[m[4m* readf = fdopen(jobs[job].up[READ], [m[4m[38;5;130m"r"[m[4m);                     [m[4m[100m [m[4m                                [m[56;1H[33m382 [m[79C[100m [m
[33m383 [m[36m/* handle_signal()[m[61C[100m [m
[33m384 [m[36m * ---------------[m[61C[100m [m[59;99H[K[59;99H327,24[8C86%[1;28H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m330 [m[4m                [m[4m[33mif[m[4m (buffer == [m[4m[38;5;130m0[m[4m) {                                             [m[4m[100m [m[4m                                [m[56;1H[33m385 [m[36m * Signal handler[m[62C[100m [m
[33m386 [m[36m *[m[77C[100m [m
[33m387 [m[36m * s: signal number[m[60C[100m [m[59;99H[K[59;99H330,24[8C87%[1;28H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m333 [m[4m                    printf([m[4m[38;5;130m"<EOF>[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                         [m[4m[100m [m[4m                                [m[56;1H[33m388 [m[36m */[m[76C[100m [m
[33m389 [m[32mvoid[m handle_signal([32mint[m s) {[52C[100m [m
[33m390 [m    [33mfor[m ([32mint[m i = [38;5;130m0[m; i < jobid; i++) {[42C[100m [m[59;99H[K[59;99H333,24[8C88%[1;28H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m336 [m[4m                }                                                              [m[4m[100m [m[4m                                [m[56;1H[33m391 [m[8Cjobs[i].finished = [38;5;130m1[m;[50C[100m [m
[33m392 [m[8Cwaitpid(jobs[i].pid, &jobs[i].status, [38;5;130m0[m);[30C[100m [m
[33m393 [m    }[74C[100m [m[59;99H[K[59;99H336,17[8C89%[1;21H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m339 [m[4m            printf([m[4m[38;5;130m"Error: Invalid job[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                    [m[4m[100m [m[4m                                [m[56;1H[33m394 [m[79C[100m [m
[33m395 [m    signal(s, handle_signal);[50C[100m [m
[33m396 [m    fflush([38;5;130mstdout[m);[60C[100m [m[59;99H[K[59;99H339,24[8C90%[1;28H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m342 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m397 [m}[78C[100m [m
[33m398 [m[79C[100m [m
[33m399 [m[36m/* is_number()[m[65C[100m [m[59;99H[K[59;99H342,0-1[7C90%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m345 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[56;1H[33m400 [m[36m * -----------[m[65C[100m [m
[33m401 [m[36m * Determines if inputer number[] is a number or not[m[27C[100m [m
[33m402 [m[36m *[m[77C[100m [m[59;99H[K[59;99H345,1[9C91%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m348 [m[4m[36m * -----[m[4m                                                                       [m[4m[100m [m[4m                                [m[56;1H[33m403 [m[36m * number[]: array of characters to be checked[m[33C[100m [m
[33m404 [m[36m * Returns: true if number, false if not[m[39C[100m [m
[33m405 [m[36m */[m[76C[100m [m[59;99H[K[59;99H348,8[9C92%[1;12H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m351 [m[4m[36m *[m[4m                                                                             [m[4m[100m [m[4m                                [m[56;1H[33m406 [m[32mbool[m is_number([32mchar[m number[]) {[48C[100m [m
[33m407 [m    [33mfor[m([32mint[m i = [38;5;130m0[m; number[i] != [38;5;130m0[m; i++) {[38C[100m [m
[33m408 [m[8C[33mif[m (!isdigit(number[i])) {[45C[100m [m[59;99H[K[59;99H351,2[9C93%[1;6H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m354 [m[4m[36m */[m[4m                                                                            [m[4m[100m [m[4m                                [m[56;1H[33m409 [m[12C[33mreturn[m [38;5;130mfalse[m;[54C[100m [m
[33m410 [m[8C}[70C[100m [m
[33m411 [m    }[74C[100m [m[59;99H[K[59;99H354,3[9C94%[1;7H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m357 [m[4m        printf([m[4m[38;5;130m"Error: Insufficient arguments[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                             [m[4m[100m [m[4m                                [m[56;1H[33m412 [m    [33mreturn[m [38;5;130mtrue[m;[63C[100m [m
[33m413 [m}[78C[100m [m
[33m414 [m[79C[100m [m[59;99H[K[59;99H357,24[8C94%[1;28H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m360 [m[4m            [m[4m[32mint[m[4m job = atoi(args[[m[4m[38;5;130m0[m[4m]);                                           [m[4m[100m [m[4m                                [m[56;1H[33m415 [m[36m/* is_job()[m[68C[100m [m
[33m416 [m[36m * --------[m[68C[100m [m
[33m417 [m[36m * Checks if job[] is a valid job number.[m[38C[100m [m[59;99H[K[59;99H360,24[8C95%[1;28H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m363 [m[4m            printf([m[4m[38;5;130m"Error: Invalid job[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                    [m[4m[100m [m[4m                                [m[56;1H[33m418 [m[36m *[m[77C[100m [m
[33m419 [m[36m * job[]: array of characters of job number[m[36C[100m [m
[33m420 [m[36m * Returns: true if valid job, false if not[m[36C[100m [m[59;99H[K[59;99H363,24[8C96%[1;28H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m366 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[56;1H[33m421 [m[36m */[m[76C[100m [m
[33m422 [m[32mbool[m is_job([32mchar[m job[]) {[54C[100m [m
[33m423 [m    [33mif[m (strcmp(job, [38;5;130m""[m) && is_number(job)) {[35C[100m [m[59;99H[K[59;99H366,1[9C97%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m369 [m[4m[36m * ---------[m[4m                                                                   [m[4m[100m [m[4m                                [m[56;1H[33m424 [m[8C[32mint[m jobNum = atoi(job);[48C[100m [m
[33m425 [m[8C[33mif[m (jobNum <= jobid && jobid != [38;5;130m0[m) {[35C[100m [m
[33m426 [m[12C[33mreturn[m [38;5;130mtrue[m;[55C[100m [m[59;99H[K[59;99H369,12[8C98%[1;16H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m372 [m[4m[36m *[m[4m                                                                             [m[4m[100m [m[4m                                [m[56;1H[33m427 [m[8C} [33melse[m {[63C[100m [m
[33m428 [m[12C[33mreturn[m [38;5;130mfalse[m;[54C[100m [m
[33m429 [m[8C}[70C[100m [m[59;99H[K[59;99H372,2[9C98%[1;6H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m375 [m[4m[36m */[m[4m                                                                            [m[4m[100m [m[4m                                [m[56;1H[33m430 [m    } [33melse[m {[67C[100m [m
[33m431 [m[8C[33mreturn[m [38;5;130mfalse[m;[58C[100m [m
[33m432 [m    }[74C[100m [m[59;99H[K[59;99H375,3[9C99%[1;7H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m378 [m[4m        kill(jobs[job].pid, [m[4m[38;5;130mSIGKILL[m[4m);                                          [m[4m[100m [m[4m                                [m[56;1H[33m433 [m}[78C[100m [m
[1m[34m~                                                                                                                   [58;1H~                                                                                                                   [m[59;99H[K[59;99H378,24[8CBot[1;28H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m381 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[56;1H[1m[34m~                                                                                                                   [57;1H~                                                                                                                   [58;1H~                                                                                                                   [m[59;99H[K[59;99H381,1[9CBot[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m384 [m[4m[36m * ---------------[m[4m                                                             [m[4m[100m [m[4m                                [m[56;1H[1m[34m~                                                                                                                   [57;1H~                                                                                                                   [58;1H~                                                                                                                   [m[59;99H[K[59;99H384,18[8CBot[1;22H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m381 [m}[78C[100m [m
[33m382 [m[79C[100m [m
[33m383 [m[36m/* handle_signal()[m[61C[100m [m[59;99H[K[59;99H384,18[8CBot[4;22H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m378 [m[8Ckill(jobs[job].pid, [38;5;130mSIGKILL[m);[42C[100m [m
[33m379 [m    }[74C[100m [m
[33m380 [m[79C[100m [m[59;99H[K[59;99H384,18[8CBot[7;22H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m375 [m[36m */[m[76C[100m [m
[33m376 [m[32mvoid[m cleanup([32mvoid[m) {[59C[100m [m
[33m377 [m    [33mfor[m ([32mint[m job = [38;5;130m0[m; job < jobid; job++) {[36C[100m [m[59;99H[K[59;99H384,18[8C99%[10;22H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m372 [m[36m *[m[77C[100m [m
[33m373 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m374 [m[36m * spcs: number of original tokens[m[45C[100m [m[59;99H[K[59;99H384,18[8C98%[13;22H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m369 [m[36m * ---------[m[67C[100m [m
[33m370 [m[36m * Terminates all child processes spawned by hq. It does this by sending [m      [100m [m
[33m371 [m[36m * signal 9 (SIGKILL). Reaps all processes.[m[36C[100m [m[59;99H[K[59;99H384,18[8C98%[16;22H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m366 [m}[78C[100m [m
[33m367 [m[79C[100m [m
[33m368 [m[36m/* cleanup()[m[67C[100m [m[59;99H[K[59;99H384,18[8C97%[19;22H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m363 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m364 [m[8C}[70C[100m [m
[33m365 [m    }[74C[100m [m[59;99H[K[59;99H384,18[8C96%[22;22H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m360 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m
[33m361 [m[12Cclose(jobs[job].down[WRITE]);[38C[100m [m
[33m362 [m[8C} [33melse[m {[63C[100m [m[59;99H[K[59;99H384,18[8C95%[25;22H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m357 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m358 [m    } [33melse[m {[67C[100m [m
[33m359 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m[59;99H[K[59;99H384,18[8C94%[28;22H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m354 [m[36m */[m[76C[100m [m
[33m355 [m[32mvoid[m eof([32mchar[m** args, [32mint[m spcs) {[46C[100m [m
[33m356 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m[59;99H[K[59;99H384,18[8C94%[31;22H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m351 [m[36m *[m[77C[100m [m
[33m352 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m353 [m[36m * spcs: number of original tokens[m[45C[100m [m[59;99H[K[59;99H384,18[8C93%[34;22H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m348 [m[36m * -----[m[71C[100m [m
[33m349 [m[36m * Closes the stdin side of the pipe so the child process can no longer read [m  [100m [m
[33m350 [m[36m * as the pipe will be EOF.[m[52C[100m [m[59;99H[K[59;99H384,18[8C92%[37;22H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m345 [m}[78C[100m [m
[33m346 [m[79C[100m [m
[33m347 [m[36m/* eof()[m[71C[100m [m[59;99H[K[59;99H384,18[8C91%[40;22H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m342 [m[79C[100m [m
[33m343 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m344 [m    }[74C[100m [m[59;99H[K[59;99H384,18[8C90%[43;22H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m339 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m340 [m[8C}[70C[100m [m
[33m341 [m[79C[100m [m[59;99H[K[59;99H384,18[8C90%[46;22H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m336 [m[16C}[62C[100m [m
[33m337 [m[12C}[66C[100m [m
[33m338 [m[8C} [33melse[m {[63C[100m [m[59;99H[K[59;99H384,18[8C89%[49;22H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m333 [m[20Cprintf([38;5;130m"<EOF>[m[35m\n[m[38;5;130m"[m);[41C[100m [m
[33m334 [m[16C} [33melse[m {[55C[100m [m
[33m335 [m[20Cprintf([38;5;130m"[m[35m%s\n[m[38;5;130m"[m, buffer);[36C[100m [m[59;99H[K[59;99H384,18[8C88%[52;22H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m330 [m[16C[33mif[m (buffer == [38;5;130m0[m) {[45C[100m [m
[33m331 [m[20Cprintf([38;5;130m"<no input>[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m332 [m[16C} [33melse[m [33mif[m (buffer == [38;5;130mNULL[m) {[35C[100m [m[59;99H[K[59;99H384,18[8C87%[55;22H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m327 [m[12C[32mFILE[m* readf = fdopen(jobs[job].up[READ], [38;5;130m"r"[m);[21C[100m [m
[33m328 [m[12C[33mif[m (ready) {[55C[100m [m
[33m329 [m[16C[32mchar[m* buffer = read_line(readf);[31C[100m [m[59;99H[K[59;99H384,18[8C86%[58;22H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m324 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m325 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m
[33m326 [m[12C[32mint[m ready = is_ready(jobs[job].up[READ]);[26C[100m [m[53;24H[46m{[m[58;1H[93m381 [m[4m[46m}[m[4m                                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H381,1[9C86%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m321 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m322 [m[8Cprintf([38;5;130m"Error: Insufficient arguments.[m[35m\n[m[38;5;130m"[m);[28C[100m [m
[33m323 [m    } [33melse[m {[67C[100m [m[56;24H{

[93m378 [m[4m        kill(jobs[job].pid, [m[4m[38;5;130mSIGKILL[m[4m);                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H378,24[8C85%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m318 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m319 [m[36m */[m[76C[100m [m
[33m320 [m[32mvoid[m rcv([32mchar[m** args, [32mint[m spcs) {[46C[100m [m[58;1H[93m375 [m[4m[36m */[m[4m                                                                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H375,3[9C84%[58;7H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m315 [m[36m * Prints this to stdout in the parent, hq.[m[36C[100m [m
[33m316 [m[36m *[m[77C[100m [m
[33m317 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[58;1H[93m372 [m[4m[36m *[m[4m                                                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H372,2[9C83%[58;6H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m312 [m[36m/* rcv()[m[71C[100m [m
[33m313 [m[36m * -----[m[71C[100m [m
[33m314 [m[36m * Receives data through the pipe from the specified child process.[m[12C[100m [m[58;1H[93m369 [m[4m[36m * ---------[m[4m                                                                   [m[4m[100m [m[4m                                [m[59;99H[K[59;99H369,12[8C82%[58;16H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m309 [m    }[74C[100m [m
[33m310 [m}[78C[100m [m
[33m311 [m[79C[100m [m[47;37H[46m{[m[58;1H[93m366 [m[4m[46m}[m[4m                                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H366,1[9C82%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m306 [m[8C} [33melse[m {[63C[100m [m
[33m307 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m308 [m[8C}[70C[100m [m[50;37H{[58;1H[93m363 [m[4m            printf([m[4m[38;5;130m"Error: Invalid job[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                    [m[4m[100m [m[4m                                [m[59;99H[K[59;99H363,24[8C81%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m303 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m
[33m304 [m[12C[32mFILE[m* writef = fdopen(jobs[job].down[WRITE], [38;5;130m"w"[m);[17C[100m [m
[33m305 [m[12Cfprintf(writef, [38;5;130m"[m[35m%s\n[m[38;5;130m"[m, args[[38;5;130m1[m]);[34C[100m [m[58;1H[93m360 [m[4m            [m[4m[32mint[m[4m job = atoi(args[[m[4m[38;5;130m0[m[4m]);                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H360,24[8C80%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m300 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m301 [m    } [33melse[m {[67C[100m [m
[33m302 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m[58;1H[93m357 [m[4m        printf([m[4m[38;5;130m"Error: Insufficient arguments[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H357,24[8C79%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m297 [m[36m */[m[76C[100m [m
[33m298 [m[32mvoid[m send([32mchar[m** args, [32mint[m spcs) {[45C[100m [m
[33m299 [m    [33mif[m (spcs < [38;5;130m3[m) {[60C[100m [m[58;1H[93m354 [m[4m[36m */[m[4m                                                                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H354,3[9C78%[58;7H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m294 [m[36m *[m[77C[100m [m
[33m295 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m296 [m[36m * spcs: number of original tokens[m[45C[100m [m[58;1H[93m351 [m[4m[36m *[m[4m                                                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H351,2[9C78%[58;6H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m291 [m[36m/* send()[m[70C[100m [m
[33m292 [m[36m * ------[m[70C[100m [m
[33m293 [m[36m * Sends text down the pipe to specified job[m[35C[100m [m[58;1H[93m348 [m[4m[36m * -----[m[4m                                                                       [m[4m[100m [m[4m                                [m[59;99H[K[59;99H348,8[9C77%[58;12H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m288 [m    }[74C[100m [m
[33m289 [m}[78C[100m [m
[33m290 [m[79C[100m [m[33;37H[46m{[m[58;1H[93m345 [m[4m[46m}[m[4m                                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H345,1[9C76%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m285 [m[8C} [33melse[m {[63C[100m [m
[33m286 [m[12Cprintf([38;5;130m"Error: Invalid sleep time[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m287 [m[8C}[70C[100m [m[36;37H{[58;1H[93m342 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H342,0-1[7C75%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m282 [m    } [33melse[m {[67C[100m [m
[33m283 [m[8C[33mif[m (strcmp(args[[38;5;130m0[m], [38;5;130m""[m) && is_number(args[[38;5;130m0[m])) {[23C[100m [m
[33m284 [m[12Csleep(atoi(args[[38;5;130m0[m]) * [38;5;130m1000000[m);[36C[100m [m[58;1H[93m339 [m[4m            printf([m[4m[38;5;130m"Error: Invalid job[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                    [m[4m[100m [m[4m                                [m[59;99H[K[59;99H339,24[8C74%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m279 [m[32mvoid[m hq_wait([32mchar[m** args, [32mint[m spcs) {[42C[100m [m
[33m280 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m281 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m[56;28H[46m{[m

[93m336 [m[4m                [m[4m[46m}[m[4m                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H336,17[8C74%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m276 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m277 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m278 [m[36m */[m[76C[100m [m[58;1H[93m333 [m[4m                    printf([m[4m[38;5;130m"<EOF>[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                         [m[4m[100m [m[4m                                [m[59;99H[K[59;99H333,24[8C73%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m273 [m[36m * ---------[m[67C[100m [m
[33m274 [m[36m * Causes hq to wait for specified seconds[m[37C[100m [m
[33m275 [m[36m *[m[77C[100m [m[58;1H[93m330 [m[4m                [m[4m[33mif[m[4m (buffer == [m[4m[38;5;130m0[m[4m) {                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H330,24[8C72%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m270 [m}[78C[100m [m
[33m271 [m[79C[100m [m
[33m272 [m[36m/* hq_wait()[m[67C[100m [m[58;1H[93m327 [m[4m            [m[4m[32mFILE[m[4m* readf = fdopen(jobs[job].up[READ], [m[4m[38;5;130m"r"[m[4m);                     [m[4m[100m [m[4m                                [m[59;99H[K[59;99H327,24[8C71%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m267 [m[12Cprintf([38;5;130m"Error: invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m268 [m[8C}[70C[100m [m
[33m269 [m    }[74C[100m [m[58;1H[93m324 [m[4m        [m[4m[33mif[m[4m (is_job(args[m[4m[46m[[m[4m[38;5;130m0[m[4m[46m][m[4m)) {                                                 [m[4m[100m [m[4m                                [m[59;99H[K[59;99H324,24[8C70%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m264 [m[16Cprintf([38;5;130m"Error: Invalid signal[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m265 [m[12C}[66C[100m [m
[33m266 [m[8C} [33melse[m {[63C[100m [m[58;1H[93m321 [m[4m    [m[4m[33mif[m[4m (spcs < [m[4m[38;5;130m2[m[4m) {                                                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H321,19[8C70%[58;23H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m261 [m[20Cprintf([38;5;130m"Error: Invalid signal[m[35m\n[m[38;5;130m"[m);[25C[100m [m
[33m262 [m[16C}[62C[100m [m
[33m263 [m[12C} [33melse[m {[59C[100m [m[58;1H[93m318 [m[4m[36m * spcs: number of original tokens[m[4m                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H318,24[8C69%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m258 [m[20C[32mint[m pid = jobs[job].pid;[35C[100m [m
[33m259 [m[20Ckill(pid, sgnl);[43C[100m [m
[33m260 [m[16C} [33melse[m {[55C[100m [m[58;1H[93m315 [m[4m[36m * Prints this to stdout in the parent, hq.[m[4m                                    [m[4m[100m [m[4m                                [m[59;99H[K[59;99H315,24[8C68%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m255 [m[12C[33mif[m (is_number(args[[38;5;130m1[m])){[43C[100m [m
[33m256 [m[16C[32mint[m sgnl = atoi(args[[38;5;130m1[m]);[38C[100m [m
[33m257 [m[16C[33mif[m (sgnl >= [38;5;130m1[m && sgnl <= [38;5;130m31[m) {[33C[100m [m[58;1H[93m312 [m[4m[36m/* rcv()[m[4m                                                                       [m[4m[100m [m[4m                                [m[59;99H[K[59;99H312,8[9C67%[58;12H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m252 [m    } [33melse[m {[67C[100m [m
[33m253 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m254 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m[50;16H[46m{[m[58;1H[93m309 [m[4m    [m[4m[46m}[m[4m                                                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H309,5[9C66%[58;9H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m249 [m[32mvoid[m call_signal([32mchar[m** args, [32mint[m spcs) {[38C[100m [m
[33m250 [m    [33mif[m (spcs < [38;5;130m3[m) {[60C[100m [m
[33m251 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m[53;16H{[58;1H[93m306 [m[4m        } [m[4m[33melse[m[4m {                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H306,16[8C66%[58;20H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m246 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m247 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m248 [m[36m */[m[76C[100m [m[58;1H[93m303 [m[4m            [m[4m[32mint[m[4m job = atoi(args[[m[4m[38;5;130m0[m[4m]);                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H303,24[8C65%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m243 [m[36m * -------------[m[63C[100m [m
[33m244 [m[36m * Sends signal to child process specified[m[37C[100m [m
[33m245 [m[36m *[m[77C[100m [m[58;1H[93m300 [m[4m        printf([m[4m[38;5;130m"Error: Insufficient arguments[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H300,24[8C64%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m240 [m}[78C[100m [m
[33m241 [m[79C[100m [m
[33m242 [m[36m/* call_signal()[m[63C[100m [m[58;1H[93m297 [m[4m[36m */[m[4m                                                                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H297,3[9C63%[58;7H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m237 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m238 [m[8C}[70C[100m [m
[33m239 [m    }[74C[100m [m[58;1H[93m294 [m[4m[36m *[m[4m                                                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H294,2[9C62%[58;6H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m234 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m235 [m[12C}[66C[100m [m
[33m236 [m[8C} [33melse[m {[63C[100m [m[58;1H[93m291 [m[4m[36m/* send()[m[4m                                                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H291,9[9C62%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m231 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[jobq].status)) {[23C[100m [m
[33m232 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[jobq].status));[8C[100m [m
[33m233 [m[12C} [33melse[m {[59C[100m [m[52;16H[46m{[m[58;1H[93m288 [m[4m    [m[4m[46m}[m[4m                                                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H288,5[9C61%[58;9H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m228 [m[79C[100m [m
[33m229 [m[12C[33mif[m (WIFEXITED(jobs[jobq].status)) {[32C[100m [m
[33m230 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WEXITSTATUS(jobs[jobq].status));[8C[100m [m[55;16H{


[93m285 [m[4m        } [m[4m[33melse[m[4m {                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H285,16[8C60%[58;20H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m225 [m[12C[32mint[m jobq = atoi(args[[38;5;130m0[m]);[42C[100m [m
[33m226 [m[79C[100m [m
[33m227 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, jobq, jobs[jobq].name);[25C[100m [m[58;1H[93m282 [m[4m    } [m[4m[33melse[m[4m {                                                                   [m[4m[100m [m[4m                                [m[59;99H[K[59;99H282,12[8C59%[58;16H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m222 [m    } [33melse[m [33mif[m (spcs > [38;5;130m1[m) {      [36m// report on specific job[m[22C[100m [m
[33m223 [m[8C[36m// check for job tokens[1][m[45C[100m [m
[33m224 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m[58;1H[93m279 [m[4m[32mvoid[m[4m hq_wait([m[4m[32mchar[m[4m** args, [m[4m[32mint[m[4m spcs) {                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H279,24[8C58%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m219 [m[12C}[66C[100m [m
[33m220 [m[8C}[70C[100m [m
[33m221 [m[79C[100m [m[58;1H[93m276 [m[4m[36m * args: arguments provided in command line without first command[m[4m              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H276,24[8C58%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m216 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[11C[100m [m
[33m217 [m[12C} [33melse[m {[59C[100m [m
[33m218 [m[16Cprintf([38;5;130m"Error[m[35m\n[m[38;5;130m"[m);[45C[100m [m[58;1H[93m273 [m[4m[36m * ---------[m[4m                                                                   [m[4m[100m [m[4m                                [m[59;99H[K[59;99H273,12[8C57%[58;16H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m213 [m[12C} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[28C[100m [m
[33m214 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[12C[100m [m
[33m215 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {[26C[100m [m[37;45H[46m{[m[58;1H[93m270 [m[4m[46m}[m[4m                                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H270,1[9C56%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m210 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[31C[100m [m
[33m211 [m[12C[33mif[m (!jobs[i].finished) {[43C[100m [m
[33m212 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m[40;45H{[58;1H[93m267 [m[4m            printf([m[4m[38;5;130m"Error: invalid job[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                    [m[4m[100m [m[4m                                [m[59;99H[K[59;99H267,24[8C55%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m207 [m    [36m// check args[m[62C[100m [m
[33m208 [m    [33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[37C[100m [m
[33m209 [m[8C[33mfor[m ([32mint[m i = [38;5;130m0[m; i < jobid; i++) {[38C[100m [m[58;1H[93m264 [m[4m                printf([m[4m[38;5;130m"Error: Invalid signal[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H264,24[8C54%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m204 [m[79C[100m [m
[33m205 [m    [36m// Job status output dependent on arg present status[m[23C[100m [m
[33m206 [m[79C[100m [m[58;1H[93m261 [m[4m                    printf([m[4m[38;5;130m"Error: Invalid signal[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                         [m[4m[100m [m[4m                                [m[59;99H[K[59;99H261,24[8C54%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m201 [m[79C[100m [m
[33m202 [m    [36m// Header row[m[62C[100m [m
[33m203 [m    printf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[46C[100m [m[58;1H[93m258 [m[4m                    [m[4m[32mint[m[4m pid = jobs[job].pid;                                   [m[4m[100m [m[4m                                [m[59;99H[K[59;99H258,24[8C53%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m198 [m[36m */[m[76C[100m [m
[33m199 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[43C[100m [m
[33m200 [m    fflush([38;5;130mstdout[m);[60C[100m [m[58;1H[93m255 [m[4m            [m[4m[33mif[m[4m (is_number(args[[m[4m[38;5;130m1[m[4m])){                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H255,24[8C52%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m195 [m[36m *[m[77C[100m [m
[33m196 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m197 [m[36m * spcs: number of original tokens[m[45C[100m [m[58;1H[93m252 [m[4m    } [m[4m[33melse[m[4m {                                                                   [m[4m[100m [m[4m                                [m[59;99H[K[59;99H252,12[8C51%[58;16H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m192 [m[36m/* report()[m[68C[100m [m
[33m193 [m[36m * --------[m[68C[100m [m
[33m194 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m[58;1H[93m249 [m[4m[32mvoid[m[4m call_signal([m[4m[32mchar[m[4m** args, [m[4m[32mint[m[4m spcs) {                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H249,24[8C50%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m189 [m    }[74C[100m [m
[33m190 [m}[78C[100m [m
[33m191 [m[79C[100m [m[58;1H[93m246 [m[4m[36m * args: arguments provided in command line without first command[m[4m              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H246,24[8C50%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m186 [m[79C[100m [m
[33m187 [m[12Cjobid++;[59C[100m [m
[33m188 [m[8C}[70C[100m [m[58;1H[93m243 [m[4m[36m * -------------[m[4m                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H243,16[8C49%[58;20H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m183 [m[12C[36m// parent[m[58C[100m [m
[33m184 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m
[33m185 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m[17;40H[46m{[m[58;1H[93m240 [m[4m[46m}[m[4m                                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H240,1[9C48%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m180 [m[16Cexit([38;5;130m99[m);[54C[100m [m
[33m181 [m[12C}[66C[100m [m
[33m182 [m[8C} [33melse[m {[63C[100m [m[20;40H{[58;1H[93m237 [m[4m            printf([m[4m[38;5;130m"Error: Invalid job[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                    [m[4m[100m [m[4m                                [m[59;99H[K[59;99H237,24[8C47%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m177 [m[12C[32mint[m status;[56C[100m [m
[33m178 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m
[33m179 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m[58;1H[93m234 [m[4m                printf([m[4m[38;5;130m"running[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H234,24[8C46%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m174 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m175 [m[12Cfflush([38;5;130mstderr[m);[52C[100m [m
[33m176 [m[79C[100m [m[58;1H[93m231 [m[4m            } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (WIFSIGNALED(jobs[jobq].status)) {                       [m[4m[100m [m[4m                                [m[59;99H[K[59;99H231,24[8C46%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m171 [m[12Cdup2(jobs[jobid].up[WRITE], STDOUT_FILENO);[24C[100m [m
[33m172 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m
[33m173 [m[79C[100m [m[58;1H[93m228 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H228,0-1[7C45%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m168 [m[79C[100m [m
[33m169 [m[12Cdup2(jobs[jobid].down[READ], STDIN_FILENO);[24C[100m [m
[33m170 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m[58;1H[93m225 [m[4m            [m[4m[32mint[m[4m jobq = atoi(args[[m[4m[38;5;130m0[m[4m]);                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H225,24[8C44%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m165 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m166 [m[12Cclose(jobs[jobid].down[WRITE]);[36C[100m [m
[33m167 [m[12Cclose(jobs[jobid].up[READ]);[39C[100m [m[58;1H[93m222 [m[4m    } [m[4m[33melse[m[4m [m[4m[33mif[m[4m [m[4m[46m([m[4mspcs > [m[4m[38;5;130m1[m[4m[46m)[m[4m {      [m[4m[36m// report on specific job[m[4m                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H222,24[8C43%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m162 [m[8C[33mif[m (!jobs[jobid].pid) {[48C[100m [m
[33m163 [m[12C[36m// child[m[59C[100m [m
[33m164 [m[79C[100m [m[56;24H[46m{[m

[93m219 [m[4m            [m[4m[46m}[m[4m                                                                  [m[4m[100m [m[4m                                [m[59;99H[K[59;99H219,13[8C42%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m159 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m160 [m[79C[100m [m
[33m161 [m[8Cjobs[jobid].pid = fork();[46C[100m [m[58;1H[93m216 [m[4m                printf([m[4m[38;5;130m"signalled([m[4m[35m%d[m[4m[38;5;130m)[m[4m[35m\n[m[4m[38;5;130m"[m[4m, WTERMSIG(jobs[i].status));           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H216,24[8C42%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m156 [m[8C}[70C[100m [m
[33m157 [m[79C[100m [m
[33m158 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, jobid);[28C[100m [m[58;1H[93m213 [m[4m            } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (WIFEXITED(jobs[i].status)) {                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H213,24[8C41%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m153 [m[8C[33mif[m (pipe(jobs[jobid].up) < [38;5;130m0[m) {[40C[100m [m
[33m154 [m[12Cperror([38;5;130m"Creating up pipe"[m);[40C[100m [m
[33m155 [m[12Cexit([38;5;130m1[m);[59C[100m [m[58;1H[93m210 [m[4m            printf([m[4m[38;5;130m"[[m[4m[35m%d[m[4m[38;5;130m] [m[4m[35m%s[m[4m[38;5;130m:"[m[4m, i, jobs[i].name);                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H210,24[8C40%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m150 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m151 [m[8C}[70C[100m [m
[33m152 [m[79C[100m [m[58;1H[93m207 [m[4m    [m[4m[36m// check args[m[4m                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H207,17[8C39%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m147 [m[79C[100m [m
[33m148 [m[8C[33mif[m (pipe(jobs[jobid].down) < [38;5;130m0[m) {[38C[100m [m
[33m149 [m[12Cperror([38;5;130m"Creating down pipe"[m);[38C[100m [m[58;1H[93m204 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H204,0-1[7C38%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m144 [m[8Cjobs = rea[38;5;248m[104mlloc[m(jobs, (jobid + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));[16C[100m [m
[33m145 [m[79C[100m [m
[33m146 [m[8Cstrcpy(jobs[jobid].name, args[[38;5;130m0[m]);[37C[100m [m[58;1H[93m201 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H201,0-1[7C38%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m141 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m142 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m143 [m    } [33melse[m {[67C[100m [m[58;1H[93m198 [m[4m[36m */[m[4m                                                                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H198,3[9C37%[58;7H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m138 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m139 [m[36m */[m[76C[100m [m
[33m140 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs) {[44C[100m [m[58;1H[93m195 [m[4m[36m *[m[4m                                                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H195,2[9C36%[58;6H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m135 [m[36m * of the child process is unchanged[m[43C[100m [m
[33m136 [m[36m *[m[77C[100m [m
[33m137 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[58;1H[93m192 [m[4m[36m/* report()[m[4m                                                                    [m[4m[100m [m[4m                                [m[59;99H[K[59;99H192,11[8C35%[58;15H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m132 [m[36m * -------[m[69C[100m [m
[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m
[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m[12;16H[46m{[m[58;1H[93m189 [m[4m    [m[4m[46m}[m[4m                                                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H189,5[9C34%[58;9H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m129 [m}[78C[100m [m
[33m130 [m[79C[100m [m
[33m131 [m[36m/* spawn()[m[69C[100m [m[15;16H{[58;1H[93m186 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H186,0-1[7C34%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m126 [m[79C[100m [m
[33m127 [m    free(jobs);[64C[100m [m
[33m128 [m    [33mreturn[m [38;5;130m0[m;[66C[100m [m[58;1H[93m183 [m[4m            [m[4m[36m// parent[m[4m                                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H183,21[8C33%[58;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m123 [m[8Cfree(input);[59C[100m [m
[33m124 [m[8Cfree(tokens);[58C[100m [m
[33m125 [m    }[74C[100m [m[58;1H[93m180 [m[4m                exit[m[4m[46m([m[4m[38;5;130m99[m[4m[46m)[m[4m;                                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H180,24[8C32%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m120 [m[8Cprintf([38;5;130m"> "[m);[58C[100m [m
[33m121 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m122 [m[79C[100m [m[58;1H[93m177 [m[4m            [m[4m[32mint[m[4m status;                                                        [m[4m[100m [m[4m                                [m[59;99H[K[59;99H177,23[8C31%[58;27H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m117 [m[12Cprintf([38;5;130m"Error: Invalid command[m[35m\n[m[38;5;130m"[m);[32C[100m [m
[33m118 [m[8C}[70C[100m [m
[33m119 [m[79C[100m [m[58;1H[93m174 [m[4m            fflush([m[4m[38;5;130mstdout[m[4m);                                                    [m[4m[100m [m[4m                                [m[59;99H[K[59;99H174,24[8C30%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m114 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"cleanup"[m)) {[28C[100m [m
[33m115 [m[12Ccleanup();[57C[100m [m
[33m116 [m[8C} [33melse[m {[63C[100m [m[58;1H[93m171 [m[4m            dup2(jobs[jobid].up[WRITE], STDOUT_FILENO);                        [m[4m[100m [m[4m                                [m[59;99H[K[59;99H171,24[8C30%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m111 [m[12Crcv(args, spcs);[51C[100m [m
[33m112 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"eof"[m)) {[32C[100m [m
[33m113 [m[12Ceof(args, spcs);[51C[100m [m[58;1H[93m168 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H168,12[8C29%[58;16H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m108 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"send"[m)) {[31C[100m [m
[33m109 [m[12Csend(args, spcs);[50C[100m [m
[33m110 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"rcv"[m)) {[32C[100m [m[58;1H[93m165 [m[4m            fflush([m[4m[38;5;130mstdout[m[4m);                                                    [m[4m[100m [m[4m                                [m[59;99H[K[59;99H165,24[8C28%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m105 [m[12Ccall_signal(args, spcs);[43C[100m [m
[33m106 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"sleep"[m)) {[30C[100m [m
[33m107 [m[12Chq_wait(args, spcs);[47C[100m [m[58;1H[93m162 [m[4m        [m[4m[33mif[m[4m (!jobs[m[4m[46m[[m[4mjobid[m[4m[46m][m[4m.pid) {                                                [m[4m[100m [m[4m                                [m[59;99H[K[59;99H162,24[8C27%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m102 [m[12C[36m// Report[m[58C[100m [m
[33m103 [m[12Creport(args, spcs);[48C[100m [m
[33m104 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"signal"[m)) {[29C[100m [m[58;1H[93m159 [m[4m        fflush([m[4m[38;5;130mstdout[m[4m);                                                        [m[4m[100m [m[4m                                [m[59;99H[K[59;99H159,23[8C26%[58;27H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 99 [m[12C[36m// spawn[m[59C[100m [m
[33m100 [m[12Cspawn(args, spcs);[49C[100m [m
[33m101 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"report"[m)) {[29C[100m [m[55;43H[46m{[m


[93m156 [m[4m        [m[4m[46m}[m[4m                                                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H156,9[9C26%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 96 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m 97 [m[79C[100m [m
[33m 98 [m[8C[33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"spawn"[m)) {[37C[100m [m[58;1H[93m153 [m[4m        [m[4m[33mif[m[4m (pipe(jobs[jobid].up) < [m[4m[38;5;130m0[m[4m) {                                        [m[4m[100m [m[4m                                [m[59;99H[K[59;99H153,24[8C25%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 93 [m[12Cargs[i - [38;5;130m1[m] = tokens[i];[43C[100m [m
[33m 94 [m[8C}[70C[100m [m
[33m 95 [m[8Cargs[spcs - [38;5;130m1[m] = [38;5;130m0[m;[52C[100m [m[58;1H[93m150 [m[4m            exit([m[4m[38;5;130m1[m[4m);                                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H150,20[8C24%[58;24H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 90 [m[79C[100m [m
[33m 91 [m[8C[32mchar[m* args[spcs];[54C[100m [m
[33m 92 [m[8C[33mfor[m ([32mint[m i = [38;5;130m1[m; i < spcs; i++) {[39C[100m [m[58;1H[93m147 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H147,8[9C23%[58;12H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 87 [m[12C[33mcontinue[m;[58C[100m [m
[33m 88 [m[8C}[70C[100m [m
[33m 89 [m[8Ctokens = split_space_not_quote(input, &spcs);[26C[100m [m[58;1H[93m144 [m[4m        jobs = rea[m[4m[38;5;248m[104mlloc[m[4m(jobs, (jobid + [m[4m[38;5;130m1[m[4m) * [m[4m[33msizeof[m[4m([m[4m[32mstruct[m[4m Job));                [m[4m[100m [m[4m                                [m[59;99H[K[59;99H144,24[8C22%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 84 [m[8C[33mif[m (!strcmp(input, [38;5;130m""[m)) {[46C[100m [m
[33m 85 [m[12Cprintf([38;5;130m"> "[m);[54C[100m [m
[33m 86 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m[58;1H[93m141 [m[4m    [m[4m[33mif[m[4m (spcs < [m[4m[38;5;130m2[m[4m) {                                                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H141,19[8C22%[58;23H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 81 [m    [33mwhile[m ((input = read_line([38;5;130mstdin[m)) != [38;5;130mNULL[m) {[31C[100m [m
[33m 82 [m[8C[32mint[m spcs = [38;5;130m0[m;[58C[100m [m
[33m 83 [m[79C[100m [m[58;1H[93m138 [m[4m[36m * spcs: number of original tokens[m[4m                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H138,24[8C21%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 78 [m    printf([38;5;130m"> "[m);[62C[100m [m
[33m 79 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m 80 [m    [36m// prompt loop[m[61C[100m [m[58;1H[93m135 [m[4m[36m * of the child process is unchanged[m[4m                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H135,24[8C20%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 75 [m[79C[100m [m
[33m 76 [m    signal([38;5;130mSIGINT[m, handle_signal);[45C[100m [m
[33m 77 [m    signal([38;5;130mSIGCHLD[m, handle_signal);[44C[100m [m[58;1H[93m132 [m[4m[36m * -------[m[4m                                                                     [m[4m[100m [m[4m                                [m[59;99H[K[59;99H132,10[8C19%[58;14H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 72 [m    [32mchar[m** tokens;[61C[100m [m
[33m 73 [m[79C[100m [m
[33m 74 [m    jobs = ma[38;5;248m[104mlloc[m([38;5;130m0[m * [33msizeof[m([32mstruct[m Job));[37C[100m [m[58;1H[93m129 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H129,1[9C18%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 69 [m[79C[100m [m
[33m 70 [m[32mint[m main([32mint[m argc, [32mchar[m* argv[]) {[45C[100m [m
[33m 71 [m    [32mchar[m* input;[63C[100m [m[58;1H[93m126 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H126,4[9C18%[58;8H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 66 [m[79C[100m [m
[33m 67 [m[79C[100m [m
[33m 68 [m[36m// Program[m[69C[100m [m[58;1H[93m123 [m[4m        free(input);                                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H123,20[8C17%[58;24H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 63 [m[79C[100m [m
[33m 64 [m[32mint[m jobid = [38;5;130m0[m;[65C[100m [m
[33m 65 [m[32mstruct[m Job* jobs;[62C[100m [m[58;1H[93m120 [m[4m        printf([m[4m[38;5;130m"> "[m[4m);                                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H120,21[8C16%[58;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 60 [m};[77C[100m [m
[33m 61 [m[79C[100m [m
[33m 62 [m[36m// Globals[m[69C[100m [m[58;1H[93m117 [m[4m            printf([m[4m[38;5;130m"Error: Invalid command[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                [m[4m[100m [m[4m                                [m[59;99H[K[59;99H117,24[8C15%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 57 [m    [32mint[m up[[38;5;130m2[m];[65C[100m [m
[33m 58 [m    [32mint[m status;[64C[100m [m
[33m 59 [m    [32mint[m finished;[62C[100m [m[58;1H[93m114 [m[4m        } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (!strcmp(tokens[[m[4m[38;5;130m0[m[4m], [m[4m[38;5;130m"cleanup"[m[4m)) {                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H114,24[8C14%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 54 [m    [32mint[m pid;[67C[100m [m
[33m 55 [m    [32mchar[m name[MAX_BUFFER_SIZE];[48C[100m [m
[33m 56 [m    [32mint[m down[[38;5;130m2[m];[63C[100m [m[58;1H[93m111 [m[4m            rcv(args, spcs);                                                   [m[4m[100m [m[4m                                [m[59;99H[K[59;99H111,24[8C14%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 51 [m[36m// Structs[m[69C[100m [m
[33m 52 [m[79C[100m [m
[33m 53 [m[32mstruct[m Job {[67C[100m [m[58;1H[93m108 [m[4m        } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (!strcmp(tokens[[m[4m[38;5;130m0[m[4m], [m[4m[38;5;130m"send"[m[4m)) {                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H108,24[8C13%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 48 [m[79C[100m [m
[33m 49 [m[32mbool[m is_job([32mchar[m job[]);[55C[100m [m
[33m 50 [m[79C[100m [m[58;1H[93m105 [m[4m            call_signal[m[4m[46m([m[4margs, spcs[m[4m[46m)[m[4m;                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H105,24[8C12%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 45 [m[32mvoid[m handle_signal([32mint[m s);[53C[100m [m
[33m 46 [m[79C[100m [m
[33m 47 [m[32mbool[m is_number([32mchar[m number[]);[49C[100m [m[58;1H[93m102 [m[4m            [m[4m[36m// Report[m[4m                                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H102,21[8C11%[58;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 42 [m[79C[100m [m
[33m 43 [m[32mvoid[m cleanup([32mvoid[m);[60C[100m [m
[33m 44 [m[79C[100m [m[58;1H[93m 99 [m[4m            [m[4m[36m// spawn[m[4m                                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H99,20[9C10%[58;24H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 39 [m[32mvoid[m rcv([32mchar[m** args, [32mint[m spcs);[47C[100m [m
[33m 40 [m[79C[100m [m
[33m 41 [m[32mvoid[m eof([32mchar[m** args, [32mint[m spcs);[47C[100m [m[58;1H[93m 96 [m[4m        fflush([m[4m[38;5;130mstdout[m[4m);                                                        [m[4m[100m [m[4m                                [m[59;99H[K[59;99H96,23[9C10%[58;27H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 36 [m[79C[100m [m
[33m 37 [m[32mvoid[m send([32mchar[m** args, [32mint[m spcs);[46C[100m [m
[33m 38 [m[79C[100m [m[58;1H[93m 93 [m[4m            args[i - [m[4m[38;5;130m1[m[4m] = tokens[i];                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H93,24[10C9%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 33 [m[32mvoid[m call_signal([32mchar[m** args, [32mint[m spcs);[39C[100m [m
[33m 34 [m[79C[100m [m
[33m 35 [m[32mvoid[m hq_wait([32mchar[m** args, [32mint[m spcs);[43C[100m [m[58;1H[93m 90 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H90,0-1[9C8%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 30 [m[79C[100m [m
[33m 31 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs);[44C[100m [m
[33m 32 [m[79C[100m [m[58;1H[93m 87 [m[4m            [m[4m[33mcontinue[m[4m;                                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H87,21[10C7%[58;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 27 [m[36m// Function declarations[m[55C[100m [m
[33m 28 [m[79C[100m [m
[33m 29 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs);[45C[100m [m[58;1H[93m 84 [m[4m        [m[4m[33mif[m[4m (!strcmp(input, [m[4m[38;5;130m""[m[4m)) {                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H84,24[10C6%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 24 [m[79C[100m [m
[33m 25 [m[35m#endif[m      [36m// hq_h[m[60C[100m [m
[33m 26 [m[79C[100m [m[58;1H[93m 81 [m[4m    [m[4m[33mwhile[m[4m ((input = read_line([m[4m[38;5;130mstdin[m[4m)) != [m[4m[38;5;130mNULL[m[4m) {                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H81,24[10C6%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 21 [m[35m#define MAX_BUFFER_SIZE [m[38;5;130m52[m[53C[100m [m
[33m 22 [m[35m#define READ [m[38;5;130m0[m[65C[100m [m
[33m 23 [m[35m#define WRITE [m[38;5;130m1[m[64C[100m [m[58;1H[93m 78 [m[4m    printf([m[4m[38;5;130m"> "[m[4m);                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H78,17[10C5%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 18 [m[79C[100m [m
[33m 19 [m[36m// Defintions[m[66C[100m [m
[33m 20 [m[79C[100m [m[58;1H[93m 75 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H75,4[11C4%[58;8H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 15 [m[35m#include [m[38;5;130m<signal.h>[m[60C[100m [m
[33m 16 [m[35m#include [m[38;5;130m<ctype.h>[m[61C[100m [m
[33m 17 [m[35m#include [m[38;5;130m<stdbool.h>[m[59C[100m [m[58;1H[93m 72 [m[4m    [m[4m[32mchar[m[4m** tokens;                                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H72,18[10C3%[58;22H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 12 [m[35m#include [m[38;5;130m<fcntl.h>[m[61C[100m [m
[33m 13 [m[35m#include [m[38;5;130m<unistd.h>[m[60C[100m [m
[33m 14 [m[35m#include [m[38;5;130m<sys/wait.h>[m[58C[100m [m[58;1H[93m 69 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H69,0-1[9C2%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m  9 [m[35m#include [m[38;5;130m<stdio.h>[m[61C[100m [m
[33m 10 [m[35m#include [m[38;5;130m<string.h>[m[60C[100m [m
[33m 11 [m[35m#include [m[38;5;130m<csse2310a3.h>[m     [36m// given library[m[35C[100m [m[58;1H[93m 66 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H66,0-1[9C2%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m  6 [m[79C[100m [m
[33m  7 [m[35m#ifndef hq_h[m[67C[100m [m
[33m  8 [m[35m#include [m[38;5;130m<stdlib.h>[m[60C[100m [m[58;1H[93m 63 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H63,0-1[9C1%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m  3 [m[36m// Start Date: 4pm Friday 15th April, 2022[m[37C[100m [m
[33m  4 [m[36m// Due Date: 4pm Friday 13th May, 2022[m[41C[100m [m
[33m  5 [m[36m// Student Number: s4698512 (46985123)[m[41C[100m [m[58;1H[93m 60 [m[4m};                                                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H60,2[11C0%[58;6H[?25h[?25l[1;58r[1;1H[2L[1;59r[1;1H[33m  1 [m[36m// CSSE2310 Assignment 3 a3[m[52C[100m [m
[33m  2 [m[36m// By Hugo Burton[m[62C[100m [m[58;1H[93m 58 [m[4m    [m[4m[32mint[m[4m status;                                                                [m[4m[100m [m[4m                                [m[59;99H[K[59;99H58,15[9CTop[58;19H[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 59 [m    [32mint[m finished;[62C[100m [m
[33m 60 [m};[77C[100m [m
[33m 61 [m[79C[100m [m[59;99H[K[59;99H58,15[10C0%[55;19H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 62 [m[36m// Globals[m[69C[100m [m
[33m 63 [m[79C[100m [m
[33m 64 [m[32mint[m jobid = [38;5;130m0[m;[65C[100m [m[59;99H[K[59;99H58,15[10C1%[52;19H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 65 [m[32mstruct[m Job* jobs;[62C[100m [m
[33m 66 [m[79C[100m [m
[33m 67 [m[79C[100m [m[59;99H[K[59;99H58,15[10C2%[49;19H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 68 [m[36m// Program[m[69C[100m [m
[33m 69 [m[79C[100m [m
[33m 70 [m[32mint[m main([32mint[m argc, [32mchar[m* argv[]) {[45C[100m [m[59;99H[K[59;99H58,15[10C3%[46;19H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 71 [m    [32mchar[m* input;[63C[100m [m
[33m 72 [m    [32mchar[m** tokens;[61C[100m [m
[33m 73 [m[79C[100m [m[59;99H[K[59;99H58,15[10C4%[43;19H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 74 [m    jobs = ma[38;5;248m[104mlloc[m([38;5;130m0[m * [33msizeof[m([32mstruct[m Job));[37C[100m [m
[33m 75 [m[79C[100m [m
[33m 76 [m    signal([38;5;130mSIGINT[m, handle_signal);[45C[100m [m[59;99H[K[59;99H58,15[10C4%[40;19H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 77 [m    signal([38;5;130mSIGCHLD[m, handle_signal);[44C[100m [m
[33m 78 [m    printf([38;5;130m"> "[m);[62C[100m [m
[33m 79 [m    fflush([38;5;130mstdout[m);[60C[100m [m[59;99H[K[59;99H58,15[10C5%[37;19H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 80 [m    [36m// prompt loop[m[61C[100m [m
[33m 81 [m    [33mwhile[m ((input = read_line([38;5;130mstdin[m)) != [38;5;130mNULL[m) {[31C[100m [m
[33m 82 [m[8C[32mint[m spcs = [38;5;130m0[m;[58C[100m [m[59;99H[K[59;99H58,15[10C6%[34;19H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 83 [m[79C[100m [m
[33m 84 [m[8C[33mif[m (!strcmp(input, [38;5;130m""[m)) {[46C[100m [m
[33m 85 [m[12Cprintf([38;5;130m"> "[m);[54C[100m [m[59;99H[K[59;99H58,15[10C7%[31;19H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 86 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m 87 [m[12C[33mcontinue[m;[58C[100m [m
[33m 88 [m[8C}[70C[100m [m[59;99H[K[59;99H58,15[10C8%[28;19H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 89 [m[8Ctokens = split_space_not_quote(input, &spcs);[26C[100m [m
[33m 90 [m[79C[100m [m
[33m 91 [m[8C[32mchar[m* args[spcs];[54C[100m [m[59;99H[K[59;99H58,15[10C8%[25;19H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 92 [m[8C[33mfor[m ([32mint[m i = [38;5;130m1[m; i < spcs; i++) {[39C[100m [m
[33m 93 [m[12Cargs[i - [38;5;130m1[m] = tokens[i];[43C[100m [m
[33m 94 [m[8C}[70C[100m [m[59;99H[K[59;99H58,15[10C9%[22;19H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 95 [m[8Cargs[spcs - [38;5;130m1[m] = [38;5;130m0[m;[52C[100m [m
[33m 96 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m 97 [m[79C[100m [m[59;99H[K[59;99H58,15[9C10%[19;19H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 98 [m[8C[33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"spawn"[m)) {[37C[100m [m
[33m 99 [m[12C[36m// spawn[m[59C[100m [m
[33m100 [m[12Cspawn(args, spcs);[49C[100m [m[59;99H[K[59;99H58,15[9C11%[16;19H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m101 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"report"[m)) {[29C[100m [m
[33m102 [m[12C[36m// Report[m[58C[100m [m
[33m103 [m[12Creport(args, spcs);[48C[100m [m[59;99H[K[59;99H58,15[9C12%[13;19H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m104 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"signal"[m)) {[29C[100m [m
[33m105 [m[12Ccall_signal(args, spcs);[43C[100m [m
[33m106 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"sleep"[m)) {[30C[100m [m[59;99H[K[59;99H58,15[9C12%[10;19H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m107 [m[12Chq_wait(args, spcs);[47C[100m [m
[33m108 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"send"[m)) {[31C[100m [m
[33m109 [m[12Csend(args, spcs);[50C[100m [m[59;99H[K[59;99H58,15[9C13%[7;19H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m110 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"rcv"[m)) {[32C[100m [m
[33m111 [m[12Crcv(args, spcs);[51C[100m [m
[33m112 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"eof"[m)) {[32C[100m [m[59;99H[K[59;99H58,15[9C14%[4;19H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m113 [m[12Ceof(args, spcs);[51C[100m [m
[33m114 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"cleanup"[m)) {[28C[100m [m
[33m115 [m[12Ccleanup();[57C[100m [m[59;99H[K[59;99H58,15[9C15%[1;19H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 61 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m116 [m[8C} [33melse[m {[63C[100m [m
[33m117 [m[12Cprintf([38;5;130m"Error: Invalid command[m[35m\n[m[38;5;130m"[m);[32C[100m [m
[33m118 [m[8C}[70C[100m [m[59;99H[K[59;99H61,0-1[8C16%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 64 [m[4m[32mint[m[4m jobid = [m[4m[38;5;130m0[m[4m;                                                                 [m[4m[100m [m[4m                                [m[56;1H[33m119 [m[79C[100m [m
[33m120 [m[8Cprintf([38;5;130m"> "[m);[58C[100m [m
[33m121 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m[59;99H[K[59;99H64,14[9C16%[1;18H[?25h[?25l[33m 64 [m[32mint[m jobid = [38;5;130m0[m;                                                                 [100m [m[1;85H[K[18;1H[93m 81 [m[4m    [m[4m[33mwhile[m[4m ((input = read_line([m[4m[38;5;130mstdin[m[4m)) != [m[4m[38;5;130mNULL[m[4m) {                               [m[4m[100m [m[4m                                [m[59;99H81,23[18;27H[?25h[?25l[33m 81 [m    [33mwhile[m ((input = re[7m[48;5;242mad_line([m[7m[38;5;130m[48;5;242mstdin[m[7m[48;5;242m)) != [m[7m[38;5;130m[48;5;242mNULL[m[7m[48;5;242m) { [m                              [100m [m[18;85H[K[19;5H[7m[48;5;242m        [m[7m[32m[48;5;242mint[m[7m[48;5;242m spcs = [m[7m[38;5;130m[48;5;242m0[m[7m[48;5;242m; [20;5H [21;5H        [m[7m[33m[48;5;242mif[m[7m[48;5;242m (!strcmp(input, [m[7m[38;5;130m[48;5;242m""[m[7m[48;5;242m)) { [22;5H            printf([m[7m[38;5;130m[48;5;242m"> "[m[7m[48;5;242m); [23;5H            fflush([m[7m[38;5;130m[48;5;242mstdout[m[7m[48;5;242m); [m
[93m 87 [m[7m[48;5;242m            [m[7m[33m[48;5;242mcontinue[m[7m[48;5;242m;[m[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H87,22[9C16%[24;26H[?25h[?25l[18;27Had_line([38;5;130mstdin[m)) != [38;5;130mNULL[m) { [19;5H        [32mint[m spcs = [38;5;130m0[m; [20;5H [21;5H        [33mif[m (!strcmp(input, [38;5;130m""[m)) { [22;5H            printf([38;5;130m"> "[m); [23;5H            fflush([38;5;130mstdout[m); [24;5H[4m            [m[4m[33mcontinue[m[4m;                                                          [m[4m[100m [m[4m                                [m[59;1H[K[59;99H87,21[9C16%[24;25H[?25h[?25l[23;1H[93m 86 [m[4m            fflush([m[4m[38;5;130mstdout[m[4m);                                                    [m[4m[100m [m[4m                                [m[24;1H[33m 87 [m            [33mcontinue[m;                                                          [100m [m[24;85H[K[59;100H6,27[23;31H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m122 [m[79C[100m [m
[33m123 [m[8Cfree(input);[59C[100m [m
[33m124 [m[8Cfree(tokens);[58C[100m [m[59;99H[K[59;99H86,27[9C17%[20;31H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m125 [m    }[74C[100m [m
[33m126 [m[79C[100m [m
[33m127 [m    free(jobs);[64C[100m [m[59;99H[K[59;99H86,27[9C18%[17;31H[?25h[?25l[33m 86 [m            fflush([38;5;130mstdout[m);                                                    [100m [m[17;85H[K[50;1H[93m119 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H119,0-1[50;5H[?25h[?25l[29;1H[93m 98 [m[4m        [m[4m[33mif[m[4m (!strcmp(tokens[[m[4m[38;5;130m0[m[4m], [m[4m[38;5;130m"spawn"[m[4m)) {                                     [m[4m[100m [m[4m                                [m[50;1H[33m119 [m                                                                               [100m [m[50;85H[K[59;99H98,21  [29;25H[?25h[?25l[33m 98 [m        [33mif[m (!strcmp([7m[48;5;242mtokens[[m[7m[38;5;130m[48;5;242m0[m[7m[48;5;242m], [m[7m[38;5;130m[48;5;242m"spawn"[m[7m[48;5;242m)) { [m                                    [100m [m[29;85H[K[30;5H[7m[48;5;242m            [m[7m[36m[48;5;242m// spawn[m[7m[48;5;242m [31;5H            spawn(args, spcs); [m
[93m101 [m[7m[48;5;242m        } [m[7m[33m[48;5;242melse[m[7m[48;5;242m [m[7m[33m[48;5;242mif[m[7m[48;5;242m (!st[m[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H101,23[8C18%[32;27H[?25h[?25l[29;25Htokens[[38;5;130m0[m], [38;5;130m"spawn"[m)) { [30;5H            [36m// spawn[m 
[93m100 [m[4m            spawn(args, spcs);                                                 [m[4m[100m [m[4m                                [m[32;1H[33m101 [m        } [33melse[m [33mif[m (!st[59;1H[K[59;99H100,22[8C18%[31;26H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m128 [m    [33mreturn[m [38;5;130m0[m;[66C[100m [m
[33m129 [m}[78C[100m [m
[33m130 [m[79C[100m [m[59;99H[K[59;99H100,22[8C19%[28;26H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m131 [m[36m/* spawn()[m[69C[100m [m
[33m132 [m[36m * -------[m[69C[100m [m
[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m[59;99H[K[59;99H100,22[8C20%[25;26H[?25h[?25l[33m100 [m            spawn(args, spcs);                                                 [100m [m[25;85H[K[48;1H[93m123 [m[4m        free(input);                                                           [m[4m[100m [m[4m                                [m[59;100H23,9 [48;13H[?25h[?25l[59;1H[38;5;130m-- INSERT --[m[59;99H[K[59;99H123,9[9C20%[48;13H[?25h[?25l[4m/free(input);[m[59;103H10[48;14H[?25h[?25l[4m[36m//free(input);[m[59;104H1[48;15H[?25h[?25l[33m123 [m        [36m//free(input);[m                                                         [100m [m[48;85H[K[49;1H[93m124 [m[4m        free(tokens);                                                          [m[4m[100m [m[4m                                [m[59;101H4[49;15H[?25h[?25l[59;104H0[49;14H[?25h[?25l[59;103H9 [49;13H[?25h[?25l[4m/free(tokens);[m[59;103H10[49;14H[?25h[?25l[4m[36m//free(tokens);[m[59;104H1[49;15H[?25h[?25l[48;1H[93m123 [m[4m        [m[4m[36m//free(input);[m[4m                                                         [m[4m[100m [m[4m                                [m[49;1H[33m124 [m        [36m//free(tokens);[m                                                        [100m [m[49;85H[K[59;101H3[48;15H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m
[33m135 [m[36m * of the child process is unchanged[m[43C[100m [m
[33m136 [m[36m *[m[77C[100m [m[59;99H[K[59;99H123,11[8C20%[45;15H[1;58r[1;1H[3M[1;59r[56;1H[33m137 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m138 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m139 [m[36m */[m[76C[100m [m[59;99H[K[59;99H123,11[8C21%[42;15H[1;58r[1;1H[3M[1;59r[56;1H[33m140 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs) {[44C[100m [m
[33m141 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m142 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m[59;99H[K[59;99H123,11[8C22%[39;15H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m143 [m    } [33melse[m {[67C[100m [m
[33m144 [m[8Cjobs = rea[38;5;248m[104mlloc[m(jobs, (jobid + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));[16C[100m [m
[33m145 [m[79C[100m [m[59;99H[K[59;99H123,11[8C23%[36;15H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m146 [m[8Cstrcpy(jobs[jobid].name, args[[38;5;130m0[m]);[37C[100m [m
[33m147 [m[79C[100m [m
[33m148 [m[8C[33mif[m (pipe(jobs[jobid].down) < [38;5;130m0[m) {[38C[100m [m[59;99H[K[59;99H123,11[8C24%[33;15H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m149 [m[12Cperror([38;5;130m"Creating down pipe"[m);[38C[100m [m
[33m150 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m151 [m[8C}[70C[100m [m[59;99H[K[59;99H123,11[8C24%[30;15H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m152 [m[79C[100m [m
[33m153 [m[8C[33mif[m (pipe(jobs[jobid].up) < [38;5;130m0[m) {[40C[100m [m
[33m154 [m[12Cperror([38;5;130m"Creating up pipe"[m);[40C[100m [m[59;99H[K[59;99H123,11[8C25%[27;15H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m155 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m156 [m[8C}[70C[100m [m
[33m157 [m[79C[100m [m[59;99H[K[59;99H123,11[8C26%[24;15H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m158 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, jobid);[28C[100m [m
[33m159 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m160 [m[79C[100m [m[59;99H[K[59;99H123,11[8C27%[21;15H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m161 [m[8Cjobs[jobid].pid = fork();[46C[100m [m
[33m162 [m[8C[33mif[m (!jobs[jobid].pid) {[48C[100m [m
[33m163 [m[12C[36m// child[m[59C[100m [m[59;99H[K[59;99H123,11[8C28%[18;15H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m164 [m[79C[100m [m
[33m165 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m166 [m[12Cclose(jobs[jobid].down[WRITE]);[36C[100m [m[59;99H[K[59;99H123,11[8C28%[15;15H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m167 [m[12Cclose(jobs[jobid].up[READ]);[39C[100m [m
[33m168 [m[79C[100m [m
[33m169 [m[12Cdup2(jobs[jobid].down[READ], STDIN_FILENO);[24C[100m [m[59;99H[K[59;99H123,11[8C29%[12;15H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m170 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m
[33m171 [m[12Cdup2(jobs[jobid].up[WRITE], STDOUT_FILENO);[24C[100m [m
[33m172 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m[59;99H[K[59;99H123,11[8C30%[9;15H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m173 [m[79C[100m [m
[33m174 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m175 [m[12Cfflush([38;5;130mstderr[m);[52C[100m [m[59;99H[K[59;99H123,11[8C31%[6;15H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m176 [m[79C[100m [m
[33m177 [m[12C[32mint[m status;[56C[100m [m
[33m178 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m[59;99H[K[59;99H123,11[8C32%[3;15H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m124 [m[4m        [m[4m[36m//free(tokens);[m[4m                                                        [m[4m[100m [m[4m                                [m[56;1H[33m179 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m
[33m180 [m[16Cexit([38;5;130m99[m);[54C[100m [m
[33m181 [m[12C}[66C[100m [m[59;99H[K[59;99H124,11[8C32%[1;15H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m127 [m[4m    free(jobs);                                                                [m[4m[100m [m[4m                                [m[56;1H[33m182 [m[8C} [33melse[m {[63C[100m [m
[33m183 [m[12C[36m// parent[m[58C[100m [m
[33m184 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m[59;99H[K[59;99H127,11[8C33%[1;15H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m130 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m185 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m
[33m186 [m[79C[100m [m
[33m187 [m[12Cjobid++;[59C[100m [m[59;99H[K[59;99H130,1[9C34%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m133 [m[4m[36m * Runs specified program in a new process with optional arguments provided.[m[4m   [m[4m[100m [m[4m                                [m[56;1H[33m188 [m[8C}[70C[100m [m
[33m189 [m    }[74C[100m [m
[33m190 [m}[78C[100m [m[59;99H[K[59;99H133,11[8C35%[1;15H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m136 [m[4m[36m *[m[4m                                                                             [m[4m[100m [m[4m                                [m[56;1H[33m191 [m[79C[100m [m
[33m192 [m[36m/* report()[m[68C[100m [m
[33m193 [m[36m * --------[m[68C[100m [m[59;99H[K[59;99H136,3[9C36%[1;7H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m139 [m[4m[36m */[m[4m                                                                            [m[4m[100m [m[4m                                [m[56;1H[33m194 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m
[33m195 [m[36m *[m[77C[100m [m
[33m196 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[59;99H[K[59;99H139,4[9C36%[1;8H[?25h[?25l[33m139 [m[36m */[m                                                                            [100m [m[1;85H[K[40;1H[93m178 [m[4m            status = execvp(args[[m[4m[38;5;130m0[m[4m], args);                                    [m[4m[100m [m[4m                                [m[59;100H78,30[40;34H[?25h[?25l[59;4H[38;5;130m(insert) VISUAL --[m[59;99H[K[59;99H178,39[8C36%[40;5H            status = execvp(a[7m[48;5;242mrgs[[m[7m[38;5;130m[48;5;242m0[m[7m[48;5;242m], a[mrgs);                                    [100m [m[40;85H[K[40;43H[?25h[?25l[59;4H[38;5;130mINSERT --[m[59;13H[K[59;99H178,39[8C36%[40;5H[4m            status = execvp(args[[m[4m[38;5;130m0[m[4m], args);                                    [m[4m[100m [m[4m                                [40;43H[?25h[?25l[1;58r[m[1;1H[3L[1;59r[1;1H[33m136 [m[36m *[m[77C[100m [m
[33m137 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m138 [m[36m * spcs: number of original tokens[m[45C[100m [m[59;99H[K[59;99H178,39[8C36%[43;43H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m
[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m
[33m135 [m[36m * of the child process is unchanged[m[43C[100m [m[59;99H[K[59;99H178,39[8C35%[46;43H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m130 [m[79C[100m [m
[33m131 [m[36m/* spawn()[m[69C[100m [m
[33m132 [m[36m * -------[m[69C[100m [m[59;99H[K[59;99H178,39[8C34%[49;43H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m127 [m    free(jobs);[64C[100m [m
[33m128 [m    [33mreturn[m [38;5;130m0[m;[66C[100m [m
[33m129 [m}[78C[100m [m[59;99H[K[59;99H178,39[8C33%[52;43H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m124 [m[8C[36m//free(tokens);[m[56C[100m [m
[33m125 [m    }[74C[100m [m
[33m126 [m[79C[100m [m[59;99H[K[59;99H178,39[8C32%[55;43H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m121 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m122 [m[79C[100m [m
[33m123 [m[8C[36m//free(input);[m[57C[100m [m[59;99H[K[59;99H178,39[8C32%[58;43H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m118 [m[8C}[70C[100m [m
[33m119 [m[79C[100m [m
[33m120 [m[8Cprintf([38;5;130m"> "[m);[58C[100m [m[58;1H[93m175 [m[4m            fflush([m[4m[38;5;130mstderr[m[4m);                                                    [m[4m[100m [m[4m                                [m[59;99H[K[59;99H175,28[8C31%[58;32H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m115 [m[12Ccleanup();[57C[100m [m
[33m116 [m[8C} [33melse[m {[63C[100m [m
[33m117 [m[12Cprintf([38;5;130m"Error: Invalid command[m[35m\n[m[38;5;130m"[m);[32C[100m [m[58;1H[93m172 [m[4m            close(jobs[jobid].up[WRITE]);                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H172,39[8C30%[58;37H[4m[46m[[5C][?25h[?25l[1;58r[m[1;1H[3L[1;59r[1;1H[33m112 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"eof"[m)) {[32C[100m [m
[33m113 [m[12Ceof(args, spcs);[51C[100m [m
[33m114 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"cleanup"[m)) {[28C[100m [m[58;1H[93m169 [m[4m            dup2(jobs[jobid].down[READ], STDIN_FILENO);                        [m[4m[100m [m[4m                                [m[59;99H[K[59;99H169,39[8C29%[58;38H[4m[46m[[4C][?25h[?25l[1;58r[m[1;1H[3L[1;59r[1;1H[33m109 [m[12Csend(args, spcs);[50C[100m [m
[33m110 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"rcv"[m)) {[32C[100m [m
[33m111 [m[12Crcv(args, spcs);[51C[100m [m[58;1H[93m166 [m[4m            close(jobs[jobid].down[WRITE]);                                    [m[4m[100m [m[4m                                [m[59;99H[K[59;99H166,39[8C28%[58;43H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m106 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"sleep"[m)) {[30C[100m [m
[33m107 [m[12Chq_wait(args, spcs);[47C[100m [m
[33m108 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"send"[m)) {[31C[100m [m[58;1H[93m163 [m[4m            [m[4m[36m// child[m[4m                                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H163,21[8C28%[58;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m103 [m[12Creport(args, spcs);[48C[100m [m
[33m104 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"signal"[m)) {[29C[100m [m
[33m105 [m[12Ccall_signal(args, spcs);[43C[100m [m[58;1H[93m160 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H160,1[9C27%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m100 [m[12Cspawn(args, spcs);[49C[100m [m
[33m101 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"report"[m)) {[29C[100m [m
[33m102 [m[12C[36m// Report[m[58C[100m [m[58;1H[93m157 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H157,1[9C26%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 97 [m[79C[100m [m
[33m 98 [m[8C[33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"spawn"[m)) {[37C[100m [m
[33m 99 [m[12C[36m// spawn[m[59C[100m [m[58;1H[93m154 [m[4m            perror([m[4m[38;5;130m"Creating up pipe"[m[4m);                                        [m[4m[100m [m[4m                                [m[59;99H[K[59;99H154,39[8C25%[58;23H[4m[46m([18C)[?25h[?25l[1;58r[m[1;1H[3L[1;59r[1;1H[33m 94 [m[8C}[70C[100m [m
[33m 95 [m[8Cargs[spcs - [38;5;130m1[m] = [38;5;130m0[m;[52C[100m [m
[33m 96 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m[58;1H[93m151 [m[4m        }                                                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H151,10[8C24%[55;45H[46m{[m[58;13H[4m[46m}[?25h[?25l[1;58r[m[1;1H[3L[1;59r[1;1H[33m 91 [m[8C[32mchar[m* args[spcs];[54C[100m [m
[33m 92 [m[8C[33mfor[m ([32mint[m i = [38;5;130m1[m; i < spcs; i++) {[39C[100m [m
[33m 93 [m[12Cargs[i - [38;5;130m1[m] = tokens[i];[43C[100m [m[58;1H[93m148 [m[4m        [m[4m[33mif[m[4m (pipe(jobs[jobid].down) < [m[4m[38;5;130m0[m[4m) [m[4m[46m{[m[4m                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H148,39[8C24%[58;16H[4m[46m([26C)[m[1C[4m{[?25h[m[59;1H[K[58;42H[?25l[58;16H[4m([26C)[m[59;99H148,38[8C24%[58;42H[?25h[?25l[30;1H[93m120 [m[4m        printf([m[4m[38;5;130m"> "[m[4m);                                                          [m[4m[100m [m[4m                                [m[58;1H[33m148 [m        [33mif[m (pipe(jobs[jobid].down) < [38;5;130m0[m) {                                      [100m [m[58;85H[K[59;100H20,9 [30;13H[?25h[?25l[33m120 [m        [7m[48;5;242mprintf([m[7m[38;5;130m[48;5;242m"> "[m[7m[48;5;242m); [m                                                         [100m [m[30;85H[K[31;1H[93m121 [m[7m[48;5;242m        fflush([m[7m[38;5;130m[48;5;242ms[m[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H121,17[8C24%[31;21H[?25h[?25l[30;13Hprintf([38;5;130m"> "[m); [31;5H[4m        fflush([m[4m[38;5;130mstdout[m[4m);                                                        [m[4m[100m [m[4m                                [m[59;1H[K[59;99H121,20[8C24%[31;24H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 88 [m[8C}[70C[100m [m
[33m 89 [m[8Ctokens = split_space_not_quote(input, &spcs);[26C[100m [m
[33m 90 [m[79C[100m [m[59;99H[K[59;99H121,20[8C23%[34;24H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 85 [m[12Cprintf([38;5;130m"> "[m);[54C[100m [m
[33m 86 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m 87 [m[12C[33mcontinue[m;[58C[100m [m[59;99H[K[59;99H121,20[8C22%[37;24H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 82 [m[8C[32mint[m spcs = [38;5;130m0[m;[58C[100m [m
[33m 83 [m[79C[100m [m
[33m 84 [m[8C[33mif[m (!strcmp(input, [38;5;130m""[m)) {[46C[100m [m[59;99H[K[59;99H121,20[8C21%[40;24H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 79 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m 80 [m    [36m// prompt loop[m[61C[100m [m
[33m 81 [m    [33mwhile[m ((input = read_line([38;5;130mstdin[m)) != [38;5;130mNULL[m) {[31C[100m [m[59;99H[K[59;99H121,20[8C20%[43;24H[?25h[?25l[42;1H[93m120 [m[4m        printf[m[4m[46m([m[4m[38;5;130m"> "[m[4m[46m)[m[4m;                                                          [m[4m[100m [m[4m                                [m[43;1H[33m121 [m        fflush([38;5;130mstdout[m);                                                        [100m [m[43;85H[K[59;101H0,15[42;19H[?25h[?25l[42;5H        printf[7m[48;5;242m([m[7m[38;5;130m[48;5;242m"> [m[38;5;130m"[m);                                                          [100m [m[42;85H[K[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H120,19[8C20%[42;23H[?25h[?25l[33m120 [m[14C([38;5;130m"> [m
[93m121 [m[4m        fflush([m[4m[38;5;130mstdout[m[4m);                                                        [m[4m[100m [m[4m                                [m[59;1H[K[59;99H121,20[8C20%[43;24H[?25h[?25l[59;99H[K[59;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?1000l[?2004l"hq.c" 433L, 10702C written
[?2004l[?1l>[?25h[?1049l[23;0;0ts4698512@moss:~/CSSE2310/Assignments/a3$ make
gcc -g -Wall -pedantic -std=gnu99 -o hq hq.c -I/local/courses/csse2310/include -L/local/courses/csse2310/lib -lcsse2310a3
s4698512@moss:~/CSSE2310/Assignments/a3$ ./hq
> spawn scr   cat
New Job ID [0] created
> spawn ls
New Job ID [1] created
> spawn ls
^Cs4698512@moss:~/CSSE2310/Assignments/a3$ ./hqmakevim hq.c
[?1000h[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;59r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[59;1H"hq.c" 433L, 10702C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[33m 93 [m[12Cargs[i - [38;5;130m1[m] = tokens[i];[43C[100m [m
[33m 94 [m[8C}[70C[100m [m
[33m 95 [m[8Cargs[spcs - [38;5;130m1[m] = [38;5;130m0[m;[52C[100m [m
[33m 96 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m 97 [m[79C[100m [m
[33m 98 [m[8C[33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"spawn"[m)) {[37C[100m [m
[33m 99 [m[12C[36m// spawn[m[59C[100m [m
[33m100 [m[12Cspawn(args, spcs);[49C[100m [m
[33m101 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"report"[m)) {[29C[100m [m
[33m102 [m[12C[36m// Report[m[58C[100m [m
[33m103 [m[12Creport(args, spcs);[48C[100m [m
[33m104 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"signal"[m)) {[29C[100m [m
[33m105 [m[12Ccall_signal(args, spcs);[43C[100m [m
[33m106 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"sleep"[m)) {[30C[100m [m
[33m107 [m[12Chq_wait(args, spcs);[47C[100m [m
[33m108 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"send"[m)) {[31C[100m [m
[33m109 [m[12Csend(args, spcs);[50C[100m [m
[33m110 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"rcv"[m)) {[32C[100m [m
[33m111 [m[12Crcv(args, spcs);[51C[100m [m
[33m112 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"eof"[m)) {[32C[100m [m
[33m113 [m[12Ceof(args, spcs);[51C[100m [m
[33m114 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"cleanup"[m)) {[28C[100m [m
[33m115 [m[12Ccleanup();[57C[100m [m
[33m116 [m[8C} [33melse[m {[63C[100m [m
[33m117 [m[12Cprintf([38;5;130m"Error: Invalid command[m[35m\n[m[38;5;130m"[m);[32C[100m [m
[33m118 [m[8C}[70C[100m [m
[33m119 [m[79C[100m [m
[33m120 [m[8Cprintf([38;5;130m"> "[m);[58C[100m [m
[93m121 [m[4m        fflush([m[4m[38;5;130mstdout[m[4m);                                                        [m[4m[100m [m[4m                                [m[30;1H[33m122 [m[79C[100m [m
[33m123 [m[8C[36m//free(input);[m[57C[100m [m
[33m124 [m[8C[36m//free(tokens);[m[56C[100m [m
[33m125 [m    }[74C[100m [m
[33m126 [m[79C[100m [m
[33m127 [m    free(jobs);[64C[100m [m
[33m128 [m    [33mreturn[m [38;5;130m0[m;[66C[100m [m
[33m129 [m}[78C[100m [m
[33m130 [m[79C[100m [m
[33m131 [m[36m/* spawn()[m[69C[100m [m
[33m132 [m[36m * -------[m[69C[100m [m
[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m
[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m
[33m135 [m[36m * of the child process is unchanged[m[43C[100m [m
[33m136 [m[36m *[m[77C[100m [m
[33m137 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m138 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m139 [m[36m */[m[76C[100m [m
[33m140 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs) {[44C[100m [m
[33m141 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m142 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m143 [m    } [33melse[m {[67C[100m [m
[33m144 [m[8Cjobs = rea[38;5;248m[104mlloc[m(jobs, (jobid + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));[16C[100m [m
[33m145 [m[79C[100m [m
[33m146 [m[8Cstrcpy(jobs[jobid].name, args[[38;5;130m0[m]);[37C[100m [m
[33m147 [m[79C[100m [m
[33m148 [m[8C[33mif[m (pipe(jobs[jobid].down) < [38;5;130m0[m) {[38C[100m [m
[33m149 [m[12Cperror([38;5;130m"Creating down pipe"[m);[38C[100m [m
[33m150 [m[12Cexit([38;5;130m1[m);[59C[100m [m[59;99H121,9[9C24%[29;13H[?25h[?12$p[?25l[33m121 [m        fflush([38;5;130mstdout[m);                                                        [100m [m[29;85H[K[31;1H[93m123 [m[4m        [m[4m[36m//free(input);[m[4m                                                         [m[4m[100m [m[4m                                [m[59;101H3,11[31;15H[?25h[?25l[59;1H[38;5;130m-- INSERT --[m[59;14H[K[59;99H123,11[8C24%[31;15H[?25h[?25l[4m/free(input); [m[59;104H0[31;14H[?25h[?25l[4mfree(input); [m[59;103H9 [31;13H[?25h[?25l[33m123 [m        free(input);                                                           [100m [m[31;85H[K[32;1H[93m124 [m[4m        [m[4m[36m//free(tokens);[m[4m                                                        [m[4m[100m [m[4m                                [m[59;101H4[32;13H[?25h[?25l[59;103H10[32;14H[?25h[?25l[59;104H1[32;15H[?25h[?25l[59;104H2[32;16H[?25h[?25l[59;104H1[32;15H[?25h[?25l[4m/free(tokens); [m[59;104H0[32;14H[?25h[?25l[4mfree(tokens); [m[59;103H9 [32;13H[?25h[59;1H[K[32;12H[?25l[59;99H124,8[9C24%[32;12H[?25h[?25l[59;99H[K[59;1H:[?2004h[?25hw[?25l[?25h[?25l"hq.c" 433L, 10698C written[71C124,8[9C24%[59;99H[K[59;99H124,8[9C24%[32;12H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 90 [m[79C[100m [m
[33m 91 [m[8C[32mchar[m* args[spcs];[54C[100m [m
[33m 92 [m[8C[33mfor[m ([32mint[m i = [38;5;130m1[m; i < spcs; i++) {[39C[100m [m[59;1H[K[59;99H124,8[9C23%[35;12H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 87 [m[12C[33mcontinue[m;[58C[100m [m
[33m 88 [m[8C}[70C[100m [m
[33m 89 [m[8Ctokens = split_space_not_quote(input, &spcs);[26C[100m [m[59;99H[K[59;99H124,8[9C22%[38;12H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 84 [m[8C[33mif[m (!strcmp(input, [38;5;130m""[m)) {[46C[100m [m
[33m 85 [m[12Cprintf([38;5;130m"> "[m);[54C[100m [m
[33m 86 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m[59;99H[K[59;99H124,8[9C22%[41;12H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 81 [m    [33mwhile[m ((input = read_line([38;5;130mstdin[m)) != [38;5;130mNULL[m) {[31C[100m [m
[33m 82 [m[8C[32mint[m spcs = [38;5;130m0[m;[58C[100m [m
[33m 83 [m[79C[100m [m[59;99H[K[59;99H124,8[9C21%[44;12H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 78 [m    printf([38;5;130m"> "[m);[62C[100m [m
[33m 79 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m 80 [m    [36m// prompt loop[m[61C[100m [m[59;99H[K[59;99H124,8[9C20%[47;12H[?25h[?25l[59;99H[K[59;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?1000l[?2004l"hq.c" 433L, 10698C written
[?2004l[?1l>[?25h[?1049l[23;0;0ts4698512@moss:~/CSSE2310/Assignments/a3$ gdb ./hq
GNU gdb (GDB) Red Hat Enterprise Linux 8.2-16.el8
Copyright (C) 2018 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.
Type "show copying" and "show warranty" for details.
This GDB was configured as "x86_64-redhat-linux-gnu".
Type "show configuration" for configuration details.
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/>.
Find the GDB manual and other documentation resources online at:
    <http://www.gnu.org/software/gdb/documentation/>.

For help, type "help".
Type "apropos word" to search for commands related to "word"...
Reading symbols from ./hq...done.
(gdb) break main
Breakpoint 1 at 0x400e4e: file hq.c, line 74.
(gdb) run
Starting program: /home/students/s4698512/CSSE2310/Assignments/a3/hq 
Missing separate debuginfos, use: yum debuginfo-install glibc-2.28-164.el8.x86_64

Breakpoint 1, main (argc=1, argv=0x7fffffffd568) at hq.c:74
warning: Source file is more recent than executable.
74	    jobs = malloc(0 * sizeof(struct Job));
(gdb) c
Continuing.
> spawn l cat
New Job ID [0] created
[Detaching after fork from child process 1866249]
> spawn ls
New Job ID [1] created
[Detaching after fork from child process 1866250]
> spawn ls
^C
Program received signal SIGINT, Interrupt.
0x00007ffff78d0aab in waitpid () from /lib64/libc.so.6
(gdb) list
69	
70	int main(int argc, char* argv[]) {
71	    char* input;
72	    char** tokens;
73	    
74	    jobs = malloc(0 * sizeof(struct Job));
75	    
76	    signal(SIGINT, handle_signal);
77	    signal(SIGCHLD, handle_signal);
78	    printf("> ");
(gdb) quit
A debugging session is active.

	Inferior 1 [process 1866243] will be killed.

Quit anyway? (y or n) y
s4698512@moss:~/CSSE2310/Assignments/a3$ gdb ./hqvim hq.c
[?1000h[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;59r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[59;1H"hq.c" 433L, 10698C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[33m 96 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m 97 [m[79C[100m [m
[33m 98 [m[8C[33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"spawn"[m)) {[37C[100m [m
[33m 99 [m[12C[36m// spawn[m[59C[100m [m
[33m100 [m[12Cspawn(args, spcs);[49C[100m [m
[33m101 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"report"[m)) {[29C[100m [m
[33m102 [m[12C[36m// Report[m[58C[100m [m
[33m103 [m[12Creport(args, spcs);[48C[100m [m
[33m104 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"signal"[m)) {[29C[100m [m
[33m105 [m[12Ccall_signal(args, spcs);[43C[100m [m
[33m106 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"sleep"[m)) {[30C[100m [m
[33m107 [m[12Chq_wait(args, spcs);[47C[100m [m
[33m108 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"send"[m)) {[31C[100m [m
[33m109 [m[12Csend(args, spcs);[50C[100m [m
[33m110 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"rcv"[m)) {[32C[100m [m
[33m111 [m[12Crcv(args, spcs);[51C[100m [m
[33m112 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"eof"[m)) {[32C[100m [m
[33m113 [m[12Ceof(args, spcs);[51C[100m [m
[33m114 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"cleanup"[m)) {[28C[100m [m
[33m115 [m[12Ccleanup();[57C[100m [m
[33m116 [m[8C} [33melse[m {[63C[100m [m
[33m117 [m[12Cprintf([38;5;130m"Error: Invalid command[m[35m\n[m[38;5;130m"[m);[32C[100m [m
[33m118 [m[8C}[70C[100m [m
[33m119 [m[79C[100m [m
[33m120 [m[8Cprintf([38;5;130m"> "[m);[58C[100m [m
[33m121 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m122 [m[79C[100m [m
[33m123 [m[8Cfree(input);[59C[100m [m
[93m124 [m[4m        free(tokens);                                                          [m[4m[100m [m[4m                                [m[30;1H[33m125 [m    }[74C[100m [m
[33m126 [m[79C[100m [m
[33m127 [m    free(jobs);[64C[100m [m
[33m128 [m    [33mreturn[m [38;5;130m0[m;[66C[100m [m
[33m129 [m}[78C[100m [m
[33m130 [m[79C[100m [m
[33m131 [m[36m/* spawn()[m[69C[100m [m
[33m132 [m[36m * -------[m[69C[100m [m
[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m
[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m
[33m135 [m[36m * of the child process is unchanged[m[43C[100m [m
[33m136 [m[36m *[m[77C[100m [m
[33m137 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m138 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m139 [m[36m */[m[76C[100m [m
[33m140 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs) {[44C[100m [m
[33m141 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m142 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m143 [m    } [33melse[m {[67C[100m [m
[33m144 [m[8Cjobs = rea[38;5;248m[104mlloc[m(jobs, (jobid + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));[16C[100m [m
[33m145 [m[79C[100m [m
[33m146 [m[8Cstrcpy(jobs[jobid].name, args[[38;5;130m0[m]);[37C[100m [m
[33m147 [m[79C[100m [m
[33m148 [m[8C[33mif[m (pipe(jobs[jobid].down) < [38;5;130m0[m) {[38C[100m [m
[33m149 [m[12Cperror([38;5;130m"Creating down pipe"[m);[38C[100m [m
[33m150 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m151 [m[8C}[70C[100m [m
[33m152 [m[79C[100m [m
[33m153 [m[8C[33mif[m (pipe(jobs[jobid].up) < [38;5;130m0[m) {[40C[100m [m[59;99H124,9[9C25%[29;13H[?25h[?12$p[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m154 [m[12Cperror([38;5;130m"Creating up pipe"[m);[40C[100m [m
[33m155 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m156 [m[8C}[70C[100m [m[59;1H[K[59;99H124,9[9C26%[26;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m157 [m[79C[100m [m
[33m158 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, jobid);[28C[100m [m
[33m159 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m[59;99H[K[59;99H124,9[9C26%[23;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m160 [m[79C[100m [m
[33m161 [m[8Cjobs[jobid].pid = fork();[46C[100m [m
[33m162 [m[8C[33mif[m (!jobs[jobid].pid) {[48C[100m [m[59;99H[K[59;99H124,9[9C27%[20;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m163 [m[12C[36m// child[m[59C[100m [m
[33m164 [m[79C[100m [m
[33m165 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m[59;99H[K[59;99H124,9[9C28%[17;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m166 [m[12Cclose(jobs[jobid].down[WRITE]);[36C[100m [m
[33m167 [m[12Cclose(jobs[jobid].up[READ]);[39C[100m [m
[33m168 [m[79C[100m [m[59;99H[K[59;99H124,9[9C29%[14;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m169 [m[12Cdup2(jobs[jobid].down[READ], STDIN_FILENO);[24C[100m [m
[33m170 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m
[33m171 [m[12Cdup2(jobs[jobid].up[WRITE], STDOUT_FILENO);[24C[100m [m[59;99H[K[59;99H124,9[9C30%[11;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m172 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m
[33m173 [m[79C[100m [m
[33m174 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m[59;99H[K[59;99H124,9[9C30%[8;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m175 [m[12Cfflush([38;5;130mstderr[m);[52C[100m [m
[33m176 [m[79C[100m [m
[33m177 [m[12C[32mint[m status;[56C[100m [m[59;99H[K[59;99H124,9[9C31%[5;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m178 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m
[33m179 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m
[33m180 [m[16Cexit([38;5;130m99[m);[54C[100m [m[59;99H[K[59;99H124,9[9C32%[2;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m126 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m181 [m[12C}[66C[100m [m
[33m182 [m[8C} [33melse[m {[63C[100m [m
[33m183 [m[12C[36m// parent[m[58C[100m [m[59;99H[K[59;99H126,4[9C33%[1;8H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m129 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[56;1H[33m184 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m
[33m185 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m
[33m186 [m[79C[100m [m[59;99H[K[59;99H129,1[9C34%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m132 [m[4m[36m * -------[m[4m                                                                     [m[4m[100m [m[4m                                [m[56;1H[33m187 [m[12Cjobid++;[59C[100m [m
[33m188 [m[8C}[70C[100m [m
[33m189 [m    }[74C[100m [m[59;99H[K[59;99H132,9[9C34%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m135 [m[4m[36m * of the child process is unchanged[m[4m                                           [m[4m[100m [m[4m                                [m[56;1H[33m190 [m}[78C[100m [m
[33m191 [m[79C[100m [m
[33m192 [m[36m/* report()[m[68C[100m [m[59;99H[K[59;99H135,9[9C35%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m138 [m[4m[36m * spcs: number of original tokens[m[4m                                             [m[4m[100m [m[4m                                [m[56;1H[33m193 [m[36m * --------[m[68C[100m [m
[33m194 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m
[33m195 [m[36m *[m[77C[100m [m[59;99H[K[59;99H138,9[9C36%[1;13H[?25h[?25l[33m138 [m[36m * spcs: number of original tokens[m                                             [100m [m[1;85H[K[49;1H[93m186 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;100H86,0-1[49;5H[?25h[?25l[59;1H[38;5;130m-- INSERT --[m[59;99H[K[59;99H186,1[9C36%[49;5H[?25h[?25l[59;103H5[49;9H[?25h[?25l[59;103H9[49;13H[?25h[?25l[59;103H13[49;17H[?25h[?25l[4mp[m[59;104H4[49;18H[?25h[?25l[4mr[m[59;104H5[49;19H[?25h[?25l[4mi[m[59;104H6[49;20H[?25h[?25l[4mn[m[59;104H7[49;21H[?25h[?25l[4mt[m[59;104H8[49;22H[?25h[?25l[4mf[m[59;104H9[49;23H[?25h[?25l[4m([m[59;103H20[49;24H[?25h[?25l[4m[38;5;130m"[m[50;5H[38;5;130m            jobid++;[51;5H        }[52;5H    }[53;5H}[55;5H/* report()[56;5H * --------[57;5H * Produces an outline to stdout of current child processes and their statuses[58;5H *[m[59;104H1[49;25H[?25h[?25l[4m[38;5;130mh[m[59;104H2[49;26H[?25h[?25l[4m[38;5;130me[m[59;104H3[49;27H[?25h[?25l[4m[38;5;130mr[m[59;104H4[49;28H[?25h[?25l[4m[38;5;130me[m[59;104H5[49;29H[?25h[?25l[4m[38;5;130m"[m[50;5H            jobid++;[51;5H        }[52;5H    }[53;5H}[55;5H[36m/* report()[56;5H * --------[57;5H * Produces an outline to stdout of current child processes and their statuses[58;5H *[m[59;104H6[49;30H[?25h[?25l[4m)[m[59;103H19[49;23H[?25h[?25l[8C[4m;[m[59;103H28[49;32H[?25h[59;1H[K[49;31H[?25l[59;99H186,27[8C36%[49;31H[?25h[?25l[33m186 [m            printf([38;5;130m"here"[m);                                                    [100m [m[49;85H[K[50;1H[93m187 [m[4m            jobid++;                                                           [m[4m[100m [m[4m                                [m[59;101H7,19[50;23H[?25h[?25l[24;1H[93m161 [m[4m        jobs[jobid].pid = fork();                                              [m[4m[100m [m[4m                                [m[50;1H[33m187 [m            jobid++;                                                           [100m [m[50;85H[K[59;100H61,15[24;19H[?25h[?25l[33m161 [m        jobs[j[7m[48;5;242mobid].pid = fork(); [m                                             [100m [m[24;85H[K[25;1H[93m162 [m[7m[48;5;242m        [m[7m[33m[48;5;242mif[m[7m[48;5;242m (!jobs[jo[m[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H162,21[8C36%[25;25H[?25h[?25l[24;19Hobid].pid = fork(); [25;5H[4m        [m[4m[33mif[m[4m (!jobs[jobid].pid) {                                                [m[4m[100m [m[4m                                [m[59;1H[K[59;99H162,21[8C36%[25;25H[?25h[?25l[33m162 [m        [33mif[m (!jobs[jobid].pid) {                                                [100m [m[25;85H[K[29;1H[93m166 [m[4m            close(jobs[jobid].down[WRITE]);                                    [m[4m[100m [m[4m                                [m[59;101H6,24[29;28H[?25h[?25l[29;5H            close(jobs[46m[[m[7m[48;5;242mjobid[m[46m][m.down[WRITE]);                                    [100m [m[29;85H[K[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H166,29[8C36%[29;33H[?25h[?25l[33m166 [m[22C[jobid]
[93m167 [m[4m            close(jobs[m[4m[46m[[m[4mjobid[m[4m[46m][m[4m.up[READ]);                                       [m[4m[100m [m[4m                                [m[59;1H[K[59;99H167,29[8C36%[30;33H[?25h[?25l[33m167 [m            close(jobs[jobid].up[READ]);                                       [100m [m[30;85H[K[50;1H[93m187 [m[4m            jobid++;                                                           [m[4m[100m [m[4m                                [m[59;100H87,13[50;17H[?25h[?25l[59;99H[K[59;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?1000l[?2004l"hq.c" 433L, 10725C written
[?2004l[?1l>[?25h[?1049l[23;0;0ts4698512@moss:~/CSSE2310/Assignments/a3$ make
gcc -g -Wall -pedantic -std=gnu99 -o hq hq.c -I/local/courses/csse2310/include -L/local/courses/csse2310/lib -lcsse2310a3
s4698512@moss:~/CSSE2310/Assignments/a3$ ./hq
> spawn c s cat  
New Job ID [0] created
here> c spawn ls
New Job ID [1] created
here> spawn ls
^Cspawn ls
New Job ID [2] created
here> s4698512@moss:~/CSSE2310/Assignments/a3$ ./hqmakevim hq.c
[?1000h[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;59r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[59;1H"hq.c" 433L, 10725C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[33m159 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m160 [m[79C[100m [m
[33m161 [m[8Cjobs[jobid].pid = fork();[46C[100m [m
[33m162 [m[8C[33mif[m (!jobs[jobid].pid) {[48C[100m [m
[33m163 [m[12C[36m// child[m[59C[100m [m
[33m164 [m[79C[100m [m
[33m165 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m166 [m[12Cclose(jobs[jobid].down[WRITE]);[36C[100m [m
[33m167 [m[12Cclose(jobs[jobid].up[READ]);[39C[100m [m
[33m168 [m[79C[100m [m
[33m169 [m[12Cdup2(jobs[jobid].down[READ], STDIN_FILENO);[24C[100m [m
[33m170 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m
[33m171 [m[12Cdup2(jobs[jobid].up[WRITE], STDOUT_FILENO);[24C[100m [m
[33m172 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m
[33m173 [m[79C[100m [m
[33m174 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m175 [m[12Cfflush([38;5;130mstderr[m);[52C[100m [m
[33m176 [m[79C[100m [m
[33m177 [m[12C[32mint[m status;[56C[100m [m
[33m178 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m
[33m179 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m
[33m180 [m[16Cexit([38;5;130m99[m);[54C[100m [m
[33m181 [m[12C}[66C[100m [m
[33m182 [m[8C} [33melse[m {[63C[100m [m
[33m183 [m[12C[36m// parent[m[58C[100m [m
[33m184 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m
[33m185 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m
[33m186 [m[12Cprintf([38;5;130m"here"[m);[52C[100m [m
[93m187 [m[4m            jobid++;                                                           [m[4m[100m [m[4m                                [m[30;1H[33m188 [m[8C}[70C[100m [m
[33m189 [m    }[74C[100m [m
[33m190 [m}[78C[100m [m
[33m191 [m[79C[100m [m
[33m192 [m[36m/* report()[m[68C[100m [m
[33m193 [m[36m * --------[m[68C[100m [m
[33m194 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m
[33m195 [m[36m *[m[77C[100m [m
[33m196 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m197 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m198 [m[36m */[m[76C[100m [m
[33m199 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[43C[100m [m
[33m200 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m201 [m[79C[100m [m
[33m202 [m    [36m// Header row[m[62C[100m [m
[33m203 [m    printf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[46C[100m [m
[33m204 [m[79C[100m [m
[33m205 [m    [36m// Job status output dependent on arg present status[m[23C[100m [m
[33m206 [m[79C[100m [m
[33m207 [m    [36m// check args[m[62C[100m [m
[33m208 [m    [33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[37C[100m [m
[33m209 [m[8C[33mfor[m ([32mint[m i = [38;5;130m0[m; i < jobid; i++) {[38C[100m [m
[33m210 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[31C[100m [m
[33m211 [m[12C[33mif[m (!jobs[i].finished) {[43C[100m [m
[33m212 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m213 [m[12C} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[28C[100m [m
[33m214 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[12C[100m [m
[33m215 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {[26C[100m [m
[33m216 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[11C[100m [m[59;99H187,13[8C42%[29;17H[?25h[?12$p[?25l[28;1H[93m186 [m[4m            printf([m[4m[38;5;130m"here"[m[4m);                                                    [m[4m[100m [m[4m                                [m[29;1H[33m187 [m            jobid++;                                                           [100m [m[29;85H[K[59;101H6[28;17H[?25h[?25l[59;1H[38;5;130m-- INSERT --[m[59;14H[K[59;99H186,13[8C42%[28;17H[4m               [28;17H[?25h[?25l[m[33m186 [m                                                                               [100m [m[28;85H[K[29;1H[93m187 [m[4m            jobid++;                                                           [m[4m[100m [m[4m                                [m[59;101H7,12[29;16H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m156 [m[8C}[70C[100m [m
[33m157 [m[79C[100m [m
[33m158 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, jobid);[28C[100m [m[59;99H[K[59;99H187,12[8C41%[32;16H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m153 [m[8C[33mif[m (pipe(jobs[jobid].up) < [38;5;130m0[m) {[40C[100m [m
[33m154 [m[12Cperror([38;5;130m"Creating up pipe"[m);[40C[100m [m
[33m155 [m[12Cexit([38;5;130m1[m);[59C[100m [m[59;99H[K[59;99H187,12[8C40%[35;16H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m150 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m151 [m[8C}[70C[100m [m
[33m152 [m[79C[100m [m[59;99H[K[59;99H187,12[8C39%[38;16H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m147 [m[79C[100m [m
[33m148 [m[8C[33mif[m (pipe(jobs[jobid].down) < [38;5;130m0[m) {[38C[100m [m
[33m149 [m[12Cperror([38;5;130m"Creating down pipe"[m);[38C[100m [m[59;99H[K[59;99H187,12[8C38%[41;16H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m144 [m[8Cjobs = rea[38;5;248m[104mlloc[m(jobs, (jobid + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));[16C[100m [m
[33m145 [m[79C[100m [m
[33m146 [m[8Cstrcpy(jobs[jobid].name, args[[38;5;130m0[m]);[37C[100m [m[59;99H[K[59;99H187,12[8C38%[44;16H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m141 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m142 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m143 [m    } [33melse[m {[67C[100m [m[59;99H[K[59;99H187,12[8C37%[47;16H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m138 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m139 [m[36m */[m[76C[100m [m
[33m140 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs) {[44C[100m [m[59;99H[K[59;99H187,12[8C36%[50;16H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m135 [m[36m * of the child process is unchanged[m[43C[100m [m
[33m136 [m[36m *[m[77C[100m [m
[33m137 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[59;99H[K[59;99H187,12[8C35%[53;16H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m132 [m[36m * -------[m[69C[100m [m
[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m
[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m[59;99H[K[59;99H187,12[8C34%[56;16H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m129 [m}[78C[100m [m
[33m130 [m[79C[100m [m
[33m131 [m[36m/* spawn()[m[69C[100m [m[58;1H[93m186 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H186,1[9C34%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m126 [m[79C[100m [m
[33m127 [m    free(jobs);[64C[100m [m
[33m128 [m    [33mreturn[m [38;5;130m0[m;[66C[100m [m[58;1H[93m183 [m[4m            [m[4m[36m// parent[m[4m                                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H183,12[8C33%[58;16H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m184 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m
[33m185 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m
[33m186 [m[79C[100m [m[59;99H[K[59;99H183,12[8C34%[55;16H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m187 [m[12Cjobid++;[59C[100m [m
[33m188 [m[8C}[70C[100m [m
[33m189 [m    }[74C[100m [m[59;99H[K[59;99H183,12[8C34%[52;16H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m190 [m}[78C[100m [m
[33m191 [m[79C[100m [m
[33m192 [m[36m/* report()[m[68C[100m [m[59;99H[K[59;99H183,12[8C35%[49;16H[?25h[?25l[33m183 [m            [36m// parent[m                                                          [100m [m[49;85H[K[53;1H[93m187 [m[4m            jobid++;                                                           [m[4m[100m [m[4m                                [m[59;101H7,21[53;25H[?25h[?25l[4mi[m[59;104H2[53;26H[?25h[?25l[4m [m[59;104H1[53;25H[?25h[?25l[4m [m[59;104H0[53;24H[?25h[?25l[4m [m[59;103H19[53;23H[?25h[?25l[4m [m[59;104H8[53;22H[?25h[?25l[4m [m[59;104H7[53;21H[?25h[?25l[4m [m[59;104H6[53;20H[?25h[?25l[4m [m[59;104H5[53;19H[?25h[?25l[4m [m[59;104H4[53;18H[?25h[?25l[4m [m[59;104H3[53;17H[?25h[?25l[59;103H9 [53;13H[?25h[?25l[59;103H5[53;9H[?25h[?25l[59;103H1[53;5H[?25h[?25l[52;1H[93m186 [m[4m                                                                               [m[4m[100m [m[4m                                [m[53;1H[33m187 [m        }                                                                      [100m [m[53;85H[K[54;9H}    [55;5H}    [56;5H [57;5H[36m/* report()[58;5H * --------[m[59;101H6[52;5H[?25h[?25l[51;1H[93m185 [m[4m            close(jobs[jobid].up[WRITE]);                                      [m[4m[100m [m[4m                                [m[52;1H[33m186 [m        }                                                                      [100m [m[52;85H[K[53;9H}    [54;5H}    [55;5H [56;5H[36m/* report()[57;5H * --------[58;8HProduces an outline to stdout of current child processes and their statuses[m[59;101H5,42[51;46H[?25h[?25l[50;1H[93m184 [m[4m            close(jobs[jobid].down[READ]);                                     [m[4m[100m [m[4m                                [m[51;1H[33m185 [m            close(jobs[jobid].up[WRITE]);                                      [100m [m[51;85H[K[50;27H[4m[46m[[5C][m[59;101H4,29[50;33H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m132 [m[36m * -------[m[69C[100m [m
[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m
[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m[59;99H[K[59;99H184,29[8C35%[53;33H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m129 [m}[78C[100m [m
[33m130 [m[79C[100m [m
[33m131 [m[36m/* spawn()[m[69C[100m [m[59;99H[K[59;99H184,29[8C34%[56;33H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m126 [m[79C[100m [m
[33m127 [m    free(jobs);[64C[100m [m
[33m128 [m    [33mreturn[m [38;5;130m0[m;[66C[100m [m[58;1H[93m183 [m[4m            [m[4m[36m// parent[m[4m                                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H183,22[8C33%[58;26H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m123 [m[8Cfree(input);[59C[100m [m
[33m124 [m[8Cfree(tokens);[58C[100m [m
[33m125 [m    }[74C[100m [m[58;1H[93m180 [m[4m                exit([m[4m[38;5;130m99[m[4m);                                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H180,26[8C32%[58;30H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m120 [m[8Cprintf([38;5;130m"> "[m);[58C[100m [m
[33m121 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m122 [m[79C[100m [m[58;1H[93m177 [m[4m            [m[4m[32mint[m[4m status;                                                        [m[4m[100m [m[4m                                [m[59;99H[K[59;99H177,24[8C31%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m117 [m[12Cprintf([38;5;130m"Error: Invalid command[m[35m\n[m[38;5;130m"[m);[32C[100m [m
[33m118 [m[8C}[70C[100m [m
[33m119 [m[79C[100m [m[58;1H[93m174 [m[4m            fflush([m[4m[38;5;130mstdout[m[4m);                                                    [m[4m[100m [m[4m                                [m[59;99H[K[59;99H174,28[8C31%[58;32H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m114 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"cleanup"[m)) {[28C[100m [m
[33m115 [m[12Ccleanup();[57C[100m [m
[33m116 [m[8C} [33melse[m {[63C[100m [m[58;1H[93m171 [m[4m            dup2(jobs[jobid].up[WRITE], STDOUT_FILENO);                        [m[4m[100m [m[4m                                [m[59;99H[K[59;99H171,29[8C30%[58;26H[4m[46m[[5C][?25h[?25l[1;58r[m[1;1H[3L[1;59r[1;1H[33m111 [m[12Crcv(args, spcs);[51C[100m [m
[33m112 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"eof"[m)) {[32C[100m [m
[33m113 [m[12Ceof(args, spcs);[51C[100m [m[58;1H[93m168 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H168,13[8C29%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m108 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"send"[m)) {[31C[100m [m
[33m109 [m[12Csend(args, spcs);[50C[100m [m
[33m110 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"rcv"[m)) {[32C[100m [m[58;1H[93m165 [m[4m            fflush([m[4m[38;5;130mstdout[m[4m);                                                    [m[4m[100m [m[4m                                [m[59;99H[K[59;99H165,28[8C28%[58;32H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m105 [m[12Ccall_signal(args, spcs);[43C[100m [m
[33m106 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"sleep"[m)) {[30C[100m [m
[33m107 [m[12Chq_wait(args, spcs);[47C[100m [m[58;1H[93m162 [m[4m        [m[4m[33mif[m[4m (!jobs[jobid].pid) {                                                [m[4m[100m [m[4m                                [m[59;99H[K[59;99H162,29[8C27%[58;16H[4m[46m([16C)[?25h[?25l[1;58r[m[1;1H[3L[1;59r[1;1H[33m102 [m[12C[36m// Report[m[58C[100m [m
[33m103 [m[12Creport(args, spcs);[48C[100m [m
[33m104 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"signal"[m)) {[29C[100m [m[58;1H[93m159 [m[4m        fflush([m[4m[38;5;130mstdout[m[4m);                                                        [m[4m[100m [m[4m                                [m[59;99H[K[59;99H159,24[8C27%[58;28H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 99 [m[12C[36m// spawn[m[59C[100m [m
[33m100 [m[12Cspawn(args, spcs);[49C[100m [m
[33m101 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"report"[m)) {[29C[100m [m[58;1H[93m156 [m[4m        }                                                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H156,10[8C26%[55;43H[46m{[m[58;13H[4m[46m}[?25h[?25l[1;58r[m[1;1H[3L[1;59r[1;1H[33m 96 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m 97 [m[79C[100m [m
[33m 98 [m[8C[33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"spawn"[m)) {[37C[100m [m[58;1H[93m153 [m[4m        [m[4m[33mif[m[4m (pipe(jobs[jobid].up) < [m[4m[38;5;130m0[m[4m) [m[4m[46m{[m[4m                                        [m[4m[100m [m[4m                                [m[59;99H[K[59;99H153,29[8C25%[58;26H[4m[46m[[5C][m[10C[4m{[58;33H[?25h[?25l[m[24;1H[93m119 [m[4m                                                                               [m[4m[100m [m[4m                                [m[58;1H[33m153 [m        [33mif[m (pipe(jobs[46m[[mjobid[46m][m.up) < [38;5;130m0[m) {                                        [100m [m[58;85H[K[58;26H[jobid][59;100H19,1 [24;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 93 [m[12Cargs[i - [38;5;130m1[m] = tokens[i];[43C[100m [m
[33m 94 [m[8C}[70C[100m [m
[33m 95 [m[8Cargs[spcs - [38;5;130m1[m] = [38;5;130m0[m;[52C[100m [m[59;99H[K[59;99H119,1[9C24%[27;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 90 [m[79C[100m [m
[33m 91 [m[8C[32mchar[m* args[spcs];[54C[100m [m
[33m 92 [m[8C[33mfor[m ([32mint[m i = [38;5;130m1[m; i < spcs; i++) {[39C[100m [m[59;99H[K[59;99H119,1[9C23%[30;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 87 [m[12C[33mcontinue[m;[58C[100m [m
[33m 88 [m[8C}[70C[100m [m
[33m 89 [m[8Ctokens = split_space_not_quote(input, &spcs);[26C[100m [m[59;99H[K[59;99H119,1[9C23%[33;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 84 [m[8C[33mif[m (!strcmp(input, [38;5;130m""[m)) {[46C[100m [m
[33m 85 [m[12Cprintf([38;5;130m"> "[m);[54C[100m [m
[33m 86 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m[59;99H[K[59;99H119,1[9C22%[36;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 81 [m    [33mwhile[m ((input = read_line([38;5;130mstdin[m)) != [38;5;130mNULL[m) {[31C[100m [m
[33m 82 [m[8C[32mint[m spcs = [38;5;130m0[m;[58C[100m [m
[33m 83 [m[79C[100m [m[59;99H[K[59;99H119,1[9C21%[39;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 78 [m    printf([38;5;130m"> "[m);[62C[100m [m
[33m 79 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m 80 [m    [36m// prompt loop[m[61C[100m [m[59;99H[K[59;99H119,1[9C20%[42;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 75 [m[79C[100m [m
[33m 76 [m    signal([38;5;130mSIGINT[m, handle_signal);[45C[100m [m
[33m 77 [m    signal([38;5;130mSIGCHLD[m, handle_signal);[44C[100m [m[59;99H[K[59;99H119,1[9C19%[45;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m
[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m
[33m135 [m[36m * of the child process is unchanged[m[43C[100m [m[59;99H[K[59;99H119,1[9C20%[42;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m136 [m[36m *[m[77C[100m [m
[33m137 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m138 [m[36m * spcs: number of original tokens[m[45C[100m [m[59;99H[K[59;99H119,1[9C21%[39;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m139 [m[36m */[m[76C[100m [m
[33m140 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs) {[44C[100m [m
[33m141 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m[59;99H[K[59;99H119,1[9C22%[36;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m142 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m143 [m    } [33melse[m {[67C[100m [m
[33m144 [m[8Cjobs = rea[38;5;248m[104mlloc[m(jobs, (jobid + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));[16C[100m [m[59;99H[K[59;99H119,1[9C23%[33;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m145 [m[79C[100m [m
[33m146 [m[8Cstrcpy(jobs[jobid].name, args[[38;5;130m0[m]);[37C[100m [m
[33m147 [m[79C[100m [m[59;99H[K[59;99H119,1[9C23%[30;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m148 [m[8C[33mif[m (pipe(jobs[jobid].down) < [38;5;130m0[m) {[38C[100m [m
[33m149 [m[12Cperror([38;5;130m"Creating down pipe"[m);[38C[100m [m
[33m150 [m[12Cexit([38;5;130m1[m);[59C[100m [m[59;99H[K[59;99H119,1[9C24%[27;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m151 [m[8C}[70C[100m [m
[33m152 [m[79C[100m [m
[33m153 [m[8C[33mif[m (pipe(jobs[jobid].up) < [38;5;130m0[m) {[40C[100m [m[59;99H[K[59;99H119,1[9C25%[24;5H[1;58r[1;1H[3M[1;59r[56;1H[33m154 [m[12Cperror([38;5;130m"Creating up pipe"[m);[40C[100m [m
[33m155 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m156 [m[8C}[70C[100m [m[59;99H[K[59;99H119,1[9C26%[21;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m157 [m[79C[100m [m
[33m158 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, jobid);[28C[100m [m
[33m159 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m[59;99H[K[59;99H119,1[9C27%[18;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m160 [m[79C[100m [m
[33m161 [m[8Cjobs[jobid].pid = fork();[46C[100m [m
[33m162 [m[8C[33mif[m (!jobs[jobid].pid) {[48C[100m [m[59;99H[K[59;99H119,1[9C27%[15;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m163 [m[12C[36m// child[m[59C[100m [m
[33m164 [m[79C[100m [m
[33m165 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m[59;99H[K[59;99H119,1[9C28%[12;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m166 [m[12Cclose(jobs[jobid].down[WRITE]);[36C[100m [m
[33m167 [m[12Cclose(jobs[jobid].up[READ]);[39C[100m [m
[33m168 [m[79C[100m [m[59;99H[K[59;99H119,1[9C29%[9;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m169 [m[12Cdup2(jobs[jobid].down[READ], STDIN_FILENO);[24C[100m [m
[33m170 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m
[33m171 [m[12Cdup2(jobs[jobid].up[WRITE], STDOUT_FILENO);[24C[100m [m[59;99H[K[59;99H119,1[9C30%[6;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m172 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m
[33m173 [m[79C[100m [m
[33m174 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m[59;99H[K[59;99H119,1[9C31%[3;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m120 [m[4m        printf([m[4m[38;5;130m"> "[m[4m);                                                          [m[4m[100m [m[4m                                [m[56;1H[33m175 [m[12Cfflush([38;5;130mstderr[m);[52C[100m [m
[33m176 [m[79C[100m [m
[33m177 [m[12C[32mint[m status;[56C[100m [m[59;99H[K[59;99H120,21[8C31%[1;19H[4m[46m([4C)[?25h[?25l[1;58r[m[1;1H[3M[1;59r[1;1H[93m123 [m[4m        free(input);                                                           [m[4m[100m [m[4m                                [m[56;1H[33m178 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m
[33m179 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m
[33m180 [m[16Cexit([38;5;130m99[m);[54C[100m [m[59;99H[K[59;99H123,21[8C32%[1;25H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m126 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m181 [m[12C}[66C[100m [m
[33m182 [m[8C} [33melse[m {[63C[100m [m
[33m183 [m[12C[36m// parent[m[58C[100m [m[59;99H[K[59;99H126,5[9C33%[1;9H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m129 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[56;1H[33m184 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m
[33m185 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m
[33m186 [m[8C}[70C[100m [m[59;99H[K[59;99H129,2[9C34%[1;6H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m132 [m[4m[36m * -------[m[4m                                                                     [m[4m[100m [m[4m                                [m[56;1H[33m187 [m    }[74C[100m [m
[33m188 [m}[78C[100m [m
[33m189 [m[79C[100m [m[59;99H[K[59;99H132,11[8C35%[1;15H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m135 [m[4m[36m * of the child process is unchanged[m[4m                                           [m[4m[100m [m[4m                                [m[56;1H[33m190 [m[36m/* report()[m[68C[100m [m
[33m191 [m[36m * --------[m[68C[100m [m
[33m192 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m[59;99H[K[59;99H135,21[8C35%[1;25H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m138 [m[4m[36m * spcs: number of original tokens[m[4m                                             [m[4m[100m [m[4m                                [m[56;1H[33m193 [m[36m *[m[77C[100m [m
[33m194 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m195 [m[36m * spcs: number of original tokens[m[45C[100m [m[59;99H[K[59;99H138,21[8C36%[1;25H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m141 [m[4m    [m[4m[33mif[m[4m (spcs < [m[4m[38;5;130m2[m[4m) {                                                            [m[4m[100m [m[4m                                [m[56;1H[33m196 [m[36m */[m[76C[100m [m
[33m197 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[43C[100m [m
[33m198 [m    fflush([38;5;130mstdout[m);[60C[100m [m[59;99H[K[59;99H141,20[8C37%[1;23H[4m[46m{[m[3;9H[46m}[1;24H[?25h[?25l[1;58r[m[1;1H[3M[1;59r[1;1H[93m144 [m[4m        jobs = rea[m[4m[38;5;248m[104mlloc[m[4m(jobs, (jobid + [m[4m[38;5;130m1[m[4m) * [m[4m[33msizeof[m[4m([m[4m[32mstruct[m[4m Job));                [m[4m[100m [m[4m                                [m[56;1H[33m199 [m[79C[100m [m
[33m200 [m    [36m// Header row[m[62C[100m [m
[33m201 [m    printf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[46C[100m [m[59;99H[K[59;99H144,21[8C38%[1;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m141 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m142 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m143 [m    } [33melse[m {[67C[100m [m[59;99H[K[59;99H144,21[8C37%[4;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m138 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m139 [m[36m */[m[76C[100m [m
[33m140 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs) {[44C[100m [m[59;99H[K[59;99H144,21[8C36%[7;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m135 [m[36m * of the child process is unchanged[m[43C[100m [m
[33m136 [m[36m *[m[77C[100m [m
[33m137 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[59;99H[K[59;99H144,21[8C35%[10;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m132 [m[36m * -------[m[69C[100m [m
[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m
[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m[59;99H[K[59;99H144,21[8C35%[13;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m129 [m}[78C[100m [m
[33m130 [m[79C[100m [m
[33m131 [m[36m/* spawn()[m[69C[100m [m[59;99H[K[59;99H144,21[8C34%[16;25H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m187 [m    }[74C[100m [m
[33m188 [m}[78C[100m [m
[33m189 [m[79C[100m [m[59;99H[K[59;99H144,21[8C35%[13;25H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m190 [m[36m/* report()[m[68C[100m [m
[33m191 [m[36m * --------[m[68C[100m [m
[33m192 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m[59;99H[K[59;99H144,21[8C35%[10;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m132 [m[36m * -------[m[69C[100m [m
[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m
[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m[59;99H[K[59;99H144,21[8C35%[13;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m129 [m}[78C[100m [m
[33m130 [m[79C[100m [m
[33m131 [m[36m/* spawn()[m[69C[100m [m[59;99H[K[59;99H144,21[8C34%[16;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m126 [m[79C[100m [m
[33m127 [m    free(jobs);[64C[100m [m
[33m128 [m    [33mreturn[m [38;5;130m0[m;[66C[100m [m[59;99H[K[59;99H144,21[8C33%[19;25H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m184 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m
[33m185 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m
[33m186 [m[8C}[70C[100m [m[59;99H[K[59;99H144,21[8C34%[16;25H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m187 [m    }[74C[100m [m
[33m188 [m}[78C[100m [m
[33m189 [m[79C[100m [m[59;99H[K[59;99H144,21[8C35%[13;25H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m190 [m[36m/* report()[m[68C[100m [m
[33m191 [m[36m * --------[m[68C[100m [m
[33m192 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m[59;99H[K[59;99H144,21[8C35%[10;25H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m193 [m[36m *[m[77C[100m [m
[33m194 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m195 [m[36m * spcs: number of original tokens[m[45C[100m [m[59;99H[K[59;99H144,21[8C36%[7;25H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m196 [m[36m */[m[76C[100m [m
[33m197 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[43C[100m [m
[33m198 [m    fflush([38;5;130mstdout[m);[60C[100m [m[59;99H[K[59;99H144,21[8C37%[4;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m138 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m139 [m[36m */[m[76C[100m [m
[33m140 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs) {[44C[100m [m[59;99H[K[59;99H144,21[8C36%[7;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m135 [m[36m * of the child process is unchanged[m[43C[100m [m
[33m136 [m[36m *[m[77C[100m [m
[33m137 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[59;99H[K[59;99H144,21[8C35%[10;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m132 [m[36m * -------[m[69C[100m [m
[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m
[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m[59;99H[K[59;99H144,21[8C35%[13;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m129 [m}[78C[100m [m
[33m130 [m[79C[100m [m
[33m131 [m[36m/* spawn()[m[69C[100m [m[59;99H[K[59;99H144,21[8C34%[16;25H[?25h[?25l[15;1H[93m143 [m[4m    } [m[4m[33melse[m[4m {                                                                   [m[4m[100m [m[4m                                [m[16;1H[33m144 [m        jobs = rea[38;5;248m[104mlloc[m(jobs, (jobid + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));                [100m [m[16;85H[K[59;101H3,13[15;17H[?25h[?25l[33m143 [m    } [33melse[m {                                                                   [100m [m[15;85H[K[16;1H[93m144 [m[4m        jobs = rea[m[4m[38;5;248m[104mlloc[m[4m(jobs, (jobid + [m[4m[38;5;130m1[m[4m) * [m[4m[33msizeof[m[4m([m[4m[32mstruct[m[4m Job));                [m[4m[100m [m[4m                                [m[59;101H4,25[16;29H[?25h[?25l[33m144 [m        jobs = rea[38;5;248m[104mlloc[m(jobs, (jobid + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));                [100m [m[16;85H[K[17;1H[93m145 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;101H5,1 [17;5H[?25h[?25l[59;103H5[17;9H[?25h[?25l[59;103H9[17;13H[?25h[?25l[33m145 [m                                                                               [100m [m[17;85H[K[18;1H[93m146 [m[4m                                                                               [m[4m[100m [m[4m                                [m[19;13Hstrcpy(jobs[jobid].name, args[[38;5;130m0[m]);[20;13H                                 [21;13H[33mif[m (pipe(jobs[jobid].down) < [38;5;130m0[m) {[22;17Hperror([38;5;130m"Creating down pipe"[m);[23;13H    exit([38;5;130m1[m);[24;13H}[25;13H                               [26;13H[33mif[m (pipe(jobs[jobid].up) < [38;5;130m0[m) {[27;17Hperror([38;5;130m"Creating up pipe"[m);[28;13H    exit([38;5;130m1[m);[29;13H}[30;13H                                           [31;13Hprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, jobid);[32;13Hfflush([38;5;130mstdout[m);[33;13H                         [34;13Hjobs[jobid].pid = fork();[35;13H[33mif[m (!jobs[jobid].pid) {[36;17H[36m// child[m[37;17H               [38;17Hfflush([38;5;130mstdout[m);                [39;35Hdown[WRITE]);[40;17Hclose(jobs[jobid].up[READ]);[41;17H                                           [42;17Hdup2(jobs[jobid].down[READ], STDIN_FILENO);[43;17Hclose(jobs[jobid].down[READ]);             [44;17Hdup2(jobs[jobid].up[WRITE], STDOUT_FILENO);[45;17Hclose(jobs[jobid].up[WRITE]);[46;17H               [47;27H[38;5;130mout[m[48;17Hfflush([38;5;130mstderr[m);[49;17H           [50;17H[32mint[m status;                    [51;17Hstatus = execvp(args[[38;5;130m0[m], args);[52;17H[33mif[m (status == -[38;5;130m1[m) {[53;17H    exit([38;5;130m99[m);[54;13H    }   [55;13H} [33melse[m {     [56;17H[36m// parent[m                     [57;35Hdown[READ]);[58;13H    close(jobs[jobid].up[WRITE]);[59;101H6[18;13H[?25h[?25l[33m146 [m                                                                               [100m [m[18;85H[K[19;1H[93m147 [m[4m                                                                               [m[4m[100m [m[4m                                [m[20;13Hstrcpy(jobs[jobid].name, args[[38;5;130m0[m]);[21;13H                                 [22;13H[33mif[m (pipe(jobs[jobid].down) < [38;5;130m0[m) {[23;17Hperror([38;5;130m"Creating down pipe"[m);[24;13H    exit([38;5;130m1[m);[25;13H}[26;13H                               [27;13H[33mif[m (pipe(jobs[jobid].up) < [38;5;130m0[m) {[28;17Hperror([38;5;130m"Creating up pipe"[m);[29;13H    exit([38;5;130m1[m);[30;13H}[31;13H                                           [32;13Hprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, jobid);[33;13Hfflush([38;5;130mstdout[m);[34;13H                         [35;13Hjobs[jobid].pid = fork();[36;13H[33mif[m (!jobs[jobid].pid) {[37;17H[36m// child[m[38;17H               [39;17Hfflush([38;5;130mstdout[m);                [40;35Hdown[WRITE]);[41;17Hclose(jobs[jobid].up[READ]);[42;17H                                           [43;17Hdup2(jobs[jobid].down[READ], STDIN_FILENO);[44;17Hclose(jobs[jobid].down[READ]);             [45;17Hdup2(jobs[jobid].up[WRITE], STDOUT_FILENO);[46;17Hclose(jobs[jobid].up[WRITE]);[47;17H               [48;27H[38;5;130mout[m[49;17Hfflush([38;5;130mstderr[m);[50;17H           [51;17H[32mint[m status;                    [52;17Hstatus = execvp(args[[38;5;130m0[m], args);[53;17H[33mif[m (status == -[38;5;130m1[m) {[54;17H    exit([38;5;130m99[m);[55;13H    }   [56;13H} [33melse[m {     [57;17H[36m// parent[m                     [58;35Hdown[READ]);[59;101H7[19;13H[?25h[?25l[18;1H[93m146 [m[4m                                                                               [m[4m[100m [m[4m                                [m[19;1H[33m147 [m                                                                               [100m [m[19;85H[K[59;101H6,1[18;5H[?25h[?25l[59;103H5[18;9H[?25h[?25l[59;103H9[18;13H[?25h[?25l[4mi[m[59;103H10[18;14H[?25h[?25l[4m[33mif[m[59;104H1[18;15H[?25h[?25l[59;104H2[18;16H[?25h[?25l[4m([m[22;45H[1m[37m[41m{[25;13H}[27;43H{[30;13H}[36;35H{[53;35H{[55;17H}[m[59;104H3[18;17H[?25h[?25l[4mj[m[59;104H4[18;18H[?25h[?25l[4mo[m[59;104H5[18;19H[?25h[?25l[4mb[m[59;104H6[18;20H[?25h[?25l[4mi[m[59;104H7[18;21H[?25h[?25l[4md[m[59;104H8[18;22H[?25h[?25l[59;104H9[18;23H[?25h[?25l[4m=[m[59;103H20[18;24H[?25h[?25l[4m=[m[59;104H1[18;25H[?25h[?25l[59;104H2[18;26H[?25h[?25l[4m[38;5;130m0[m[59;104H3[18;27H[?25h[?25l[4m)[m[22;45H{ [25;13H} [27;43H{ [30;13H} [36;35H{ [53;35H{ [55;17H} [59;103H12[18;16H[?25h[?25l[59;103H25[18;29H[?25h[?25l[4m{[m[59;104H6[18;30H[?25h[?25l[4m [m[59;104H5[18;29H[?25h[?25l[18;16H[4m[46m([10C)[m[59;104H4[18;28H[?25h[?25l[4m[46m [m[22;45H[1m[37m[41m{[25;13H}[27;43H{[30;13H}[36;35H{[53;35H{[55;17H}[m[18;16H[4m([10C [m[59;104H3[18;27H[?25h[?25l[4m [m[59;104H2[18;26H[?25h[?25l[59;104H1[18;25H[?25h[?25l[4m [m[59;104H0[18;24H[?25h[?25l[4m [m[59;103H19[18;23H[?25h[?25l[59;104H8[18;22H[?25h[?25l[4m [m[59;104H7[18;21H[?25h[?25l[4m [m[59;104H6[18;20H[?25h[?25l[4m [m[59;104H5[18;19H[?25h[?25l[4m [m[59;104H4[18;18H[?25h[?25l[4m [m[59;104H3[18;17H[?25h[?25l[4m [m[22;45H{ [25;13H} [27;43H{ [30;13H} [36;35H{ [53;35H{ [55;17H} [59;104H2[18;16H[?25h[?25l[59;104H1[18;15H[?25h[?25l[4mi [m[59;104H0[18;14H[?25h[?25l[4m [m[59;103H9 [18;13H[?25h[?25l[4mk[m[59;103H10[18;14H[?25h[?25l[4m [m[59;103H9 [18;13H[?25h[?25l[4mj[m[59;103H10[18;14H[?25h[?25l[4mo[m[59;104H1[18;15H[?25h[?25l[4mb[m[59;104H2[18;16H[?25h[?25l[4m=[m[59;104H3[18;17H[?25h[?25l[4m [m[59;104H2[18;16H[?25h[?25l[4mi[m[59;104H3[18;17H[?25h[?25l[4md[m[59;104H4[18;18H[?25h[?25l[4m+[m[59;104H5[18;19H[?25h[?25l[4m+[m[59;104H6[18;20H[?25h[?25l[4m;[m[59;104H7[18;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m126 [m[79C[100m [m
[33m127 [m    free(jobs);[64C[100m [m
[33m128 [m    [33mreturn[m [38;5;130m0[m;[66C[100m [m[59;99H[K[59;99H146,17[8C33%[21;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m123 [m[8Cfree(input);[59C[100m [m
[33m124 [m[8Cfree(tokens);[58C[100m [m
[33m125 [m    }[74C[100m [m[59;99H[K[59;99H146,17[8C32%[24;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m120 [m[8Cprintf([38;5;130m"> "[m);[58C[100m [m
[33m121 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m122 [m[79C[100m [m[59;99H[K[59;99H146,17[8C31%[27;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m117 [m[12Cprintf([38;5;130m"Error: Invalid command[m[35m\n[m[38;5;130m"[m);[32C[100m [m
[33m118 [m[8C}[70C[100m [m
[33m119 [m[79C[100m [m[59;99H[K[59;99H146,17[8C30%[30;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m114 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"cleanup"[m)) {[28C[100m [m
[33m115 [m[12Ccleanup();[57C[100m [m
[33m116 [m[8C} [33melse[m {[63C[100m [m[59;99H[K[59;99H146,17[8C30%[33;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m111 [m[12Crcv(args, spcs);[51C[100m [m
[33m112 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"eof"[m)) {[32C[100m [m
[33m113 [m[12Ceof(args, spcs);[51C[100m [m[59;99H[K[59;99H146,17[8C29%[36;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m108 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"send"[m)) {[31C[100m [m
[33m109 [m[12Csend(args, spcs);[50C[100m [m
[33m110 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"rcv"[m)) {[32C[100m [m[59;99H[K[59;99H146,17[8C28%[39;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m105 [m[12Ccall_signal(args, spcs);[43C[100m [m
[33m106 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"sleep"[m)) {[30C[100m [m
[33m107 [m[12Chq_wait(args, spcs);[47C[100m [m[59;99H[K[59;99H146,17[8C27%[42;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m102 [m[12C[36m// Report[m[58C[100m [m
[33m103 [m[12Creport(args, spcs);[48C[100m [m
[33m104 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"signal"[m)) {[29C[100m [m[59;99H[K[59;99H146,17[8C26%[45;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 99 [m[12C[36m// spawn[m[59C[100m [m
[33m100 [m[12Cspawn(args, spcs);[49C[100m [m
[33m101 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"report"[m)) {[29C[100m [m[59;99H[K[59;99H146,17[8C26%[48;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 96 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m 97 [m[79C[100m [m
[33m 98 [m[8C[33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"spawn"[m)) {[37C[100m [m[59;99H[K[59;99H146,17[8C25%[51;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 93 [m[12Cargs[i - [38;5;130m1[m] = tokens[i];[43C[100m [m
[33m 94 [m[8C}[70C[100m [m
[33m 95 [m[8Cargs[spcs - [38;5;130m1[m] = [38;5;130m0[m;[52C[100m [m[59;99H[K[59;99H146,17[8C24%[54;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 90 [m[79C[100m [m
[33m 91 [m[8C[32mchar[m* args[spcs];[54C[100m [m
[33m 92 [m[8C[33mfor[m ([32mint[m i = [38;5;130m1[m; i < spcs; i++) {[39C[100m [m[59;99H[K[59;99H146,17[8C23%[57;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 87 [m[12C[33mcontinue[m;[58C[100m [m
[33m 88 [m[8C}[70C[100m [m
[33m 89 [m[8Ctokens = split_space_not_quote(input, &spcs);[26C[100m [m[58;1H[93m144 [m[4m        jobs = rea[m[4m[38;5;248m[104mlloc[m[4m(jobs, (jobid + [m[4m[38;5;130m1[m[4m) * [m[4m[33msizeof[m[4m([m[4m[32mstruct[m[4m Job));                [m[4m[100m [m[4m                                [m[59;99H[K[59;99H144,17[8C22%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 84 [m[8C[33mif[m (!strcmp(input, [38;5;130m""[m)) {[46C[100m [m
[33m 85 [m[12Cprintf([38;5;130m"> "[m);[54C[100m [m
[33m 86 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m[58;1H[93m141 [m[4m    [m[4m[33mif[m[4m (spcs < [m[4m[38;5;130m2[m[4m) {                                                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H141,17[8C22%[58;12H[4m[46m([8C)[?25h[?25l[1;58r[m[1;1H[3L[1;59r[1;1H[33m 81 [m    [33mwhile[m ((input = read_line([38;5;130mstdin[m)) != [38;5;130mNULL[m) {[31C[100m [m
[33m 82 [m[8C[32mint[m spcs = [38;5;130m0[m;[58C[100m [m
[33m 83 [m[79C[100m [m[58;1H[93m138 [m[4m[36m * spcs: number of original tokens[m[4m                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H138,17[8C21%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 78 [m    printf([38;5;130m"> "[m);[62C[100m [m
[33m 79 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m 80 [m    [36m// prompt loop[m[61C[100m [m[58;1H[93m135 [m[4m[36m * of the child process is unchanged[m[4m                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H135,17[8C20%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 75 [m[79C[100m [m
[33m 76 [m    signal([38;5;130mSIGINT[m, handle_signal);[45C[100m [m
[33m 77 [m    signal([38;5;130mSIGCHLD[m, handle_signal);[44C[100m [m[58;1H[93m132 [m[4m[36m * -------[m[4m                                                                     [m[4m[100m [m[4m                                [m[59;99H[K[59;99H132,11[8C19%[58;15H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 72 [m    [32mchar[m** tokens;[61C[100m [m
[33m 73 [m[79C[100m [m
[33m 74 [m    jobs = ma[38;5;248m[104mlloc[m([38;5;130m0[m * [33msizeof[m([32mstruct[m Job));[37C[100m [m[58;1H[93m129 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H129,2[9C18%[58;6H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 69 [m[79C[100m [m
[33m 70 [m[32mint[m main([32mint[m argc, [32mchar[m* argv[]) {[45C[100m [m
[33m 71 [m    [32mchar[m* input;[63C[100m [m[58;1H[93m126 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H126,5[9C18%[58;9H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 66 [m[79C[100m [m
[33m 67 [m[79C[100m [m
[33m 68 [m[36m// Program[m[69C[100m [m[58;1H[93m123 [m[4m        free(input);                                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H123,17[8C17%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 63 [m[79C[100m [m
[33m 64 [m[32mint[m jobid = [38;5;130m0[m;[65C[100m [m
[33m 65 [m[32mstruct[m Job* jobs;[62C[100m [m[58;1H[93m120 [m[4m        printf([m[4m[38;5;130m"> "[m[4m);                                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H120,17[8C16%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 60 [m};[77C[100m [m
[33m 61 [m[79C[100m [m
[33m 62 [m[36m// Globals[m[69C[100m [m[58;1H[93m117 [m[4m            printf([m[4m[38;5;130m"Error: Invalid command[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                [m[4m[100m [m[4m                                [m[59;99H[K[59;99H117,17[8C15%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 57 [m    [32mint[m up[[38;5;130m2[m];[65C[100m [m
[33m 58 [m    [32mint[m status;[64C[100m [m
[33m 59 [m    [32mint[m finished;[62C[100m [m[58;1H[93m114 [m[4m        } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (!strcmp(tokens[[m[4m[38;5;130m0[m[4m], [m[4m[38;5;130m"cleanup"[m[4m)) {                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H114,17[8C14%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 54 [m    [32mint[m pid;[67C[100m [m
[33m 55 [m    [32mchar[m name[MAX_BUFFER_SIZE];[48C[100m [m
[33m 56 [m    [32mint[m down[[38;5;130m2[m];[63C[100m [m[58;1H[93m111 [m[4m            rcv(args, spcs);                                                   [m[4m[100m [m[4m                                [m[59;99H[K[59;99H111,17[8C14%[58;20H[4m[46m([10C)[58;21H[?25h[?25l[1;58r[m[1;1H[3L[1;59r[1;1H[33m 51 [m[36m// Structs[m[69C[100m [m
[33m 52 [m[79C[100m [m
[33m 53 [m[32mstruct[m Job {[67C[100m [m[58;1H[93m108 [m[4m        } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (!strcmp(tokens[[m[4m[38;5;130m0[m[4m], [m[4m[38;5;130m"send"[m[4m)) {                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H108,17[8C13%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 48 [m[79C[100m [m
[33m 49 [m[32mbool[m is_job([32mchar[m job[]);[55C[100m [m
[33m 50 [m[79C[100m [m[58;1H[93m105 [m[4m            call_signal(args, spcs);                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H105,17[8C12%[58;21H[1;58r[1;1H[3L[1;59r[1;1H[33m 45 [m[32mvoid[m handle_signal([32mint[m s);[53C[100m [m
[33m 46 [m[79C[100m [m
[33m 47 [m[32mbool[m is_number([32mchar[m number[]);[49C[100m [m[58;1H[93m102 [m[4m            [m[4m[36m// Report[m[4m                                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H102,17[8C11%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 42 [m[79C[100m [m
[33m 43 [m[32mvoid[m cleanup([32mvoid[m);[60C[100m [m
[33m 44 [m[79C[100m [m[58;1H[93m 99 [m[4m            [m[4m[36m// spawn[m[4m                                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H99,17[9C10%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 39 [m[32mvoid[m rcv([32mchar[m** args, [32mint[m spcs);[47C[100m [m
[33m 40 [m[79C[100m [m
[33m 41 [m[32mvoid[m eof([32mchar[m** args, [32mint[m spcs);[47C[100m [m[58;1H[93m 96 [m[4m        fflush([m[4m[38;5;130mstdout[m[4m);                                                        [m[4m[100m [m[4m                                [m[59;99H[K[59;99H96,17[9C10%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 36 [m[79C[100m [m
[33m 37 [m[32mvoid[m send([32mchar[m** args, [32mint[m spcs);[46C[100m [m
[33m 38 [m[79C[100m [m[58;1H[93m 93 [m[4m            args[i - [m[4m[38;5;130m1[m[4m] = tokens[i];                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H93,17[10C9%[58;21H[4m[46m[[5C][58;21H[?25h[?25l[1;58r[m[1;1H[3L[1;59r[1;1H[33m 33 [m[32mvoid[m call_signal([32mchar[m** args, [32mint[m spcs);[39C[100m [m
[33m 34 [m[79C[100m [m
[33m 35 [m[32mvoid[m hq_wait([32mchar[m** args, [32mint[m spcs);[43C[100m [m[58;1H[93m 90 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H90,1[11C8%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 30 [m[79C[100m [m
[33m 31 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs);[44C[100m [m
[33m 32 [m[79C[100m [m[58;1H[93m 87 [m[4m            [m[4m[33mcontinue[m[4m;                                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H87,17[10C7%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 27 [m[36m// Function declarations[m[55C[100m [m
[33m 28 [m[79C[100m [m
[33m 29 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs);[45C[100m [m[58;1H[93m 84 [m[4m        [m[4m[33mif[m[4m (!strcmp(input, [m[4m[38;5;130m""[m[4m)) {                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H84,17[10C6%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 24 [m[79C[100m [m
[33m 25 [m[35m#endif[m      [36m// hq_h[m[60C[100m [m
[33m 26 [m[79C[100m [m[58;1H[93m 81 [m[4m    [m[4m[33mwhile[m[4m ((input = read_line([m[4m[38;5;130mstdin[m[4m)) != [m[4m[38;5;130mNULL[m[4m) {                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H81,17[10C6%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 21 [m[35m#define MAX_BUFFER_SIZE [m[38;5;130m52[m[53C[100m [m
[33m 22 [m[35m#define READ [m[38;5;130m0[m[65C[100m [m
[33m 23 [m[35m#define WRITE [m[38;5;130m1[m[64C[100m [m[58;1H[93m 78 [m[4m    printf([m[4m[38;5;130m"> "[m[4m);                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H78,17[10C5%[58;15H[4m[46m([4C)[?25h[?25l[1;58r[m[1;1H[3L[1;59r[1;1H[33m 18 [m[79C[100m [m
[33m 19 [m[36m// Defintions[m[66C[100m [m
[33m 20 [m[79C[100m [m[58;1H[93m 75 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H75,5[11C4%[58;9H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 15 [m[35m#include [m[38;5;130m<signal.h>[m[60C[100m [m
[33m 16 [m[35m#include [m[38;5;130m<ctype.h>[m[61C[100m [m
[33m 17 [m[35m#include [m[38;5;130m<stdbool.h>[m[59C[100m [m[58;1H[93m 72 [m[4m    [m[4m[32mchar[m[4m** tokens;                                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H72,17[10C3%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 12 [m[35m#include [m[38;5;130m<fcntl.h>[m[61C[100m [m
[33m 13 [m[35m#include [m[38;5;130m<unistd.h>[m[60C[100m [m
[33m 14 [m[35m#include [m[38;5;130m<sys/wait.h>[m[58C[100m [m[58;1H[93m 69 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H69,1[11C2%[58;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 70 [m[32mint[m main([32mint[m argc, [32mchar[m* argv[]) {[45C[100m [m
[33m 71 [m    [32mchar[m* input;[63C[100m [m
[33m 72 [m    [32mchar[m** tokens;[61C[100m [m[59;99H[K[59;99H69,1[11C3%[55;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 73 [m[79C[100m [m
[33m 74 [m    jobs = ma[38;5;248m[104mlloc[m([38;5;130m0[m * [33msizeof[m([32mstruct[m Job));[37C[100m [m
[33m 75 [m[79C[100m [m[59;99H[K[59;99H69,1[11C4%[52;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 76 [m    signal([38;5;130mSIGINT[m, handle_signal);[45C[100m [m
[33m 77 [m    signal([38;5;130mSIGCHLD[m, handle_signal);[44C[100m [m
[33m 78 [m    printf([38;5;130m"> "[m);[62C[100m [m[59;99H[K[59;99H69,1[11C5%[49;5H[?25h[?25l[44;1H[93m 64 [m[4m[32mint[m[4m jobid = [m[4m[38;5;130m0[m[4m;                                                                 [m[4m[100m [m[4m                                [m[49;1H[33m 69 [m                                                                               [100m [m[49;85H[K[59;100H4[44;5H[?25h[?25l[59;103H4[44;18H[?25h[?25l[4m0i;[m[59;103H5[44;19H[?25h[?25l[4m[38;5;130m0[m[4m; [m[59;103H4[44;18H[?25h[?25l[4m; [m[59;103H3[44;17H[?25h[?25l[4m-;[m[59;103H4[44;18H[?25h[?25l[4m[38;5;130m1[m[4m;[m[59;103H5[44;19H[?25h[59;1H[K[44;18H[?25l[59;99H64,14[10C5%[44;18H[?25h[?25l[59;99H[K[59;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?1000l[?2004l"hq.c" 433L, 10703C written
[?2004l[?1l>[?25h[?1049l[23;0;0ts4698512@moss:~/CSSE2310/Assignments/a3$ make
gcc -g -Wall -pedantic -std=gnu99 -o hq hq.c -I/local/courses/csse2310/include -L/local/courses/csse2310/lib -lcsse2310a3
s4698512@moss:~/CSSE2310/Assignments/a3$ ./hq
> spawn ls  ca at
Segmentation fault
s4698512@moss:~/CSSE2310/Assignments/a3$ s[K./hqmake./hqmake./hqmakevim hq.c
[?1000h[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;59r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[59;1H"hq.c" 433L, 10703C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[33m  7 [m[35m#ifndef hq_h[m[67C[100m [m
[33m  8 [m[35m#include [m[38;5;130m<stdlib.h>[m[60C[100m [m
[33m  9 [m[35m#include [m[38;5;130m<stdio.h>[m[61C[100m [m
[33m 10 [m[35m#include [m[38;5;130m<string.h>[m[60C[100m [m
[33m 11 [m[35m#include [m[38;5;130m<csse2310a3.h>[m     [36m// given library[m[35C[100m [m
[33m 12 [m[35m#include [m[38;5;130m<fcntl.h>[m[61C[100m [m
[33m 13 [m[35m#include [m[38;5;130m<unistd.h>[m[60C[100m [m
[33m 14 [m[35m#include [m[38;5;130m<sys/wait.h>[m[58C[100m [m
[33m 15 [m[35m#include [m[38;5;130m<signal.h>[m[60C[100m [m
[33m 16 [m[35m#include [m[38;5;130m<ctype.h>[m[61C[100m [m
[33m 17 [m[35m#include [m[38;5;130m<stdbool.h>[m[59C[100m [m
[33m 18 [m[79C[100m [m
[33m 19 [m[36m// Defintions[m[66C[100m [m
[33m 20 [m[79C[100m [m
[33m 21 [m[35m#define MAX_BUFFER_SIZE [m[38;5;130m52[m[53C[100m [m
[33m 22 [m[35m#define READ [m[38;5;130m0[m[65C[100m [m
[33m 23 [m[35m#define WRITE [m[38;5;130m1[m[64C[100m [m
[33m 24 [m[79C[100m [m
[33m 25 [m[35m#endif[m      [36m// hq_h[m[60C[100m [m
[33m 26 [m[79C[100m [m
[33m 27 [m[36m// Function declarations[m[55C[100m [m
[33m 28 [m[79C[100m [m
[33m 29 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs);[45C[100m [m
[33m 30 [m[79C[100m [m
[33m 31 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs);[44C[100m [m
[33m 32 [m[79C[100m [m
[33m 33 [m[32mvoid[m call_signal([32mchar[m** args, [32mint[m spcs);[39C[100m [m
[33m 34 [m[79C[100m [m
[33m 35 [m[32mvoid[m hq_wait([32mchar[m** args, [32mint[m spcs);[43C[100m [m
[33m 36 [m[79C[100m [m
[33m 37 [m[32mvoid[m send([32mchar[m** args, [32mint[m spcs);[46C[100m [m
[33m 38 [m[79C[100m [m
[33m 39 [m[32mvoid[m rcv([32mchar[m** args, [32mint[m spcs);[47C[100m [m
[33m 40 [m[79C[100m [m
[33m 41 [m[32mvoid[m eof([32mchar[m** args, [32mint[m spcs);[47C[100m [m
[33m 42 [m[79C[100m [m
[33m 43 [m[32mvoid[m cleanup([32mvoid[m);[60C[100m [m
[33m 44 [m[79C[100m [m
[33m 45 [m[32mvoid[m handle_signal([32mint[m s);[53C[100m [m
[33m 46 [m[79C[100m [m
[33m 47 [m[32mbool[m is_number([32mchar[m number[]);[49C[100m [m
[33m 48 [m[79C[100m [m
[33m 49 [m[32mbool[m is_job([32mchar[m job[]);[55C[100m [m
[33m 50 [m[79C[100m [m
[33m 51 [m[36m// Structs[m[69C[100m [m
[33m 52 [m[79C[100m [m
[33m 53 [m[32mstruct[m Job {[67C[100m [m
[33m 54 [m    [32mint[m pid;[67C[100m [m
[33m 55 [m    [32mchar[m name[MAX_BUFFER_SIZE];[48C[100m [m
[33m 56 [m    [32mint[m down[[38;5;130m2[m];[63C[100m [m
[33m 57 [m    [32mint[m up[[38;5;130m2[m];[65C[100m [m
[33m 58 [m    [32mint[m status;[64C[100m [m
[33m 59 [m    [32mint[m finished;[62C[100m [m
[33m 60 [m};[77C[100m [m
[33m 61 [m[79C[100m [m
[33m 62 [m[36m// Globals[m[69C[100m [m
[33m 63 [m[79C[100m [m
[93m 64 [m[4m[32mint[m[4m jobid = -[m[4m[38;5;130m1[m[4m;                                                                [m[4m[100m [m[4m                                [m[59;99H64,1[11C1%[58;5H[?25h[?12$p[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 65 [m[32mstruct[m Job* jobs;[62C[100m [m
[33m 66 [m[79C[100m [m
[33m 67 [m[79C[100m [m[59;1H[K[59;99H64,1[11C2%[55;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 68 [m[36m// Program[m[69C[100m [m
[33m 69 [m[79C[100m [m
[33m 70 [m[32mint[m main([32mint[m argc, [32mchar[m* argv[]) {[45C[100m [m[59;99H[K[59;99H64,1[11C3%[52;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 71 [m    [32mchar[m* input;[63C[100m [m
[33m 72 [m    [32mchar[m** tokens;[61C[100m [m
[33m 73 [m[79C[100m [m[59;99H[K[59;99H64,1[11C4%[49;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 74 [m    jobs = ma[38;5;248m[104mlloc[m([38;5;130m0[m * [33msizeof[m([32mstruct[m Job));[37C[100m [m
[33m 75 [m[79C[100m [m
[33m 76 [m    signal([38;5;130mSIGINT[m, handle_signal);[45C[100m [m[59;99H[K[59;99H64,1[11C4%[46;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 77 [m    signal([38;5;130mSIGCHLD[m, handle_signal);[44C[100m [m
[33m 78 [m    printf([38;5;130m"> "[m);[62C[100m [m
[33m 79 [m    fflush([38;5;130mstdout[m);[60C[100m [m[59;99H[K[59;99H64,1[11C5%[43;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 80 [m    [36m// prompt loop[m[61C[100m [m
[33m 81 [m    [33mwhile[m ((input = read_line([38;5;130mstdin[m)) != [38;5;130mNULL[m) {[31C[100m [m
[33m 82 [m[8C[32mint[m spcs = [38;5;130m0[m;[58C[100m [m[59;99H[K[59;99H64,1[11C6%[40;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 83 [m[79C[100m [m
[33m 84 [m[8C[33mif[m (!strcmp(input, [38;5;130m""[m)) {[46C[100m [m
[33m 85 [m[12Cprintf([38;5;130m"> "[m);[54C[100m [m[59;99H[K[59;99H64,1[11C7%[37;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 86 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m 87 [m[12C[33mcontinue[m;[58C[100m [m
[33m 88 [m[8C}[70C[100m [m[59;99H[K[59;99H64,1[11C8%[34;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 89 [m[8Ctokens = split_space_not_quote(input, &spcs);[26C[100m [m
[33m 90 [m[79C[100m [m
[33m 91 [m[8C[32mchar[m* args[spcs];[54C[100m [m[59;99H[K[59;99H64,1[11C8%[31;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 92 [m[8C[33mfor[m ([32mint[m i = [38;5;130m1[m; i < spcs; i++) {[39C[100m [m
[33m 93 [m[12Cargs[i - [38;5;130m1[m] = tokens[i];[43C[100m [m
[33m 94 [m[8C}[70C[100m [m[59;99H[K[59;99H64,1[11C9%[28;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 95 [m[8Cargs[spcs - [38;5;130m1[m] = [38;5;130m0[m;[52C[100m [m
[33m 96 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m 97 [m[79C[100m [m[59;99H[K[59;99H64,1[10C10%[25;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m 98 [m[8C[33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"spawn"[m)) {[37C[100m [m
[33m 99 [m[12C[36m// spawn[m[59C[100m [m
[33m100 [m[12Cspawn(args, spcs);[49C[100m [m[59;99H[K[59;99H64,1[10C11%[22;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m101 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"report"[m)) {[29C[100m [m
[33m102 [m[12C[36m// Report[m[58C[100m [m
[33m103 [m[12Creport(args, spcs);[48C[100m [m[59;99H[K[59;99H64,1[10C12%[19;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m104 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"signal"[m)) {[29C[100m [m
[33m105 [m[12Ccall_signal(args, spcs);[43C[100m [m
[33m106 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"sleep"[m)) {[30C[100m [m[59;99H[K[59;99H64,1[10C12%[16;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m107 [m[12Chq_wait(args, spcs);[47C[100m [m
[33m108 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"send"[m)) {[31C[100m [m
[33m109 [m[12Csend(args, spcs);[50C[100m [m[59;99H[K[59;99H64,1[10C13%[13;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m110 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"rcv"[m)) {[32C[100m [m
[33m111 [m[12Crcv(args, spcs);[51C[100m [m
[33m112 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"eof"[m)) {[32C[100m [m[59;99H[K[59;99H64,1[10C14%[10;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m113 [m[12Ceof(args, spcs);[51C[100m [m
[33m114 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"cleanup"[m)) {[28C[100m [m
[33m115 [m[12Ccleanup();[57C[100m [m[59;99H[K[59;99H64,1[10C15%[7;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m116 [m[8C} [33melse[m {[63C[100m [m
[33m117 [m[12Cprintf([38;5;130m"Error: Invalid command[m[35m\n[m[38;5;130m"[m);[32C[100m [m
[33m118 [m[8C}[70C[100m [m[59;99H[K[59;99H64,1[10C16%[4;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m119 [m[79C[100m [m
[33m120 [m[8Cprintf([38;5;130m"> "[m);[58C[100m [m
[33m121 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m[59;99H[K[59;99H64,1[10C16%[1;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 61 [m[79C[100m [m
[33m 62 [m[36m// Globals[m[69C[100m [m
[33m 63 [m[79C[100m [m[59;99H[K[59;99H64,1[10C16%[4;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 58 [m    [32mint[m status;[64C[100m [m
[33m 59 [m    [32mint[m finished;[62C[100m [m
[33m 60 [m};[77C[100m [m[59;99H[K[59;99H64,1[10C15%[7;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 55 [m    [32mchar[m name[MAX_BUFFER_SIZE];[48C[100m [m
[33m 56 [m    [32mint[m down[[38;5;130m2[m];[63C[100m [m
[33m 57 [m    [32mint[m up[[38;5;130m2[m];[65C[100m [m[59;99H[K[59;99H64,1[10C14%[10;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 52 [m[79C[100m [m
[33m 53 [m[32mstruct[m Job {[67C[100m [m
[33m 54 [m    [32mint[m pid;[67C[100m [m[59;99H[K[59;99H64,1[10C13%[13;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 49 [m[32mbool[m is_job([32mchar[m job[]);[55C[100m [m
[33m 50 [m[79C[100m [m
[33m 51 [m[36m// Structs[m[69C[100m [m[59;99H[K[59;99H64,1[10C12%[16;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 46 [m[79C[100m [m
[33m 47 [m[32mbool[m is_number([32mchar[m number[]);[49C[100m [m
[33m 48 [m[79C[100m [m[59;99H[K[59;99H64,1[10C12%[19;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 43 [m[32mvoid[m cleanup([32mvoid[m);[60C[100m [m
[33m 44 [m[79C[100m [m
[33m 45 [m[32mvoid[m handle_signal([32mint[m s);[53C[100m [m[59;99H[K[59;99H64,1[10C11%[22;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m101 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"report"[m)) {[29C[100m [m
[33m102 [m[12C[36m// Report[m[58C[100m [m
[33m103 [m[12Creport(args, spcs);[48C[100m [m[59;99H[K[59;99H64,1[10C12%[19;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m104 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"signal"[m)) {[29C[100m [m
[33m105 [m[12Ccall_signal(args, spcs);[43C[100m [m
[33m106 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"sleep"[m)) {[30C[100m [m[59;99H[K[59;99H64,1[10C12%[16;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m107 [m[12Chq_wait(args, spcs);[47C[100m [m
[33m108 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"send"[m)) {[31C[100m [m
[33m109 [m[12Csend(args, spcs);[50C[100m [m[59;99H[K[59;99H64,1[10C13%[13;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m110 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"rcv"[m)) {[32C[100m [m
[33m111 [m[12Crcv(args, spcs);[51C[100m [m
[33m112 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"eof"[m)) {[32C[100m [m[59;99H[K[59;99H64,1[10C14%[10;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m113 [m[12Ceof(args, spcs);[51C[100m [m
[33m114 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"cleanup"[m)) {[28C[100m [m
[33m115 [m[12Ccleanup();[57C[100m [m[59;99H[K[59;99H64,1[10C15%[7;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m116 [m[8C} [33melse[m {[63C[100m [m
[33m117 [m[12Cprintf([38;5;130m"Error: Invalid command[m[35m\n[m[38;5;130m"[m);[32C[100m [m
[33m118 [m[8C}[70C[100m [m[59;99H[K[59;99H64,1[10C16%[4;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m119 [m[79C[100m [m
[33m120 [m[8Cprintf([38;5;130m"> "[m);[58C[100m [m
[33m121 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m[59;99H[K[59;99H64,1[10C16%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 67 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m122 [m[79C[100m [m
[33m123 [m[8Cfree(input);[59C[100m [m
[33m124 [m[8Cfree(tokens);[58C[100m [m[59;99H[K[59;99H67,0-1[8C17%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 70 [m[4m[32mint[m[4m main([m[4m[32mint[m[4m argc, [m[4m[32mchar[m[4m* argv[]) {                                             [m[4m[100m [m[4m                                [m[56;1H[33m125 [m    }[74C[100m [m
[33m126 [m[79C[100m [m
[33m127 [m    free(jobs);[64C[100m [m[59;99H[K[59;99H70,1[10C18%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 73 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m128 [m    [33mreturn[m [38;5;130m0[m;[66C[100m [m
[33m129 [m}[78C[100m [m
[33m130 [m[79C[100m [m[59;99H[K[59;99H73,1[10C19%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 76 [m[4m    signal([m[4m[38;5;130mSIGINT[m[4m, handle_signal);                                             [m[4m[100m [m[4m                                [m[56;1H[33m131 [m[36m/* spawn()[m[69C[100m [m
[33m132 [m[36m * -------[m[69C[100m [m
[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m[59;99H[K[59;99H76,1[10C20%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 79 [m[4m    fflush([m[4m[38;5;130mstdout[m[4m);                                                            [m[4m[100m [m[4m                                [m[56;1H[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m
[33m135 [m[36m * of the child process is unchanged[m[43C[100m [m
[33m136 [m[36m *[m[77C[100m [m[59;99H[K[59;99H79,1[10C20%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 82 [m[4m        [m[4m[32mint[m[4m spcs = [m[4m[38;5;130m0[m[4m;                                                          [m[4m[100m [m[4m                                [m[56;1H[33m137 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m138 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m139 [m[36m */[m[76C[100m [m[59;99H[K[59;99H82,1[10C21%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 85 [m[4m            printf([m[4m[38;5;130m"> "[m[4m);                                                      [m[4m[100m [m[4m                                [m[56;1H[33m140 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs) {[44C[100m [m
[33m141 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m142 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m[59;99H[K[59;99H85,1[10C22%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 88 [m[4m        }                                                                      [m[4m[100m [m[4m                                [m[56;1H[33m143 [m    } [33melse[m {[67C[100m [m
[33m144 [m[8Cjobs = rea[38;5;248m[104mlloc[m(jobs, (jobid + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));[16C[100m [m
[33m145 [m[79C[100m [m[59;99H[K[59;99H88,1[10C23%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 91 [m[4m        [m[4m[32mchar[m[4m* args[spcs];                                                      [m[4m[100m [m[4m                                [m[56;1H[33m146 [m[8Cjobid++;[63C[100m [m
[33m147 [m[79C[100m [m
[33m148 [m[8Cstrcpy(jobs[jobid].name, args[[38;5;130m0[m]);[37C[100m [m[59;99H[K[59;99H91,1[10C24%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 94 [m[4m        }                                                                      [m[4m[100m [m[4m                                [m[56;1H[33m149 [m[79C[100m [m
[33m150 [m[8C[33mif[m (pipe(jobs[jobid].down) < [38;5;130m0[m) {[38C[100m [m
[33m151 [m[12Cperror([38;5;130m"Creating down pipe"[m);[38C[100m [m[59;99H[K[59;99H94,1[10C24%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 97 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m152 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m153 [m[8C}[70C[100m [m
[33m154 [m[79C[100m [m[59;99H[K[59;99H97,0-1[8C25%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m100 [m[4m            spawn(args, spcs);                                                 [m[4m[100m [m[4m                                [m[56;1H[33m155 [m[8C[33mif[m (pipe(jobs[jobid].up) < [38;5;130m0[m) {[40C[100m [m
[33m156 [m[12Cperror([38;5;130m"Creating up pipe"[m);[40C[100m [m
[33m157 [m[12Cexit([38;5;130m1[m);[59C[100m [m[59;99H[K[59;99H100,1[9C26%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m103 [m[4m            report(args, spcs);                                                [m[4m[100m [m[4m                                [m[56;1H[33m158 [m[8C}[70C[100m [m
[33m159 [m[79C[100m [m
[33m160 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, jobid);[28C[100m [m[59;99H[K[59;99H103,1[9C27%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m106 [m[4m        } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (!strcmp(tokens[[m[4m[38;5;130m0[m[4m], [m[4m[38;5;130m"sleep"[m[4m)) {                              [m[4m[100m [m[4m                                [m[56;1H[33m161 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m162 [m[79C[100m [m
[33m163 [m[8Cjobs[jobid].pid = fork();[46C[100m [m[59;99H[K[59;99H106,1[9C28%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m109 [m[4m            send(args, spcs);                                                  [m[4m[100m [m[4m                                [m[56;1H[33m164 [m[8C[33mif[m (!jobs[jobid].pid) {[48C[100m [m
[33m165 [m[12C[36m// child[m[59C[100m [m
[33m166 [m[79C[100m [m[59;99H[K[59;99H109,1[9C28%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m112 [m[4m        } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (!strcmp(tokens[[m[4m[38;5;130m0[m[4m], [m[4m[38;5;130m"eof"[m[4m)) {                                [m[4m[100m [m[4m                                [m[56;1H[33m167 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m168 [m[12Cclose(jobs[jobid].down[WRITE]);[36C[100m [m
[33m169 [m[12Cclose(jobs[jobid].up[READ]);[39C[100m [m[59;99H[K[59;99H112,1[9C29%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m115 [m[4m            cleanup();                                                         [m[4m[100m [m[4m                                [m[56;1H[33m170 [m[79C[100m [m
[33m171 [m[12Cdup2(jobs[jobid].down[READ], STDIN_FILENO);[24C[100m [m
[33m172 [m[12Cclose(jobs[jobid].down[READ]);[37C[100m [m[59;99H[K[59;99H115,1[9C30%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m118 [m[4m        }                                                                      [m[4m[100m [m[4m                                [m[56;1H[33m173 [m[12Cdup2(jobs[jobid].up[WRITE], STDOUT_FILENO);[24C[100m [m
[33m174 [m[12Cclose(jobs[jobid].up[WRITE]);[38C[100m [m
[33m175 [m[79C[100m [m[59;99H[K[59;99H118,1[9C31%[1;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m115 [m[12Ccleanup();[57C[100m [m
[33m116 [m[8C} [33melse[m {[63C[100m [m
[33m117 [m[12Cprintf([38;5;130m"Error: Invalid command[m[35m\n[m[38;5;130m"[m);[32C[100m [m[59;99H[K[59;99H118,1[9C30%[4;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m112 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"eof"[m)) {[32C[100m [m
[33m113 [m[12Ceof(args, spcs);[51C[100m [m
[33m114 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"cleanup"[m)) {[28C[100m [m[59;99H[K[59;99H118,1[9C29%[7;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m109 [m[12Csend(args, spcs);[50C[100m [m
[33m110 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"rcv"[m)) {[32C[100m [m
[33m111 [m[12Crcv(args, spcs);[51C[100m [m[59;99H[K[59;99H118,1[9C28%[10;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m106 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"sleep"[m)) {[30C[100m [m
[33m107 [m[12Chq_wait(args, spcs);[47C[100m [m
[33m108 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"send"[m)) {[31C[100m [m[59;99H[K[59;99H118,1[9C28%[13;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m103 [m[12Creport(args, spcs);[48C[100m [m
[33m104 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"signal"[m)) {[29C[100m [m
[33m105 [m[12Ccall_signal(args, spcs);[43C[100m [m[59;99H[K[59;99H118,1[9C27%[16;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m100 [m[12Cspawn(args, spcs);[49C[100m [m
[33m101 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"report"[m)) {[29C[100m [m
[33m102 [m[12C[36m// Report[m[58C[100m [m[59;99H[K[59;99H118,1[9C26%[19;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 97 [m[79C[100m [m
[33m 98 [m[8C[33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"spawn"[m)) {[37C[100m [m
[33m 99 [m[12C[36m// spawn[m[59C[100m [m[59;99H[K[59;99H118,1[9C25%[22;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 94 [m[8C}[70C[100m [m
[33m 95 [m[8Cargs[spcs - [38;5;130m1[m] = [38;5;130m0[m;[52C[100m [m
[33m 96 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m[59;99H[K[59;99H118,1[9C24%[25;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 91 [m[8C[32mchar[m* args[spcs];[54C[100m [m
[33m 92 [m[8C[33mfor[m ([32mint[m i = [38;5;130m1[m; i < spcs; i++) {[39C[100m [m
[33m 93 [m[12Cargs[i - [38;5;130m1[m] = tokens[i];[43C[100m [m[59;99H[K[59;99H118,1[9C24%[28;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 88 [m[8C}[70C[100m [m
[33m 89 [m[8Ctokens = split_space_not_quote(input, &spcs);[26C[100m [m
[33m 90 [m[79C[100m [m[59;99H[K[59;99H118,1[9C23%[31;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 85 [m[12Cprintf([38;5;130m"> "[m);[54C[100m [m
[33m 86 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m 87 [m[12C[33mcontinue[m;[58C[100m [m[59;99H[K[59;99H118,1[9C22%[34;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 82 [m[8C[32mint[m spcs = [38;5;130m0[m;[58C[100m [m
[33m 83 [m[79C[100m [m
[33m 84 [m[8C[33mif[m (!strcmp(input, [38;5;130m""[m)) {[46C[100m [m[59;99H[K[59;99H118,1[9C21%[37;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 79 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m 80 [m    [36m// prompt loop[m[61C[100m [m
[33m 81 [m    [33mwhile[m ((input = read_line([38;5;130mstdin[m)) != [38;5;130mNULL[m) {[31C[100m [m[59;99H[K[59;99H118,1[9C20%[40;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 76 [m    signal([38;5;130mSIGINT[m, handle_signal);[45C[100m [m
[33m 77 [m    signal([38;5;130mSIGCHLD[m, handle_signal);[44C[100m [m
[33m 78 [m    printf([38;5;130m"> "[m);[62C[100m [m[59;99H[K[59;99H118,1[9C20%[43;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 73 [m[79C[100m [m
[33m 74 [m    jobs = ma[38;5;248m[104mlloc[m([38;5;130m0[m * [33msizeof[m([32mstruct[m Job));[37C[100m [m
[33m 75 [m[79C[100m [m[59;99H[K[59;99H118,1[9C19%[46;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 70 [m[32mint[m main([32mint[m argc, [32mchar[m* argv[]) {[45C[100m [m
[33m 71 [m    [32mchar[m* input;[63C[100m [m
[33m 72 [m    [32mchar[m** tokens;[61C[100m [m[59;99H[K[59;99H118,1[9C18%[49;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 67 [m[79C[100m [m
[33m 68 [m[36m// Program[m[69C[100m [m
[33m 69 [m[79C[100m [m[59;99H[K[59;99H118,1[9C17%[52;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 64 [m[32mint[m jobid = -[38;5;130m1[m;[64C[100m [m
[33m 65 [m[32mstruct[m Job* jobs;[62C[100m [m
[33m 66 [m[79C[100m [m[59;99H[K[59;99H118,1[9C16%[55;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 61 [m[79C[100m [m
[33m 62 [m[36m// Globals[m[69C[100m [m
[33m 63 [m[79C[100m [m[59;99H[K[59;99H118,1[9C16%[58;5H[?25h[?25l[59;99H[K[59;1H/[?2004h[?25hj[?25l[?25ho[?25l[?25hb[?25l[?25hi[?25l[?25hd[?25l[?25h[?25l[1;58r[1;1H[26M[1;59r[32;1H[33m118 [m        }                                                                      [100m [m[32;85H[K[33;1H[33m119 [m[79C[100m [m
[33m120 [m[8Cprintf([38;5;130m"> "[m);[58C[100m [m
[33m121 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m122 [m[79C[100m [m
[33m123 [m[8Cfree(input);[59C[100m [m
[33m124 [m[8Cfree(tokens);[58C[100m [m
[33m125 [m    }[74C[100m [m
[33m126 [m[79C[100m [m
[33m127 [m    free(jobs);[64C[100m [m
[33m128 [m    [33mreturn[m [38;5;130m0[m;[66C[100m [m
[33m129 [m}[78C[100m [m
[33m130 [m[79C[100m [m
[33m131 [m[36m/* spawn()[m[69C[100m [m
[33m132 [m[36m * -------[m[69C[100m [m
[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m
[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m
[33m135 [m[36m * of the child process is unchanged[m[43C[100m [m
[33m136 [m[36m *[m[77C[100m [m
[33m137 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m138 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m139 [m[36m */[m[76C[100m [m
[33m140 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs) {[44C[100m [m
[33m141 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m142 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m143 [m    } [33melse[m {[67C[100m [m
[93m144 [m[4m        jobs = realloc(jobs, ([m[4m[38;5;248m[104mjobid[m[4m + [m[4m[38;5;130m1[m[4m) * [m[4m[33msizeof[m[4m([m[4m[32mstruct[m[4m Job));                [m[4m[100m [m[4m                                [m[59;1H[K[59;99H144,31[8C22%[58;35H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 84 [m[8C[33mif[m (!strcmp(input, [38;5;130m""[m)) {[46C[100m [m
[33m 85 [m[12Cprintf([38;5;130m"> "[m);[54C[100m [m
[33m 86 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m[58;1H[93m141 [m[4m    [m[4m[33mif[m[4m (spcs < [m[4m[38;5;130m2[m[4m) {                                                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H141,19[8C22%[58;23H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 81 [m    [33mwhile[m ((input = read_line([38;5;130mstdin[m)) != [38;5;130mNULL[m) {[31C[100m [m
[33m 82 [m[8C[32mint[m spcs = [38;5;130m0[m;[58C[100m [m
[33m 83 [m[79C[100m [m[58;1H[93m138 [m[4m[36m * spcs: number of original tokens[m[4m                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H138,31[8C21%[58;35H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 78 [m    printf([38;5;130m"> "[m);[62C[100m [m
[33m 79 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m 80 [m    [36m// prompt loop[m[61C[100m [m[58;1H[93m135 [m[4m[36m * of the child process is unchanged[m[4m                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H135,31[8C20%[58;35H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 75 [m[79C[100m [m
[33m 76 [m    signal([38;5;130mSIGINT[m, handle_signal);[45C[100m [m
[33m 77 [m    signal([38;5;130mSIGCHLD[m, handle_signal);[44C[100m [m[58;1H[93m132 [m[4m[36m * -------[m[4m                                                                     [m[4m[100m [m[4m                                [m[59;99H[K[59;99H132,10[8C19%[58;14H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 72 [m    [32mchar[m** tokens;[61C[100m [m
[33m 73 [m[79C[100m [m
[33m 74 [m    jobs = malloc([38;5;130m0[m * [33msizeof[m([32mstruct[m Job));[37C[100m [m[58;1H[93m129 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H129,1[9C18%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 69 [m[79C[100m [m
[33m 70 [m[32mint[m main([32mint[m argc, [32mchar[m* argv[]) {[45C[100m [m
[33m 71 [m    [32mchar[m* input;[63C[100m [m[58;1H[93m126 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H126,4[9C18%[58;8H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 66 [m[79C[100m [m
[33m 67 [m[79C[100m [m
[33m 68 [m[36m// Program[m[69C[100m [m[58;1H[93m123 [m[4m        free(input);                                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H123,20[8C17%[58;24H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 63 [m[79C[100m [m
[33m 64 [m[32mint[m [38;5;248m[104mjobid[m = -[38;5;130m1[m;[64C[100m [m
[33m 65 [m[32mstruct[m Job* jobs;[62C[100m [m[58;1H[93m120 [m[4m        printf([m[4m[38;5;130m"> "[m[4m);                                                          [m[4m[100m [m[4m                                [m[59;99H[K[59;99H120,21[8C16%[58;25H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 60 [m};[77C[100m [m
[33m 61 [m[79C[100m [m
[33m 62 [m[36m// Globals[m[69C[100m [m[58;1H[93m117 [m[4m            printf([m[4m[38;5;130m"Error: Invalid command[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                [m[4m[100m [m[4m                                [m[59;99H[K[59;99H117,31[8C15%[58;35H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 57 [m    [32mint[m up[[38;5;130m2[m];[65C[100m [m
[33m 58 [m    [32mint[m status;[64C[100m [m
[33m 59 [m    [32mint[m finished;[62C[100m [m[58;1H[93m114 [m[4m        } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (!strcmp(tokens[[m[4m[38;5;130m0[m[4m], [m[4m[38;5;130m"cleanup"[m[4m)) {                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H114,31[8C14%[58;35H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 54 [m    [32mint[m pid;[67C[100m [m
[33m 55 [m    [32mchar[m name[MAX_BUFFER_SIZE];[48C[100m [m
[33m 56 [m    [32mint[m down[[38;5;130m2[m];[63C[100m [m[58;1H[93m111 [m[4m            rcv(args, spcs);                                                   [m[4m[100m [m[4m                                [m[59;99H[K[59;99H111,28[8C14%[58;32H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m112 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"eof"[m)) {[32C[100m [m
[33m113 [m[12Ceof(args, spcs);[51C[100m [m
[33m114 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"cleanup"[m)) {[28C[100m [m[59;99H[K[59;99H111,28[8C14%[55;32H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m115 [m[12Ccleanup();[57C[100m [m
[33m116 [m[8C} [33melse[m {[63C[100m [m
[33m117 [m[12Cprintf([38;5;130m"Error: Invalid command[m[35m\n[m[38;5;130m"[m);[32C[100m [m[59;99H[K[59;99H111,28[8C15%[52;32H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m118 [m[8C}[70C[100m [m
[33m119 [m[79C[100m [m
[33m120 [m[8Cprintf([38;5;130m"> "[m);[58C[100m [m[59;99H[K[59;99H111,28[8C16%[49;32H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m121 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m122 [m[79C[100m [m
[33m123 [m[8Cfree(input);[59C[100m [m[59;99H[K[59;99H111,28[8C17%[46;32H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m124 [m[8Cfree(tokens);[58C[100m [m
[33m125 [m    }[74C[100m [m
[33m126 [m[79C[100m [m[59;99H[K[59;99H111,28[8C18%[43;32H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m127 [m    free(jobs);[64C[100m [m
[33m128 [m    [33mreturn[m [38;5;130m0[m;[66C[100m [m
[33m129 [m}[78C[100m [m[59;99H[K[59;99H111,28[8C18%[40;32H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m130 [m[79C[100m [m
[33m131 [m[36m/* spawn()[m[69C[100m [m
[33m132 [m[36m * -------[m[69C[100m [m[59;99H[K[59;99H111,28[8C19%[37;32H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m
[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m
[33m135 [m[36m * of the child process is unchanged[m[43C[100m [m[59;99H[K[59;99H111,28[8C20%[34;32H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m136 [m[36m *[m[77C[100m [m
[33m137 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m138 [m[36m * spcs: number of original tokens[m[45C[100m [m[59;99H[K[59;99H111,28[8C21%[31;32H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m139 [m[36m */[m[76C[100m [m
[33m140 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs) {[44C[100m [m
[33m141 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m[59;99H[K[59;99H111,28[8C22%[28;32H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m142 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m143 [m    } [33melse[m {[67C[100m [m
[33m144 [m[8Cjobs = realloc(jobs, ([38;5;248m[104mjobid[m + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));[16C[100m [m[59;99H[K[59;99H111,28[8C22%[25;32H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m145 [m[79C[100m [m
[33m146 [m[8C[38;5;248m[104mjobid[m++;[63C[100m [m
[33m147 [m[79C[100m [m[59;99H[K[59;99H111,28[8C23%[22;32H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m148 [m[8Cstrcpy(jobs[[38;5;248m[104mjobid[m].name, args[[38;5;130m0[m]);[37C[100m [m
[33m149 [m[79C[100m [m
[33m150 [m[8C[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].down) < [38;5;130m0[m) {[38C[100m [m[59;99H[K[59;99H111,28[8C24%[19;32H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m151 [m[12Cperror([38;5;130m"Creating down pipe"[m);[38C[100m [m
[33m152 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m153 [m[8C}[70C[100m [m[59;99H[K[59;99H111,28[8C25%[16;32H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m154 [m[79C[100m [m
[33m155 [m[8C[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].up) < [38;5;130m0[m) {[40C[100m [m
[33m156 [m[12Cperror([38;5;130m"Creating up pipe"[m);[40C[100m [m[59;99H[K[59;99H111,28[8C26%[13;32H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m157 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m158 [m[8C}[70C[100m [m
[33m159 [m[79C[100m [m[59;99H[K[59;99H111,28[8C26%[10;32H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m160 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, [38;5;248m[104mjobid[m);[28C[100m [m
[33m161 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m162 [m[79C[100m [m[59;99H[K[59;99H111,28[8C27%[7;32H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m163 [m[8Cjobs[[38;5;248m[104mjobid[m].pid = fork();[46C[100m [m
[33m164 [m[8C[33mif[m (!jobs[[38;5;248m[104mjobid[m].pid) {[48C[100m [m
[33m165 [m[12C[36m// child[m[59C[100m [m[59;99H[K[59;99H111,28[8C28%[4;32H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m166 [m[79C[100m [m
[33m167 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m168 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[WRITE]);[36C[100m [m[59;99H[K[59;99H111,28[8C29%[1;32H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m114 [m[4m        } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (!strcmp(tokens[[m[4m[38;5;130m0[m[4m], [m[4m[38;5;130m"cleanup"[m[4m)) {                            [m[4m[100m [m[4m                                [m[56;1H[33m169 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[READ]);[39C[100m [m
[33m170 [m[79C[100m [m
[33m171 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].down[READ], STDIN_FILENO);[24C[100m [m[59;99H[K[59;99H114,31[8C30%[1;35H[?25h[?25l[33m114 [m        } [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"cleanup"[m)) {                            [100m [m[1;85H[K[31;1H[93m144 [m[4m        jobs = realloc(jobs, ([m[4m[38;5;248m[104mjobid[m[4m + [m[4m[38;5;130m1[m[4m) * [m[4m[33msizeof[m[4m([m[4m[32mstruct[m[4m Job));                [m[4m[100m [m[4m                                [m[59;100H4[31;35H[?25h[?25l[31;5H        jobs = realloc(jobs, ([7m[48;5;242mjobid + [m[38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));                [100m [m[31;85H[K[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H144,39[8C30%[31;43H[?25h[?25l[30;1H[93m143 [m[4m    } [m[4m[33melse[m[4m {                                                                   [m[4m[100m [m[4m                                [m[31;1H[33m144 [m[30C[38;5;248m[104mjobid[m + [59;1H[K[59;99H143,12[8C30%[30;16H[?25h[?25l[59;1H[38;5;130m-- INSERT --[m[59;99H[K[59;99H143,12[8C30%[30;16H[?25h[?25l[59;104H3[30;17H[?25h[?25l[33m143 [m    } [33melse[m {                                                                   [100m [m[30;85H[K[31;1H[93m144 [m[4m                                                                               [m[4m[100m [m[4m                                [m[32;13Hjobs = realloc(jobs, ([38;5;248m[104mjobid[m + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));[33;13H        [34;13H[38;5;248m[104mjobid[m++;[35;13H                                  [36;13Hstrcpy(jobs[[38;5;248m[104mjobid[m].name, args[[38;5;130m0[m]);[37;13H                                 [38;13H[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].down) < [38;5;130m0[m) {[39;17Hperror([38;5;130m"Creating down pipe"[m);[40;13H    exit([38;5;130m1[m);[41;13H}[42;13H                               [43;13H[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].up) < [38;5;130m0[m) {[44;17Hperror([38;5;130m"Creating up pipe"[m);[45;13H    exit([38;5;130m1[m);[46;13H}[47;13H                                           [48;13Hprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, [38;5;248m[104mjobid[m);[49;13Hfflush([38;5;130mstdout[m);[50;13H                         [51;13Hjobs[[38;5;248m[104mjobid[m].pid = fork();[52;13H[33mif[m (!jobs[[38;5;248m[104mjobid[m].pid) {[53;17H[36m// child[m[54;17H               [55;17Hfflush([38;5;130mstdout[m);                [56;35Hdown[WRITE]);[57;17Hclose(jobs[[38;5;248m[104mjobid[m].up[READ]);[58;17H                                           [59;101H4,9 [31;13H[?25h[?25l[33m144 [m                                                                               [100m [m[31;85H[K[32;1H[93m145 [m[4m                                                                               [m[4m[100m [m[4m                                [m[33;13Hjobs = realloc(jobs, ([38;5;248m[104mjobid[m + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));[34;13H        [35;13H[38;5;248m[104mjobid[m++;[36;13H                                  [37;13Hstrcpy(jobs[[38;5;248m[104mjobid[m].name, args[[38;5;130m0[m]);[38;13H                                 [39;13H[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].down) < [38;5;130m0[m) {[40;17Hperror([38;5;130m"Creating down pipe"[m);[41;13H    exit([38;5;130m1[m);[42;13H}[43;13H                               [44;13H[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].up) < [38;5;130m0[m) {[45;17Hperror([38;5;130m"Creating up pipe"[m);[46;13H    exit([38;5;130m1[m);[47;13H}[48;13H                                           [49;13Hprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, [38;5;248m[104mjobid[m);[50;13Hfflush([38;5;130mstdout[m);[51;13H                         [52;13Hjobs[[38;5;248m[104mjobid[m].pid = fork();[53;13H[33mif[m (!jobs[[38;5;248m[104mjobid[m].pid) {[54;17H[36m// child[m[55;17H               [56;17Hfflush([38;5;130mstdout[m);                [57;35Hdown[WRITE]);[58;17Hclose(jobs[[38;5;248m[104mjobid[m].up[READ]);[59;101H5[11C29[32;13H[?25h[?25l[31;1H[93m144 [m[4m                                                                               [m[4m[100m [m[4m                                [m[32;1H[33m145 [m                                                                               [100m [m[32;85H[K[59;101H4,1[31;5H[?25h[?25l[4mj[m[59;103H2[31;6H[?25h[?25l[4m [m[59;103H1[31;5H[?25h[?25l[59;103H5[31;9H[?25h[?25l[59;103H9[31;13H[?25h[?25l[4mj[m[59;103H10[31;14H[?25h[?25l[4mo[m[59;104H1[31;15H[?25h[?25l[4mi[m[59;104H2[31;16H[?25h[?25l[4m [m[59;104H1[31;15H[?25h[?25l[4mb[m[59;104H2[31;16H[?25h[?25l[4mi[m[59;104H3[31;17H[?25h[?25l[4m[38;5;248m[104mjobid[m[59;104H4[31;18H[?25h[?25l[4m+[m[59;104H5[31;19H[?25h[?25l[4m+[m[59;104H6[31;20H[?25h[?25l[4m;[m[59;104H7[31;21H[?25h[?25l[33m144 [m        [38;5;248m[104mjobid[m++;                                                               [100m [m[31;85H[K[32;1H[93m145 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;101H5,1 [32;5H[?25h[?25l[33m145 [m                                                                               [100m [m[32;85H[K[33;1H[93m146 [m[4m        jobs = realloc(jobs, ([m[4m[38;5;248m[104mjobid[m[4m + [m[4m[38;5;130m1[m[4m) * [m[4m[33msizeof[m[4m([m[4m[32mstruct[m[4m Job));                [m[4m[100m [m[4m                                [m[59;101H6,17[33;21H[?25h[?25l[33m146 [m        jobs = realloc(jobs, ([38;5;248m[104mjobid[m + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));                [100m [m[33;85H[K[34;1H[93m147 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;101H7,9 [34;13H[?25h[?25l[33m147 [m                                                                               [100m [m[34;85H[K[35;1H[93m148 [m[4m        [m[4m[38;5;248m[104mjobid[m[4m++;                                                               [m[4m[100m [m[4m                                [m[59;101H8,17[35;21H[?25h[?25l[33m148 [m        [38;5;248m[104mjobid[m++;                                                               [100m [m[35;85H[K[36;1H[93m149 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;101H9,1 [36;5H[?25h[59;1H[K[36;5H[?25l[59;99H149,0-1[7C29%[36;5H[?25h[?25l[33m149 [m                                                                               [100m [m[36;85H[K[37;1H[93m150 [m[4m        strcpy(jobs[[m[4m[38;5;248m[104mjobid[m[4m].name, args[[m[4m[38;5;130m0[m[4m]);                                     [m[4m[100m [m[4m                                [m[59;100H50,1  [37;5H[?25h[?25l[36;1H[93m149 [m[4m                                                                               [m[4m[100m [m[4m                                [m[37;1H[33m150 [m        strcpy(jobs[[38;5;248m[104mjobid[m].name, args[[38;5;130m0[m]);                                     [100m [m[37;85H[K[59;100H49,0-1[36;5H[?25h[?25l[35;1H[93m148 [m[4m        [m[4m[38;5;248m[104mjobid[m[4m++;                                                               [m[4m[100m [m[4m                                [m[36;1H[33m149 [m                                                                               [100m [m[36;85H[K[59;101H8,1  [35;5H[?25h[?25l[8C[4m        [m[36;13Hstrcpy(jobs[[38;5;248m[104mjobid[m].name, args[[38;5;130m0[m]);[37;13H                                  [38;13H[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].down) < [38;5;130m0[m) {[39;13H    perror([38;5;130m"Creating down pipe"[m);[40;17Hexit([38;5;130m1[m);                     [41;13H}           [42;13H [43;13H[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].up) < [38;5;130m0[m) {[44;13H    perror([38;5;130m"Creating up pipe"[m);[45;17Hexit([38;5;130m1[m);                   [46;13H}           [47;13H [48;13Hprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, [38;5;248m[104mjobid[m);[49;13Hfflush([38;5;130mstdout[m);                            [50;13H               [51;13Hjobs[[38;5;248m[104mjobid[m].pid = fork();[52;13H[33mif[m (!jobs[[38;5;248m[104mjobid[m].pid) {  [53;13H    [36m// child[m           [54;17H        [55;17Hfflush([38;5;130mstdout[m);[56;17Hclose(jobs[[38;5;248m[104mjobid[m].down[WRITE]);[57;35Hup[READ]);   [58;17H                            [59;103H0-1[7C30[35;5H[?25h[?25l[8C[4mstrcpy(jobs[[m[4m[38;5;248m[104mjobid[m[4m].name, args[[m[4m[38;5;130m0[m[4m]);[m[36;13H                                  [37;13H[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].down) < [38;5;130m0[m) {[38;13H    perror([38;5;130m"Creating down pipe"[m);[39;17Hexit([38;5;130m1[m);                     [40;13H}           [41;13H [42;13H[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].up) < [38;5;130m0[m) {[43;13H    perror([38;5;130m"Creating up pipe"[m);[44;17Hexit([38;5;130m1[m);                   [45;13H}           [46;13H [47;13Hprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, [38;5;248m[104mjobid[m);[48;13Hfflush([38;5;130mstdout[m);                            [49;13H               [50;13Hjobs[[38;5;248m[104mjobid[m].pid = fork();[51;13H[33mif[m (!jobs[[38;5;248m[104mjobid[m].pid) {  [52;13H    [36m// child[m           [53;17H        [54;17Hfflush([38;5;130mstdout[m);[55;17Hclose(jobs[[38;5;248m[104mjobid[m].down[WRITE]);[56;35Hup[READ]);   [57;17H                            [58;17Hdup2(jobs[[38;5;248m[104mjobid[m].down[READ], STDIN_FILENO);[59;103H9  [35;13H[?25h[?25l[59;99H[K[59;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?1000l[?2004l"hq.c" 433L, 10703C written
[?2004l[?1l>[?25h[?1049l[23;0;0ts4698512@moss:~/CSSE2310/Assignments/a3$ make
gcc -g -Wall -pedantic -std=gnu99 -o hq hq.c -I/local/courses/csse2310/include -L/local/courses/csse2310/lib -lcsse2310a3
s4698512@moss:~/CSSE2310/Assignments/a3$ ./hq
> spawn cat
New Job ID [0] created
> spawn ls
New Job ID [1] created
> spawn ls
^Cs4698512@moss:~/CSSE2310/Assignments/a3$ vim hqc[K.c
[?1000h[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;59r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[59;1H"hq.c" 433L, 10703C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[33m120 [m[8Cprintf([38;5;130m"> "[m);[58C[100m [m
[33m121 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m122 [m[79C[100m [m
[33m123 [m[8Cfree(input);[59C[100m [m
[33m124 [m[8Cfree(tokens);[58C[100m [m
[33m125 [m    }[74C[100m [m
[33m126 [m[79C[100m [m
[33m127 [m    free(jobs);[64C[100m [m
[33m128 [m    [33mreturn[m [38;5;130m0[m;[66C[100m [m
[33m129 [m}[78C[100m [m
[33m130 [m[79C[100m [m
[33m131 [m[36m/* spawn()[m[69C[100m [m
[33m132 [m[36m * -------[m[69C[100m [m
[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m
[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m
[33m135 [m[36m * of the child process is unchanged[m[43C[100m [m
[33m136 [m[36m *[m[77C[100m [m
[33m137 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m138 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m139 [m[36m */[m[76C[100m [m
[33m140 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs) {[44C[100m [m
[33m141 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m142 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m143 [m    } [33melse[m {[67C[100m [m
[33m144 [m[8C[38;5;248m[104mjobid[m++;[63C[100m [m
[33m145 [m[79C[100m [m
[33m146 [m[8Cjobs = realloc(jobs, ([38;5;248m[104mjobid[m + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));[16C[100m [m
[33m147 [m[79C[100m [m
[93m148 [m[4m        strcpy(jobs[[m[4m[38;5;248m[104mjobid[m[4m].name, args[[m[4m[38;5;130m0[m[4m]);                                     [m[4m[100m [m[4m                                [m[30;1H[33m149 [m[79C[100m [m
[33m150 [m[8C[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].down) < [38;5;130m0[m) {[38C[100m [m
[33m151 [m[12Cperror([38;5;130m"Creating down pipe"[m);[38C[100m [m
[33m152 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m153 [m[8C}[70C[100m [m
[33m154 [m[79C[100m [m
[33m155 [m[8C[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].up) < [38;5;130m0[m) {[40C[100m [m
[33m156 [m[12Cperror([38;5;130m"Creating up pipe"[m);[40C[100m [m
[33m157 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m158 [m[8C}[70C[100m [m
[33m159 [m[79C[100m [m
[33m160 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, [38;5;248m[104mjobid[m);[28C[100m [m
[33m161 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m162 [m[79C[100m [m
[33m163 [m[8Cjobs[[38;5;248m[104mjobid[m].pid = fork();[46C[100m [m
[33m164 [m[8C[33mif[m (!jobs[[38;5;248m[104mjobid[m].pid) {[48C[100m [m
[33m165 [m[12C[36m// child[m[59C[100m [m
[33m166 [m[79C[100m [m
[33m167 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m168 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[WRITE]);[36C[100m [m
[33m169 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[READ]);[39C[100m [m
[33m170 [m[79C[100m [m
[33m171 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].down[READ], STDIN_FILENO);[24C[100m [m
[33m172 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m173 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].up[WRITE], STDOUT_FILENO);[24C[100m [m
[33m174 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m
[33m175 [m[79C[100m [m
[33m176 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m177 [m[12Cfflush([38;5;130mstderr[m);[52C[100m [m[59;99H148,9[9C31%[29;13H[?25h[?12$p[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m178 [m[79C[100m [m
[33m179 [m[12C[32mint[m status;[56C[100m [m
[33m180 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m[59;1H[K[59;99H148,9[9C32%[26;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m181 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m
[33m182 [m[16Cexit([38;5;130m99[m);[54C[100m [m
[33m183 [m[12C}[66C[100m [m[59;99H[K[59;99H148,9[9C33%[23;13H[?25h[?25l[33m148 [m        strcpy(jobs[[38;5;248m[104mjobid[m].name, args[[38;5;130m0[m]);                                     [100m [m[23;85H[K[31;1H[93m156 [m[4m            perror([m[4m[38;5;130m"Creating up pipe"[m[4m);                                        [m[4m[100m [m[4m                                [m[59;100H56,17[31;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m123 [m[8Cfree(input);[59C[100m [m
[33m124 [m[8Cfree(tokens);[58C[100m [m
[33m125 [m    }[74C[100m [m[59;99H[K[59;99H156,17[8C32%[34;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m120 [m[8Cprintf([38;5;130m"> "[m);[58C[100m [m
[33m121 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m122 [m[79C[100m [m[59;99H[K[59;99H156,17[8C31%[37;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m117 [m[12Cprintf([38;5;130m"Error: Invalid command[m[35m\n[m[38;5;130m"[m);[32C[100m [m
[33m118 [m[8C}[70C[100m [m
[33m119 [m[79C[100m [m[59;99H[K[59;99H156,17[8C30%[40;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m114 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"cleanup"[m)) {[28C[100m [m
[33m115 [m[12Ccleanup();[57C[100m [m
[33m116 [m[8C} [33melse[m {[63C[100m [m[59;99H[K[59;99H156,17[8C30%[43;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m111 [m[12Crcv(args, spcs);[51C[100m [m
[33m112 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"eof"[m)) {[32C[100m [m
[33m113 [m[12Ceof(args, spcs);[51C[100m [m[59;99H[K[59;99H156,17[8C29%[46;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m108 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"send"[m)) {[31C[100m [m
[33m109 [m[12Csend(args, spcs);[50C[100m [m
[33m110 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"rcv"[m)) {[32C[100m [m[59;99H[K[59;99H156,17[8C28%[49;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m105 [m[12Ccall_signal(args, spcs);[43C[100m [m
[33m106 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"sleep"[m)) {[30C[100m [m
[33m107 [m[12Chq_wait(args, spcs);[47C[100m [m[59;99H[K[59;99H156,17[8C27%[52;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m102 [m[12C[36m// Report[m[58C[100m [m
[33m103 [m[12Creport(args, spcs);[48C[100m [m
[33m104 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"signal"[m)) {[29C[100m [m[59;99H[K[59;99H156,17[8C26%[55;21H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m160 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, [38;5;248m[104mjobid[m);[28C[100m [m
[33m161 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m162 [m[79C[100m [m[59;99H[K[59;99H156,17[8C27%[52;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m102 [m[12C[36m// Report[m[58C[100m [m
[33m103 [m[12Creport(args, spcs);[48C[100m [m
[33m104 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"signal"[m)) {[29C[100m [m[59;99H[K[59;99H156,17[8C26%[55;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 99 [m[12C[36m// spawn[m[59C[100m [m
[33m100 [m[12Cspawn(args, spcs);[49C[100m [m
[33m101 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"report"[m)) {[29C[100m [m[59;99H[K[59;99H156,17[8C26%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 96 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m 97 [m[79C[100m [m
[33m 98 [m[8C[33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"spawn"[m)) {[37C[100m [m[55;45H[46m{[m


[93m153 [m[4m        [m[4m[46m}[m[4m                                                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H153,9[9C25%[58;13H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 93 [m[12Cargs[i - [38;5;130m1[m] = tokens[i];[43C[100m [m
[33m 94 [m[8C}[70C[100m [m
[33m 95 [m[8Cargs[spcs - [38;5;130m1[m] = [38;5;130m0[m;[52C[100m [m[58;1H[93m150 [m[4m        [m[4m[33mif[m[4m (pipe[m[4m[46m([m[4mjobs[[m[4m[38;5;248m[104mjobid[m[4m].down[m[4m[46m)[m[4m < [m[4m[38;5;130m0[m[4m) {                                      [m[4m[100m [m[4m                                [m[59;99H[K[59;99H150,17[8C24%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 90 [m[79C[100m [m
[33m 91 [m[8C[32mchar[m* args[spcs];[54C[100m [m
[33m 92 [m[8C[33mfor[m ([32mint[m i = [38;5;130m1[m; i < spcs; i++) {[39C[100m [m[58;1H[93m147 [m[4m                                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H147,8[9C23%[58;12H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 87 [m[12C[33mcontinue[m;[58C[100m [m
[33m 88 [m[8C}[70C[100m [m
[33m 89 [m[8Ctokens = split_space_not_quote(input, &spcs);[26C[100m [m[58;1H[93m144 [m[4m        [m[4m[38;5;248m[104mjobid[m[4m++;                                                               [m[4m[100m [m[4m                                [m[59;99H[K[59;99H144,16[8C22%[58;20H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 84 [m[8C[33mif[m (!strcmp(input, [38;5;130m""[m)) {[46C[100m [m
[33m 85 [m[12Cprintf([38;5;130m"> "[m);[54C[100m [m
[33m 86 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m[58;1H[93m141 [m[4m    [m[4m[33mif[m[4m [m[4m[46m([m[4mspcs < [m[4m[38;5;130m2[m[4m[46m)[m[4m {                                                            [m[4m[100m [m[4m                                [m[59;99H[K[59;99H141,17[8C22%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 81 [m    [33mwhile[m ((input = read_line([38;5;130mstdin[m)) != [38;5;130mNULL[m) {[31C[100m [m
[33m 82 [m[8C[32mint[m spcs = [38;5;130m0[m;[58C[100m [m
[33m 83 [m[79C[100m [m[58;1H[93m138 [m[4m[36m * spcs: number of original tokens[m[4m                                             [m[4m[100m [m[4m                                [m[59;99H[K[59;99H138,17[8C21%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 78 [m    printf([38;5;130m"> "[m);[62C[100m [m
[33m 79 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m 80 [m    [36m// prompt loop[m[61C[100m [m[58;1H[93m135 [m[4m[36m * of the child process is unchanged[m[4m                                           [m[4m[100m [m[4m                                [m[59;99H[K[59;99H135,17[8C20%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 75 [m[79C[100m [m
[33m 76 [m    signal([38;5;130mSIGINT[m, handle_signal);[45C[100m [m
[33m 77 [m    signal([38;5;130mSIGCHLD[m, handle_signal);[44C[100m [m[58;1H[93m132 [m[4m[36m * -------[m[4m                                                                     [m[4m[100m [m[4m                                [m[59;99H[K[59;99H132,10[8C19%[58;14H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 72 [m    [32mchar[m** tokens;[61C[100m [m
[33m 73 [m[79C[100m [m
[33m 74 [m    jobs = malloc([38;5;130m0[m * [33msizeof[m([32mstruct[m Job));[37C[100m [m[58;1H[93m129 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[59;99H[K[59;99H129,1[9C18%[58;5H[?25h[?25l[31;1H[93m102 [m[17C[7m[36m[48;5;242mport[m[7m[48;5;242m [32;5H            report(args, spcs); [33;5H        } [m[7m[33m[48;5;242melse[m[7m[48;5;242m [m[7m[33m[48;5;242mif[m[7m[48;5;242m (!strcmp(tokens[[m[7m[38;5;130m[48;5;242m0[m[7m[48;5;242m], [m[7m[38;5;130m[48;5;242m"signal"[m[7m[48;5;242m)) { [34;5H            call_signal(args, spcs); [35;5H        } [m[7m[33m[48;5;242melse[m[7m[48;5;242m [m[7m[33m[48;5;242mif[m[7m[48;5;242m (!strcmp(tokens[[m[7m[38;5;130m[48;5;242m0[m[7m[48;5;242m], [m[7m[38;5;130m[48;5;242m"sleep"[m[7m[48;5;242m)) { [36;5H            hq_wait(args, spcs); [37;5H        } [m[7m[33m[48;5;242melse[m[7m[48;5;242m [m[7m[33m[48;5;242mif[m[7m[48;5;242m (!strcmp(tokens[[m[7m[38;5;130m[48;5;242m0[m[7m[48;5;242m], [m[7m[38;5;130m[48;5;242m"send"[m[7m[48;5;242m)) { [38;5H            send(args, spcs); [39;5H        } [m[7m[33m[48;5;242melse[m[7m[48;5;242m [m[7m[33m[48;5;242mif[m[7m[48;5;242m (!strcmp(tokens[[m[7m[38;5;130m[48;5;242m0[m[7m[48;5;242m], [m[7m[38;5;130m[48;5;242m"rcv"[m[7m[48;5;242m)) { [40;5H            rcv(args, spcs); [41;5H        } [m[7m[33m[48;5;242melse[m[7m[48;5;242m [m[7m[33m[48;5;242mif[m[7m[48;5;242m (!strcmp(tokens[[m[7m[38;5;130m[48;5;242m0[m[7m[48;5;242m], [m[7m[38;5;130m[48;5;242m"eof"[m[7m[48;5;242m)) { [42;5H            eof(args, spcs); [43;5H        } [m[7m[33m[48;5;242melse[m[7m[48;5;242m [m[7m[33m[48;5;242mif[m[7m[48;5;242m (!strcmp(tokens[[m[7m[38;5;130m[48;5;242m0[m[7m[48;5;242m], [m[7m[38;5;130m[48;5;242m"cleanup"[m[7m[48;5;242m)) { [44;5H            cleanup(); [45;5H        } [m[7m[33m[48;5;242melse[m[7m[48;5;242m { [46;5H            printf([m[7m[38;5;130m[48;5;242m"Error: Invalid command[m[7m[35m[48;5;242m\n[m[7m[38;5;130m[48;5;242m"[m[7m[48;5;242m); [47;5H        } [48;5H [49;5H        printf([m[7m[38;5;130m[48;5;242m"> "[m[7m[48;5;242m); [50;5H        fflush([m[7m[38;5;130m[48;5;242mstdout[m[7m[48;5;242m); [51;5H         [52;5H        free(input); [53;5H        free(tokens); [54;5H    } [55;5H     [56;5H    free(jobs); [57;5H    [m[7m[33m[48;5;242mreturn[m[7m[48;5;242m [m[7m[38;5;130m[48;5;242m0[m[7m[48;5;242m; [m
[33m129 [m[7m[48;5;242m}[m                                                                              [100m [m[58;85H[K[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H102,17[8C18%[31;21H[?25h[?25l[?25h[?25l[10;1H[93m 81 [m[4m    [m[4m[33mwhile[m[4m ((input = read_line([m[4m[38;5;130mstdin[m[4m)) != [m[4m[38;5;130mNULL[m[4m) {                               [m[4m[100m [m[4m                                [m[31;1H[33m102 [m[17C[36mport[m [32;5H            report(args, spcs); [33;5H        } [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"signal"[m)) { [34;5H            call_signal(args, spcs); [35;5H        } [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"sleep"[m)) { [36;5H            hq_wait(args, spcs); [37;5H        } [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"send"[m)) { [38;5H            send(args, spcs); [39;5H        } [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"rcv"[m)) { [40;5H            rcv(args, spcs); [41;5H        } [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"eof"[m)) { [42;5H            eof(args, spcs); [43;5H        } [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"cleanup"[m)) { [44;5H            cleanup(); [45;5H        } [33melse[m { [46;5H            printf([38;5;130m"Error: Invalid command[m[35m\n[m[38;5;130m"[m); [47;5H        } [48;5H [49;5H        printf([38;5;130m"> "[m); [50;5H        fflush([38;5;130mstdout[m); [51;5H         [52;5H        free(input); [53;5H        free(tokens); [54;5H    } [55;5H     [56;5H    free(jobs); [57;5H    [33mreturn[m [38;5;130m0[m; [58;5H}[59;1H[K[59;99H81,18[9C18%[10;22H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m130 [m[79C[100m [m
[33m131 [m[36m/* spawn()[m[69C[100m [m
[33m132 [m[36m * -------[m[69C[100m [m[59;99H[K[59;99H81,18[9C19%[7;22H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m
[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m
[33m135 [m[36m * of the child process is unchanged[m[43C[100m [m[59;99H[K[59;99H81,18[9C20%[4;22H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m136 [m[36m *[m[77C[100m [m
[33m137 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m138 [m[36m * spcs: number of original tokens[m[45C[100m [m[59;99H[K[59;99H81,18[9C21%[1;22H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 84 [m[4m        [m[4m[33mif[m[4m (!strcmp(input, [m[4m[38;5;130m""[m[4m)) {                                              [m[4m[100m [m[4m                                [m[56;1H[33m139 [m[36m */[m[76C[100m [m
[33m140 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs) {[44C[100m [m
[33m141 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m[59;99H[K[59;99H84,18[9C22%[1;22H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 87 [m[4m            [m[4m[33mcontinue[m[4m;                                                          [m[4m[100m [m[4m                                [m[56;1H[33m142 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m143 [m    } [33melse[m {[67C[100m [m
[33m144 [m[8C[38;5;248m[104mjobid[m++;[63C[100m [m[59;99H[K[59;99H87,18[9C22%[1;22H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 90 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m145 [m[79C[100m [m
[33m146 [m[8Cjobs = realloc(jobs, ([38;5;248m[104mjobid[m + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));[16C[100m [m
[33m147 [m[79C[100m [m[59;99H[K[59;99H90,0-1[8C23%[1;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 87 [m[12C[33mcontinue[m;[58C[100m [m
[33m 88 [m[8C}[70C[100m [m
[33m 89 [m[8Ctokens = split_space_not_quote(input, &spcs);[26C[100m [m[59;99H[K[59;99H90,0-1[8C22%[4;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 84 [m[8C[33mif[m (!strcmp(input, [38;5;130m""[m)) {[46C[100m [m
[33m 85 [m[12Cprintf([38;5;130m"> "[m);[54C[100m [m
[33m 86 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m[59;99H[K[59;99H90,0-1[8C22%[7;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 81 [m    [33mwhile[m ((input = read_line([38;5;130mstdin[m)) != [38;5;130mNULL[m) {[31C[100m [m
[33m 82 [m[8C[32mint[m spcs = [38;5;130m0[m;[58C[100m [m
[33m 83 [m[79C[100m [m[59;99H[K[59;99H90,0-1[8C21%[10;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m139 [m[36m */[m[76C[100m [m
[33m140 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs) {[44C[100m [m
[33m141 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m[59;99H[K[59;99H90,0-1[8C22%[7;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m142 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m143 [m    } [33melse[m {[67C[100m [m
[33m144 [m[8C[38;5;248m[104mjobid[m++;[63C[100m [m[59;99H[K[59;99H90,0-1[8C22%[4;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 84 [m[8C[33mif[m (!strcmp(input, [38;5;130m""[m)) {[46C[100m [m
[33m 85 [m[12Cprintf([38;5;130m"> "[m);[54C[100m [m
[33m 86 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m[59;99H[K[59;99H90,0-1[8C22%[7;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 81 [m    [33mwhile[m ((input = read_line([38;5;130mstdin[m)) != [38;5;130mNULL[m) {[31C[100m [m
[33m 82 [m[8C[32mint[m spcs = [38;5;130m0[m;[58C[100m [m
[33m 83 [m[79C[100m [m[59;99H[K[59;99H90,0-1[8C21%[10;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 78 [m    printf([38;5;130m"> "[m);[62C[100m [m
[33m 79 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m 80 [m    [36m// prompt loop[m[61C[100m [m[59;99H[K[59;99H90,0-1[8C20%[13;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 75 [m[79C[100m [m
[33m 76 [m    signal([38;5;130mSIGINT[m, handle_signal);[45C[100m [m
[33m 77 [m    signal([38;5;130mSIGCHLD[m, handle_signal);[44C[100m [m[59;99H[K[59;99H90,0-1[8C19%[16;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m
[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m
[33m135 [m[36m * of the child process is unchanged[m[43C[100m [m[59;99H[K[59;99H90,0-1[8C20%[13;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m136 [m[36m *[m[77C[100m [m
[33m137 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m138 [m[36m * spcs: number of original tokens[m[45C[100m [m[59;99H[K[59;99H90,0-1[8C21%[10;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m139 [m[36m */[m[76C[100m [m
[33m140 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs) {[44C[100m [m
[33m141 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m[59;99H[K[59;99H90,0-1[8C22%[7;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m142 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m143 [m    } [33melse[m {[67C[100m [m
[33m144 [m[8C[38;5;248m[104mjobid[m++;[63C[100m [m[59;99H[K[59;99H90,0-1[8C22%[4;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m145 [m[79C[100m [m
[33m146 [m[8Cjobs = realloc(jobs, ([38;5;248m[104mjobid[m + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));[16C[100m [m
[33m147 [m[79C[100m [m[59;99H[K[59;99H90,0-1[8C23%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 93 [m[4m            args[i - [m[4m[38;5;130m1[m[4m] = tokens[i];                                           [m[4m[100m [m[4m                                [m[56;1H[33m148 [m[8Cstrcpy(jobs[[38;5;248m[104mjobid[m].name, args[[38;5;130m0[m]);[37C[100m [m
[33m149 [m[79C[100m [m
[33m150 [m[8C[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].down) < [38;5;130m0[m) {[38C[100m [m[59;99H[K[59;99H93,18[9C24%[1;22H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 96 [m[4m        fflush([m[4m[38;5;130mstdout[m[4m);                                                        [m[4m[100m [m[4m                                [m[56;1H[33m151 [m[12Cperror([38;5;130m"Creating down pipe"[m);[38C[100m [m
[33m152 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m153 [m[8C}[70C[100m [m[59;99H[K[59;99H96,18[9C25%[1;22H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 99 [m[4m            [m[4m[36m// spawn[m[4m                                                           [m[4m[100m [m[4m                                [m[56;1H[33m154 [m[79C[100m [m
[33m155 [m[8C[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].up) < [38;5;130m0[m) {[40C[100m [m
[33m156 [m[12Cperror([38;5;130m"Creating up pipe"[m);[40C[100m [m[59;99H[K[59;99H99,18[9C26%[1;22H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m102 [m[4m            [m[4m[36m// Report[m[4m                                                          [m[4m[100m [m[4m                                [m[56;1H[33m157 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m158 [m[8C}[70C[100m [m
[33m159 [m[79C[100m [m[59;99H[K[59;99H102,18[8C26%[1;22H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m105 [m[4m            call_signal(args, spcs);                                           [m[4m[100m [m[4m                                [m[56;1H[33m160 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, [38;5;248m[104mjobid[m);[28C[100m [m
[33m161 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m162 [m[79C[100m [m[59;99H[K[59;99H105,18[8C27%[1;22H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m108 [m[4m        } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (!strcmp(tokens[[m[4m[38;5;130m0[m[4m], [m[4m[38;5;130m"send"[m[4m)) {                               [m[4m[100m [m[4m                                [m[56;1H[33m163 [m[8Cjobs[[38;5;248m[104mjobid[m].pid = fork();[46C[100m [m
[33m164 [m[8C[33mif[m (!jobs[[38;5;248m[104mjobid[m].pid) {[48C[100m [m
[33m165 [m[12C[36m// child[m[59C[100m [m[59;99H[K[59;99H108,18[8C28%[1;22H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m111 [m[4m            rcv(args, spcs);                                                   [m[4m[100m [m[4m                                [m[56;1H[33m166 [m[79C[100m [m
[33m167 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m168 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[WRITE]);[36C[100m [m[59;99H[K[59;99H111,18[8C29%[1;22H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m114 [m[4m        } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (!strcmp(tokens[[m[4m[38;5;130m0[m[4m], [m[4m[38;5;130m"cleanup"[m[4m)) {                            [m[4m[100m [m[4m                                [m[56;1H[33m169 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[READ]);[39C[100m [m
[33m170 [m[79C[100m [m
[33m171 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].down[READ], STDIN_FILENO);[24C[100m [m[59;99H[K[59;99H114,18[8C30%[1;22H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m117 [m[4m            printf([m[4m[38;5;130m"Error: Invalid command[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                [m[4m[100m [m[4m                                [m[56;1H[33m172 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m173 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].up[WRITE], STDOUT_FILENO);[24C[100m [m
[33m174 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m[59;99H[K[59;99H117,18[8C30%[1;22H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m120 [m[4m        printf([m[4m[38;5;130m"> "[m[4m);                                                          [m[4m[100m [m[4m                                [m[56;1H[33m175 [m[79C[100m [m
[33m176 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m177 [m[12Cfflush([38;5;130mstderr[m);[52C[100m [m[59;99H[K[59;99H120,18[8C31%[1;22H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m123 [m[4m        free(input);                                                           [m[4m[100m [m[4m                                [m[56;1H[33m178 [m[79C[100m [m
[33m179 [m[12C[32mint[m status;[56C[100m [m
[33m180 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m[59;99H[K[59;99H123,18[8C32%[1;22H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m126 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m181 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m
[33m182 [m[16Cexit([38;5;130m99[m);[54C[100m [m
[33m183 [m[12C}[66C[100m [m[59;99H[K[59;99H126,4[9C33%[1;8H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m129 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[56;1H[33m184 [m[8C} [33melse[m {[63C[100m [m
[33m185 [m[12C[36m// parent[m[58C[100m [m
[33m186 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m[59;99H[K[59;99H129,1[9C34%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m132 [m[4m[36m * -------[m[4m                                                                     [m[4m[100m [m[4m                                [m[56;1H[33m187 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m
[33m188 [m[8C}[70C[100m [m
[33m189 [m    }[74C[100m [m[59;99H[K[59;99H132,10[8C34%[1;14H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m135 [m[4m[36m * of the child process is unchanged[m[4m                                           [m[4m[100m [m[4m                                [m[56;1H[33m190 [m}[78C[100m [m
[33m191 [m[79C[100m [m
[33m192 [m[36m/* report()[m[68C[100m [m[59;99H[K[59;99H135,18[8C35%[1;22H[?25h[?25l[33m135 [m[36m * of the child process is unchanged[m                                           [100m [m[1;85H[K[30;1H[93m164 [m[4m        [m[4m[33mif[m[4m (!jobs[[m[4m[38;5;248m[104mjobid[m[4m].pid) {                                                [m[4m[100m [m[4m                                [m[59;100H64,15[30;19H[?25h[?25l[33m164 [m        [33mif[m (!j[7m[48;5;242mobs[jobid].pid) { [m                                               [100m [m[30;85H[K[31;5H[7m[48;5;242m            [m[7m[36m[48;5;242m// child[m[7m[48;5;242m [32;5H [33;5H            fflush([m[7m[38;5;130m[48;5;242mstdout[m[7m[48;5;242m); [34;5H            close(jobs[jobid].down[WRITE]); [35;5H            close(jobs[jobid].up[READ]); [36;5H             [37;5H            dup2(jobs[jobid].down[READ], STDIN_FILENO); [38;5H            close(jobs[jobid].down[READ]); [39;5H            dup2(jobs[jobid].up[WRITE], STDOUT_FILENO); [40;5H            close(jobs[jobid].up[WRITE]); [41;5H             [42;5H            fflush([m[7m[38;5;130m[48;5;242mstdout[m[7m[48;5;242m); [43;5H            fflush([m[7m[38;5;130m[48;5;242mstderr[m[7m[48;5;242m); [44;5H [45;5H            [m[7m[32m[48;5;242mint[m[7m[48;5;242m status; [46;5H            status = execvp(args[[m[7m[38;5;130m[48;5;242m0[m[7m[48;5;242m], args); [47;5H            [m[7m[33m[48;5;242mif[m[7m[48;5;242m (status == -[m[7m[38;5;130m[48;5;242m1[m[7m[48;5;242m) { [m
[93m182 [m[7m[48;5;242m            [m[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H182,13[8C35%[48;17H[?25h[?25l[30;19Hobs[[38;5;248m[104mjobid[m].pid) { [31;5H            [36m// child[m [32;5H [33;5H            fflush([38;5;130mstdout[m); [34;5H            close(jobs[[38;5;248m[104mjobid[m].down[WRITE]); [35;5H            close(jobs[[38;5;248m[104mjobid[m].up[READ]); [36;5H             [37;5H            dup2(jobs[[38;5;248m[104mjobid[m].down[READ], STDIN_FILENO); [38;5H            close(jobs[[38;5;248m[104mjobid[m].down[READ]); [39;5H            dup2(jobs[[38;5;248m[104mjobid[m].up[WRITE], STDOUT_FILENO); [40;5H            close(jobs[[38;5;248m[104mjobid[m].up[WRITE]); [41;5H             [42;5H            fflush([38;5;130mstdout[m); [43;5H            fflush([38;5;130mstderr[m); [44;5H [45;5H            [32mint[m status; [46;5H            status = execvp(args[[38;5;130m0[m], args); [47;5H            [33mif[m (status == -[38;5;130m1[m) { 
[33m182 [m            

[93m184 [m[4m        } [m[4m[33melse[m[4m {                                                               [m[4m[100m [m[4m                                [m[59;1H[K[59;99H184,15[8C35%[50;19H[?25h[?25l[33m184 [m        } [33melse[m {                                                               [100m [m[50;85H[K[52;1H[93m186 [m[4m            close(jobs[[m[4m[38;5;248m[104mjobid[m[4m].down[READ]);                                     [m[4m[100m [m[4m                                [m[59;101H6,16[52;20H[?25h[?25l[33m186 [m            clo[7m[48;5;242mse(jobs[jobid].down[READ]); [m                                    [100m [m[52;85H[K[53;5H[7m[48;5;242m            close(jobs[jobid].up[WRITE]); [m
[93m188 [m[7m[48;5;242m        }[m[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H188,10[8C35%[54;14H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m132 [m[36m * -------[m[69C[100m [m
[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m
[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m[59;99H[K[59;99H188,10[8C34%[57;14H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m129 [m}[78C[100m [m
[33m130 [m[79C[100m [m
[33m131 [m[36m/* spawn()[m[69C[100m [m[58;1H[93m186 [m[16Ce(jobs[[38;5;248m[104mjobid[m].down[READ]); [59;99H[K[59;99H186,17[8C34%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m126 [m[79C[100m [m
[33m127 [m    free(jobs);[64C[100m [m
[33m128 [m    [33mreturn[m [38;5;130m0[m;[66C[100m [m[58;1H[93m183 [m[59;99H[K[59;99H183,14[8C33%[58;18H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m123 [m[8Cfree(input);[59C[100m [m
[33m124 [m[8Cfree(tokens);[58C[100m [m
[33m125 [m    }[74C[100m [m[58;1H[93m180 [m[17C[7m[48;5;242ms = execvp(args[[m[7m[38;5;130m[48;5;242m0[m[7m[48;5;242m], args); [m[59;99H[K[59;99H180,17[8C32%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m120 [m[8Cprintf([38;5;130m"> "[m);[58C[100m [m
[33m121 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m122 [m[79C[100m [m[58;1H[93m177 [m[17C[7m[48;5;242mh([m[7m[38;5;130m[48;5;242mstderr[m[7m[48;5;242m); [m[59;99H[K[59;99H177,17[8C31%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m117 [m[12Cprintf([38;5;130m"Error: Invalid command[m[35m\n[m[38;5;130m"[m);[32C[100m [m
[33m118 [m[8C}[70C[100m [m
[33m119 [m[79C[100m [m[58;1H[93m174 [m[17C[7m[48;5;242m(jobs[jobid].up[WRITE]); [m[59;99H[K[59;99H174,17[8C30%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m114 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"cleanup"[m)) {[28C[100m [m
[33m115 [m[12Ccleanup();[57C[100m [m
[33m116 [m[8C} [33melse[m {[63C[100m [m[58;1H[93m171 [m[16C[46m([m[7m[48;5;242mjobs[jobid].down[READ], STDIN_FILENO); [m[59;99H[K[59;99H171,17[8C30%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m111 [m[12Crcv(args, spcs);[51C[100m [m
[33m112 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"eof"[m)) {[32C[100m [m
[33m113 [m[12Ceof(args, spcs);[51C[100m [m[58;1H[93m168 [m[17C[7m[48;5;242m(jobs[jobid].down[WRITE]); [m[59;99H[K[59;99H168,17[8C29%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m108 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"send"[m)) {[31C[100m [m
[33m109 [m[12Csend(args, spcs);[50C[100m [m
[33m110 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"rcv"[m)) {[32C[100m [m[58;1H[93m165 [m[17C[7m[36m[48;5;242mild[m[7m[48;5;242m [m[59;99H[K[59;99H165,17[8C28%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m105 [m[12Ccall_signal(args, spcs);[43C[100m [m
[33m106 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"sleep"[m)) {[30C[100m [m
[33m107 [m[12Chq_wait(args, spcs);[47C[100m [m[58;1H[93m162 [m[59;99H[K[59;99H162,0-1[7C27%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m102 [m[12C[36m// Report[m[58C[100m [m
[33m103 [m[12Creport(args, spcs);[48C[100m [m
[33m104 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"signal"[m)) {[29C[100m [m[58;1H[93m159 [m[59;99H[K[59;99H159,0-1[7C26%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 99 [m[12C[36m// spawn[m[59C[100m [m
[33m100 [m[12Cspawn(args, spcs);[49C[100m [m
[33m101 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"report"[m)) {[29C[100m [m[58;1H[93m156 [m[17C[7m[48;5;242mr([m[7m[38;5;130m[48;5;242m"Creating up pipe"[m[7m[48;5;242m); [m[59;99H[K[59;99H156,17[8C26%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 96 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m 97 [m[79C[100m [m
[33m 98 [m[8C[33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"spawn"[m)) {[37C[100m [m[58;1H[93m153 [m[59;99H[K[59;99H153,10[8C25%[58;14H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 93 [m[12Cargs[i - [38;5;130m1[m] = tokens[i];[43C[100m [m
[33m 94 [m[8C}[70C[100m [m
[33m 95 [m[8Cargs[spcs - [38;5;130m1[m] = [38;5;130m0[m;[52C[100m [m[58;1H[93m150 [m[16C[46m([m[7m[48;5;242mjobs[jobid].down) < [m[7m[38;5;130m[48;5;242m0[m[7m[48;5;242m) { [m[59;99H[K[59;99H150,17[8C24%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 90 [m[79C[100m [m
[33m 91 [m[8C[32mchar[m* args[spcs];[54C[100m [m
[33m 92 [m[8C[33mfor[m ([32mint[m i = [38;5;130m1[m; i < spcs; i++) {[39C[100m [m[58;1H[93m147 [m[59;99H[K[59;99H147,9[9C23%[58;13H[?25h[?25l[31;1H[93m120 [m[4m        printf([m[4m[38;5;130m"> "[m[4m);                                                          [m[4m[100m [m[4m                                [m[58;1H[33m147 [m[59;1H[K[59;99H120,11[8C23%[31;15H[?25h[?25l[33m120 [m        pr[7m[48;5;242mintf([m[7m[38;5;130m[48;5;242m"> "[m[7m[48;5;242m); [m                                                         [100m [m[31;85H[K[32;5H[7m[48;5;242m        fflush([m[7m[38;5;130m[48;5;242mstdout[m[7m[48;5;242m); [33;5H         [34;5H        free(input); [m
[93m124 [m[7m[48;5;242m        free(to[m[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H124,16[8C23%[35;20H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 87 [m[12C[33mcontinue[m;[58C[100m [m
[33m 88 [m[8C}[70C[100m [m
[33m 89 [m[8Ctokens = split_space_not_quote(input, &spcs);[26C[100m [m[59;99H[K[59;99H124,16[8C22%[38;20H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 84 [m[8C[33mif[m (!strcmp(input, [38;5;130m""[m)) {[46C[100m [m
[33m 85 [m[12Cprintf([38;5;130m"> "[m);[54C[100m [m
[33m 86 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m[59;99H[K[59;99H124,16[8C22%[41;20H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 81 [m    [33mwhile[m ((input = read_line([38;5;130mstdin[m)) != [38;5;130mNULL[m) {[31C[100m [m
[33m 82 [m[8C[32mint[m spcs = [38;5;130m0[m;[58C[100m [m
[33m 83 [m[79C[100m [m[59;99H[K[59;99H124,16[8C21%[44;20H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 78 [m    printf([38;5;130m"> "[m);[62C[100m [m
[33m 79 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m 80 [m    [36m// prompt loop[m[61C[100m [m[59;99H[K[59;99H124,16[8C20%[47;20H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 75 [m[79C[100m [m
[33m 76 [m    signal([38;5;130mSIGINT[m, handle_signal);[45C[100m [m
[33m 77 [m    signal([38;5;130mSIGCHLD[m, handle_signal);[44C[100m [m[59;99H[K[59;99H124,16[8C19%[50;20H[?25h[?25l[7;1H[93m 81 [m[4m    [m[4m[33mwhile[m[4m ((input = read_line([m[4m[38;5;130mstdin[m[4m)) != [m[4m[38;5;130mNULL[m[4m) {                               [m[4m[100m [m[4m                                [m[46;15Hintf([38;5;130m"> "[m); [47;5H        fflush([38;5;130mstdout[m); [48;5H         [49;5H        free(input); 
[33m124 [m        free(to[59;1H[K[59;99H81,24[9C19%[7;28H[?25h[?25l[59;102H13[7;17H[?25h[?25l[7;5H    [33mwhile[m [46m([m([7m[48;5;242minput = read_line([m[7m[38;5;130m[48;5;242mstdin[m[7m[48;5;242m)) != [m[7m[38;5;130m[48;5;242mNULL[m[46m)[m {                               [100m [m[7;85H[K[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H81,46[9C19%[7;50H[?25h[?25l[7;5H[4m    [m[4m[33mwhile[m[4m [m[4m[46m([m[4m(input = read_line([m[4m[38;5;130mstdin[m[4m)) != [m[4m[38;5;130mNULL[m[4m[46m)[m[4m {                               [m[4m[100m [m[4m                                [m[59;1H[K[59;99H81,46[9C19%[7;50H[?25h[?25l[7;15H[4m([m[4m[46m([24C)[m[8C[4m)[m[59;102H12[7;16H[?25h[?25l[7;5H    [33mwhile[m [46m([m[7m[48;5;242m(input = read_line([m[7m[38;5;130m[48;5;242mstdin[m[7m[48;5;242m)) != [m[7m[38;5;130m[48;5;242mNULL[m[46m)[m {                               [100m [m[7;85H[K[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H81,46[9C19%[7;50H[?25h[?25l[7;5H[4m    [m[4m[33mwhile[m[4m [m[4m[46m([m[4m(input = read_line([m[4m[38;5;130mstdin[m[4m)) != [m[4m[38;5;130mNULL[m[4m[46m)[m[4m {                               [m[4m[100m [m[4m                                [m[59;1H[K[59;99H81,46[9C19%[7;50H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 72 [m    [32mchar[m** tokens;[61C[100m [m
[33m 73 [m[79C[100m [m
[33m 74 [m    jobs = malloc([38;5;130m0[m * [33msizeof[m([32mstruct[m Job));[37C[100m [m[59;99H[K[59;99H81,46[9C18%[10;50H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 69 [m[79C[100m [m
[33m 70 [m[32mint[m main([32mint[m argc, [32mchar[m* argv[]) {[45C[100m [m
[33m 71 [m    [32mchar[m* input;[63C[100m [m[59;99H[K[59;99H81,46[9C18%[13;50H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 66 [m[79C[100m [m
[33m 67 [m[79C[100m [m
[33m 68 [m[36m// Program[m[69C[100m [m[59;99H[K[59;99H81,46[9C17%[16;50H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 63 [m[79C[100m [m
[33m 64 [m[32mint[m [38;5;248m[104mjobid[m = -[38;5;130m1[m;[64C[100m [m
[33m 65 [m[32mstruct[m Job* jobs;[62C[100m [m[59;99H[K[59;99H81,46[9C16%[19;50H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 60 [m};[77C[100m [m
[33m 61 [m[79C[100m [m
[33m 62 [m[36m// Globals[m[69C[100m [m[59;99H[K[59;99H81,46[9C15%[22;50H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 57 [m    [32mint[m up[[38;5;130m2[m];[65C[100m [m
[33m 58 [m    [32mint[m status;[64C[100m [m
[33m 59 [m    [32mint[m finished;[62C[100m [m[59;99H[K[59;99H81,46[9C14%[25;50H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 54 [m    [32mint[m pid;[67C[100m [m
[33m 55 [m    [32mchar[m name[MAX_BUFFER_SIZE];[48C[100m [m
[33m 56 [m    [32mint[m down[[38;5;130m2[m];[63C[100m [m[59;99H[K[59;99H81,46[9C14%[28;50H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 51 [m[36m// Structs[m[69C[100m [m
[33m 52 [m[79C[100m [m
[33m 53 [m[32mstruct[m Job {[67C[100m [m[59;99H[K[59;99H81,46[9C13%[31;50H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 48 [m[79C[100m [m
[33m 49 [m[32mbool[m is_job([32mchar[m job[]);[55C[100m [m
[33m 50 [m[79C[100m [m[59;99H[K[59;99H81,46[9C12%[34;50H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m 45 [m[32mvoid[m handle_signal([32mint[m s);[53C[100m [m
[33m 46 [m[79C[100m [m
[33m 47 [m[32mbool[m is_number([32mchar[m number[]);[49C[100m [m[59;99H[K[59;99H81,46[9C11%[37;50H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m103 [m[12Creport(args, spcs);[48C[100m [m
[33m104 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"signal"[m)) {[29C[100m [m
[33m105 [m[12Ccall_signal(args, spcs);[43C[100m [m[59;99H[K[59;99H81,46[9C12%[34;50H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m106 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"sleep"[m)) {[30C[100m [m
[33m107 [m[12Chq_wait(args, spcs);[47C[100m [m
[33m108 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"send"[m)) {[31C[100m [m[59;99H[K[59;99H81,46[9C13%[31;50H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m109 [m[12Csend(args, spcs);[50C[100m [m
[33m110 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"rcv"[m)) {[32C[100m [m
[33m111 [m[12Crcv(args, spcs);[51C[100m [m[59;99H[K[59;99H81,46[9C14%[28;50H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m112 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"eof"[m)) {[32C[100m [m
[33m113 [m[12Ceof(args, spcs);[51C[100m [m
[33m114 [m[8C} [33melse[m [33mif[m (!strcmp(tokens[[38;5;130m0[m], [38;5;130m"cleanup"[m)) {[28C[100m [m[59;99H[K[59;99H81,46[9C14%[25;50H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m115 [m[12Ccleanup();[57C[100m [m
[33m116 [m[8C} [33melse[m {[63C[100m [m
[33m117 [m[12Cprintf([38;5;130m"Error: Invalid command[m[35m\n[m[38;5;130m"[m);[32C[100m [m[59;99H[K[59;99H81,46[9C15%[22;50H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m118 [m[8C}[70C[100m [m
[33m119 [m[79C[100m [m
[33m120 [m[8Cprintf([38;5;130m"> "[m);[58C[100m [m[59;99H[K[59;99H81,46[9C16%[19;50H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m121 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m122 [m[79C[100m [m
[33m123 [m[8Cfree(input);[59C[100m [m[59;99H[K[59;99H81,46[9C17%[16;50H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m124 [m[8Cfree(tokens);[58C[100m [m
[33m125 [m    }[74C[100m [m
[33m126 [m[79C[100m [m[59;99H[K[59;99H81,46[9C18%[13;50H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m127 [m    free(jobs);[64C[100m [m
[33m128 [m    [33mreturn[m [38;5;130m0[m;[66C[100m [m
[33m129 [m}[78C[100m [m[59;99H[K[59;99H81,46[9C18%[10;50H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m130 [m[79C[100m [m
[33m131 [m[36m/* spawn()[m[69C[100m [m
[33m132 [m[36m * -------[m[69C[100m [m[59;99H[K[59;99H81,46[9C19%[7;50H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m133 [m[36m * Runs specified program in a new process with optional arguments provided.[m   [100m [m
[33m134 [m[36m * Connects stdin and stdout of new process into pipes hq can access. Stderr [m  [100m [m
[33m135 [m[36m * of the child process is unchanged[m[43C[100m [m[59;99H[K[59;99H81,46[9C20%[4;50H[?25h[?25l[1;58r[1;1H[3M[1;59r[56;1H[33m136 [m[36m *[m[77C[100m [m
[33m137 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m138 [m[36m * spcs: number of original tokens[m[45C[100m [m[59;99H[K[59;99H81,46[9C21%[1;50H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 84 [m[4m        [m[4m[33mif[m[4m (!strcmp(input, [m[4m[38;5;130m""[m[4m)) [m[4m[46m{[m[4m                                              [m[4m[100m [m[4m                                [m[5;13H[46m}[m[56;1H[33m139 [m[36m */[m[76C[100m [m
[33m140 [m[32mvoid[m spawn([32mchar[m** args, [32mint[m spcs) {[44C[100m [m
[33m141 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m[59;99H[K[59;99H84,33[9C22%[1;37H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 87 [m[4m            [m[4m[33mcontinue[m[4m;                                                          [m[4m[100m [m[4m                                [m[2;13H}[56;1H[33m142 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m143 [m    } [33melse[m {[67C[100m [m
[33m144 [m[8C[38;5;248m[104mjobid[m++;[63C[100m [m[59;99H[K[59;99H87,21[9C22%[1;25H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 90 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m145 [m[79C[100m [m
[33m146 [m[8Cjobs = realloc(jobs, ([38;5;248m[104mjobid[m + [38;5;130m1[m) * [33msizeof[m([32mstruct[m Job));[16C[100m [m
[33m147 [m[79C[100m [m[59;99H[K[59;99H90,0-1[8C23%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 93 [m[4m            args[i - [m[4m[38;5;130m1[m[4m] = tokens[i];                                           [m[4m[100m [m[4m                                [m[56;1H[33m148 [m[8Cstrcpy(jobs[[38;5;248m[104mjobid[m].name, args[[38;5;130m0[m]);[37C[100m [m
[33m149 [m[79C[100m [m
[33m150 [m[8C[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].down) < [38;5;130m0[m) {[38C[100m [m[59;99H[K[59;99H93,36[9C24%[1;40H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 96 [m[4m        fflush([m[4m[38;5;130mstdout[m[4m);                                                        [m[4m[100m [m[4m                                [m[56;1H[33m151 [m[12Cperror([38;5;130m"Creating down pipe"[m);[38C[100m [m
[33m152 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m153 [m[8C}[70C[100m [m[59;99H[K[59;99H96,23[9C25%[1;27H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m 99 [m[4m            [m[4m[36m// spawn[m[4m                                                           [m[4m[100m [m[4m                                [m[56;1H[33m154 [m[79C[100m [m
[33m155 [m[8C[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].up) < [38;5;130m0[m) {[40C[100m [m
[33m156 [m[12Cperror([38;5;130m"Creating up pipe"[m);[40C[100m [m[59;99H[K[59;99H99,20[9C26%[1;24H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m102 [m[4m            [m[4m[36m// Report[m[4m                                                          [m[4m[100m [m[4m                                [m[56;1H[33m157 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m158 [m[8C}[70C[100m [m
[33m159 [m[79C[100m [m[59;99H[K[59;99H102,21[8C26%[1;25H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m105 [m[4m            call_signal(args, spcs);                                           [m[4m[100m [m[4m                                [m[56;1H[33m160 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, [38;5;248m[104mjobid[m);[28C[100m [m
[33m161 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m162 [m[79C[100m [m[59;99H[K[59;99H105,36[8C27%[1;40H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m108 [m[4m        } [m[4m[33melse[m[4m [m[4m[33mif[m[4m [m[4m[46m([m[4m!strcmp(tokens[[m[4m[38;5;130m0[m[4m], [m[4m[38;5;130m"send"[m[4m)[m[4m[46m)[m[4m {                               [m[4m[100m [m[4m                                [m[56;1H[33m163 [m[8Cjobs[[38;5;248m[104mjobid[m].pid = fork();[46C[100m [m
[33m164 [m[8C[33mif[m (!jobs[[38;5;248m[104mjobid[m].pid) {[48C[100m [m
[33m165 [m[12C[36m// child[m[59C[100m [m[59;99H[K[59;99H108,46[8C28%[1;50H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m111 [m[4m            rcv(args, spcs);                                                   [m[4m[100m [m[4m                                [m[56;1H[33m166 [m[79C[100m [m
[33m167 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m168 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[WRITE]);[36C[100m [m[59;99H[K[59;99H111,28[8C29%[1;32H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m114 [m[4m        } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (!strcmp(tokens[[m[4m[38;5;130m0[m[4m], [m[4m[38;5;130m"cleanup"[m[4m)) {                            [m[4m[100m [m[4m                                [m[56;1H[33m169 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[READ]);[39C[100m [m
[33m170 [m[79C[100m [m
[33m171 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].down[READ], STDIN_FILENO);[24C[100m [m[59;99H[K[59;99H114,46[8C30%[1;50H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m117 [m[4m            printf[m[4m[46m([m[4m[38;5;130m"Error: Invalid command[m[4m[35m\n[m[4m[38;5;130m"[m[4m[46m)[m[4m;                                [m[4m[100m [m[4m                                [m[56;1H[33m172 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m173 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].up[WRITE], STDOUT_FILENO);[24C[100m [m
[33m174 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m[59;99H[K[59;99H117,46[8C30%[1;50H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m120 [m[4m        printf([m[4m[38;5;130m"> "[m[4m);                                                          [m[4m[100m [m[4m                                [m[56;1H[33m175 [m[79C[100m [m
[33m176 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m177 [m[12Cfflush([38;5;130mstderr[m);[52C[100m [m[59;99H[K[59;99H120,21[8C31%[1;25H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m123 [m[4m        free(input);                                                           [m[4m[100m [m[4m                                [m[56;1H[33m178 [m[79C[100m [m
[33m179 [m[12C[32mint[m status;[56C[100m [m
[33m180 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m[59;99H[K[59;99H123,20[8C32%[1;24H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m126 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m181 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m
[33m182 [m[16Cexit([38;5;130m99[m);[54C[100m [m
[33m183 [m[12C}[66C[100m [m[59;99H[K[59;99H126,4[9C33%[1;8H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m129 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[56;1H[33m184 [m[8C} [33melse[m {[63C[100m [m
[33m185 [m[12C[36m// parent[m[58C[100m [m
[33m186 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m[59;99H[K[59;99H129,1[9C34%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m132 [m[4m[36m * -------[m[4m                                                                     [m[4m[100m [m[4m                                [m[56;1H[33m187 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m
[33m188 [m[8C}[70C[100m [m
[33m189 [m    }[74C[100m [m[59;99H[K[59;99H132,10[8C34%[1;14H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m135 [m[4m[36m * of the child process is unchanged[m[4m                                           [m[4m[100m [m[4m                                [m[56;1H[33m190 [m}[78C[100m [m
[33m191 [m[79C[100m [m
[33m192 [m[36m/* report()[m[68C[100m [m[59;99H[K[59;99H135,36[8C35%[1;40H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m138 [m[4m[36m * spcs: number of original tokens[m[4m                                             [m[4m[100m [m[4m                                [m[56;1H[33m193 [m[36m * --------[m[68C[100m [m
[33m194 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m
[33m195 [m[36m *[m[77C[100m [m[59;99H[K[59;99H138,34[8C36%[1;38H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m141 [m[4m    [m[4m[33mif[m[4m (spcs < [m[4m[38;5;130m2[m[4m) [m[4m[46m{[m[4m                                                            [m[4m[100m [m[4m                                [m[3;9H[46m}[m[56;1H[33m196 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m197 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m198 [m[36m */[m[76C[100m [m[59;99H[K[59;99H141,19[8C37%[1;23H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m144 [m[4m        [m[4m[38;5;248m[104mjobid[m[4m++;                                                               [m[4m[100m [m[4m                                [m[56;1H[33m199 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[43C[100m [m
[33m200 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m201 [m[79C[100m [m[59;99H[K[59;99H144,16[8C38%[1;20H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m147 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m202 [m    [36m// Header row[m[62C[100m [m
[33m203 [m    printf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[46C[100m [m
[33m204 [m[79C[100m [m[59;99H[K[59;99H147,8[9C38%[1;12H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m150 [m[4m        [m[4m[33mif[m[4m (pipe(jobs[[m[4m[38;5;248m[104mjobid[m[4m].down) < [m[4m[38;5;130m0[m[4m) [m[4m[46m{[m[4m                                      [m[4m[100m [m[4m                                [m[4;13H[46m}[m[56;1H[33m205 [m    [36m// Job status output dependent on arg present status[m[23C[100m [m
[33m206 [m[79C[100m [m
[33m207 [m    [36m// check args[m[62C[100m [m[59;99H[K[59;99H150,41[8C39%[1;45H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m153 [m[4m        }                                                                      [m[4m[100m [m[4m                                [m[56;1H[33m208 [m    [33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[37C[100m [m
[33m209 [m[8C[33mfor[m ([32mint[m i = [38;5;130m0[m; i < [38;5;248m[104mjobid[m; i++) {[38C[100m [m
[33m210 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[31C[100m [m[59;99H[K[59;99H153,9[9C40%[1;13H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m156 [m[4m            perror([m[4m[38;5;130m"Creating up pipe"[m[4m);                                        [m[4m[100m [m[4m                                [m[56;1H[33m211 [m[12C[33mif[m (!jobs[i].finished) {[43C[100m [m
[33m212 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m213 [m[12C} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[28C[100m [m[59;99H[K[59;99H156,39[8C41%[1;43H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m159 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m214 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[12C[100m [m
[33m215 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {[26C[100m [m
[33m216 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[11C[100m [m[59;99H[K[59;99H159,0-1[7C42%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m162 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m217 [m[12C} [33melse[m {[59C[100m [m
[33m218 [m[16Cprintf([38;5;130m"Error[m[35m\n[m[38;5;130m"[m);[45C[100m [m
[33m219 [m[12C}[66C[100m [m[59;99H[K[59;99H162,0-1[7C42%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m165 [m[4m            [m[4m[36m// child[m[4m                                                           [m[4m[100m [m[4m                                [m[56;1H[33m220 [m[8C}[70C[100m [m
[33m221 [m[79C[100m [m
[33m222 [m    } [33melse[m [33mif[m (spcs > [38;5;130m1[m) {      [36m// report on specific job[m[22C[100m [m[59;99H[K[59;99H165,20[8C43%[1;24H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m168 [m[4m            close(jobs[[m[4m[38;5;248m[104mjobid[m[4m].down[WRITE]);                                    [m[4m[100m [m[4m                                [m[56;1H[33m223 [m[8C[36m// check for job tokens[1][m[45C[100m [m
[33m224 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m225 [m[12C[32mint[m jobq = atoi(args[[38;5;130m0[m]);[42C[100m [m[59;99H[K[59;99H168,43[8C44%[1;47H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m171 [m[4m            dup2(jobs[[m[4m[38;5;248m[104mjobid[m[4m].down[READ], STDIN_FILENO);                        [m[4m[100m [m[4m                                [m[56;1H[33m226 [m[79C[100m [m
[33m227 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, jobq, jobs[jobq].name);[25C[100m [m
[33m228 [m[79C[100m [m[59;99H[K[59;99H171,46[8C45%[1;50H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m174 [m[4m            close(jobs[[m[4m[38;5;248m[104mjobid[m[4m].up[WRITE]);                                      [m[4m[100m [m[4m                                [m[56;1H[33m229 [m[12C[33mif[m (WIFEXITED(jobs[jobq].status)) {[32C[100m [m
[33m230 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WEXITSTATUS(jobs[jobq].status));[8C[100m [m
[33m231 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[jobq].status)) {[23C[100m [m[59;99H[K[59;99H174,41[8C46%[1;45H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m177 [m[4m            fflush([m[4m[38;5;130mstderr[m[4m);                                                    [m[4m[100m [m[4m                                [m[56;1H[33m232 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[jobq].status));[8C[100m [m
[33m233 [m[12C} [33melse[m {[59C[100m [m
[33m234 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m[59;99H[K[59;99H177,27[8C46%[1;31H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m180 [m[4m            status = execvp(args[[m[4m[38;5;130m0[m[4m], args);                                    [m[4m[100m [m[4m                                [m[56;1H[33m235 [m[12C}[66C[100m [m
[33m236 [m[8C} [33melse[m {[63C[100m [m
[33m237 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m[59;99H[K[59;99H180,43[8C47%[1;47H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m183 [m[4m            }                                                                  [m[4m[100m [m[4m                                [m[56;1H[33m238 [m[8C}[70C[100m [m
[33m239 [m    }[74C[100m [m
[33m240 [m}[78C[100m [m[59;99H[K[59;99H183,13[8C48%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m186 [m[4m            close(jobs[[m[4m[38;5;248m[104mjobid[m[4m].down[READ]);                                     [m[4m[100m [m[4m                                [m[56;1H[33m241 [m[79C[100m [m
[33m242 [m[36m/* call_signal()[m[63C[100m [m
[33m243 [m[36m * -------------[m[63C[100m [m[59;99H[K[59;99H186,42[8C49%[1;46H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m189 [m[4m    }                                                                          [m[4m[100m [m[4m                                [m[56;1H[33m244 [m[36m * Sends signal to child process specified[m[37C[100m [m
[33m245 [m[36m *[m[77C[100m [m
[33m246 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[59;99H[K[59;99H189,5[9C50%[1;9H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m192 [m[4m[36m/* report()[m[4m                                                                    [m[4m[100m [m[4m                                [m[56;1H[33m247 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m248 [m[36m */[m[76C[100m [m
[33m249 [m[32mvoid[m call_signal([32mchar[m** args, [32mint[m spcs) {[38C[100m [m[59;99H[K[59;99H192,11[8C50%[1;15H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m195 [m[4m[36m *[m[4m                                                                             [m[4m[100m [m[4m                                [m[56;1H[33m250 [m    [33mif[m (spcs < [38;5;130m3[m) {[60C[100m [m
[33m251 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m252 [m    } [33melse[m {[67C[100m [m[59;99H[K[59;99H195,2[9C51%[1;6H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m198 [m[4m[36m */[m[4m                                                                            [m[4m[100m [m[4m                                [m[56;1H[33m253 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m254 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m
[33m255 [m[12C[33mif[m (is_number(args[[38;5;130m1[m])){[43C[100m [m[59;99H[K[59;99H198,3[9C52%[1;7H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m201 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m256 [m[16C[32mint[m sgnl = atoi(args[[38;5;130m1[m]);[38C[100m [m
[33m257 [m[16C[33mif[m (sgnl >= [38;5;130m1[m && sgnl <= [38;5;130m31[m) {[33C[100m [m
[33m258 [m[20C[32mint[m pid = jobs[job].pid;[35C[100m [m[59;99H[K[59;99H201,0-1[7C53%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m204 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m259 [m[20Ckill(pid, sgnl);[43C[100m [m
[33m260 [m[16C} [33melse[m {[55C[100m [m
[33m261 [m[20Cprintf([38;5;130m"Error: Invalid signal[m[35m\n[m[38;5;130m"[m);[25C[100m [m[59;99H[K[59;99H204,0-1[7C54%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m207 [m[4m    [m[4m[36m// check args[m[4m                                                              [m[4m[100m [m[4m                                [m[56;1H[33m262 [m[16C}[62C[100m [m
[33m263 [m[12C} [33melse[m {[59C[100m [m
[33m264 [m[16Cprintf([38;5;130m"Error: Invalid signal[m[35m\n[m[38;5;130m"[m);[29C[100m [m[59;99H[K[59;99H207,17[8C54%[1;21H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m210 [m[4m            printf([m[4m[38;5;130m"[[m[4m[35m%d[m[4m[38;5;130m] [m[4m[35m%s[m[4m[38;5;130m:"[m[4m, i, jobs[i].name);                               [m[4m[100m [m[4m                                [m[56;1H[33m265 [m[12C}[66C[100m [m
[33m266 [m[8C} [33melse[m {[63C[100m [m
[33m267 [m[12Cprintf([38;5;130m"Error: invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m[59;99H[K[59;99H210,46[8C55%[1;50H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m213 [m[4m            } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (WIFEXITED(jobs[i].status)) {                            [m[4m[100m [m[4m                                [m[56;1H[33m268 [m[8C}[70C[100m [m
[33m269 [m    }[74C[100m [m
[33m270 [m}[78C[100m [m[59;99H[K[59;99H213,46[8C56%[1;50H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m216 [m[4m                printf([m[4m[38;5;130m"signalled([m[4m[35m%d[m[4m[38;5;130m)[m[4m[35m\n[m[4m[38;5;130m"[m[4m, WTERMSIG(jobs[i].status));           [m[4m[100m [m[4m                                [m[56;1H[33m271 [m[79C[100m [m
[33m272 [m[36m/* hq_wait()[m[67C[100m [m
[33m273 [m[36m * ---------[m[67C[100m [m[59;99H[K[59;99H216,46[8C57%[1;50H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m219 [m[4m            }                                                                  [m[4m[100m [m[4m                                [m[56;1H[33m274 [m[36m * Causes hq to wait for specified seconds[m[37C[100m [m
[33m275 [m[36m *[m[77C[100m [m
[33m276 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m[59;99H[K[59;99H219,13[8C58%[1;17H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m222 [m[4m    } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (spcs > [m[4m[38;5;130m1[m[4m) {      [m[4m[36m// report on specific job[m[4m                      [m[4m[100m [m[4m                                [m[56;1H[33m277 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m278 [m[36m */[m[76C[100m [m
[33m279 [m[32mvoid[m hq_wait([32mchar[m** args, [32mint[m spcs) {[42C[100m [m[59;99H[K[59;99H222,46[8C58%[1;50H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m225 [m[4m            [m[4m[32mint[m[4m jobq = atoi(args[[m[4m[38;5;130m0[m[4m]);                                          [m[4m[100m [m[4m                                [m[56;1H[33m280 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m
[33m281 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m282 [m    } [33melse[m {[67C[100m [m[59;99H[K[59;99H225,37[8C59%[1;41H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m228 [m[4m                                                                               [m[4m[100m [m[4m                                [m[56;1H[33m283 [m[8C[33mif[m (strcmp(args[[38;5;130m0[m], [38;5;130m""[m) && is_number(args[[38;5;130m0[m])) {[23C[100m [m
[33m284 [m[12Csleep(atoi(args[[38;5;130m0[m]) * [38;5;130m1000000[m);[36C[100m [m
[33m285 [m[8C} [33melse[m {[63C[100m [m[59;99H[K[59;99H228,0-1[7C60%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m231 [m[4m            } [m[4m[33melse[m[4m [m[4m[33mif[m[4m (WIFSIGNALED(jobs[jobq].status)) {                       [m[4m[100m [m[4m                                [m[56;1H[33m286 [m[12Cprintf([38;5;130m"Error: Invalid sleep time[m[35m\n[m[38;5;130m"[m);[29C[100m [m
[33m287 [m[8C}[70C[100m [m
[33m288 [m    }[74C[100m [m[59;99H[K[59;99H231,46[8C61%[1;50H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m234 [m[4m                printf([m[4m[38;5;130m"running[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                           [m[4m[100m [m[4m                                [m[56;1H[33m289 [m}[78C[100m [m
[33m290 [m[79C[100m [m
[33m291 [m[36m/* send()[m[70C[100m [m[59;99H[K[59;99H234,36[8C62%[1;40H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m237 [m[4m            printf([m[4m[38;5;130m"Error: Invalid job[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                                    [m[4m[100m [m[4m                                [m[56;1H[33m292 [m[36m * ------[m[70C[100m [m
[33m293 [m[36m * Sends text down the pipe to specified job[m[35C[100m [m
[33m294 [m[36m *[m[77C[100m [m[59;99H[K[59;99H237,43[8C62%[1;47H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m240 [m[4m}                                                                              [m[4m[100m [m[4m                                [m[56;1H[33m295 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m296 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m297 [m[36m */[m[76C[100m [m[59;99H[K[59;99H240,1[9C63%[1;5H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m243 [m[4m[36m * -------------[m[4m                                                               [m[4m[100m [m[4m                                [m[56;1H[33m298 [m[32mvoid[m send([32mchar[m** args, [32mint[m spcs) {[45C[100m [m
[33m299 [m    [33mif[m (spcs < [38;5;130m3[m) {[60C[100m [m
[33m300 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m[59;99H[K[59;99H243,16[8C64%[1;20H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m246 [m[4m[36m * args: arguments provided in command line without first command[m[4m              [m[4m[100m [m[4m                                [m[56;1H[33m301 [m    } [33melse[m {[67C[100m [m
[33m302 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m303 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m[59;99H[K[59;99H246,46[8C65%[1;50H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m249 [m[4m[32mvoid[m[4m call_signal([m[4m[32mchar[m[4m** args, [m[4m[32mint[m[4m spcs) [m[4m[46m{[m[4m                                      [m[4m[100m [m[4m                                [m[22;5H[46m}[m[56;1H[33m304 [m[12C[32mFILE[m* writef = fdopen(jobs[job].down[WRITE], [38;5;130m"w"[m);[17C[100m [m
[33m305 [m[12Cfprintf(writef, [38;5;130m"[m[35m%s\n[m[38;5;130m"[m, args[[38;5;130m1[m]);[34C[100m [m
[33m306 [m[8C} [33melse[m {[63C[100m [m[59;99H[K[59;99H249,41[8C66%[1;45H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m252 [m[4m    } [m[4m[33melse[m[4m [m[4m[46m{[m[4m                                                                   [m[4m[100m [m[4m                                [m[18;9H[46m}[m[19;5H}[56;1H[33m307 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m308 [m[8C}[70C[100m [m
[33m309 [m    }[74C[100m [m[59;99H[K[59;99H252,12[8C66%[1;16H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m255 [m[4m            [m[4m[33mif[m[4m (is_number(args[[m[4m[38;5;130m1[m[4m]))[m[4m[46m{[m[4m                                           [m[4m[100m [m[4m                                [m[9;17H[46m}[m[15;9H}[56;1H[33m310 [m}[78C[100m [m
[33m311 [m[79C[100m [m
[33m312 [m[36m/* rcv()[m[71C[100m [m[59;99H[K[59;99H255,36[8C67%[1;40H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m258 [m[4m                    [m[4m[32mint[m[4m pid = jobs[job].pid;                                   [m[4m[100m [m[4m                                [m[6;17H}[56;1H[33m313 [m[36m * -----[m[71C[100m [m
[33m314 [m[36m * Receives data through the pipe from the specified child process.[m[12C[100m [m
[33m315 [m[36m * Prints this to stdout in the parent, hq.[m[36C[100m [m[59;99H[K[59;99H258,44[8C68%[1;48H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m261 [m[4m                    printf([m[4m[38;5;130m"Error: Invalid signal[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                         [m[4m[100m [m[4m                                [m[56;1H[33m316 [m[36m *[m[77C[100m [m
[33m317 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m318 [m[36m * spcs: number of original tokens[m[45C[100m [m[59;99H[K[59;99H261,46[8C69%[1;50H[?25h[?25l[1;58r[1;1H[3M[1;59r[1;1H[93m264 [m[4m                printf([m[4m[38;5;130m"Error: Invalid signal[m[4m[35m\n[m[4m[38;5;130m"[m[4m);                             [m[4m[100m [m[4m                                [m[56;1H[33m319 [m[36m */[m[76C[100m [m
[33m320 [m[32mvoid[m rcv([32mchar[m** args, [32mint[m spcs) {[46C[100m [m
[33m321 [m    [33mif[m (spcs < [38;5;130m2[m) {[60C[100m [m[59;99H[K[59;99H264,46[8C70%[1;50H[?25h[?25l[33m264 [m                printf([38;5;130m"Error: Invalid signal[m[35m\n[m[38;5;130m"[m);                             [100m [m[1;85H[K[21;1H[93m284 [m[4m            sleep(atoi(args[[m[4m[38;5;130m0[m[4m]) * [m[4m[38;5;130m1000000[m[4m);                                    [m[4m[100m [m[4m                                [m[59;100H84,14[21;18H[?25h[?25l[21;5H            s[7m[48;5;242mleep(atoi(args[[m[7m[38;5;130m[48;5;242m0[m[7m[48;5;242m]) * [m[7m[38;5;130m[48;5;242m1000000[m[7m[48;5;242m);[m                                    [100m [m[21;85H[K[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H284,44[8C70%[21;48H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m261 [m[20Cprintf([38;5;130m"Error: Invalid signal[m[35m\n[m[38;5;130m"[m);[25C[100m [m
[33m262 [m[16C}[62C[100m [m
[33m263 [m[12C} [33melse[m {[59C[100m [m[59;99H[K[59;99H284,44[8C69%[24;48H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m258 [m[20C[32mint[m pid = jobs[job].pid;[35C[100m [m
[33m259 [m[20Ckill(pid, sgnl);[43C[100m [m
[33m260 [m[16C} [33melse[m {[55C[100m [m[59;99H[K[59;99H284,44[8C68%[27;48H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m255 [m[12C[33mif[m (is_number(args[[38;5;130m1[m])){[43C[100m [m
[33m256 [m[16C[32mint[m sgnl = atoi(args[[38;5;130m1[m]);[38C[100m [m
[33m257 [m[16C[33mif[m (sgnl >= [38;5;130m1[m && sgnl <= [38;5;130m31[m) {[33C[100m [m[59;99H[K[59;99H284,44[8C67%[30;48H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m252 [m    } [33melse[m {[67C[100m [m
[33m253 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m
[33m254 [m[12C[32mint[m job = atoi(args[[38;5;130m0[m]);[43C[100m [m[59;99H[K[59;99H284,44[8C66%[33;48H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m249 [m[32mvoid[m call_signal([32mchar[m** args, [32mint[m spcs) {[38C[100m [m
[33m250 [m    [33mif[m (spcs < [38;5;130m3[m) {[60C[100m [m
[33m251 [m[8Cprintf([38;5;130m"Error: Insufficient arguments[m[35m\n[m[38;5;130m"[m);[29C[100m [m[59;99H[K[59;99H284,44[8C66%[36;48H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m246 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m247 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m248 [m[36m */[m[76C[100m [m[59;99H[K[59;99H284,44[8C65%[39;48H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m243 [m[36m * -------------[m[63C[100m [m
[33m244 [m[36m * Sends signal to child process specified[m[37C[100m [m
[33m245 [m[36m *[m[77C[100m [m[59;99H[K[59;99H284,44[8C64%[42;48H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m240 [m}[78C[100m [m
[33m241 [m[79C[100m [m
[33m242 [m[36m/* call_signal()[m[63C[100m [m[59;99H[K[59;99H284,44[8C63%[45;48H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m237 [m[12Cprintf([38;5;130m"Error: Invalid job[m[35m\n[m[38;5;130m"[m);[36C[100m [m
[33m238 [m[8C}[70C[100m [m
[33m239 [m    }[74C[100m [m[59;99H[K[59;99H284,44[8C62%[48;48H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m234 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m235 [m[12C}[66C[100m [m
[33m236 [m[8C} [33melse[m {[63C[100m [m[59;99H[K[59;99H284,44[8C62%[51;48H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m231 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[jobq].status)) {[23C[100m [m
[33m232 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[jobq].status));[8C[100m [m
[33m233 [m[12C} [33melse[m {[59C[100m [m[59;99H[K[59;99H284,44[8C61%[54;48H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m228 [m[79C[100m [m
[33m229 [m[12C[33mif[m (WIFEXITED(jobs[jobq].status)) {[32C[100m [m
[33m230 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WEXITSTATUS(jobs[jobq].status));[8C[100m [m[59;99H[K[59;99H284,44[8C60%[57;48H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m225 [m[12C[32mint[m jobq = atoi(args[[38;5;130m0[m]);[42C[100m [m
[33m226 [m[79C[100m [m
[33m227 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, jobq, jobs[jobq].name);[25C[100m [m[58;1H[93m282 [m[59;99H[K[59;99H282,13[8C59%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m222 [m    } [33melse[m [33mif[m (spcs > [38;5;130m1[m) {      [36m// report on specific job[m[22C[100m [m
[33m223 [m[8C[36m// check for job tokens[1][m[45C[100m [m
[33m224 [m[8C[33mif[m (is_job(args[[38;5;130m0[m])) {[49C[100m [m[58;1H[93m279 [m[59;99H[K[59;99H279,38[8C58%[58;42H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m219 [m[12C}[66C[100m [m
[33m220 [m[8C}[70C[100m [m
[33m221 [m[79C[100m [m[58;1H[93m276 [m[44C[7m[36m[48;5;242mwithout first command[m[7m[48;5;242m [m[59;99H[K[59;99H276,44[8C58%[58;48H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m216 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[11C[100m [m
[33m217 [m[12C} [33melse[m {[59C[100m [m
[33m218 [m[16Cprintf([38;5;130m"Error[m[35m\n[m[38;5;130m"[m);[45C[100m [m[58;1H[93m273 [m[59;99H[K[59;99H273,13[8C57%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m213 [m[12C} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[28C[100m [m
[33m214 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[12C[100m [m
[33m215 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {[26C[100m [m[58;1H[93m270 [m[59;99H[K[59;99H270,2[9C56%[58;6H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m210 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[31C[100m [m
[33m211 [m[12C[33mif[m (!jobs[i].finished) {[43C[100m [m
[33m212 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m[58;1H[93m267 [m[59;99H[K[59;99H267,44[8C55%[58;48H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m207 [m    [36m// check args[m[62C[100m [m
[33m208 [m    [33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[37C[100m [m
[33m209 [m[8C[33mfor[m ([32mint[m i = [38;5;130m0[m; i < [38;5;248m[104mjobid[m; i++) {[38C[100m [m[58;1H[93m264 [m[44C[7m[38;5;130m[48;5;242ml[m[7m[35m[48;5;242m\n[m[7m[38;5;130m[48;5;242m"[m[7m[48;5;242m); [m[59;99H[K[59;99H264,44[8C54%[58;48H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m204 [m[79C[100m [m
[33m205 [m    [36m// Job status output dependent on arg present status[m[23C[100m [m
[33m206 [m[79C[100m [m[58;1H[93m261 [m[44C[7m[38;5;130m[48;5;242mignal[m[7m[35m[48;5;242m\n[m[7m[38;5;130m[48;5;242m"[m[7m[48;5;242m); [m[59;99H[K[59;99H261,44[8C54%[58;48H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m201 [m[79C[100m [m
[33m202 [m    [36m// Header row[m[62C[100m [m
[33m203 [m    printf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[46C[100m [m[58;1H[93m258 [m[44C[7m[48;5;242m [m[59;99H[K[59;99H258,44[8C53%[58;48H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m198 [m[36m */[m[76C[100m [m
[33m199 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[43C[100m [m
[33m200 [m    fflush([38;5;130mstdout[m);[60C[100m [m[58;1H[93m255 [m[59;99H[K[59;99H255,37[8C52%[58;41H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m195 [m[36m *[m[77C[100m [m
[33m196 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m197 [m[36m * spcs: number of original tokens[m[45C[100m [m[58;1H[93m252 [m[59;99H[K[59;99H252,13[8C51%[58;17H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m192 [m[36m/* report()[m[68C[100m [m
[33m193 [m[36m * --------[m[68C[100m [m
[33m194 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m[58;1H[93m249 [m[59;99H[K[59;99H249,42[8C50%[58;46H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m189 [m    }[74C[100m [m
[33m190 [m}[78C[100m [m
[33m191 [m[79C[100m [m[58;1H[93m246 [m[44C[7m[36m[48;5;242mwithout first command[m[7m[48;5;242m [m[59;99H[K[59;99H246,44[8C50%[58;48H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m186 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m187 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m
[33m188 [m[8C}[70C[100m [m[58;1H[93m243 [m[59;99H[K[59;99H243,17[8C49%[58;21H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m183 [m[12C}[66C[100m [m
[33m184 [m[8C} [33melse[m {[63C[100m [m
[33m185 [m[12C[36m// parent[m[58C[100m [m[58;1H[93m240 [m[59;99H[K[59;99H240,2[9C48%[58;6H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m180 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m
[33m181 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m
[33m182 [m[16Cexit([38;5;130m99[m);[54C[100m [m[58;1H[93m237 [m[59;99H[K[59;99H237,44[8C47%[58;48H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m177 [m[12Cfflush([38;5;130mstderr[m);[52C[100m [m
[33m178 [m[79C[100m [m
[33m179 [m[12C[32mint[m status;[56C[100m [m[58;1H[93m234 [m[59;99H[K[59;99H234,37[8C46%[58;41H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m174 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m
[33m175 [m[79C[100m [m
[33m176 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m[58;1H[93m231 [m[44C[7m[48;5;242m].status)) { [m[59;99H[K[59;99H231,44[8C46%[58;48H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m171 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].down[READ], STDIN_FILENO);[24C[100m [m
[33m172 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m173 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].up[WRITE], STDOUT_FILENO);[24C[100m [m[58;1H[93m228 [m[59;99H[K[59;99H228,0-1[7C45%[58;5H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m168 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[WRITE]);[36C[100m [m
[33m169 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[READ]);[39C[100m [m
[33m170 [m[79C[100m [m[58;1H[93m225 [m[59;99H[K[59;99H225,38[8C44%[58;42H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m165 [m[12C[36m// child[m[59C[100m [m
[33m166 [m[79C[100m [m
[33m167 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m[58;1H[93m222 [m[44C[7m[36m[48;5;242m specific job[m[7m[48;5;242m [m[59;99H[K[59;99H222,44[8C43%[58;48H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m162 [m[79C[100m [m
[33m163 [m[8Cjobs[[38;5;248m[104mjobid[m].pid = fork();[46C[100m [m
[33m164 [m[8C[33mif[m (!jobs[[38;5;248m[104mjobid[m].pid) {[48C[100m [m[58;1H[93m219 [m[59;99H[K[59;99H219,14[8C42%[58;18H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m159 [m[79C[100m [m
[33m160 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, [38;5;248m[104mjobid[m);[28C[100m [m
[33m161 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m[58;1H[93m216 [m[44C[7m[48;5;242mERMSIG(jobs[i].status)); [m[59;99H[K[59;99H216,44[8C42%[58;48H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m156 [m[12Cperror([38;5;130m"Creating up pipe"[m);[40C[100m [m
[33m157 [m[12Cexit([38;5;130m1[m);[59C[100m [m
[33m158 [m[8C}[70C[100m [m[58;1H[93m213 [m[44C[7m[48;5;242mtus)) { [m[59;99H[K[59;99H213,44[8C41%[58;48H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m153 [m[8C}[70C[100m [m
[33m154 [m[79C[100m [m
[33m155 [m[8C[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].up) < [38;5;130m0[m) {[40C[100m [m[58;1H[93m210 [m[44C[7m[48;5;242mme); [m[59;99H[K[59;99H210,44[8C40%[58;48H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m150 [m[8C[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].down) < [38;5;130m0[m) {[38C[100m [m
[33m151 [m[12Cperror([38;5;130m"Creating down pipe"[m);[38C[100m [m
[33m152 [m[12Cexit([38;5;130m1[m);[59C[100m [m[58;1H[93m207 [m[59;99H[K[59;99H207,18[8C39%[58;22H[?25h[?25l[38;1H[93m187 [m[4m            close(jobs[[m[4m[38;5;248m[104mjobid[m[4m].up[WRITE]);                                      [m[4m[100m [m[4m                                [m[58;1H[33m207 [m[59;1H[K[59;99H187,41[8C39%[38;45H[?25h[?25l[59;1H[38;5;130m-- INSERT --[m[59;99H[K[59;99H187,41[8C39%[38;45H[?25h[?25l[59;104H2[38;46H[?25h[?25l[33m187 [m            close(jobs[[38;5;248m[104mjobid[m].up[WRITE]);                                      [100m [m[38;85H[K[39;1H[93m188 [m[4m                                                                               [m[4m[100m [m[4m                                [m[40;9H    }[41;5H    }[42;5H}[43;5H           [44;5H[36m/* report()[45;8H--------[m                                                                   [46;7H[36m Produces an outline to stdout of current child processes and their statuses[m[47;7H                                                               [48;8H[36margs: arguments provided in command line without first command[49;7H spcs: number of original tokens[50;5H */[m                                 [51;5H[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[52;9Hfflush([38;5;130mstdout[m);[53;9H             [54;9H[36m// Header row[m                [55;9Hprintf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[56;9H                                                    [57;9H[36m// Job status output dependent on arg present status[m[58;9H             [59;101H8,13[39;17H[?25h[?25l[33m188 [m                                                                               [100m [m[39;85H[K[40;1H[93m189 [m[4m                                                                               [m[4m[100m [m[4m                                [m[41;9H    }[42;5H    }[43;5H}[44;5H           [45;5H[36m/* report()[46;8H--------[m                                                                   [47;7H[36m Produces an outline to stdout of current child processes and their statuses[m[48;7H                                                               [49;8H[36margs: arguments provided in command line without first command[50;7H spcs: number of original tokens[51;5H */[m                                 [52;5H[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[53;9Hfflush([38;5;130mstdout[m);[54;9H             [55;9H[36m// Header row[m                [56;9Hprintf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[57;9H                                                    [58;9H[36m// Job status output dependent on arg present status[m[59;101H9[40;17H[?25h[?25l[4ms[m[59;104H4[40;18H[?25h[?25l[4ml[m[59;104H5[40;19H[?25h[?25l[4me[m[59;104H6[40;20H[?25h[?25l[4me[m[59;104H7[40;21H[?25h[?25l[4mp[m[59;104H8[40;22H[?25h[?25l[4m([m[59;104H9[40;23H[?25h[?25l[4m[38;5;130m4[m[59;103H20[40;24H[?25h[?25l[59;104H1[40;25H[?25h[?25l[4m*[m[59;104H2[40;26H[?25h[?25l[59;104H3[40;27H[?25h[?25l[4m[38;5;130m1[m[59;104H4[40;28H[?25h[?25l[4m[38;5;130m0[m[59;104H5[40;29H[?25h[?25l[4m[38;5;130m0[m[59;104H6[40;30H[?25h[?25l[4m[38;5;130m0[m[59;104H7[40;31H[?25h[?25l[4m[38;5;130m0[m[59;104H8[40;32H[?25h[?25l[4m[38;5;130m0[m[59;104H9[40;33H[?25h[?25l[4m[38;5;130m0[m[59;103H30[40;34H[?25h[?25l[4m [m[59;103H29[40;33H[?25h[?25l[4m [m[59;104H8[40;32H[?25h[?25l[4m [m[59;104H7[40;31H[?25h[?25l[4m [m[59;104H6[40;30H[?25h[?25l[4m [m[59;104H5[40;29H[?25h[?25l[4m[38;5;130m0[m[59;104H6[40;30H[?25h[?25l[4m[38;5;130m0[m[59;104H7[40;31H[?25h[?25l[4m[38;5;130m0[m[59;104H8[40;32H[?25h[?25l[4m[38;5;130m0[m[59;104H9[40;33H[?25h[?25l[4m[38;5;130m0[m[59;103H30[40;34H[?25h[?25l[4m)[m[59;103H18[40;22H[?25h[59;1H[K[40;34H[?25l[40;22H[4m[46m([11C)[m[59;99H189,30[8C39%[40;34H[?25h[?25l[59;99H[K[59;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?1000l[?2004l"hq.c" 435L, 10735C written
[?2004l[?1l>[?25h[?1049l[23;0;0ts4698512@moss:~/CSSE2310/Assignments/a3$ make
gcc -g -Wall -pedantic -std=gnu99 -o hq hq.c -I/local/courses/csse2310/include -L/local/courses/csse2310/lib -lcsse2310a3
[01m[Khq.c:[m[K In function â€˜[01m[Kspawn[m[Kâ€™:
[01m[Khq.c:189:31:[m[K [01;31m[Kerror: [m[Kexpected â€˜[01m[K;[m[Kâ€™ before â€˜[01m[K}[m[Kâ€™ token
             sleep(4 * 1000000)
                               [01;31m[K^[m[K
                               [32m[K;[m[K
         [32m[K}[m[K
         [32m[K~[m[K                      
make: *** [makefile:10: hq] Error 1
s4698512@moss:~/CSSE2310/Assignments/a3$ makevim hq.c[4P./hqmakevim hq.c[4Pmake./hqvim hq.c[4P./hqvim hq.c
[?1000h[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;59r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[59;1H"hq.c" 435L, 10735C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[33m161 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m162 [m[79C[100m [m
[33m163 [m[8Cjobs[[38;5;248m[104mjobid[m].pid = fork();[46C[100m [m
[33m164 [m[8C[33mif[m (!jobs[[38;5;248m[104mjobid[m].pid) {[48C[100m [m
[33m165 [m[12C[36m// child[m[59C[100m [m
[33m166 [m[79C[100m [m
[33m167 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m168 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[WRITE]);[36C[100m [m
[33m169 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[READ]);[39C[100m [m
[33m170 [m[79C[100m [m
[33m171 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].down[READ], STDIN_FILENO);[24C[100m [m
[33m172 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m173 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].up[WRITE], STDOUT_FILENO);[24C[100m [m
[33m174 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m
[33m175 [m[79C[100m [m
[33m176 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m177 [m[12Cfflush([38;5;130mstderr[m);[52C[100m [m
[33m178 [m[79C[100m [m
[33m179 [m[12C[32mint[m status;[56C[100m [m
[33m180 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m
[33m181 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m
[33m182 [m[16Cexit([38;5;130m99[m);[54C[100m [m
[33m183 [m[12C}[66C[100m [m
[33m184 [m[8C} [33melse[m {[63C[100m [m
[33m185 [m[12C[36m// parent[m[58C[100m [m
[33m186 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m187 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m
[33m188 [m[79C[100m [m
[93m189 [m[4m            sleep([m[4m[38;5;130m4[m[4m * [m[4m[38;5;130m1000000[m[4m)                                                 [m[4m[100m [m[4m                                [m[30;1H[33m190 [m[8C}[70C[100m [m
[33m191 [m    }[74C[100m [m
[33m192 [m}[78C[100m [m
[33m193 [m[79C[100m [m
[33m194 [m[36m/* report()[m[68C[100m [m
[33m195 [m[36m * --------[m[68C[100m [m
[33m196 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m
[33m197 [m[36m *[m[77C[100m [m
[33m198 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m199 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m200 [m[36m */[m[76C[100m [m
[33m201 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[43C[100m [m
[33m202 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m203 [m[79C[100m [m
[33m204 [m    [36m// Header row[m[62C[100m [m
[33m205 [m    printf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[46C[100m [m
[33m206 [m[79C[100m [m
[33m207 [m    [36m// Job status output dependent on arg present status[m[23C[100m [m
[33m208 [m[79C[100m [m
[33m209 [m    [36m// check args[m[62C[100m [m
[33m210 [m    [33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[37C[100m [m
[33m211 [m[8C[33mfor[m ([32mint[m i = [38;5;130m0[m; i < [38;5;248m[104mjobid[m; i++) {[38C[100m [m
[33m212 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[31C[100m [m
[33m213 [m[12C[33mif[m (!jobs[i].finished) {[43C[100m [m
[33m214 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m215 [m[12C} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[28C[100m [m
[33m216 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[12C[100m [m
[33m217 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {[26C[100m [m
[33m218 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[11C[100m [m[59;99H189,13[8C42%[29;17H[?25h[?12$p[?25l[59;104H4[29;18H[?25h[?25l[4C[4m[46m([11C)[m[59;103H30[29;34H[?25h[?25l[59;1H[38;5;130m-- INSERT --[m[59;14H[K[59;99H189,30[8C42%[29;34H[?25h[?25l[4m[46m;[m[4m);[m[4m[46m)[m[59;104H1[29;35H[?25h[59;1H[K[29;34H[?25l[29;22H[4m([12C)[m[59;99H189,30[8C42%[29;34H[?25h[?25l[59;103H29[29;33H[?25h[?25l[59;103H30[29;34H[?25h[?25l[29;22H[4m[46m([12C)[m[59;104H1[29;35H[?25h[?25l[59;1H[38;5;130m-- INSERT --[m[59;99H[K[59;99H189,31[8C42%[29;35H[?25h[?25l[4m)[m[4m[46m )[m[4m [m[59;104H0[29;34H[?25h[?25l[59;104H1[29;35H[?25h[?25l[4m;[29;22H([11C)[m[59;104H2[29;36H[?25h[59;1H[K[29;35H[?25l[59;99H189,31[8C42%[29;35H[?25h[?25l[59;99H[K[59;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?1000l[?2004l"hq.c" 435L, 10736C written
[?2004l[?1l>[?25h[?1049l[23;0;0ts4698512@moss:~/CSSE2310/Assignments/a3$ mkae
bash: mkae: command not found
s4698512@moss:~/CSSE2310/Assignments/a3$ .//[K[Km[K[Kmake
gcc -g -Wall -pedantic -std=gnu99 -o hq hq.c -I/local/courses/csse2310/include -L/local/courses/csse2310/lib -lcsse2310a3
s4698512@moss:~/CSSE2310/Assignments/a3$ ./hq
> spawn cat
New Job ID [0] created
^C> s4698512@moss:~/CSSE2310/Assignments/a3$ ./hqmakekae
bash: mkae: command not found
s4698512@moss:~/CSSE2310/Assignments/a3$ mkae./hqmakekaevim hq.c
[?1000h[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;59r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[59;1H"hq.c" 435L, 10736C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[33m161 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m162 [m[79C[100m [m
[33m163 [m[8Cjobs[[38;5;248m[104mjobid[m].pid = fork();[46C[100m [m
[33m164 [m[8C[33mif[m (!jobs[[38;5;248m[104mjobid[m].pid) {[48C[100m [m
[33m165 [m[12C[36m// child[m[59C[100m [m
[33m166 [m[79C[100m [m
[33m167 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m168 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[WRITE]);[36C[100m [m
[33m169 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[READ]);[39C[100m [m
[33m170 [m[79C[100m [m
[33m171 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].down[READ], STDIN_FILENO);[24C[100m [m
[33m172 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m173 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].up[WRITE], STDOUT_FILENO);[24C[100m [m
[33m174 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m
[33m175 [m[79C[100m [m
[33m176 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m177 [m[12Cfflush([38;5;130mstderr[m);[52C[100m [m
[33m178 [m[79C[100m [m
[33m179 [m[12C[32mint[m status;[56C[100m [m
[33m180 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m
[33m181 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m
[33m182 [m[16Cexit([38;5;130m99[m);[54C[100m [m
[33m183 [m[12C}[66C[100m [m
[33m184 [m[8C} [33melse[m {[63C[100m [m
[33m185 [m[12C[36m// parent[m[58C[100m [m
[33m186 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m187 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m
[33m188 [m[79C[100m [m
[93m189 [m[4m            sleep([m[4m[38;5;130m4[m[4m * [m[4m[38;5;130m1000000[m[4m);                                                [m[4m[100m [m[4m                                [m[30;1H[33m190 [m[8C}[70C[100m [m
[33m191 [m    }[74C[100m [m
[33m192 [m}[78C[100m [m
[33m193 [m[79C[100m [m
[33m194 [m[36m/* report()[m[68C[100m [m
[33m195 [m[36m * --------[m[68C[100m [m
[33m196 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m
[33m197 [m[36m *[m[77C[100m [m
[33m198 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m199 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m200 [m[36m */[m[76C[100m [m
[33m201 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[43C[100m [m
[33m202 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m203 [m[79C[100m [m
[33m204 [m    [36m// Header row[m[62C[100m [m
[33m205 [m    printf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[46C[100m [m
[33m206 [m[79C[100m [m
[33m207 [m    [36m// Job status output dependent on arg present status[m[23C[100m [m
[33m208 [m[79C[100m [m
[33m209 [m    [36m// check args[m[62C[100m [m
[33m210 [m    [33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[37C[100m [m
[33m211 [m[8C[33mfor[m ([32mint[m i = [38;5;130m0[m; i < [38;5;248m[104mjobid[m; i++) {[38C[100m [m
[33m212 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[31C[100m [m
[33m213 [m[12C[33mif[m (!jobs[i].finished) {[43C[100m [m
[33m214 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m215 [m[12C} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[28C[100m [m
[33m216 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[12C[100m [m
[33m217 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {[26C[100m [m
[33m218 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[11C[100m [m[59;99H189,13[8C42%[29;17H[?25h[?12$p[?25l[59;103H21[29;25H[?25h[?25l[59;104H0[29;24H[?25h[?25l[59;1H[38;5;130m-- INSERT --[m[59;14H[K[59;99H189,20[8C42%[29;24H[?25h[?25l[4m * [m[4m[38;5;130m10[m[5C[4m); [m[29;22H[4m[46m([10C)[m[59;103H19[29;23H[?25h[?25l[4m[38;5;130m1[m[4m * [m[4m[38;5;130m1[m[5C[4m[38;5;130m[46m0[m[4m);[29;22H([m[10C[4m[38;5;130m0[m[59;103H20[29;24H[?25h[?25l[59;104H1[29;25H[?25h[?25l[59;104H2[29;26H[?25h[?25l[59;104H3[29;27H[?25h[?25l[59;104H4[29;28H[?25h[?25l[59;104H5[29;29H[?25h[?25l[59;104H6[29;30H[?25h[?25l[59;104H7[29;31H[?25h[?25l[59;104H8[29;32H[?25h[?25l[59;104H9[29;33H[?25h[?25l[29;22H[4m[46m([11C)[m[59;103H30[29;34H[?25h[?25l[4m)[m[4m[46m;[m[4m [m[4m[46m)[m[4m;[m[59;103H29[29;33H[?25h[?25l[4m)[m[4m[46m;[m[4m [m[4m[46m)[m[4m;[m[59;104H8[29;32H[?25h[?25l[4m)[m[4m[46m;[m[4m [m[4m[46m)[m[4m;[m[59;104H7[29;31H[?25h[?25l[4m)[m[4m[46m;[m[4m [m[4m[46m)[m[4m;[m[59;104H6[29;30H[?25h[?25l[4m)[m[4m[46m;[m[4m [m[4m[46m)[m[4m;[m[59;104H5[29;29H[?25h[?25l[4m)[m[4m[46m;[m[4m [m[4m[46m)[m[4m;[m[59;104H4[29;28H[?25h[?25l[4m)[m[4m[46m;[m[4m [m[4m[46m)[m[4m;[m[59;104H3[29;27H[?25h[?25l[4m[38;5;130m[46m1[m[4m);[m[4m[38;5;130m1[m[4m[46m)[m[59;104H4[29;28H[?25h[?25l[4m[38;5;130m[46m0[m[4m);[m[4m[38;5;130m0[m[4m[46m)[m[59;104H5[29;29H[?25h[?25l[4m[38;5;130m[46m0[m[4m);[m[4m[38;5;130m0[m[4m[46m)[m[59;104H6[29;30H[?25h[?25l[4m[38;5;130m[46m0[m[4m);[m[4m[38;5;130m0[m[4m[46m)[m[59;104H7[29;31H[?25h[?25l[4m[38;5;130m[46m0[m[4m);[m[4m[38;5;130m0[m[4m[46m)[m[59;104H8[29;32H[?25h[?25l[4m[38;5;130m[46m0[m[4m);[m[4m[38;5;130m0[m[4m[46m)[m[59;104H9[29;33H[?25h[?25l[4m[38;5;130m[46m0[m[4m);[m[4m[38;5;130m0[m[4m[46m)[m[59;103H30[29;34H[?25h[?25l[4m)[m[4m[46m;[m[4m [m[4m[46m)[m[4m;[m[59;103H29[29;33H[?25h[?25l[4m)[m[4m[46m;[m[4m [m[4m[46m)[m[4m;[m[59;104H8[29;32H[?25h[59;1H[K[29;31H[?25l[29;22H[4m([9C)[m[59;99H189,27[8C42%[29;31H[?25h[?25l[59;99H[K[59;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?1000l[?2004l"hq.c" 435L, 10734C written
[?2004l[?1l>[?25h[?1049l[23;0;0ts4698512@moss:~/CSSE2310/Assignments/a3$ make
gcc -g -Wall -pedantic -std=gnu99 -o hq hq.c -I/local/courses/csse2310/include -L/local/courses/csse2310/lib -lcsse2310a3
s4698512@moss:~/CSSE2310/Assignments/a3$ ./hq
> spawn cat
New Job ID [0] created
^C> s4698512@moss:~/CSSE2310/Assignments/a3$ ./hqmakevim hq.c
[?1000h[?2004h[?1049h[22;0;0t[?1h=[?2004h[1;59r[?12h[?12l[27m[23m[29m[m[H[2J[?25l[59;1H"hq.c" 435L, 10734C[2;1Hâ–½[6n[2;1H  [1;1H[>c]10;?]11;?[1;1H[33m161 [m[8Cfflush([38;5;130mstdout[m);[56C[100m [m
[33m162 [m[79C[100m [m
[33m163 [m[8Cjobs[[38;5;248m[104mjobid[m].pid = fork();[46C[100m [m
[33m164 [m[8C[33mif[m (!jobs[[38;5;248m[104mjobid[m].pid) {[48C[100m [m
[33m165 [m[12C[36m// child[m[59C[100m [m
[33m166 [m[79C[100m [m
[33m167 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m168 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[WRITE]);[36C[100m [m
[33m169 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[READ]);[39C[100m [m
[33m170 [m[79C[100m [m
[33m171 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].down[READ], STDIN_FILENO);[24C[100m [m
[33m172 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m173 [m[12Cdup2(jobs[[38;5;248m[104mjobid[m].up[WRITE], STDOUT_FILENO);[24C[100m [m
[33m174 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m
[33m175 [m[79C[100m [m
[33m176 [m[12Cfflush([38;5;130mstdout[m);[52C[100m [m
[33m177 [m[12Cfflush([38;5;130mstderr[m);[52C[100m [m
[33m178 [m[79C[100m [m
[33m179 [m[12C[32mint[m status;[56C[100m [m
[33m180 [m[12Cstatus = execvp(args[[38;5;130m0[m], args);[36C[100m [m
[33m181 [m[12C[33mif[m (status == -[38;5;130m1[m) {[48C[100m [m
[33m182 [m[16Cexit([38;5;130m99[m);[54C[100m [m
[33m183 [m[12C}[66C[100m [m
[33m184 [m[8C} [33melse[m {[63C[100m [m
[33m185 [m[12C[36m// parent[m[58C[100m [m
[33m186 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[37C[100m [m
[33m187 [m[12Cclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);[38C[100m [m
[33m188 [m[79C[100m [m
[93m189 [m[4m            sleep([m[4m[38;5;130m1[m[4m * [m[4m[38;5;130m10000[m[4m);                                                  [m[4m[100m [m[4m                                [m[30;1H[33m190 [m[8C}[70C[100m [m
[33m191 [m    }[74C[100m [m
[33m192 [m}[78C[100m [m
[33m193 [m[79C[100m [m
[33m194 [m[36m/* report()[m[68C[100m [m
[33m195 [m[36m * --------[m[68C[100m [m
[33m196 [m[36m * Produces an outline to stdout of current child processes and their statuses[m [100m [m
[33m197 [m[36m *[m[77C[100m [m
[33m198 [m[36m * args: arguments provided in command line without first command[m[14C[100m [m
[33m199 [m[36m * spcs: number of original tokens[m[45C[100m [m
[33m200 [m[36m */[m[76C[100m [m
[33m201 [m[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[43C[100m [m
[33m202 [m    fflush([38;5;130mstdout[m);[60C[100m [m
[33m203 [m[79C[100m [m
[33m204 [m    [36m// Header row[m[62C[100m [m
[33m205 [m    printf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[46C[100m [m
[33m206 [m[79C[100m [m
[33m207 [m    [36m// Job status output dependent on arg present status[m[23C[100m [m
[33m208 [m[79C[100m [m
[33m209 [m    [36m// check args[m[62C[100m [m
[33m210 [m    [33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[37C[100m [m
[33m211 [m[8C[33mfor[m ([32mint[m i = [38;5;130m0[m; i < [38;5;248m[104mjobid[m; i++) {[38C[100m [m
[33m212 [m[12Cprintf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[31C[100m [m
[33m213 [m[12C[33mif[m (!jobs[i].finished) {[43C[100m [m
[33m214 [m[16Cprintf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[43C[100m [m
[33m215 [m[12C} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[28C[100m [m
[33m216 [m[16Cprintf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[12C[100m [m
[33m217 [m[12C} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {[26C[100m [m
[33m218 [m[16Cprintf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[11C[100m [m[59;99H189,13[8C42%[29;17H[?25h[?12$p[?25l[59;104H7[29;21H[?25h[?25l[24;20H[46m{[m[29;13H[4m[46m}[m[3C[4m                 [m[30;9H}    [31;5H}    [32;5H [33;5H[36m/* report()[34;5H * --------[35;8HProduces an outline to stdout of current child processes and their statuses[m[36;7H                                                                            [37;7H[36m args: arguments provided in command line without first command[38;8Hspcs: number of original tokens[m                               [39;7H[36m/[m                               [40;5H[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[41;5H    fflush([38;5;130mstdout[m);                 [42;9H               [43;9H[36m// Header row[m[44;9Hprintf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[45;9H                             [46;9H[36m// Job status output dependent on arg present status[m[47;9H                                                    [48;9H[36m// check args[m[49;9H[33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[50;9H    [33mfor[m ([32mint[m i = [38;5;130m0[m; i < [38;5;248m[104mjobid[m; i++) { [51;13H    printf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[52;17H[33mif[m (!jobs[i].finished) {            [53;17H    printf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[54;17H} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[55;17H    printf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[56;17H} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {              [57;17H    printf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[58;17H} [33melse[m {                                                [59;103H9 [29;13H[?25h[?25l[24;20H{[28;1H[93m188 [m[4m                                                                               [m[4m[100m [m[4m                                [m[29;1H[33m189 [m        }                                                                      [100m [m[29;85H[K[59;101H8,0-1[28;5H[?25h[?25l[24;20H[46m{[m[28;13H[4m[46m}[m[29;9H}    [30;5H}    [31;5H [32;5H[36m/* report()[33;5H * --------[34;8HProduces an outline to stdout of current child processes and their statuses[m[35;7H                                                                            [36;7H[36m args: arguments provided in command line without first command[37;8Hspcs: number of original tokens[m                               [38;7H[36m/[m                               [39;5H[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[40;5H    fflush([38;5;130mstdout[m);                 [41;9H               [42;9H[36m// Header row[m[43;9Hprintf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[44;9H                             [45;9H[36m// Job status output dependent on arg present status[m[46;9H                                                    [47;9H[36m// check args[m[48;9H[33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[49;9H    [33mfor[m ([32mint[m i = [38;5;130m0[m; i < [38;5;248m[104mjobid[m; i++) { [50;13H    printf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[51;17H[33mif[m (!jobs[i].finished) {            [52;17H    printf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[53;17H} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[54;17H    printf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[55;17H} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {              [56;17H    printf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[57;17H} [33melse[m {                                                [58;17H    printf([38;5;130m"Error[m[35m\n[m[38;5;130m"[m);[59;103H9  [28;13H[?25h[?25l[8;1H[93m168 [m[4m            close(jobs[[m[4m[38;5;248m[104mjobid[m[4m].down[WRITE]);                                    [m[4m[100m [m[4m                                [m[24;20H{[28;1H[33m188 [m        }                                                                      [100m [m[28;85H[K[59;100H68,24[8;28H[?25h[?25l[33m168 [m            close(jobs[[7m[48;5;242mjobid].down[WRITE]); [m                                   [100m [m[8;85H[K[9;5H[7m[48;5;242m            close(jobs[jobid].up[READ]); [10;5H             [11;5H            dup2(jobs[jobid].down[READ], STDIN_FILENO); [12;5H            close(jobs[jobid].down[READ]); [m
[93m173 [m[7m[48;5;242m            dup2(jobs[jobid].up[WRIT[m[59;1H[38;5;130m-- VISUAL --[m[59;14H[K[59;99H173,37[8C42%[13;41H[?25h[?25l[8;28H[38;5;248m[104mjobid[m].down[WRITE]); [9;5H            close(jobs[[38;5;248m[104mjobid[m].up[READ]); [10;5H             [11;5H            dup2(jobs[[38;5;248m[104mjobid[m].down[READ], STDIN_FILENO); [12;5H            close(jobs[[38;5;248m[104mjobid[m].down[READ]); 
[33m173 [m            dup2(jobs[[38;5;248m[104mjobid[m].up[WRIT
[93m174 [m[4m            close(jobs[[m[4m[38;5;248m[104mjobid[m[4m].up[WRITE]);                                      [m[4m[100m [m[4m                                [m[59;1H[K[59;99H174,38[8C42%[14;42H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m158 [m[8C}[70C[100m [m
[33m159 [m[79C[100m [m
[33m160 [m[8Cprintf([38;5;130m"New Job ID [[m[35m%d[m[38;5;130m] created[m[35m\n[m[38;5;130m"[m, [38;5;248m[104mjobid[m);[28C[100m [m[59;99H[K[59;99H174,38[8C41%[17;42H[?25h[?25l[1;58r[1;1H[3L[1;59r[1;1H[33m155 [m[8C[33mif[m (pipe(jobs[[38;5;248m[104mjobid[m].up) < [38;5;130m0[m) {[40C[100m [m
[33m156 [m[12Cperror([38;5;130m"Creating up pipe"[m);[40C[100m [m
[33m157 [m[12Cexit([38;5;130m1[m);[59C[100m [m[59;99H[K[59;99H174,38[8C41%[20;42H[?25h[?25l[14;1H[93m168 [m[4m            close(jobs[[m[4m[38;5;248m[104mjobid[m[4m].down[WRITE]);                                    [m[4m[100m [m[4m                                [m[20;1H[33m174 [m            close(jobs[[38;5;248m[104mjobid[m].up[WRITE]);                                      [100m [m[20;85H[K[59;100H68,36[14;40H[?25h[?25l[14;5H            close(jobs[[38;5;248m[104mjobid[m].down[46m[[m[7m[48;5;242mWRITE[m[46m][m);                                    [100m [m[14;85H[K[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H168,41[8C41%[14;45H[?25h[?25l[33m168 [m[34C[WRITE]
[93m169 [m[4m            close(jobs[[m[4m[38;5;248m[104mjobid[m[4m].up[READ]);                                       [m[4m[100m [m[4m                                [m[59;1H[K[59;99H169,34[8C41%[15;38H[?25h[?25l[15;5H            close[46m([mjobs[[38;5;248m[104mjobid[m].up[[7m[48;5;242mREAD][m[46m)[m;                                       [100m [m[15;85H[K[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H169,39[8C41%[15;43H[?25h[?25l[15;5H[4m            close[m[4m[46m([m[4mjobs[[m[4m[38;5;248m[104mjobid[m[4m].up[READ][m[4m[46m)[m[4m;                                       [m[4m[100m [m[4m                                [m[59;1H[K[59;99H169,39[8C41%[15;43H[?25h[?25l[33m169 [m            close(jobs[[38;5;248m[104mjobid[m].up[READ]);                                       [100m [m[15;85H[K[17;1H[93m171 [m[4m            dup2(jobs[[m[4m[38;5;248m[104mjobid[m[4m].down[READ], STDIN_FILENO);                        [m[4m[100m [m[4m                                [m[59;100H71,21[17;25H[?25h[?25l[33m171 [m            dup2(job[7m[48;5;242ms[jobid].down[READ], STDIN_FILENO); [m                       [100m [m[17;85H[K[18;1H[93m172 [m[7m[48;5;242m            close(jobs[jobid].down[RE[m[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H172,38[8C41%[18;42H[?25h[?25l[17;25Hs[[38;5;248m[104mjobid[m].down[READ], STDIN_FILENO); [18;5H[4m            close(jobs[[m[4m[38;5;248m[104mjobid[m[4m].down[READ]);                                     [m[4m[100m [m[4m                                [m[59;1H[K[59;99H172,38[8C41%[18;42H[?25h[?25l[17;1H[93m171 [m[4m            dup2(jobs[[m[4m[38;5;248m[104mjobid[m[4m].down[READ], STDIN_FILENO);                        [m[4m[100m [m[4m                                [m[18;1H[33m172 [m            close(jobs[[38;5;248m[104mjobid[m].down[READ]);                                     [100m [m[18;85H[K[59;101H1,27[17;31H[?25h[?25l[59;103H30[17;34H[?25h[?25l[17;5H            dup2(jobs[[38;5;248m[104mjobid[m].[7m[48;5;242mdown[READ[m[46m][m, STDIN_FILENO);                        [100m [m[17;85H[K[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H171,39[8C41%[17;43H[?25h[?25l[33m171 [m[29Cdown[READ]

[93m173 [m[4m            dup2(jobs[[m[4m[38;5;248m[104mjobid[m[4m].up[WRITE], STDOUT_FILENO);                        [m[4m[100m [m[4m                                [m[59;1H[K[59;99H173,29[8C41%[19;33H[?25h[?25l[33m173 [m            dup2(jobs[[38;5;248m[104mjobid[m][7m[48;5;242m.up[WRITE], STDOUT_FILENO); [m                       [100m [m[19;85H[K[20;1H[93m174 [m[7m[48;5;242m            close(jobs[jobid].up[WRIT[m[59;1H[38;5;130m-- VISUAL --[m[59;99H[K[59;99H174,38[8C41%[20;42H[?25h[?25l[19;33H.up[WRITE], STDOUT_FILENO); [20;5H[4m            close(jobs[[m[4m[38;5;248m[104mjobid[m[4m].up[WRITE]);                                      [m[4m[100m [m[4m                                [m[59;1H[K[59;99H174,38[8C41%[20;42H[?25h[?25l[13;1H[93m167 [m[4m            fflush([m[4m[38;5;130mstdout[m[4m);                                                    [m[4m[100m [m[4m                                [m[20;1H[33m174 [m            close(jobs[[38;5;248m[104mjobid[m].up[WRITE]);                                      [100m [m[20;85H[K[59;100H67,27[13;31H[?25h[?25l[13;17H[4mclose(jobs[[m[4m[38;5;248m[104mjobid[m[4m].down[WRITE]);[m[14;35Hup[READ]);   [15;17H                            [16;17Hdup2(jobs[[38;5;248m[104mjobid[m].down[READ], STDIN_FILENO);[17;17Hclose(jobs[[38;5;248m[104mjobid[m].down[READ]);             [18;17Hdup2(jobs[[38;5;248m[104mjobid[m].up[WRITE], STDOUT_FILENO);[19;17Hclose(jobs[[38;5;248m[104mjobid[m].up[WRITE]);              [20;17H                             [21;17Hfflush([38;5;130mstdout[m);[22;27H[38;5;130merr[m[23;17H               [24;17H[32mint[m status;[25;17Hstatus = execvp(args[[38;5;130m0[m], args);[26;17H[33mif[m (status == -[38;5;130m1[m) {            [27;17H    exit([38;5;130m99[m);      [28;17H}            [29;13H} [33melse[m {[30;13H    [36m// parent[m[31;17Hclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[32;35Hup[WRITE]); [33;13H}                                [34;9H}    [35;5H}    [36;5H [37;5H[36m/* report()[38;5H * --------[39;8HProduces an outline to stdout of current child processes and their statuses[m[40;7H                                                                            [41;7H[36m args: arguments provided in command line without first command[42;8Hspcs: number of original tokens[m                               [43;7H[36m/[m                               [44;5H[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[45;5H    fflush([38;5;130mstdout[m);                 [46;9H               [47;9H[36m// Header row[m[48;9Hprintf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[49;9H                             [50;9H[36m// Job status output dependent on arg present status[m[51;9H                                                    [52;9H[36m// check args[m[53;9H[33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[54;9H    [33mfor[m ([32mint[m i = [38;5;130m0[m; i < [38;5;248m[104mjobid[m; i++) { [55;13H    printf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[56;17H[33mif[m (!jobs[i].finished) {            [57;17H    printf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[58;17H} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[59;103H13[13;17H[?25h[?25l[33m167 [m            close(jobs[[38;5;248m[104mjobid[m].down[WRITE]);                                    [100m [m[13;85H[K[21;1H[93m175 [m[4m            fflush([m[4m[38;5;130mstdout[m[4m);                                                    [m[4m[100m [m[4m                                [m[59;100H75,21[21;25H[?25h[?25l[2C[4m[38;5;130merr[m[22;17H               [23;17H[32mint[m status;[24;17Hstatus = execvp(args[[38;5;130m0[m], args);[25;17H[33mif[m (status == -[38;5;130m1[m) {            [26;17H    exit([38;5;130m99[m);      [27;17H}            [28;13H} [33melse[m {[29;13H    [36m// parent[m[30;17Hclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[31;35Hup[WRITE]); [32;13H}                                [33;9H}    [34;5H}    [35;5H [36;5H[36m/* report()[37;5H * --------[38;8HProduces an outline to stdout of current child processes and their statuses[m[39;7H                                                                            [40;7H[36m args: arguments provided in command line without first command[41;8Hspcs: number of original tokens[m                               [42;7H[36m/[m                               [43;5H[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[44;5H    fflush([38;5;130mstdout[m);                 [45;9H               [46;9H[36m// Header row[m[47;9Hprintf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[48;9H                             [49;9H[36m// Job status output dependent on arg present status[m[50;9H                                                    [51;9H[36m// check args[m[52;9H[33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[53;9H    [33mfor[m ([32mint[m i = [38;5;130m0[m; i < [38;5;248m[104mjobid[m; i++) { [54;13H    printf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[55;17H[33mif[m (!jobs[i].finished) {            [56;17H    printf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[57;17H} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[58;17H    printf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[59;103H13[21;17H[?25h[?25l[4m               [m[22;17H[32mint[m status;[23;17Hstatus = execvp(args[[38;5;130m0[m], args);[24;17H[33mif[m (status == -[38;5;130m1[m) {            [25;17H    exit([38;5;130m99[m);      [26;17H}            [27;13H} [33melse[m {[28;13H    [36m// parent[m[29;17Hclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[30;35Hup[WRITE]); [31;13H}                                [32;9H}    [33;5H}    [34;5H [35;5H[36m/* report()[36;5H * --------[37;8HProduces an outline to stdout of current child processes and their statuses[m[38;7H                                                                            [39;7H[36m args: arguments provided in command line without first command[40;8Hspcs: number of original tokens[m                               [41;7H[36m/[m                               [42;5H[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[43;5H    fflush([38;5;130mstdout[m);                 [44;9H               [45;9H[36m// Header row[m[46;9Hprintf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[47;9H                             [48;9H[36m// Job status output dependent on arg present status[m[49;9H                                                    [50;9H[36m// check args[m[51;9H[33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[52;9H    [33mfor[m ([32mint[m i = [38;5;130m0[m; i < [38;5;248m[104mjobid[m; i++) { [53;13H    printf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[54;17H[33mif[m (!jobs[i].finished) {            [55;17H    printf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[56;17H} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[57;17H    printf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[58;17H} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {              [59;103H0-1[21;5H[?25h[?25l[59;1H[38;5;130m-- INSERT --[m[59;99H[K[59;99H175,1[9C41%[21;5H[?25h[?25l[20;1H[93m174 [m[4m                                                                               [m[4m[100m [m[4m                                [m[21;1H[33m175 [m            [32mint[m status;                                                        [100m [m[21;85H[K[22;17Hstatus = execvp(args[[38;5;130m0[m], args);[23;17H[33mif[m (status == -[38;5;130m1[m) {            [24;17H    exit([38;5;130m99[m);      [25;17H}            [26;13H} [33melse[m {[27;13H    [36m// parent[m[28;17Hclose(jobs[[38;5;248m[104mjobid[m].down[READ]);[29;35Hup[WRITE]); [30;13H}                                [31;9H}    [32;5H}    [33;5H [34;5H[36m/* report()[35;5H * --------[36;8HProduces an outline to stdout of current child processes and their statuses[m[37;7H                                                                            [38;7H[36m args: arguments provided in command line without first command[39;8Hspcs: number of original tokens[m                               [40;7H[36m/[m                               [41;5H[32mvoid[m report([32mchar[m** args, [32mint[m spcs) {[42;5H    fflush([38;5;130mstdout[m);                 [43;9H               [44;9H[36m// Header row[m[45;9Hprintf([38;5;130m"[Job] cmd:status[m[35m\n[m[38;5;130m"[m);[46;9H                             [47;9H[36m// Job status output dependent on arg present status[m[48;9H                                                    [49;9H[36m// check args[m[50;9H[33mif[m (spcs == [38;5;130m1[m) {    [36m// report all jobs[m[51;9H    [33mfor[m ([32mint[m i = [38;5;130m0[m; i < [38;5;248m[104mjobid[m; i++) { [52;13H    printf([38;5;130m"[[m[35m%d[m[38;5;130m] [m[35m%s[m[38;5;130m:"[m, i, jobs[i].name);[53;17H[33mif[m (!jobs[i].finished) {            [54;17H    printf([38;5;130m"running[m[35m\n[m[38;5;130m"[m);[55;17H} [33melse[m [33mif[m (WIFEXITED(jobs[i].status)) {[56;17H    printf([38;5;130m"exited([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m,WEXITSTATUS(jobs[i].status));[57;17H} [33melse[m [33mif[m (WIFSIGNALED(jobs[i].status)) {              [58;17H    printf([38;5;130m"signalled([m[35m%d[m[38;5;130m)[m[35m\n[m[38;5;130m"[m, WTERMSIG(jobs[i].status));[59;101H4,13[20;17H[?25h[59;1H[K[20;16H[?25l[59;99H174,12[8C41%[20;16H[?25h[?25l[59;99H[K[59;1H:[?2004h[?25hw[?25l[?25hq[?25l[?25h[?25l[?1000l[?2004l"hq.c" 429L, 10618C written
[?2004l[?1l>[?25h[?1049l[23;0;0ts4698512@moss:~/CSSE2310/Assignments/a3$ make
gcc -g -Wall -pedantic -std=gnu99 -o hq hq.c -I/local/courses/csse2310/include -L/local/courses/csse2310/lib -lcsse2310a3
s4698512@moss:~/CSSE2310/Assignments/a3$ ./hq
> spawn cat
New Job ID [0] created
> spawn ls
New Job ID [1] created
> ^Cs4698512@moss:~/CSSE2310/Assignments/a3$ testa3.sh
Setting up for tests
Time: Mon May 16 21:38:14 AEST 2022
[1mRunning make...(B[m
make: Nothing to be done for 'all'.
[1mRunning tests ... (B[m
----------------------------------------------------------------------
1.1   - sigcat_copies_input01                               [1m[32mPASS(B[m
1.2   - sigcat_copies_input02                               [1m[32mPASS(B[m
1.3   - sigcat_copies_input03                               [1m[31mFAIL(B[m
    Mismatch in file /tmp/1secondsample.out
2.1   - sigcat_signals01                                    [1m[32mPASS(B[m
2.2   - sigcat_signals02                                    [1m[32mPASS(B[m
2.3   - sigcat_signals03                                    [1m[32mPASS(B[m
2.4   - sigcat_signals04                                    [1m[32mPASS(B[m
2.5   - sigcat_signals05                                    [1m[32mPASS(B[m
2.6   - sigcat_signals06                                    [1m[32mPASS(B[m
2.7   - sigcat_signals07                                    [1m[32mPASS(B[m
2.8   - sigcat_signals08                                    [1m[32mPASS(B[m
2.9   - sigcat_signals09                                    [1m[32mPASS(B[m
2.10  - sigcat_signals10                                    [1m[32mPASS(B[m
2.11  - sigcat_signals11                                    [1m[32mPASS(B[m
2.12  - sigcat_signals12                                    [1m[32mPASS(B[m
2.13  - sigcat_signals13                                    [1m[32mPASS(B[m
2.14  - sigcat_signals14                                    [1m[32mPASS(B[m
2.15  - sigcat_signals15                                    [1m[32mPASS(B[m
3.1   - sigcat_sigusr01                                     [1m[32mPASS(B[m
3.2   - sigcat_sigusr02                                     [1m[32mPASS(B[m
4.1   - hq_invalid01                                        [1m[32mPASS(B[m
4.2   - hq_invalid02                                        [1m[32mPASS(B[m
5.1   - hq_spawn_cmd01                                      [1m[32mPASS(B[m
5.2   - hq_spawn_cmd02                                      [1m[32mPASS(B[m
5.3   - hq_spawn_cmd03                                      [1m[32mPASS(B[m
5.4   - hq_spawn_cmd04                                      [1m[32mPASS(B[m
5.5   - hq_spawn_cmd05                                      [1m[31mFAIL(B[m
    Got exitcode 124 (Timeout) - but expected 0
6.1   - hq_report_cmd01                                     [1m[32mPASS(B[m
6.2   - hq_report_cmd02                                     ^CCleaning up ...
Time: Mon May 16 21:39:10 AEST 2022
Done
s4698512@moss:~/CSSE2310/Assignments/a3$ exit

Script done on 2022-05-16 21:39:11+10:00
